!function (t) { function e(i) { if (n[i]) return n[i].exports; var r = n[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, e), r.l = !0, r.exports } var n = {}; e.m = t, e.c = n, e.d = function (t, n, i) { e.o(t, n) || Object.defineProperty(t, n, { enumerable: !0, get: i }) }, e.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, e.t = function (t, n) { if (1 & n && (t = e(t)), 8 & n) return t; if (4 & n && "object" == typeof t && t && t.__esModule) return t; var i = Object.create(null); if (e.r(i), Object.defineProperty(i, "default", { enumerable: !0, value: t }), 2 & n && "string" != typeof t) for (var r in t) e.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, e.n = function (t) { var n = t && t.__esModule ? function () { return t.default } : function () { return t }; return e.d(n, "a", n), n }, e.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, e.p = "", e(e.s = 137) }([function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } var u = Math.sin, l = Math.cos, h = Math.abs, f = Math.hypot, p = Math.round; n.d(e, "a", function () { return x }); var d = n(11), m = n(6), v = n(3), g = (n(7), n(5)), y = n(4), b = n(13), _ = n(63), x = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, s(e).call(this))).E = { INTRO_COMPLETE: "introcomplete", UPDATE_SCENE: "updatescene", TRANSITION_COMPLETE: "transitioncomplete" }, t.squarePts = {}, t.persPts = {}, t.anchorPts = {}, t.grdtPts = {}, t.ANGLE = 10, t.DTRT = 15, t.w = null, t.halfW = null, t.pers = null, t.ptDist = null, t.squareAngle = 0, t.squareAngle = 180, t.angle = null, t.widthCoeff = 0, t.hoverCoeff = 0, t.persCoeff = 1, t.offsetAngle = {}, t.grdtW = null, t.switchAxes = !1, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, d.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initEl", value: function () { this.offsetAngle = { pt1: 65, pt1ms: 0, pt1me: 0, pt2: -25, pt2ms: 180, pt2me: 180, pt3: 65, pt3ms: 0, pt3me: 0, pt4: -25, pt4ms: 180, pt4me: 180 }, y.a.init(), b.a.init() } }, { key: "bindEvents", value: function () { a(s(e.prototype), "bindEvents", this).call(this), m.a.on(m.a.E.RAF, this.raf, this), v.a.on(v.a.E.RESIZE, this.resize, this) } }, { key: "resize", value: function () { this.w = p(.28 * v.a.bW), this.halfW = p(.48 * this.w), this.hoverW = p(.02 * v.a.bW), this.pers = v.a.bW, this.ptDist = 2 * v.a.bW, this.grdtW = .5 * v.a.bW } }, { key: "raf", value: function () { this._calculatePointPositions() } }, { key: "_calculatePointPositions", value: function () { var t, e = this.switchAxes ? y.a.velY : y.a.velX, n = this.switchAxes ? y.a.velX : y.a.velY, i = this.halfW + 2.5 * h(e) + this.hoverW * this.hoverCoeff, r = this.halfW + 2.5 * h(n) + this.hoverW * this.hoverCoeff; this.angle = this.ANGLE * y.a.xNorm * -y.a.yNorm + this.squareAngle, t = this._getRotatePosition(-i, -r, this.angle), this._setSquarePoint("1", t, y.a.yNorm, y.a.xNorm), t = this._getRotatePosition(i, -r, this.angle), this._setSquarePoint("2", t, -y.a.yNorm, -y.a.xNorm), t = this._getRotatePosition(i, r, this.angle), this._setSquarePoint("3", t, y.a.yNorm, y.a.xNorm), t = this._getRotatePosition(-i, r, this.angle), this._setSquarePoint("4", t, -y.a.yNorm, -y.a.xNorm), t = this._getRotatePosition(-this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt1), this._setPerspectivePoint("1", t), t = this._getRotatePosition(-this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt1 + this.offsetAngle.pt1ms), this._setPerspectivePoint("1ms", t), t = this._getRotatePosition(-this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt1 + this.offsetAngle.pt1me), this._setPerspectivePoint("1me", t), t = this._getRotatePosition(this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt2), this._setPerspectivePoint("2", t), t = this._getRotatePosition(this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt2 + this.offsetAngle.pt2ms), this._setPerspectivePoint("2ms", t), t = this._getRotatePosition(this.ptDist, -this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt2 + this.offsetAngle.pt2me), this._setPerspectivePoint("2me", t), t = this._getRotatePosition(this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt3), this._setPerspectivePoint("3", t), t = this._getRotatePosition(this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt3 + this.offsetAngle.pt3ms), this._setPerspectivePoint("3ms", t), t = this._getRotatePosition(this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt3 + this.offsetAngle.pt3me), this._setPerspectivePoint("3me", t), t = this._getRotatePosition(-this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt4), this._setPerspectivePoint("4", t), t = this._getRotatePosition(-this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt4 + this.offsetAngle.pt4ms), this._setPerspectivePoint("4ms", t), t = this._getRotatePosition(-this.ptDist, this.ptDist * this.persCoeff, this.squareAngle + this.offsetAngle.pt4 + this.offsetAngle.pt4me), this._setPerspectivePoint("4me", t), t = this._getRotatePosition(2 * -this.ptDist, 2 * -this.ptDist, this.squareAngle), this._setAnchorPoint("1", t), t = this._getRotatePosition(2 * this.ptDist, 2 * -this.ptDist, this.squareAngle), this._setAnchorPoint("2", t), t = this._getRotatePosition(2 * this.ptDist, 2 * this.ptDist, this.squareAngle), this._setAnchorPoint("3", t), t = this._getRotatePosition(2 * -this.ptDist, 2 * this.ptDist, this.squareAngle), this._setAnchorPoint("4", t), this._getGradientPoint("1", -90), this._getGradientPoint("2", 0), this._getGradientPoint("3", 90), this._getGradientPoint("4", 180) } }, { key: "_getRotatePosition", value: function (t, e, n) { var i = {}, r = f(t, e), o = Math.atan2(e, t); return o += g.a.degToRad(n), i.x = l(o) * r, i.y = u(o) * r, i } }, { key: "_setSquarePoint", value: function (t, e, n, i) { var r = this.switchAxes ? -1 : 1; this.squarePts["x".concat(t)] = y.a.x + (e.x + this.DTRT * n * r) * this.widthCoeff, this.squarePts["y".concat(t)] = y.a.y + (e.y + this.DTRT * i * r) * this.widthCoeff } }, { key: "_setPerspectivePoint", value: function (t, e) { this.persPts["x".concat(t)] = y.a.x + e.x - this.pers * y.a.xNorm, this.persPts["y".concat(t)] = y.a.y + e.y - this.pers * y.a.yNorm } }, { key: "_setAnchorPoint", value: function (t, e) { this.anchorPts["x".concat(t)] = y.a.x + e.x, this.anchorPts["y".concat(t)] = y.a.y + e.y } }, { key: "_getGradientPoint", value: function (t, e) { this.grdtPts["x".concat(t, "s")] = y.a.x + l(g.a.degToRad(this.squareAngle + e)) * this.halfW * this.widthCoeff, this.grdtPts["y".concat(t, "s")] = y.a.y + u(g.a.degToRad(this.squareAngle + e)) * this.halfW * this.widthCoeff, this.grdtPts["x".concat(t, "e")] = y.a.x + l(g.a.degToRad(this.squareAngle + e)) * (this.halfW * this.widthCoeff + this.grdtW), this.grdtPts["y".concat(t, "e")] = y.a.y + u(g.a.degToRad(this.squareAngle + e)) * (this.halfW * this.widthCoeff + this.grdtW) } }, { key: "playIntro", value: function () { var t = 1.3, e = CustomEase.create("custom", "M0,0,C0.222,0.102,0.447,0.361,0.5,0.5,0.544,0.616,0.62,0.824,0.726,0.916,0.799,0.98,0.869,1,1,1"); this.tl.intro = new TimelineLite({ onComplete: this._onPlayIntroComplete, callbackScope: this }), this.tl.intro.to(this, 3.7, { squareAngle: 90, ease: e }, 0), this.tl.intro.to(y.a.posCoeff, 2.9, { x: .7, y: .4, ease: Power2.easeInOut }, .8), this.tl.intro.to(y.a, 2.9, { dispCoeff: 1, ease: Power2.easeInOut }, .8), this.tl.intro.to(this.offsetAngle, t, { pt1: 0, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt2: 35, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt3: 25, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt4: -20, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt1ms: 125, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt1me: 125, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt2ms: 80, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt2me: 80, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt3me: 45, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt3ms: 45, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt4me: 110, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, t, { pt4ms: 110, ease: Power2.easeOut }, 0), this.tl.intro.to(this.offsetAngle, 1, { pt3ms: 0, ease: Power3.easeInOut }, .8), this.tl.intro.to(this.offsetAngle, 1, { pt2ms: 0, ease: Power3.easeInOut }, .8 + .4), this.tl.intro.to(this.offsetAngle, 1, { pt1ms: 0, ease: Power3.easeInOut }, 1.6), this.tl.intro.to(this.offsetAngle, 1, { pt4ms: 0, ease: Power3.easeInOut }, 2) } }, { key: "_onPlayIntroComplete", value: function () { this.emit(this.E.INTRO_COMPLETE) } }, { key: "skipIntro", value: function () { this.tl.intro = new TimelineLite({ onComplete: this._onTransitionComplete, callbackScope: this }), this.tl.intro.to(this, 3.7, { squareAngle: 0, ease: Power3.easeInOut }, 0), this.tl.intro.to(this.offsetAngle, 1, { pt4me: 0, ease: Power3.easeInOut }, 0), this.tl.intro.to(this.offsetAngle, 1, { pt3me: 0, ease: Power3.easeInOut }, .4), this.tl.intro.to(this.offsetAngle, 1, { pt2me: 0, ease: Power3.easeInOut }, .8), this.tl.intro.to(this.offsetAngle, 1, { pt1me: 0, ease: Power3.easeInOut }, 1.2), this.tl.intro.to(this, 2.5, { widthCoeff: 1, ease: Power4.easeInOut }, 1.2), this.tl.intro.to(y.a, 1.7, { dispCoeff: .25, ease: Power2.easeInOut }, 1.5), this.tl.intro.to(y.a.posCoeff, 1.7, { x: .25, y: .5, ease: Power2.easeInOut }, 1.5), this.tl.intro.to(this.offsetAngle, 1, { pt3: 0, ease: Power2.easeInOut }, 2.2), this.tl.intro.to(this.offsetAngle, 1, { pt1: 0, ease: Power2.easeInOut }, 2.2), this.tl.intro.to(this.offsetAngle, 1, { pt2: 0, ease: Power2.easeInOut }, 2.2), this.tl.intro.to(this.offsetAngle, 1, { pt4: 0, ease: Power2.easeInOut }, 2.2) } }, { key: "_onTransitionComplete", value: function () { _.a.needDrawIntro = !1, this.emit(this.E.TRANSITION_COMPLETE) } }, { key: "changeScene", value: function () { var t = this.squareAngle - 90; this.tl.change = new TimelineLite({ onComplete: this._onTransitionComplete, callbackScope: this }), this.tl.change.to(y.a.posCoeff, 3, { x: .25, y: .5, ease: Power2.easeInOut }, 0), this.tl.change.to(this, 3, { squareAngle: t, ease: Power2.easeInOut }, 0), this.tl.change.to(this, 1, { widthCoeff: 0, ease: Power3.easeInOut, onComplete: this._switchAxes, callbackScope: this }, .5), this.tl.change.to(this, 1, { widthCoeff: 1, ease: Power3.easeInOut }, 1.5) } }, { key: "_switchAxes", value: function () { this._updateScene(), this.switchAxes = !this.switchAxes } }, { key: "showOutro", value: function () { _.a.needDrawOutro = !0; var t = this.squareAngle - 90, e = 1.3; this.tl.outro = new TimelineLite({ onComplete: this._onOutroShow, callbackScope: this }), this.tl.outro.to(this, 3.7, { squareAngle: t, ease: Power3.easeInOut }, 0), this.tl.outro.to(this, 2.5, { widthCoeff: 0, ease: Power4.easeInOut, onComplete: this._updateScene, callbackScope: this }, 0), this.tl.outro.to(y.a, 1.7, { dispCoeff: 1, ease: Power2.easeInOut }, .3), this.tl.outro.to(y.a.posCoeff, 1.7, { x: .6, y: .55, ease: Power2.easeInOut }, .3), this.tl.outro.to(this.offsetAngle, 1, { pt1: -20, ease: Power2.easeInOut }, .8), this.tl.outro.to(this.offsetAngle, 1, { pt2: 5, ease: Power2.easeInOut }, .8), this.tl.outro.to(this.offsetAngle, 1, { pt3: 10, ease: Power2.easeInOut }, .8), this.tl.outro.to(this.offsetAngle, 1, { pt4: -30, ease: Power2.easeInOut }, .8), this.tl.outro.to(this.offsetAngle, 1, { pt1me: -100, ease: Power3.easeInOut }, e), this.tl.outro.to(this.offsetAngle, 1, { pt4me: -50, ease: Power3.easeInOut }, e + .4), this.tl.outro.to(this.offsetAngle, 1, { pt3me: -95, ease: Power3.easeInOut }, 2.1), this.tl.outro.to(this.offsetAngle, 1, { pt2me: -115, ease: Power3.easeInOut }, 2.5) } }, { key: "_updateScene", value: function () { this.emit(this.E.UPDATE_SCENE) } }, { key: "_onOutroShow", value: function () { this.emit(this.E.REMOVE_WEBGL_RAF) } }, { key: "hoverSquare", value: function () { this.tw.square = TweenLite.to(this, .5, { hoverCoeff: 1, ease: Power2.easeOut }) } }, { key: "leaveSquare", value: function () { this.tw.square = TweenLite.to(this, .5, { hoverCoeff: 0, ease: Power2.easeOut }) } }]), e }()) }, function (t, e, n) { "use strict"; var i = Math.min, r = Math.round; (function (t, o) { n.d(e, "k", function () { return a }), n.d(e, "l", function () { return s }), n.d(e, "i", function () { return u }), n.d(e, "a", function () { return l }), n.d(e, "b", function () { return h }), n.d(e, "c", function () { return f }), n.d(e, "d", function () { return p }), n.d(e, "e", function () { return d }), n.d(e, "f", function () { return m }), n.d(e, "g", function () { return v }), n.d(e, "h", function () { return g }), n.d(e, "j", function () { return y }); const a = "undefined" == typeof window ? void 0 !== t && t.exports && void 0 !== o ? o : {} : window, s = function (t) { var e = {}, n = t.document, o = t.GreenSockGlobals = t.GreenSockGlobals || t; if (o.TweenLite) return o.TweenLite; var a, s, c, u, l, h = function (t) { var e, n = t.split("."), i = o; for (e = 0; e < n.length; e++)i[n[e]] = i = i[n[e]] || {}; return i }, f = h("com.greensock"), p = 1e-10, d = function (t) { var e, n = [], i = t.length; for (e = 0; e !== i; n.push(t[e++])); return n }, m = function () { }, v = function () { var t = Object.prototype.toString, e = t.call([]); return function (n) { return null != n && (n instanceof Array || "object" == typeof n && !!n.push && t.call(n) === e) } }(), g = {}, y = function (t, n, i, r) { this.sc = g[t] ? g[t].sc : [], g[t] = this, this.gsClass = null, this.func = i; var a = []; this.check = function (s) { for (var c, u, l, f, p = n.length, d = p; -1 < --p;)(c = g[n[p]] || new y(n[p], [])).gsClass ? (a[p] = c.gsClass, d--) : s && c.sc.push(this); if (0 === d && i) for (l = (u = ("com.greensock." + t).split(".")).pop(), f = h(u.join("."))[l] = this.gsClass = i.apply(i, a), r && (o[l] = e[l] = f), p = 0; p < this.sc.length; p++)this.sc[p].check() }, this.check(!0) }, b = t._gsDefine = function (t, e, n, i) { return new y(t, e, n, i) }, _ = f._class = function (t, e, n) { return e = e || function () { }, b(t, [], function () { return e }, n), e }; b.globals = o; var x = [0, 0, 1, 1], w = _("easing.Ease", function (t, e, n, i) { this._func = t, this._type = n || 0, this._power = i || 0, this._params = e ? x.concat(e) : x }, !0), T = w.map = {}, S = w.register = function (t, e, n, i) { for (var r, o, a, s, c = e.split(","), u = c.length, l = (n || "easeIn,easeOut,easeInOut").split(","); -1 < --u;)for (o = c[u], r = i ? _("easing." + o, null, !0) : f.easing[o] || {}, a = l.length; -1 < --a;)s = l[a], T[o + "." + s] = T[s + o] = r[s] = t.getRatio ? t : t[s] || new t }; for ((c = w.prototype)._calcEnd = !1, c.getRatio = function (t) { if (this._func) return this._params[0] = t, this._func.apply(null, this._params); var e = this._type, n = this._power, i = 1 === e ? 1 - t : 2 === e ? t : .5 > t ? 2 * t : 2 * (1 - t); return 1 === n ? i *= i : 2 === n ? i *= i * i : 3 === n ? i *= i * i * i : 4 === n && (i *= i * i * i * i), 1 === e ? 1 - i : 2 === e ? i : .5 > t ? i / 2 : 1 - i / 2 }, s = (a = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"]).length; -1 < --s;)c = a[s] + ",Power" + s, S(new w(null, null, 1, s), c, "easeOut", !0), S(new w(null, null, 2, s), c, "easeIn" + (0 === s ? ",easeNone" : "")), S(new w(null, null, 3, s), c, "easeInOut"); T.linear = f.easing.Linear.easeIn, T.swing = f.easing.Quad.easeInOut; var M = _("events.EventDispatcher", function (t) { this._listeners = {}, this._eventTarget = t || this }); (c = M.prototype).addEventListener = function (t, e, n, i, r) { r = r || 0; var o, a, s = this._listeners[t], c = 0; for (this !== u || l || u.wake(), null == s && (this._listeners[t] = s = []), a = s.length; -1 < --a;)(o = s[a]).c === e && o.s === n ? s.splice(a, 1) : 0 == c && o.pr < r && (c = a + 1); s.splice(c, 0, { c: e, s: n, up: i, pr: r }) }, c.removeEventListener = function (t, e) { var n, i = this._listeners[t]; if (i) for (n = i.length; -1 < --n;)if (i[n].c === e) return void i.splice(n, 1) }, c.dispatchEvent = function (t) { var e, n, i, r = this._listeners[t]; if (r) for (1 < (e = r.length) && (r = r.slice(0)), n = this._eventTarget; -1 < --e;)(i = r[e]) && (i.up ? i.c.call(i.s || n, { type: t, target: n }) : i.c.call(i.s || n)) }; var P = t.requestAnimationFrame, E = t.cancelAnimationFrame, A = Date.now || function () { return (new Date).getTime() }, C = A(); for (s = (a = ["ms", "moz", "webkit", "o"]).length; -1 < --s && !P;)P = t[a[s] + "RequestAnimationFrame"], E = t[a[s] + "CancelAnimationFrame"] || t[a[s] + "CancelRequestAnimationFrame"]; _("Ticker", function (t, e) { var r, o, a, s, c, h = this, f = A(), d = !(!1 === e || !P) && "auto", v = 500, g = 33, y = function (t) { var e, n, i = A() - C; i > v && (f += i - g), C += i, h.time = (C - f) / 1e3, e = h.time - c, (!r || 0 < e || !0 === t) && (h.frame++, c += e + (e >= s ? .004 : s - e), n = !0), !0 !== t && (a = o(y)), n && h.dispatchEvent("tick") }; M.call(h), h.time = h.frame = 0, h.tick = function () { y(!0) }, h.lagSmoothing = function (t, e) { return arguments.length ? void (g = i(e, v = t || 1 / p, 0)) : v < 1 / p }, h.sleep = function () { null == a || (d && E ? E(a) : clearTimeout(a), o = m, a = null, h === u && (l = !1)) }, h.wake = function (t) { null === a ? t ? f += -C + (C = A()) : 10 < h.frame && (C = A() - v + 5) : h.sleep(), o = 0 === r ? m : d && P ? P : function (t) { return setTimeout(t, 0 | 1e3 * (c - h.time) + 1) }, h === u && (l = !0), y(2) }, h.fps = function (t) { return arguments.length ? (s = 1 / ((r = t) || 60), c = this.time + s, void h.wake()) : r }, h.useRAF = function (t) { return arguments.length ? (h.sleep(), d = t, void h.fps(r)) : d }, h.fps(t), setTimeout(function () { "auto" === d && 5 > h.frame && "hidden" !== (n || {}).visibilityState && h.useRAF(!1) }, 1500) }), (c = f.Ticker.prototype = new f.events.EventDispatcher).constructor = f.Ticker; var L = _("core.Animation", function (t, e) { if (this.vars = e = e || {}, this._duration = this._totalDuration = t || 0, this._delay = +e.delay || 0, this._timeScale = 1, this._active = !0 === e.immediateRender, this.data = e.data, this._reversed = !0 === e.reversed, $) { l || u.wake(); var n = this.vars.useFrames ? Y : $; n.add(this, n._time), this.vars.paused && this.paused(!0) } }); u = L.ticker = new f.Ticker, (c = L.prototype)._dirty = c._gc = c._initted = c._paused = !1, c._totalTime = c._time = 0, c._rawPrevTime = -1, c._next = c._last = c._onUpdate = c._timeline = c.timeline = null, c._paused = !1; var R = function () { l && 2e3 < A() - C && ("hidden" !== (n || {}).visibilityState || !u.lagSmoothing()) && u.wake(); var t = setTimeout(R, 2e3); t.unref && t.unref() }; R(), c.play = function (t, e) { return null != t && this.seek(t, e), this.reversed(!1).paused(!1) }, c.pause = function (t, e) { return null != t && this.seek(t, e), this.paused(!0) }, c.resume = function (t, e) { return null != t && this.seek(t, e), this.paused(!1) }, c.seek = function (t, e) { return this.totalTime(+t, !1 !== e) }, c.restart = function (t, e) { return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, !1 !== e, !0) }, c.reverse = function (t, e) { return null != t && this.seek(t || this.totalDuration(), e), this.reversed(!0).paused(!1) }, c.render = function () { }, c.invalidate = function () { return this._time = this._totalTime = 0, this._initted = this._gc = !1, this._rawPrevTime = -1, (this._gc || !this.timeline) && this._enabled(!0), this }, c.isActive = function () { var t, e = this._timeline, n = this._startTime; return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime(!0)) >= n && t < n + this.totalDuration() / this._timeScale - 1e-7 }, c._enabled = function (t, e) { return l || u.wake(), this._gc = !t, this._active = this.isActive(), !0 !== e && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)), !1 }, c._kill = function () { return this._enabled(!1, !1) }, c.kill = function (t, e) { return this._kill(t, e), this }, c._uncache = function (t) { for (var e = t ? this : this.timeline; e;)e._dirty = !0, e = e.timeline; return this }, c._swapSelfInParams = function (t) { for (var e = t.length, n = t.concat(); -1 < --e;)"{self}" === t[e] && (n[e] = this); return n }, c._callback = function (t) { var e = this.vars, n = e[t], i = e[t + "Params"], r = e[t + "Scope"] || e.callbackScope || this, o = i ? i.length : 0; 0 === o ? n.call(r) : 1 === o ? n.call(r, i[0]) : 2 === o ? n.call(r, i[0], i[1]) : n.apply(r, i) }, c.eventCallback = function (t, e, n, i) { if ("on" === (t || "").substr(0, 2)) { var r = this.vars; if (1 === arguments.length) return r[t]; null == e ? delete r[t] : (r[t] = e, r[t + "Params"] = v(n) && -1 !== n.join("").indexOf("{self}") ? this._swapSelfInParams(n) : n, r[t + "Scope"] = i), "onUpdate" === t && (this._onUpdate = e) } return this }, c.delay = function (t) { return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay), this._delay = t, this) : this._delay }, c.duration = function (t) { return arguments.length ? (this._duration = this._totalDuration = t, this._uncache(!0), this._timeline.smoothChildTiming && 0 < this._time && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0), this) : (this._dirty = !1, this._duration) }, c.totalDuration = function (t) { return this._dirty = !1, arguments.length ? this.duration(t) : this._totalDuration }, c.time = function (t, e) { return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(t > this._duration ? this._duration : t, e)) : this._time }, c.totalTime = function (t, e, n) { if (l || u.wake(), !arguments.length) return this._totalTime; if (this._timeline) { if (0 > t && !n && (t += this.totalDuration()), this._timeline.smoothChildTiming) { this._dirty && this.totalDuration(); var i = this._totalDuration, r = this._timeline; if (t > i && !n && (t = i), this._startTime = (this._paused ? this._pauseTime : r._time) - (this._reversed ? i - t : t) / this._timeScale, r._dirty || this._uncache(!1), r._timeline) for (; r._timeline;)r._timeline._time !== (r._startTime + r._totalTime) / r._timeScale && r.totalTime(r._totalTime, !0), r = r._timeline } this._gc && this._enabled(!0, !1), (this._totalTime !== t || 0 === this._duration) && (G.length && K(), this.render(t, e, !1), G.length && K()) } return this }, c.progress = c.totalProgress = function (t, e) { var n = this.duration(); return arguments.length ? this.totalTime(n * t, e) : n ? this._time / n : this.ratio }, c.startTime = function (t) { return arguments.length ? (t !== this._startTime && (this._startTime = t, this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)), this) : this._startTime }, c.endTime = function (t) { return this._startTime + (0 == t ? this.duration() : this.totalDuration()) / this._timeScale }, c.timeScale = function (t) { if (!arguments.length) return this._timeScale; var e, n; for (t = t || p, this._timeline && this._timeline.smoothChildTiming && (n = (e = this._pauseTime) || 0 === e ? e : this._timeline.totalTime(), this._startTime = n - (n - this._startTime) * this._timeScale / t), this._timeScale = t, n = this.timeline; n && n.timeline;)n._dirty = !0, n.totalDuration(), n = n.timeline; return this }, c.reversed = function (t) { return arguments.length ? (t != this._reversed && (this._reversed = t, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed }, c.paused = function (t) { if (!arguments.length) return this._paused; var e, n, i = this._timeline; return t != this._paused && i && (!l && !t && u.wake(), n = (e = i.rawTime()) - this._pauseTime, !t && i.smoothChildTiming && (this._startTime += n, this._uncache(!1)), this._pauseTime = t ? e : null, this._paused = t, this._active = this.isActive(), !t && 0 !== n && this._initted && this.duration() && (e = i.smoothChildTiming ? this._totalTime : (e - this._startTime) / this._timeScale, this.render(e, e === this._totalTime, !0))), this._gc && !t && this._enabled(!0, !1), this }; var O = _("core.SimpleTimeline", function (t) { L.call(this, 0, t), this.autoRemoveChildren = this.smoothChildTiming = !0 }); (c = O.prototype = new L).constructor = O, c.kill()._gc = !1, c._first = c._last = c._recent = null, c._sortChildren = !1, c.add = c.insert = function (t, e) { var n, i; if (t._startTime = +(e || 0) + t._delay, t._paused && this !== t._timeline && (t._pauseTime = this.rawTime() - (t._timeline.rawTime() - t._pauseTime)), t.timeline && t.timeline._remove(t, !0), t.timeline = t._timeline = this, t._gc && t._enabled(!0, !0), n = this._last, this._sortChildren) for (i = t._startTime; n && n._startTime > i;)n = n._prev; return n ? (t._next = n._next, n._next = t) : (t._next = this._first, this._first = t), t._next ? t._next._prev = t : this._last = t, t._prev = n, this._recent = t, this._timeline && this._uncache(!0), this }, c._remove = function (t, e) { return t.timeline === this && (!e && t._enabled(!1, !0), t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next), t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev), t._next = t._prev = t.timeline = null, t === this._recent && (this._recent = this._last), this._timeline && this._uncache(!0)), this }, c.render = function (t, e, n) { var i, r = this._first; for (this._totalTime = this._time = this._rawPrevTime = t; r;)i = r._next, (r._active || t >= r._startTime && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, n) : r.render((t - r._startTime) * r._timeScale, e, n)), r = i }, c.rawTime = function () { return l || u.wake(), this._totalTime }; var I = _("TweenLite", function (e, n, r) { if (L.call(this, n, r), this.render = I.prototype.render, null == e) throw "Cannot tween a null target."; this.target = e = "string" == typeof e && I.selector(e) || e; var o, a, s, c = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType), u = this.vars.overwrite; if (this._overwrite = u = null == u ? q[I.defaultOverwrite] : "number" == typeof u ? u >> 0 : q[u], (c || e instanceof Array || e.push && v(e)) && "number" != typeof e[0]) for (this._targets = s = d(e), this._propLookup = [], this._siblings = [], o = 0; o < s.length; o++)(a = s[o]) ? "string" != typeof a ? a.length && a !== t && a[0] && (a[0] === t || a[0].nodeType && a[0].style && !a.nodeType) ? (s.splice(o--, 1), this._targets = s = s.concat(d(a))) : (this._siblings[o] = J(a, this, !1), 1 === u && 1 < this._siblings[o].length && tt(a, this, null, 1, this._siblings[o])) : "string" == typeof (a = s[o--] = I.selector(a)) && s.splice(o + 1, 1) : s.splice(o--, 1); else this._propLookup = {}, this._siblings = J(e, this, !1), 1 === u && 1 < this._siblings.length && tt(e, this, null, 1, this._siblings); (this.vars.immediateRender || 0 === n && 0 === this._delay && !1 !== this.vars.immediateRender) && (this._time = -p, this.render(i(0, -this._delay))) }, !0), D = function (e) { return e && e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType) }; (c = I.prototype = new L).constructor = I, c.kill()._gc = !1, c.ratio = 0, c._firstPT = c._targets = c._overwrittenProps = c._startAt = null, c._notifyPluginsOfEnabled = c._lazy = !1, I.version = "2.0.1", I.defaultEase = c._ease = new w(null, null, 1, 1), I.defaultOverwrite = "auto", I.ticker = u, I.autoSleep = 120, I.lagSmoothing = function (t, e) { u.lagSmoothing(t, e) }, I.selector = t.$ || t.jQuery || function (e) { var i = t.$ || t.jQuery; return i ? (I.selector = i, i(e)) : (n || (n = t.document), n ? n.querySelectorAll ? n.querySelectorAll(e) : n.getElementById("#" === e.charAt(0) ? e.substr(1) : e) : e) }; var G = [], B = {}, k = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, N = /[\+-]=-?[\.\d]/, H = function (t) { for (var e, n = this._firstPT; n;)e = n.blob ? 1 === t && null != this.end ? this.end : t ? this.join("") : this.start : n.c * t + n.s, n.m ? e = n.m.call(this._tween, e, this._target || n.t, this._tween) : e < 1e-6 && e > -1e-6 && !n.blob && (e = 0), n.f ? n.fp ? n.t[n.p](n.fp, e) : n.t[n.p](e) : n.t[n.p] = e, n = n._next }, F = function (t, e, n, i) { var o, a, s, c, u, l, h, f = [], p = 0, d = "", m = 0; for (f.start = t, f.end = e, t = f[0] = t + "", e = f[1] = e + "", n && (n(f), t = f[0], e = f[1]), f.length = 0, o = t.match(k) || [], a = e.match(k) || [], i && (i._next = null, i.blob = 1, f._firstPT = f._applyPT = i), u = a.length, c = 0; c < u; c++)h = a[c], d += (l = e.substr(p, e.indexOf(h, p) - p)) || !c ? l : ",", p += l.length, m ? m = (m + 1) % 5 : "rgba(" === l.substr(-5) && (m = 1), h === o[c] || o.length <= c ? d += h : (d && (f.push(d), d = ""), s = parseFloat(o[c]), f.push(s), f._firstPT = { _next: f._firstPT, t: f, p: f.length - 1, s: s, c: ("=" === h.charAt(1) ? parseInt(h.charAt(0) + "1", 10) * parseFloat(h.substr(2)) : parseFloat(h) - s) || 0, f: 0, m: m && 4 > m ? r : 0 }), p += h.length; return (d += e.substr(p)) && f.push(d), f.setRatio = H, N.test(e) && (f.end = null), f }, U = function (t, e, n, i, o, a, s, c, u) { "function" == typeof i && (i = i(u || 0, t)); var l = typeof t[e], h = "function" == l ? e.indexOf("set") || "function" != typeof t["get" + e.substr(3)] ? e : "get" + e.substr(3) : "", f = "get" === n ? h ? s ? t[h](s) : t[h]() : t[e] : n, p = "string" == typeof i && "=" === i.charAt(1), d = { t: t, p: e, s: f, f: "function" == l, pg: 0, n: o || e, m: a ? "function" == typeof a ? a : r : 0, pr: 0, c: p ? parseInt(i.charAt(0) + "1", 10) * parseFloat(i.substr(2)) : parseFloat(i) - f || 0 }; if ("number" == typeof f && ("number" == typeof i || p) || (s || isNaN(f) || !p && isNaN(i) || "boolean" == typeof f || "boolean" == typeof i ? (d.fp = s, d = { t: F(f, p ? parseFloat(d.s) + d.c + (d.s + "").replace(/[0-9\-\.]/g, "") : i, c || I.defaultStringFilter, d), p: "setRatio", s: 0, c: 1, f: 2, pg: 0, n: o || e, pr: 0, m: 0 }) : (d.s = parseFloat(f), !p && (d.c = parseFloat(i) - d.s || 0))), d.c) return (d._next = this._firstPT) && (d._next._prev = d), this._firstPT = d, d }, z = I._internals = { isArray: v, isSelector: D, lazyTweens: G, blobDif: F }, j = I._plugins = {}, V = z.tweenLookup = {}, W = 0, X = z.reservedProps = { ease: 1, delay: 1, overwrite: 1, onComplete: 1, onCompleteParams: 1, onCompleteScope: 1, useFrames: 1, runBackwards: 1, startAt: 1, onUpdate: 1, onUpdateParams: 1, onUpdateScope: 1, onStart: 1, onStartParams: 1, onStartScope: 1, onReverseComplete: 1, onReverseCompleteParams: 1, onReverseCompleteScope: 1, onRepeat: 1, onRepeatParams: 1, onRepeatScope: 1, easeParams: 1, yoyo: 1, immediateRender: 1, repeat: 1, repeatDelay: 1, data: 1, paused: 1, reversed: 1, autoCSS: 1, lazy: 1, onOverwrite: 1, callbackScope: 1, stringFilter: 1, id: 1, yoyoEase: 1 }, q = { none: 0, all: 1, auto: 2, concurrent: 3, allOnStart: 4, preexisting: 5, true: 1, false: 0 }, Y = L._rootFramesTimeline = new O, $ = L._rootTimeline = new O, Z = 30, K = z.lazyRender = function () { var t, e = G.length; for (B = {}; -1 < --e;)(t = G[e]) && !1 !== t._lazy && (t.render(t._lazy[0], t._lazy[1], !0), t._lazy = !1); G.length = 0 }; $._startTime = u.time, Y._startTime = u.frame, $._active = Y._active = !0, setTimeout(K, 1), L._updateRoot = I.render = function () { var t, e, n; if (G.length && K(), $.render((u.time - $._startTime) * $._timeScale, !1, !1), Y.render((u.frame - Y._startTime) * Y._timeScale, !1, !1), G.length && K(), u.frame >= Z) { for (n in Z = u.frame + (parseInt(I.autoSleep, 10) || 120), V) { for (t = (e = V[n].tweens).length; -1 < --t;)e[t]._gc && e.splice(t, 1); 0 === e.length && delete V[n] } if ((!(n = $._first) || n._paused) && I.autoSleep && !Y._first && 1 === u._listeners.tick.length) { for (; n && n._paused;)n = n._next; n || u.sleep() } } }, u.addEventListener("tick", L._updateRoot); var J = function (t, e, n) { var i, r, o = t._gsTweenID; if (V[o || (t._gsTweenID = o = "t" + W++)] || (V[o] = { target: t, tweens: [] }), e && ((i = V[o].tweens)[r = i.length] = e, n)) for (; -1 < --r;)i[r] === e && i.splice(r, 1); return V[o].tweens }, Q = function (t, e, n, i) { var r, o, a = t.vars.onOverwrite; return a && (r = a(t, e, n, i)), (a = I.onOverwrite) && (o = a(t, e, n, i)), !1 !== r && !1 !== o }, tt = function (t, e, n, i, r) { var o, a, s, c; if (1 === i || 4 <= i) { for (c = r.length, o = 0; o < c; o++)if ((s = r[o]) !== e) !s._gc && s._kill(null, t, e) && (a = !0); else if (5 === i) break; return a } var u, l = e._startTime + p, h = [], f = 0, d = 0 === e._duration; for (o = r.length; -1 < --o;)(s = r[o]) === e || s._gc || s._paused || (s._timeline === e._timeline ? s._startTime <= l && s._startTime + s.totalDuration() / s._timeScale > l && ((d || !s._initted) && 2e-10 >= l - s._startTime || (h[f++] = s)) : (u = u || et(e, 0, d), 0 === et(s, u, d) && (h[f++] = s))); for (o = f; -1 < --o;)if (s = h[o], 2 === i && s._kill(n, t, e) && (a = !0), 2 !== i || !s._firstPT && s._initted) { if (2 !== i && !Q(s, e)) continue; s._enabled(!1, !1) && (a = !0) } return a }, et = function (t, e, n) { for (var i = t._timeline, r = i._timeScale, o = t._startTime; i._timeline;) { if (o += i._startTime, r *= i._timeScale, i._paused) return -100; i = i._timeline } return (o /= r) > e ? o - e : n && o === e || !t._initted && o - e < 2 * p ? p : (o += t.totalDuration() / t._timeScale / r) > e + p ? 0 : o - e - p }; c._init = function () { var t, e, n, i, r, o, a = this.vars, s = this._overwrittenProps, c = this._duration, u = !!a.immediateRender, l = a.ease; if (a.startAt) { for (i in this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), r = {}, a.startAt) r[i] = a.startAt[i]; if (r.data = "isStart", r.overwrite = !1, r.immediateRender = !0, r.lazy = u && !1 !== a.lazy, r.startAt = r.delay = null, r.onUpdate = a.onUpdate, r.onUpdateParams = a.onUpdateParams, r.onUpdateScope = a.onUpdateScope || a.callbackScope || this, this._startAt = I.to(this.target || {}, 0, r), u) if (0 < this._time) this._startAt = null; else if (0 !== c) return } else if (a.runBackwards && 0 !== c) if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null; else { for (i in 0 !== this._time && (u = !1), n = {}, a) X[i] && "autoCSS" !== i || (n[i] = a[i]); if (n.overwrite = 0, n.data = "isFromStart", n.lazy = u && !1 !== a.lazy, n.immediateRender = u, this._startAt = I.to(this.target, 0, n), u) { if (0 === this._time) return } else this._startAt._init(), this._startAt._enabled(!1), this.vars.immediateRender && (this._startAt = null) } if (this._ease = l = l ? l instanceof w ? l : "function" == typeof l ? new w(l, a.easeParams) : T[l] || I.defaultEase : I.defaultEase, a.easeParams instanceof Array && l.config && (this._ease = l.config.apply(l, a.easeParams)), this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets) for (o = this._targets.length, t = 0; t < o; t++)this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], s ? s[t] : null, t) && (e = !0); else e = this._initProps(this.target, this._propLookup, this._siblings, s, 0); if (e && I._onPluginEvent("_onInitAllProps", this), s && !this._firstPT && "function" != typeof this.target && this._enabled(!1, !1), a.runBackwards) for (n = this._firstPT; n;)n.s += n.c, n.c = -n.c, n = n._next; this._onUpdate = a.onUpdate, this._initted = !0 }, c._initProps = function (e, n, i, r, o) { var a, s, c, u, l, h; if (null == e) return !1; for (a in B[e._gsTweenID] && K(), !this.vars.css && e.style && e !== t && e.nodeType && j.css && !1 !== this.vars.autoCSS && function (t, e) { var n, i = {}; for (n in t) X[n] || n in e && "transform" !== n && "x" !== n && "y" !== n && "width" !== n && "height" !== n && "className" !== n && "border" !== n || j[n] && (!j[n] || !j[n]._autoCSS) || (i[n] = t[n], delete t[n]); t.css = i }(this.vars, e), this.vars) if (h = this.vars[a], X[a]) h && (h instanceof Array || h.push && v(h)) && -1 !== h.join("").indexOf("{self}") && (this.vars[a] = h = this._swapSelfInParams(h, this)); else if (j[a] && (u = new j[a])._onInitTween(e, this.vars[a], this, o)) { for (this._firstPT = l = { _next: this._firstPT, t: u, p: "setRatio", s: 0, c: 1, f: 1, n: a, pg: 1, pr: u._priority, m: 0 }, s = u._overwriteProps.length; -1 < --s;)n[u._overwriteProps[s]] = this._firstPT; (u._priority || u._onInitAllProps) && (c = !0), (u._onDisable || u._onEnable) && (this._notifyPluginsOfEnabled = !0), l._next && (l._next._prev = l) } else n[a] = U.call(this, e, a, "get", h, a, 0, null, this.vars.stringFilter, o); return r && this._kill(r, e) ? this._initProps(e, n, i, r, o) : 1 < this._overwrite && this._firstPT && 1 < i.length && tt(e, this, n, this._overwrite, i) ? (this._kill(n, e), this._initProps(e, n, i, r, o)) : (this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration) && (B[e._gsTweenID] = !0), c) }, c.render = function (t, e, n) { var i, r, o, a, s = this._time, c = this._duration, u = this._rawPrevTime; if (t >= c - 1e-7 && 0 <= t) this._totalTime = this._time = c, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (i = !0, r = "onComplete", n = n || this._timeline.autoRemoveChildren), 0 === c && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (t = 0), (0 > u || 0 >= t && -1e-7 <= t || u === p && "isPause" !== this.data) && u !== t && (n = !0, u > p && (r = "onReverseComplete")), this._rawPrevTime = a = !e || t || u === t ? t : p); else if (1e-7 > t) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== s || 0 === c && 0 < u) && (r = "onReverseComplete", i = this._reversed), 0 > t && (this._active = !1, 0 === c && (this._initted || !this.vars.lazy || n) && (0 <= u && (u !== p || "isPause" !== this.data) && (n = !0), this._rawPrevTime = a = !e || t || u === t ? t : p)), (!this._initted || this._startAt && this._startAt.progress()) && (n = !0); else if (this._totalTime = this._time = t, this._easeType) { var l = t / c, h = this._easeType, f = this._easePower; (1 === h || 3 === h && .5 <= l) && (l = 1 - l), 3 === h && (l *= 2), 1 === f ? l *= l : 2 === f ? l *= l * l : 3 === f ? l *= l * l * l : 4 === f && (l *= l * l * l * l), this.ratio = 1 === h ? 1 - l : 2 === h ? l : .5 > t / c ? l / 2 : 1 - l / 2 } else this.ratio = this._ease.getRatio(t / c); if (this._time !== s || n) { if (!this._initted) { if (this._init(), !this._initted || this._gc) return; if (!n && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = s, this._rawPrevTime = u, G.push(this), void (this._lazy = [t, e]); this._time && !i ? this.ratio = this._ease.getRatio(this._time / c) : i && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) } for (!1 !== this._lazy && (this._lazy = !1), this._active || this._paused || this._time === s || !(0 <= t) || (this._active = !0), 0 === s && (this._startAt && (0 <= t ? this._startAt.render(t, !0, n) : !r && (r = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === c) && !e && this._callback("onStart")), o = this._firstPT; o;)o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s, o = o._next; this._onUpdate && (0 > t && this._startAt && -1e-4 !== t && this._startAt.render(t, !0, n), !e && (this._time !== s || i || n) && this._callback("onUpdate")), r && (!this._gc || n) && (0 > t && this._startAt && !this._onUpdate && -1e-4 !== t && this._startAt.render(t, !0, n), i && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[r] && this._callback(r), 0 === c && this._rawPrevTime === p && a !== p && (this._rawPrevTime = 0)) } }, c._kill = function (t, e, n) { if ("all" === t && (t = null), null == t && (null == e || e === this.target)) return this._lazy = !1, this._enabled(!1, !1); e = "string" == typeof e ? I.selector(e) || e : e || this._targets || this.target; var i, r, o, a, s, c, u, l, h, f = n && this._time && n._startTime === this._startTime && this._timeline === n._timeline; if ((v(e) || D(e)) && "number" != typeof e[0]) for (i = e.length; -1 < --i;)this._kill(t, e[i], n) && (c = !0); else { if (this._targets) { for (i = this._targets.length; -1 < --i;)if (e === this._targets[i]) { s = this._propLookup[i] || {}, this._overwrittenProps = this._overwrittenProps || [], r = this._overwrittenProps[i] = t ? this._overwrittenProps[i] || {} : "all"; break } } else { if (e !== this.target) return !1; s = this._propLookup, r = this._overwrittenProps = t ? this._overwrittenProps || {} : "all" } if (s) { if (u = t || s, l = t !== r && "all" !== r && t !== s && ("object" != typeof t || !t._tempKill), n && (I.onOverwrite || this.vars.onOverwrite)) { for (o in u) s[o] && (h || (h = []), h.push(o)); if ((h || !t) && !Q(this, n, e, h)) return !1 } for (o in u) (a = s[o]) && (f && (a.f ? a.t[a.p](a.s) : a.t[a.p] = a.s, c = !0), a.pg && a.t._kill(u) && (c = !0), (!a.pg || 0 === a.t._overwriteProps.length) && (a._prev ? a._prev._next = a._next : a === this._firstPT && (this._firstPT = a._next), a._next && (a._next._prev = a._prev), a._next = a._prev = null), delete s[o]), l && (r[o] = 1); !this._firstPT && this._initted && this._enabled(!1, !1) } } return c }, c.invalidate = function () { return this._notifyPluginsOfEnabled && I._onPluginEvent("_onDisable", this), this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null, this._notifyPluginsOfEnabled = this._active = this._lazy = !1, this._propLookup = this._targets ? {} : [], L.prototype.invalidate.call(this), this.vars.immediateRender && (this._time = -p, this.render(i(0, -this._delay))), this }, c._enabled = function (t, e) { if (l || u.wake(), t && this._gc) { var n, i = this._targets; if (i) for (n = i.length; -1 < --n;)this._siblings[n] = J(i[n], this, !0); else this._siblings = J(this.target, this, !0) } return L.prototype._enabled.call(this, t, e), !(!this._notifyPluginsOfEnabled || !this._firstPT) && I._onPluginEvent(t ? "_onEnable" : "_onDisable", this) }, I.to = function (t, e, n) { return new I(t, e, n) }, I.from = function (t, e, n) { return n.runBackwards = !0, n.immediateRender = 0 != n.immediateRender, new I(t, e, n) }, I.fromTo = function (t, e, n, i) { return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, new I(t, e, i) }, I.delayedCall = function (t, e, n, i, r) { return new I(e, 0, { delay: t, onComplete: e, onCompleteParams: n, callbackScope: i, onReverseComplete: e, onReverseCompleteParams: n, immediateRender: !1, lazy: !1, useFrames: r, overwrite: 0 }) }, I.set = function (t, e) { return new I(t, 0, e) }, I.getTweensOf = function (t, e) { if (null == t) return []; var n, i, r, o; if (t = "string" == typeof t && I.selector(t) || t, (v(t) || D(t)) && "number" != typeof t[0]) { for (n = t.length, i = []; -1 < --n;)i = i.concat(I.getTweensOf(t[n], e)); for (n = i.length; -1 < --n;)for (o = i[n], r = n; -1 < --r;)o === i[r] && i.splice(n, 1) } else if (t._gsTweenID) for (n = (i = J(t).concat()).length; -1 < --n;)(i[n]._gc || e && !i[n].isActive()) && i.splice(n, 1); return i || [] }, I.killTweensOf = I.killDelayedCallsTo = function (t, e, n) { "object" == typeof e && (n = e, e = !1); for (var i = I.getTweensOf(t, e), r = i.length; -1 < --r;)i[r]._kill(n, t) }; var nt = _("plugins.TweenPlugin", function (t, e) { this._overwriteProps = (t || "").split(","), this._propName = this._overwriteProps[0], this._priority = e || 0, this._super = nt.prototype }, !0); if (c = nt.prototype, nt.version = "1.19.0", nt.API = 2, c._firstPT = null, c._addTween = U, c.setRatio = H, c._kill = function (t) { var e, n = this._overwriteProps, i = this._firstPT; if (null != t[this._propName]) this._overwriteProps = []; else for (e = n.length; -1 < --e;)null != t[n[e]] && n.splice(e, 1); for (; i;)null != t[i.n] && (i._next && (i._next._prev = i._prev), i._prev ? (i._prev._next = i._next, i._prev = null) : this._firstPT === i && (this._firstPT = i._next)), i = i._next; return !1 }, c._mod = c._roundProps = function (t) { for (var e, n = this._firstPT; n;)(e = t[this._propName] || null != n.n && t[n.n.split(this._propName + "_").join("")]) && "function" == typeof e && (2 === n.f ? n.t._applyPT.m = e : n.m = e), n = n._next }, I._onPluginEvent = function (t, e) { var n, i, r, o, a, s = e._firstPT; if ("_onInitAllProps" === t) { for (; s;) { for (a = s._next, i = r; i && i.pr > s.pr;)i = i._next; (s._prev = i ? i._prev : o) ? s._prev._next = s : r = s, (s._next = i) ? i._prev = s : o = s, s = a } s = e._firstPT = r } for (; s;)s.pg && "function" == typeof s.t[t] && s.t[t]() && (n = !0), s = s._next; return n }, nt.activate = function (t) { for (var e = t.length; -1 < --e;)t[e].API === nt.API && (j[(new t[e])._propName] = t[e]); return !0 }, b.plugin = function (t) { if (!(t && t.propName && t.init && t.API)) throw "illegal plugin definition."; var e, n = t.propName, i = t.priority || 0, r = t.overwriteProps, o = { init: "_onInitTween", set: "setRatio", kill: "_kill", round: "_mod", mod: "_mod", initAll: "_onInitAllProps" }, a = _("plugins." + n.charAt(0).toUpperCase() + n.substr(1) + "Plugin", function () { nt.call(this, n, i), this._overwriteProps = r || [] }, !0 === t.global), s = a.prototype = new nt(n); for (e in s.constructor = a, a.API = t.API, o) "function" == typeof t[e] && (s[o[e]] = t[e]); return a.version = t.version, nt.activate([a]), a }, a = t._gsQueue) { for (s = 0; s < a.length; s++)a[s](); for (c in g) g[c].func || t.console.log("GSAP encountered missing dependency: " + c) } return l = !1, I }(a), c = a.com.greensock, u = c.core.SimpleTimeline, l = c.core.Animation, h = a.Ease, f = a.Linear, p = f, d = a.Power1, m = a.Power2, v = a.Power3, g = a.Power4, y = a.TweenPlugin; c.events.EventDispatcher }).call(this, n(138)(t), n(64)) }, function (t, e, n) { var i = n(9), r = n(17), o = n(24), a = n(21), s = n(34), c = "prototype", u = function (t, e, n) { var l, h, f, p, d = t & u.F, m = t & u.G, v = t & u.S, g = t & u.P, y = t & u.B, b = m ? i : v ? i[e] || (i[e] = {}) : (i[e] || {})[c], _ = m ? r : r[e] || (r[e] = {}), x = _[c] || (_[c] = {}); for (l in m && (n = e), n) f = ((h = !d && b && void 0 !== b[l]) ? b : n)[l], p = y && h ? s(f, i) : g && "function" == typeof f ? s(Function.call, f) : f, b && a(b, l, f, t & u.U), _[l] != f && o(_, l, p), g && x[l] != f && (x[l] = f) }; i.core = r, u.F = 1, u.G = 2, u.S = 4, u.P = 8, u.B = 16, u.W = 32, u.U = 64, u.R = 128, t.exports = u }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } var c = Math.round; n.d(e, "a", function () { return h }); var u = n(27), l = n(50), h = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).E = { RESIZE: "resize", RESIZE_FORCED: "resizeforced", WINDOW_OUT: "windowout", WINDOW_IN: "windowin", ORIENTATION_CHANGE: "orientationchange" }, t.eh = {}, t.MOBILE_WIDTH_MAX = 800, t.MOBILE_HEIGHT_MAX = 550, t.PHONE_WIDTH_MAX = 559, t.wW = null, t.wH = null, t.bW = null, t.bH = null, t.cX = null, t.cY = null, t.vR = null, t.pbW = null, t.canResize = !0, t.hasRequestedResize = !1, t.isWindowFocused = !0, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : $(window), e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : $(document.body), n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : e; this._initDOM(t, e, n), this._initEl(), this._bindEvents(), this._resize() } }, { key: "_initDOM", value: function (t, e, n) { this.$window = t, this.$body = e, this.$pageWrap = n } }, { key: "_initEl", value: function () { } }, { key: "_bindEvents", value: function () { this.eh.resize = this._resize.bind(this), this.$window.on("resize", this.eh.resize) } }, { key: "_resize", value: function () { var t = this; this.canResize ? (this._processResize(), this.canResize = !1, setTimeout(function () { t.hasRequestedResize && (t.hasRequestedResize = !1, t._processResize()), t.canResize = !0 }, 300)) : this.hasRequestedResize = !0 } }, { key: "_processResize", value: function () { this._setResizeProps(), this.emit(this.E.RESIZE_FORCED), !1 === l.a.IS_DESKTOP && this.pbW == this.bW || (this.emit(this.E.RESIZE), this.pbW = this.bW) } }, { key: "_setResizeProps", value: function () { this.wW = this.$window.innerWidth(), this.wH = this.$window.innerHeight(), this.bW = this.$body.width(), this.bH = this.$body.height(), this.cX = c(this.bW / 2), this.cY = c(this.wH / 2), this.vR = this.bW / this.wH } }, { key: "_windowOut", value: function () { this.isWindowFocused = !1, this.emit(this.E.WINDOW_OUT) } }, { key: "_windowIn", value: function () { this.isWindowFocused = !0, this.emit(this.E.WINDOW_IN) } }, { key: "setBodyHeight", value: function () { var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : this.$pageWrap.height(); this.bH = t, this.$body[0].style.height = l.a.IS_DESKTOP ? t + "px" : "" } }]), e }()) }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return m }); var c = n(11), u = n(6), l = n(3), h = n(7), f = n(20), p = n(5), d = n(13), m = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).posCoeff = {}, t.dispCoeff = 0, t.x = null, t.y = null, t.prevX = null, t.prevY = null, t.velX = null, t.velY = null, t.xNorm = null, t.yNorm = null, t.canMove = !1, t.ref = {}, t.diff = {}, t.INERTIA = .08, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, c.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initEl", value: function () { this.posCoeff.x = .5, this.posCoeff.y = .5, this.prevX = l.a.bW * this.posCoeff.x, this.prevY = l.a.wH * this.posCoeff.y, this.velX = 0, this.velY = 0, this.xNorm = 0, this.yNorm = 0, this.ref.x = 0, this.ref.y = 0, this.diff.x = 0, this.diff.y = 0 } }, { key: "bindEvents", value: function () { u.a.on(u.a.E.RAF, this.raf, this), h.a.on(h.a.E.MOUSE_DOWN, this._startMoving, this), h.a.on(h.a.E.MOUSE_UP, this._stopMoving, this) } }, { key: "raf", value: function () { this._updatePosition(), this.x = l.a.bW * this.posCoeff.x + .2 * l.a.bW * h.a.xNorm * this.dispCoeff, this.y = l.a.wH * this.posCoeff.y + .2 * l.a.wH * h.a.yNorm * this.dispCoeff, this.velX = p.a.getInertia(this.prevX - this.x, this.velX, this.INERTIA), this.velY = p.a.getInertia(this.prevY - this.y, this.velY, this.INERTIA), this.xNorm = p.a.mapRange(this.x, 0, l.a.bW, -1, 1), this.yNorm = p.a.mapRange(this.y, 0, l.a.wH, -1, 1), this.prevX = this.x, this.prevY = this.y } }, { key: "_startMoving", value: function () { this.canMove || !d.a.canGrab || f.a.active || f.a.isScreenTrans || (this.killTween("reset"), this.ref.x = h.a.x / l.a.bW - this.posCoeff.x, this.ref.y = h.a.y / l.a.wH - this.posCoeff.y, h.a.setPosition(h.a.x, h.a.y), this.tw.dispCoeff = TweenLite.to(this, .3, { dispCoeff: 0, ease: Power2.easeOut }), this.canMove = !0, d.a.state = "grabbing", f.a.display(!1)) } }, { key: "_stopMoving", value: function () { if (this.canMove) { var t = .5 >= this.posCoeff.x ? .25 : .75, e = 2 * Math.hypot(this.posCoeff.x - t, this.posCoeff.y - .5), n = .5 < e ? e : .5; this.tw.dispCoeff = TweenLite.to(this, .3, { dispCoeff: .25, ease: Power2.easeOut }), this.tw.reset = TweenLite.to(this.posCoeff, n, { x: t, y: .5, ease: Power2.easeOut }), this.canMove = !1, d.a.state = "default", f.a.display(!0) } } }, { key: "_updatePosition", value: function () { if (this.canMove) { var t = h.a.x / l.a.bW - this.ref.x, e = h.a.y / l.a.wH - this.ref.y; .14 > t ? t = .14 : .86 < t && (t = .86), e < .14 * l.a.vR ? e = .14 * l.a.vR : e > 1 - .14 * l.a.vR && (e = 1 - .14 * l.a.vR), this.posCoeff.x = p.a.getInertia(t, this.posCoeff.x, this.INERTIA, !0, 1e-5), this.posCoeff.y = p.a.getInertia(e, this.posCoeff.y, this.INERTIA, !0, 1e-5) } } }, { key: "pcX", get: function () { return this.posCoeff.x } }, { key: "pcY", get: function () { return this.posCoeff.y } }]), e }()) }, function (t, e, n) { "use strict"; function i(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } var r = Math.PI, o = Math.round; n.d(e, "a", function () { return a }); var a = function () { function t() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t) } return function (t, e, n) { e && i(t.prototype, e), n && i(t, n) }(t, null, [{ key: "getElPos", value: function (t, e, n, i) { var r = t / e, a = { x: 0, y: 0, w: 0, h: 0 }; return r < n / i ? (a.w = n, a.h = o(a.w / r), a.y = o(-(a.h - i) / 2)) : (a.h = i, a.w = o(a.h * r), a.x = o(-(a.w - n) / 2)), a } }, { key: "getCropPos", value: function (t, e, n, i) { var r = n / i, a = { x: 0, y: 0, w: 0, h: 0 }; return t / e < r ? (a.w = t, a.h = o(a.w / r), a.y = o(-(a.h - e) / 2)) : (a.h = e, a.w = o(a.h * r), a.x = o(-(a.w - t) / 2)), a } }, { key: "degToRad", value: function (t) { return t * r / 180 } }, { key: "radToDeg", value: function (t) { return 180 * t / r } }, { key: "getHypotenuse", value: function (t, e) { return Math.sqrt(t * t + e * e) } }, { key: "getInertia", value: function (t, e, n) { var i = !(3 < arguments.length && void 0 !== arguments[3]) || arguments[3], r = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : .01; return e += !i || i && Math.abs((t - e) * n) >= r ? (t - e) * n : t - e } }, { key: "mapRange", value: function (t, e, n, i, r) { return i + (t - e) * (r - i) / (n - e) } }, { key: "clamp", value: function (t, e, n) { return Math.min(Math.max(t, e), n) } }]), t }() }, function (t, e, n) { "use strict"; function i(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function r(t) { return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function o(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function a(t, e) { return !e || "object" !== r(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function u(t) { return (u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function l(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function h(t, e) { return !e || "object" !== u(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function f(t) { return (f = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function p(t, e) { return (p = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } var d = n(27), m = n(50), v = n(3), g = n(5), y = new (function () { function t() { (function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") })(this, t), this.eh = {}, this.y = null, this.yI = null, this.SCROLL_INERTIA = .09, this._needUpdate = !0 } return function (t, e, n) { e && i(t.prototype, e), n && i(t, n) }(t, [{ key: "init", value: function () { var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : $(window); this._initDOM(t), this._initEl(), this._bindEvents(), this._disableScrollRestoration() } }, { key: "_initDOM", value: function (t) { this.$window = t } }, { key: "_initEl", value: function () { } }, { key: "_bindEvents", value: function () { M.on(M.E.RAF, this._raf, this) } }, { key: "_disableScrollRestoration", value: function () { "scrollRestoration" in history && (history.scrollRestoration = "manual") } }, { key: "_raf", value: function () { this._needUpdate && (this.y = this.$window[0].scrollY || this.$window[0].pageYOffset, this.yI = g.a.getInertia(this.y, this.yI, this.SCROLL_INERTIA)) } }, { key: "setScrollY", value: function (t) { this.y = t, this.yI = t, this.$window[0].scrollTo(0, t) } }, { key: "needUpdate", set: function (t) { this._needUpdate = t } }]), t }()), b = n(7), _ = n(11), x = n(13), w = new (function (t) { function e() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), a(this, s(e).call(this)) } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, _.a), function (t, e, n) { e && o(t.prototype, e), n && o(t, n) }(e, [{ key: "initDOM", value: function () { this.$header = $(document.getElementById("header")), this.$logo = $(document.getElementById("main-logo")), this.$lgLink = this.$header.find(".lang-item-link ") } }, { key: "initEl", value: function () { } }, { key: "bindEvents", value: function () { this.eh.hoverLink = x.a.manageHoverState.bind(x.a, !0), this.$logo.on("mouseenter", this.eh.hoverLink), this.$lgLink.on("mouseenter", this.eh.hoverLink), this.eh.leaveLink = x.a.manageHoverState.bind(x.a, !1), this.$logo.on("mouseleave", this.eh.leaveLink), this.$lgLink.on("mouseleave", this.eh.leaveLink) } }, { key: "resize", value: function () { } }, { key: "_manageCursor", value: function (t) { t ? Main.$mainCont[0].classList.add("link-hovered") : Main.$mainCont[0].classList.remove("link-hovered") } }]), e }()), T = n(33), S = n(0); n.d(e, "a", function () { return M }); var M = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = h(this, f(e).call(this))).E = { RAF: "raf" }, t.INERTIA = .09, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && p(t, e) }(e, d.a), function (t, e, n) { e && l(t.prototype, e), n && l(t, n) }(e, [{ key: "init", value: function () { this.initDOM(), this.initEl(), this.bindEvents(), this.initStaticViews(), this._resize() } }, { key: "initDOM", value: function () { this.$window = $(window), this.$html = $("html"), this.$body = $(document.body), this.$mainCont = $(document.getElementById("main-container")), this.$pageWrap = $(document.getElementById("lesanimals-page-wrapper")) } }, { key: "initEl", value: function () { v.a.init(this.$window, this.$body, this.$pageWrap), y.init(this.$window), b.a.init(this.$window, v.a.cX, v.a.cY), m.a.init(this.$html) } }, { key: "bindEvents", value: function () { v.a.on(v.a.E.RESIZE, this._resize, this), TweenLite.ticker.addEventListener("tick", this._raf, this) } }, { key: "initStaticViews", value: function () { w.init(), T.a.init(), S.a.init() } }, { key: "_resize", value: function () { this.INERTIA = m.a.IS_DESKTOP ? .09 : .15 } }, { key: "_raf", value: function () { this.emit(this.E.RAF) } }]), e }()) }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } var c = Math.round; n.d(e, "a", function () { return p }); var u = n(27), l = n(6), h = n(3), f = n(5), p = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).E = { MOUSE_MOVE: "mousemove", MOUSE_DOWN: "mousedown", MOUSE_UP: "mouseup" }, t.eh = {}, t.x = null, t.y = null, t.xI = null, t.yI = null, t.prevX = null, t.prevY = null, t.velX = null, t.velY = null, t.xNorm = null, t.yNorm = null, t.MOUSE_INERTIA = .08, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : $(window), e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : c(t.width() / 2), n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : c(t.height() / 2); this._initDOM(t), this._initEl(e, n), this._bindEvents() } }, { key: "_initDOM", value: function (t) { this.$window = t } }, { key: "_initEl", value: function (t, e) { this.setPosition(t, e), this.prevX = t, this.prevY = e, this.velX = 0, this.velY = 0, this.xNorm = 0, this.yNorm = 0 } }, { key: "_bindEvents", value: function () { l.a.on(l.a.E.RAF, this._raf, this), this.eh.mouseMove = this._mouseMove.bind(this), this.$window.on("mousemove", this.eh.mouseMove), this.eh.mouseDown = this._mouseDown.bind(this), this.$window.on("mousedown", this.eh.mouseDown), this.eh.mouseUp = this._mouseUp.bind(this), this.$window.on("mouseup", this.eh.mouseUp) } }, { key: "_raf", value: function () { this.xI = f.a.getInertia(this.x, this.xI, this.MOUSE_INERTIA), this.yI = f.a.getInertia(this.y, this.yI, this.MOUSE_INERTIA), this.velX = f.a.getInertia(this.prevX - this.x, this.velX, this.MOUSE_INERTIA), this.velY = f.a.getInertia(this.prevY - this.y, this.velY, this.MOUSE_INERTIA), this.xNorm = (p.xI - h.a.cX) / h.a.cX, this.yNorm = (p.yI - h.a.cY) / h.a.cY, this.prevX = this.x, this.prevY = this.y } }, { key: "_mouseMove", value: function (t) { this.x = t.clientX, this.y = t.clientY, this.emit(this.E.MOUSE_MOVE) } }, { key: "_mouseDown", value: function () { this.emit(this.E.MOUSE_DOWN) } }, { key: "_mouseUp", value: function () { this.emit(this.E.MOUSE_UP) } }, { key: "setPosition", value: function (t, e) { this.x = t, this.y = e, this.xI = t, this.yI = e } }]), e }()) }, function (t) { t.exports = function (t) { try { return !!t() } catch (t) { return !0 } } }, function (t) { var e = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = e) }, function (t) { t.exports = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return u }); var c = n(27), u = (n(5), function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).eh = {}, t.tw = {}, t.tl = {}, t.sto = {}, t.si = {}, t.sY = 0, t.prevSY = 0, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, c.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { this.initDOM(), this.initEl(), this.initTl(), this.bindEvents(), this.resize() } }, { key: "initDOM", value: function () { } }, { key: "initEl", value: function () { } }, { key: "initTl", value: function () { } }, { key: "bindEvents", value: function () { } }, { key: "unbindEvents", value: function () { } }, { key: "show", value: function () { } }, { key: "hide", value: function () { } }, { key: "resize", value: function () { } }, { key: "raf", value: function () { } }, { key: "destroy", value: function () { this.unbindEvents(), this.destroyGSAP(), this.destroyTimer() } }, { key: "destroyGSAP", value: function () { for (var t in this.tw) this.killTween(t); for (var e in this.tl) this.killTimeline(e); this.tl = {}, this.tw = {} } }, { key: "killTween", value: function (t) { this.tw[t] && (this.tw[t].kill(), this.tw[t] = null) } }, { key: "killTimeline", value: function (t) { this.tl[t] && (this.tl[t].stop(), this.tl[t].clear(), this.tl[t].kill(), this.tl[t] = null) } }, { key: "destroyTimer", value: function () { for (var t in this.sto) clearTimeout(this.sto[t]); for (var e in this.si) clearInterval(this.si[e]) } }]), e }()) }, function (t, e, n) { var i = n(10); t.exports = function (t) { if (!i(t)) throw TypeError(t + " is not an object!"); return t } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return f }); var c = n(11), u = n(6), l = n(7), h = n(0), f = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).canRaf = !1, t.canGrab = !1, t.state = null, t.screenId = 0, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, c.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initDOM", value: function () { this.$cursor = $(document.getElementById("cursor")), this.$pointerWrap = this.$cursor.find(".cursor-pointer-wrapper"), this.$pointer = this.$pointerWrap.find(".cursor-pointer") } }, { key: "initEl", value: function () { this.state = "default", this.tw.pointer = TweenLite.set(this.$pointerWrap, { x: l.a.x, y: l.a.y }), u.a.$body[0].classList.add("custom-cursor") } }, { key: "bindEvents", value: function () { u.a.on(u.a.E.RAF, this.raf, this) } }, { key: "raf", value: function () { this.tw.pointer = TweenLite.to(this.$pointerWrap, .3, { x: l.a.x, y: l.a.y, ease: Power2.easeOut, force3D: !0 }), this.canRaf && "grabbing" != this.state && this._setState() } }, { key: "_setState", value: function () { var t, e, n, i; 1 == this.screenId ? (t = .5 * (h.a.squarePts.x1 + h.a.squarePts.x4), e = .5 * (h.a.squarePts.x2 + h.a.squarePts.x3), n = .5 * (h.a.squarePts.y1 + h.a.squarePts.y2), i = .5 * (h.a.squarePts.y3 + h.a.squarePts.y4)) : 2 == this.screenId ? (t = .5 * (h.a.squarePts.x1 + h.a.squarePts.x2), e = .5 * (h.a.squarePts.x3 + h.a.squarePts.x4), n = .5 * (h.a.squarePts.y2 + h.a.squarePts.y3), i = .5 * (h.a.squarePts.y4 + h.a.squarePts.y1)) : 3 == this.screenId && (t = .5 * (h.a.squarePts.x2 + h.a.squarePts.x3), e = .5 * (h.a.squarePts.x4 + h.a.squarePts.x1), n = .5 * (h.a.squarePts.y3 + h.a.squarePts.y4), i = .5 * (h.a.squarePts.y1 + h.a.squarePts.y2)), l.a.x >= t && l.a.x <= e && l.a.y >= n && l.a.y <= i && "hover" != this.state ? (this.state = "hover", this.canGrab = !0, h.a.hoverSquare()) : (l.a.x < t || l.a.x > e || l.a.y < n || l.a.y > i) && "default" != this.state && (this.state = "default", this.canGrab = !1, h.a.leaveSquare()) } }, { key: "manageCursorClassName", value: function (t) { "default" == t ? (this.$cursor[0].classList.remove("grab"), this.$cursor[0].classList.remove("grabbing")) : "hover" == t ? (this.$cursor[0].classList.add("grab"), this.$cursor[0].classList.remove("grabbing")) : "grabbing" == t && (this.$cursor[0].classList.remove("grab"), this.$cursor[0].classList.add("grabbing")) } }, { key: "displayLoader", value: function (t) { t ? this.$cursor[0].classList.add("loading") : this.$cursor[0].classList.remove("loading") } }, { key: "manageHoverState", value: function (t) { t ? this.$cursor[0].classList.add("link-hovered") : this.$cursor[0].classList.remove("link-hovered") } }, { key: "screenId", set: function (t) { this._screenId = t }, get: function () { return this._screenId } }, { key: "state", set: function (t) { this.manageCursorClassName(t), this._state = t }, get: function () { return this._state } }, { key: "canGrab", set: function (t) { this._canGrab = t }, get: function () { return this._canGrab } }, { key: "canRaf", set: function (t) { this._canRaf = t }, get: function () { return this._canRaf } }, { key: "active", get: function () { return "grabbing" == this.state } }]), e }()) }, function (t, e, n) { var i = n(77)("wks"), r = n(43), o = n(9).Symbol, a = "function" == typeof o; (t.exports = function (t) { return i[t] || (i[t] = a && o[t] || (a ? o : r)("Symbol." + t)) }).store = i }, function (t, e, n) { var i = n(12), r = n(103), o = n(40), a = Object.defineProperty; e.f = n(16) ? Object.defineProperty : function (t, e, n) { if (i(t), e = o(e, !0), i(n), r) try { return a(t, e, n) } catch (e) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported!"); return "value" in n && (t[e] = n.value), t } }, function (t, e, n) { t.exports = !n(8)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (t) { var e = t.exports = { version: "2.5.7" }; "number" == typeof __e && (__e = e) }, function (t, e, n) { var i = n(38), r = Math.min; t.exports = function (t) { return 0 < t ? r(i(t), 9007199254740991) : 0 } }, function (t, e, n) { "use strict"; (function (t) { function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return g }); var u = n(51), l = n(11), h = n(6), f = n(3), p = (n(7), n(4)), d = n(132), m = n(134), v = n(135); n(5); t.THREE = u; var g = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, s(e).call(this))).threeScene = null, t.camera = null, t.cameraTg = null, t.renderer = null, t.scene1 = null, t.scene2 = null, t.scene3 = null, t.canRaf = !1, t.camCoeff = {}, t.activeCamCoeff = null, t.HAS_WEBGL = t._hasWebGL(), t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, l.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { this.HAS_WEBGL ? a(s(e.prototype), "init", this).call(this) : (this.initDOM(), this._displayNoWebGLMessage()) } }, { key: "initDOM", value: function () { this.$webGLCont = $(document.getElementById("webgl-container")), this.$noWebGL = $(document.getElementById("no-webgl")), this.$noWebGLTitle = this.$noWebGL.find(".no-webgl-title"), this.$noWebGLDesc = this.$noWebGL.find(".no-webgl-desc") } }, { key: "initEl", value: function () { this.camCoeff = { scene1: { x: 3, y: -3 }, scene2: { x: .25, y: -.25 }, scene3: { x: 1, y: -1 } }, this.activeCamCoeff = this.camCoeff.scene1, this._initScene(), this.scene1 = new d.a(this, "scene-1"), this.scene2 = new m.a(this, "scene-2"), this.scene3 = new v.a(this, "scene-3") } }, { key: "bindEvents", value: function () { h.a.on(h.a.E.RAF, this.raf, this), f.a.on(f.a.E.RESIZE, this.resize, this) } }, { key: "_initScene", value: function () { this.threeScene = new u.Scene, this.camera = new u.PerspectiveCamera(27.5, f.a.bW / f.a.wH, .1, 2e3), this.camera.position.set(0, 0, 0), this.cameraTg = new u.Vector3(0, 0, -35), this.camera.lookAt(this.cameraTg), this.renderer = new u.WebGLRenderer({ antialias: !0, alpha: !0 }), this.renderer.setSize(f.a.bW, f.a.wH), this.$webGLCont[0].appendChild(this.renderer.domElement) } }, { key: "resize", value: function () { this.camera.aspect = f.a.bW / f.a.wH, this.camera.updateProjectionMatrix(), this.renderer.setSize(f.a.bW, f.a.wH) } }, { key: "raf", value: function () { this.canRaf && (this._moveCamera(), this.renderer.render(this.threeScene, this.camera)) } }, { key: "_moveCamera", value: function () { var t = p.a.xNorm * this.activeCamCoeff.x, e = p.a.yNorm * (this.activeCamCoeff.y / f.a.bW * f.a.wH); this._setCamera({ x: t, y: e, z: 0 }) } }, { key: "_setCamera", value: function (t) { this.camera.position.set(t.x, t.y, t.z), this._updateCameraPos() } }, { key: "updateCameraCoeff", value: function (t) { this.activeCamCoeff = this.camCoeff["scene".concat(t)] } }, { key: "add", value: function (t) { null !== t && this.threeScene.add(t) } }, { key: "remove", value: function (t) { var e = this; t && t.scene && this.threeScene.remove(t.scene), t.scene.traverse(function (t) { "Mesh" == t.type && (e.disposeGeometry(t.geometry), e.disposeMaterial(t.material), e.disposeTexture(t.texture)) }) } }, { key: "disposeGeometry", value: function (t) { t && t.dispose() } }, { key: "disposeMaterial", value: function (t) { t && t.dispose() } }, { key: "disposeTexture", value: function (t) { t && t.dispose() } }, { key: "_updateCameraPos", value: function () { this.camera.lookAt(this.cameraTg) } }, { key: "_hasWebGL", value: function () { var t = document.createElement("canvas"); return !(!window.WebGLRenderingContext || !t.getContext("webgl") && !t.getContext("experimental-webgl")) } }, { key: "_displayNoWebGLMessage", value: function () { h.a.$body[0].classList.add("no-webgl"); var t = new SplitText(this.$noWebGLTitle, { type: "words,chars" }).chars; this.tl.nowebgl = new TimelineLite, this.tl.nowebgl.set(this.$noWebGL, { display: "block" }, 0), this.tl.nowebgl.staggerFrom(t, .8, { opacity: 0, x: 15, y: 8, scale: 0, rotation: 10, ease: Back.easeOut }, .015, 5.3), this.tl.nowebgl.fromTo(this.$noWebGLDesc, 1.5, { y: 20 }, { y: 0, ease: Power3.easeOut }, 5.8), this.tl.nowebgl.fromTo(this.$noWebGLDesc, 1.5, { opacity: 0 }, { opacity: 1, ease: Power1.easeOut }, 5.8), this.tl.nowebgl.play(0) } }, { key: "canRaf", set: function (t) { this._canRaf = t }, get: function () { return this._canRaf } }]), e }()) }).call(this, n(64)) }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return h }); var c = n(11), u = n(6), l = n(13), h = (n(33), new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, a(e).call(this))).E = { GO_TO_NEXT_SCREEN: "gotonextscreen" }, t.isTrans = !0, t.isScreenTrans = !0, t.isProgressUpdated = !1, t.screenId = 0, t.navByClick = !1, t.progress = 0, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, c.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initDOM", value: function () { this.$spacebar = $(document.getElementById("spacebar")), this.$txtCont = this.$spacebar.find(".spacebar-txt-container"), this.$txtMask = this.$spacebar.find(".spacebar-txt-hover-mask"), this.$txtHover = this.$spacebar.find(".spacebar-txt-hover"), this.$actionCont = this.$spacebar.find(".spacebar-txt-action-container"), this.$action = this.$actionCont.find(".spacebar-txt-action") } }, { key: "initTl", value: function () { this.tl.show = new TimelineLite({ paused: !0, onStart: this._onShowStart, callbackScope: this }), this.tl.show.set(this.$txtCont, { display: "block" }, 0), this.tl.show.set(this.$txtMask, { xPercent: -100 }, 0), this.tl.show.set(this.$txtHover, { xPercent: 100 }, 0), this.tl.show.fromTo(this.$spacebar, 1.5, { y: 50 }, { y: 0, ease: Power3.easeOut }, 0), this.tl.show.fromTo(this.$spacebar, 1.5, { opacity: 0 }, { opacity: 1, ease: Power1.easeOut }, 0), this.tl.show.fromTo(this.$actionCont, 2, { y: 30 }, { y: 0, ease: Power3.easeOut }, 0), this.tl.show.fromTo(this.$actionCont, 2, { opacity: 0 }, { opacity: .3, ease: Power1.easeOut }, 0), this.tl.show.call(this._allowTransition, null, this, 1), this.tl.hide = new TimelineLite({ paused: !0 }), this.tl.hide.to(this.$spacebar, 1, { scale: 1.2, ease: Power3.easeOut }, 0), this.tl.hide.to(this.$spacebar, 1, { opacity: 0, ease: Power2.easeOut }, 0), this.tl.hide.set(this.$spacebar, { y: 50, scale: 1 }, 2), this.tl.hide.set(this.$txtMask, { xPercent: -100 }, 2), this.tl.hide.set(this.$txtHover, { xPercent: 100 }, 2) } }, { key: "_onShowStart", value: function () { 0 == this.screenId ? this.$action[0].classList.add("active") : 1 == this.screenId ? (this.$action[0].classList.remove("active"), this.$action[1].classList.add("active")) : 3 == this.screenId && (this.$action[1].classList.remove("active"), this.$action[2].classList.add("active")) } }, { key: "_allowTransition", value: function () { this.isTrans = !1 } }, { key: "bindEvents", value: function () { this.eh.keydown = this._manageNavigation.bind(this), u.a.$window.on("keydown", this.eh.keydown), this.eh.keyup = this._resetProgress.bind(this), u.a.$window.on("keyup", this.eh.keyup), this.eh.mousedown = this._manageNavigationByClick.bind(this), this.$txtCont.on("mousedown", this.eh.mousedown), this.eh.mouseup = this._resetProgress.bind(this), u.a.$mainCont.on("mouseup", this.eh.mouseup) } }, { key: "show", value: function (t) { var e = this; this.sto.show = setTimeout(function () { e.tl.show.play(0) }, 1e3 * t) } }, { key: "hide", value: function () { this.isTrans = !0, this.tl.hide.play(0) } }, { key: "_manageNavigation", value: function (t) { 32 != t.keyCode || this.isTrans || this.isProgressUpdated || this.isScreenTrans || l.a.active || (this.navByClick = !1, this.isProgressUpdated = !0, this._launchProgress()) } }, { key: "_manageNavigationByClick", value: function () { this.isTrans || this.isProgressUpdated || this.isScreenTrans || l.a.active || (this.navByClick = !0, this.isProgressUpdated = !0, this._launchProgress()) } }, { key: "_launchProgress", value: function () { this.tl.progress = new TimelineLite({ onUpdate: this._onProgressUpdate, onComplete: this._onProgressComplete, callbackScope: this }), this.tl.progress.to(this, 1, { progress: 1, ease: Linear.easeInOut }) } }, { key: "_resetProgress", value: function (t) { 32 != t.keyCode && !this.navByClick || this.isTrans || this.isScreenTrans || (this.killTimeline("progress"), this.navByClick = !1, this.isProgressUpdated = !1, this.tl.reset = new TimelineLite({ onUpdate: this._onProgressUpdate, callbackScope: this }), this.tl.reset.to(this, .3, { progress: 0, ease: Power2.easeOut })) } }, { key: "_onProgressUpdate", value: function () { var t = 100 * this.progress; this.tw.txt = TweenLite.set(this.$txtMask, { xPercent: -100 + t }), this.tw.txt = TweenLite.set(this.$txtHover, { xPercent: 100 - t }) } }, { key: "_onProgressComplete", value: function () { this.isScreenTrans = !0, this.navByClick = !1, this.isProgressUpdated = !1, this.progress = 0, this.hide(), this.screenId++, this.emit(this.E.GO_TO_NEXT_SCREEN, this.screenId) } }, { key: "display", value: function (t) { t ? this.$txtCont[0].classList.remove("hide") : this.$txtCont[0].classList.add("hide") } }, { key: "isScreenTrans", set: function (t) { this._isScreenTrans = t }, get: function () { return this._isScreenTrans } }, { key: "screenId", set: function (t) { this._screenId = t }, get: function () { return this._screenId } }, { key: "active", get: function () { return this.isProgressUpdated } }]), e }())) }, function (t, e, n) { var i = n(9), r = n(24), o = n(23), a = n(43)("src"), s = "toString", c = Function[s], u = ("" + c).split(s); n(17).inspectSource = function (t) { return c.call(t) }, (t.exports = function (t, e, n, s) { var c = "function" == typeof n; c && (o(n, "name") || r(n, "name", e)), t[e] === n || (c && (o(n, a) || r(n, a, t[e] ? "" + t[e] : u.join(e + ""))), t === i ? t[e] = n : s ? t[e] ? t[e] = n : r(t, e, n) : (delete t[e], r(t, e, n))) })(Function.prototype, s, function () { return "function" == typeof this && this[a] || c.call(this) }) }, function (t, e, n) { var i = n(2), r = n(8), o = n(37), a = /"/g, s = function (t, e, n, i) { var r = o(t) + "", s = "<" + e; return "" !== n && (s += " " + n + '="' + (i + "").replace(a, "&quot;") + '"'), s + ">" + r + "</" + e + ">" }; t.exports = function (t, e) { var n = {}; n[t] = e(s), i(i.P + i.F * r(function () { var e = ""[t]('"'); return e !== e.toLowerCase() || 3 < e.split('"').length }), "String", n) } }, function (t) { var e = {}.hasOwnProperty; t.exports = function (t, n) { return e.call(t, n) } }, function (t, e, n) { var i = n(15), r = n(42); t.exports = n(16) ? function (t, e, n) { return i.f(t, e, r(1, n)) } : function (t, e, n) { return t[e] = n, t } }, function (t, e, n) { var i = n(61), r = n(37); t.exports = function (t) { return i(r(t)) } }, function (t, e, n) { var i = n(37); t.exports = function (t) { return Object(i(t)) } }, function (t, e, n) { "use strict"; function i(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } n.d(e, "a", function () { return o }); var r = n(307), o = function () { function t() { (function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") })(this, t), this.e = null, this.E = {} } return function (t, e, n) { e && i(t.prototype, e), n && i(t, n) }(t, [{ key: "on", value: function (t, e, n) { null === this.e && (this.e = new r), this.e.on(t, e, n) } }, { key: "off", value: function (t, e, n) { this.e.removeListener(t, e, n) } }, { key: "emit", value: function (t, e) { null !== this.e && this.e.emit(t, e) } }]), t }() }, function (t, e, n) { "use strict"; var i = n(8); t.exports = function (t, e) { return !!t && i(function () { e ? t.call(null, function () { }, 1) : t.call(null) }) } }, function (t, e, n) { var i = n(62), r = n(42), o = n(25), a = n(40), s = n(23), c = n(103), u = Object.getOwnPropertyDescriptor; e.f = n(16) ? u : function (t, e) { if (t = o(t), e = a(e, !0), c) try { return u(t, e) } catch (e) { } return s(t, e) ? r(!i.f.call(t, e), t[e]) : void 0 } }, function (t, e, n) { var i = n(2), r = n(17), o = n(8); t.exports = function (t, e) { var n = (r.Object || {})[t] || Object[t], a = {}; a[t] = e(n), i(i.S + i.F * o(function () { n(1) }), "Object", a) } }, function (t, e, n) { var i = n(34), r = n(61), o = n(26), a = n(18), s = n(234); t.exports = function (t, e) { var n = 1 == t, c = 4 == t, u = 6 == t, l = e || s; return function (e, s, h) { for (var f, p, d = o(e), m = r(d), v = i(s, h, 3), g = a(m.length), y = 0, b = n ? l(e, g) : 2 == t ? l(e, 0) : void 0; g > y; y++)if ((5 == t || u || y in m) && (p = v(f = m[y], y, d), t)) if (n) b[y] = p; else if (p) switch (t) { case 3: return !0; case 5: return f; case 6: return y; case 2: b.push(f) } else if (c) return !1; return u ? -1 : 3 == t || c ? c : b } } }, function (t, e, n) { "use strict"; function i() { return new function () { var t = this; this.resolve = null, this.reject = null, this.promise = new Promise(function (e, n) { t.resolve = e, t.reject = n }) } } function o(t, e, n) { if ("number" != typeof t || -1 > t || 1 < t || "string" != typeof e || "r" !== e[0] && "#" !== e[0] || "string" != typeof n && void 0 !== n) return null; var i = parseInt, r = Math.round, o = 9 < e.length, s = 0 > t, c = s ? -1 * t : t, u = n && "c" !== n ? n : s ? "#000000" : "#FFFFFF", l = a(e, i), h = a(u, i); return o = "string" == typeof u ? !!(9 < u.length) || "c" === u && !o : o, l && h ? o ? "rgb(" + r((h[0] - l[0]) * c + l[0]) + "," + r((h[1] - l[1]) * c + l[1]) + "," + r((h[2] - l[2]) * c + l[2]) + (0 > l[3] && 0 > h[3] ? ")" : "," + (-1 < l[3] && -1 < h[3] ? r(1e4 * ((h[3] - l[3]) * c + l[3])) / 1e4 : 0 > h[3] ? l[3] : h[3]) + ")") : "#" + (4294967296 + 16777216 * (-1 < l[3] && -1 < h[3] ? r(255 * ((h[3] - l[3]) * c + l[3])) : -1 < h[3] ? r(255 * h[3]) : -1 < l[3] ? r(255 * l[3]) : 255) + 65536 * r((h[0] - l[0]) * c + l[0]) + 256 * r((h[1] - l[1]) * c + l[1]) + r((h[2] - l[2]) * c + l[2])).toString(16).slice(-1 < l[3] || -1 < h[3] ? 1 : 3) : null } function a(t, e) { var n = t.length, i = {}; if (9 < n) { if (3 > (t = t.split(",")).length || 4 < t.length) return null; i[0] = e(t[0].slice(4)), i[1] = e(t[1]), i[2] = e(t[2]), i[3] = t[3] ? parseFloat(t[3]) : -1 } else { if (8 === n || 6 === n || 4 > n) return null; 6 > n && (t = "#" + t[1] + t[1] + t[2] + t[2] + t[3] + t[3] + (4 < n ? t[4] + "" + t[4] : "")), t = e(t.slice(1), 16), i[0] = 255 & t >> 16, i[1] = 255 & t >> 8, i[2] = 255 & t, i[3] = 9 == n || 5 == n ? r((255 & t >> 24) / 255 * 1e4) / 1e4 : -1 } return i } n.d(e, "a", function () { return i }), n.d(e, "c", function () { return o }), n.d(e, "b", function () { return s }); var s = { OutQuad: function (t) { return t * (2 - t) } } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return l }); var c = n(11), u = n(13), l = new (function (t) { function e() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), o(this, a(e).call(this)) } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, c.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initDOM", value: function () { this.$footer = $(document.getElementById("footer")), this.$progression = $(document.getElementById("progression")), this.$nb = this.$progression.find(".prog-nb"), this.$linksCont = this.$footer.find(".footer-links-container"), this.$link = this.$linksCont.find(".footer-link") } }, { key: "initEl", value: function () { } }, { key: "bindEvents", value: function () { this.eh.hoverLink = u.a.manageHoverState.bind(u.a, !0), this.$link.on("mouseenter", this.eh.hoverLink), this.eh.leaveLink = u.a.manageHoverState.bind(u.a, !1), this.$link.on("mouseleave", this.eh.leaveLink) } }, { key: "show", value: function () { var t = this; this.sto.show = setTimeout(function () { t.$progression[0].classList.remove("hide") }, 3200) } }, { key: "updateProgression", value: function (t, e) { var n = this.$nb[t - 1], i = this.$nb[t]; this.sto.progression = setTimeout(function () { n.classList.add("hide"), n.classList.remove("show"), i.classList.add("show") }, 1e3 * e) } }, { key: "showLinks", value: function () { var t = new SplitText(this.$link, { type: "chars" }).chars; this.tl.show = new TimelineLite, this.tl.show.set(this.$linksCont, { display: "flex" }, 0), this.tl.show.staggerFrom(t, .8, { opacity: 0, x: 10, y: 5, scale: 0, rotation: 10, ease: Back.easeOut }, .015, 3.5) } }]), e }()) }, function (t, e, n) { var i = n(35); t.exports = function (t, e, n) { return i(t), void 0 === e ? t : 1 === n ? function (n) { return t.call(e, n) } : 2 === n ? function (n, i) { return t.call(e, n, i) } : 3 === n ? function (n, i, r) { return t.call(e, n, i, r) } : function () { return t.apply(e, arguments) } } }, function (t) { t.exports = function (t) { if ("function" != typeof t) throw TypeError(t + " is not a function!"); return t } }, function (t) { var e = {}.toString; t.exports = function (t) { return e.call(t).slice(8, -1) } }, function (t) { t.exports = function (t) { if (void 0 == t) throw TypeError("Can't call method on  " + t); return t } }, function (t) { var e = Math.ceil, n = Math.floor; t.exports = function (t) { return isNaN(t = +t) ? 0 : (0 < t ? n : e)(t) } }, function (t, e, n) { "use strict"; if (n(16)) { var i = n(44), r = n(9), o = n(8), a = n(2), s = n(75), c = n(100), u = n(34), l = n(56), h = n(42), f = n(24), p = n(57), d = n(38), m = n(18), v = n(128), g = n(46), y = n(40), b = n(23), _ = n(67), x = n(10), w = n(26), T = n(93), S = n(47), M = n(49), P = n(48).f, E = n(95), A = n(43), C = n(14), L = n(31), R = n(65), O = n(72), I = n(97), D = n(53), G = n(69), B = n(55), k = n(96), N = n(120), H = n(15), F = n(29), U = H.f, z = F.f, j = r.RangeError, V = r.TypeError, W = r.Uint8Array, X = "ArrayBuffer", q = "Shared" + X, Y = "BYTES_PER_ELEMENT", $ = "prototype", Z = Array[$], K = c.ArrayBuffer, J = c.DataView, Q = L(0), tt = L(2), et = L(3), nt = L(4), it = L(5), rt = L(6), ot = R(!0), at = R(!1), st = I.values, ct = I.keys, ut = I.entries, lt = Z.lastIndexOf, ht = Z.reduce, ft = Z.reduceRight, pt = Z.join, dt = Z.sort, mt = Z.slice, vt = Z.toString, gt = Z.toLocaleString, yt = C("iterator"), bt = C("toStringTag"), _t = A("typed_constructor"), xt = A("def_constructor"), wt = s.CONSTR, Tt = s.TYPED, St = s.VIEW, Mt = "Wrong length!", Pt = L(1, function (t, e) { return Rt(O(t, t[xt]), e) }), Et = o(function () { return 1 === new W(new Uint16Array([1]).buffer)[0] }), At = !!W && !!W[$].set && o(function () { new W(1).set({}) }), Ct = function (t, e) { var n = d(t); if (0 > n || n % e) throw j("Wrong offset!"); return n }, Lt = function (t) { if (x(t) && Tt in t) return t; throw V(t + " is not a typed array!") }, Rt = function (t, e) { if (!(x(t) && _t in t)) throw V("It is not a typed array constructor!"); return new t(e) }, Ot = function (t, e) { return It(O(t, t[xt]), e) }, It = function (t, e) { for (var n = 0, i = e.length, r = Rt(t, i); i > n;)r[n] = e[n++]; return r }, Dt = function (t, e, n) { U(t, e, { get: function () { return this._d[n] } }) }, Gt = function (t) { var e, n, i, r, o, a, s = w(t), c = arguments.length, l = 1 < c ? arguments[1] : void 0, h = void 0 !== l, f = E(s); if (void 0 != f && !T(f)) { for (a = f.call(s), i = [], e = 0; !(o = a.next()).done; e++)i.push(o.value); s = i } for (h && 2 < c && (l = u(l, arguments[2], 2)), e = 0, n = m(s.length), r = Rt(this, n); n > e; e++)r[e] = h ? l(s[e], e) : s[e]; return r }, Bt = function () { for (var t = 0, e = arguments.length, n = Rt(this, e); e > t;)n[t] = arguments[t++]; return n }, kt = !!W && o(function () { gt.call(new W(1)) }), Nt = function () { return gt.apply(kt ? mt.call(Lt(this)) : Lt(this), arguments) }, Ht = { copyWithin: function (t, e) { return N.call(Lt(this), t, e, 2 < arguments.length ? arguments[2] : void 0) }, every: function (t) { return nt(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, fill: function () { return k.apply(Lt(this), arguments) }, filter: function (t) { return Ot(this, tt(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0)) }, find: function (t) { return it(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, findIndex: function (t) { return rt(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, forEach: function (t) { Q(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, indexOf: function (t) { return at(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, includes: function (t) { return ot(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, join: function () { return pt.apply(Lt(this), arguments) }, lastIndexOf: function () { return lt.apply(Lt(this), arguments) }, map: function (t) { return Pt(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, reduce: function () { return ht.apply(Lt(this), arguments) }, reduceRight: function () { return ft.apply(Lt(this), arguments) }, reverse: function () { for (var t, e = this, n = Lt(e).length, i = Math.floor(n / 2), r = 0; r < i;)t = e[r], e[r++] = e[--n], e[n] = t; return e }, some: function (t) { return et(Lt(this), t, 1 < arguments.length ? arguments[1] : void 0) }, sort: function (t) { return dt.call(Lt(this), t) }, subarray: function (t, e) { var n = Lt(this), i = n.length, r = g(t, i); return new (O(n, n[xt]))(n.buffer, n.byteOffset + r * n.BYTES_PER_ELEMENT, m((void 0 === e ? i : g(e, i)) - r)) } }, Ft = function (t, e) { return Ot(this, mt.call(Lt(this), t, e)) }, Ut = function (t) { Lt(this); var e = Ct(arguments[1], 1), n = this.length, i = w(t), r = m(i.length), o = 0; if (r + e > n) throw j(Mt); for (; o < r;)this[e + o] = i[o++] }, zt = { entries: function () { return ut.call(Lt(this)) }, keys: function () { return ct.call(Lt(this)) }, values: function () { return st.call(Lt(this)) } }, jt = function (t, e) { return x(t) && t[Tt] && "symbol" != typeof e && e in t && +e + "" == e + "" }, Vt = function (t, e) { return jt(t, e = y(e, !0)) ? h(2, t[e]) : z(t, e) }, Wt = function (t, e, n) { return !(jt(t, e = y(e, !0)) && x(n) && b(n, "value")) || b(n, "get") || b(n, "set") || n.configurable || b(n, "writable") && !n.writable || b(n, "enumerable") && !n.enumerable ? U(t, e, n) : (t[e] = n.value, t) }; wt || (F.f = Vt, H.f = Wt), a(a.S + a.F * !wt, "Object", { getOwnPropertyDescriptor: Vt, defineProperty: Wt }), o(function () { vt.call({}) }) && (vt = gt = function () { return pt.call(this) }); var Xt = p({}, Ht); p(Xt, zt), f(Xt, yt, zt.values), p(Xt, { slice: Ft, set: Ut, constructor: function () { }, toString: vt, toLocaleString: Nt }), Dt(Xt, "buffer", "b"), Dt(Xt, "byteOffset", "o"), Dt(Xt, "byteLength", "l"), Dt(Xt, "length", "e"), U(Xt, bt, { get: function () { return this[Tt] } }), t.exports = function (t, e, n, c) { var u = t + ((c = !!c) ? "Clamped" : "") + "Array", h = r[u], p = h || {}, d = h && M(h), g = !h || !s.ABV, y = {}, b = h && h[$], w = function (n, i) { var r = n._d; return r.v["get" + t](i * e + r.o, Et) }, T = function (n, i, r) { var o = n._d; c && (r = 0 > (r = Math.round(r)) ? 0 : 255 < r ? 255 : 255 & r), o.v["set" + t](i * e + o.o, r, Et) }, E = function (t, e) { U(t, e, { get: function () { return w(this, e) }, set: function (t) { return T(this, e, t) }, enumerable: !0 }) }; g ? (h = n(function (t, n, i, r) { l(t, h, u, "_d"); var o, a, s, c, p = 0, d = 0; if (x(n)) { if (!(n instanceof K || (c = _(n)) == X || c == q)) return Tt in n ? It(h, n) : Gt.call(h, n); o = n, d = Ct(i, e); var g = n.byteLength; if (void 0 === r) { if (g % e) throw j(Mt); if (0 > (a = g - d)) throw j(Mt) } else if ((a = m(r) * e) + d > g) throw j(Mt); s = a / e } else s = v(n), o = new K(a = s * e); for (f(t, "_d", { b: o, o: d, l: a, e: s, v: new J(o) }); p < s;)E(t, p++) }), b = h[$] = S(Xt), f(b, "constructor", h)) : (!o(function () { h(1) }) || !o(function () { new h(-1) }) || !G(function (t) { new h, new h(null), new h(1.5), new h(t) }, !0)) && (h = n(function (t, n, i, r) { var o; return l(t, h, u), x(n) ? n instanceof K || (o = _(n)) == X || o == q ? void 0 === r ? void 0 === i ? new p(n) : new p(n, Ct(i, e)) : new p(n, Ct(i, e), r) : Tt in n ? It(h, n) : Gt.call(h, n) : new p(v(n)) }), Q(d === Function.prototype ? P(p) : P(p).concat(P(d)), function (t) { t in h || f(h, t, p[t]) }), h[$] = b, !i && (b.constructor = h)); var A = b[yt], C = !!A && ("values" == A.name || void 0 == A.name), L = zt.values; f(h, _t, !0), f(b, Tt, u), f(b, St, !0), f(b, xt, h), (c ? new h(1)[bt] != u : !(bt in b)) && U(b, bt, { get: function () { return u } }), y[u] = h, a(a.G + a.W + a.F * (h != p), y), a(a.S, u, { BYTES_PER_ELEMENT: e }), a(a.S + a.F * o(function () { p.of.call(h, 1) }), u, { from: Gt, of: Bt }), Y in b || f(b, Y, e), a(a.P, u, Ht), B(u), a(a.P + a.F * At, u, { set: Ut }), a(a.P + a.F * !C, u, zt), i || b.toString == vt || (b.toString = vt), a(a.P + a.F * o(function () { new h(1).slice() }), u, { slice: Ft }), a(a.P + a.F * (o(function () { return [1, 2].toLocaleString() != new h([1, 2]).toLocaleString() }) || !o(function () { b.toLocaleString.call([1, 2]) })), u, { toLocaleString: Nt }), D[u] = C ? A : L, i || C || f(b, yt, L) } } else t.exports = function () { } }, function (t, e, n) { var i = n(10); t.exports = function (t, e) { if (!i(t)) return t; var n, r; if (e && "function" == typeof (n = t.toString) && !i(r = n.call(t))) return r; if ("function" == typeof (n = t.valueOf) && !i(r = n.call(t))) return r; if (!e && "function" == typeof (n = t.toString) && !i(r = n.call(t))) return r; throw TypeError("Can't convert object to primitive value") } }, function (t, e, n) { var i = n(43)("meta"), r = n(10), o = n(23), a = n(15).f, s = 0, c = Object.isExtensible || function () { return !0 }, u = !n(8)(function () { return c(Object.preventExtensions({})) }), l = function (t) { a(t, i, { value: { i: "O" + ++s, w: {} } }) }, h = t.exports = { KEY: i, NEED: !1, fastKey: function (t, e) { if (!r(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t; if (!o(t, i)) { if (!c(t)) return "F"; if (!e) return "E"; l(t) } return t[i].i }, getWeak: function (t, e) { if (!o(t, i)) { if (!c(t)) return !0; if (!e) return !1; l(t) } return t[i].w }, onFreeze: function (t) { return u && h.NEED && c(t) && !o(t, i) && l(t), t } } }, function (t) { t.exports = function (t, e) { return { enumerable: !(1 & t), configurable: !(2 & t), writable: !(4 & t), value: e } } }, function (t) { var e = 0, n = Math.random(); t.exports = function (t) { return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++e + n).toString(36)) } }, function (t) { t.exports = !1 }, function (t, e, n) { var i = n(105), r = n(80); t.exports = Object.keys || function (t) { return i(t, r) } }, function (t, e, n) { var i = n(38), r = Math.max, o = Math.min; t.exports = function (t, e) { return 0 > (t = i(t)) ? r(t + e, 0) : o(t, e) } }, function (t, e, n) { var i = n(12), r = n(106), o = n(80), a = n(79)("IE_PROTO"), s = function () { }, c = "prototype", u = function () { var t, e = n(76)("iframe"), i = o.length; for (e.style.display = "none", n(82).appendChild(e), e.src = "javascript:", (t = e.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), u = t.F; i--;)delete u[c][o[i]]; return u() }; t.exports = Object.create || function (t, e) { var n; return null === t ? n = u() : (s[c] = i(t), n = new s, s[c] = null, n[a] = t), void 0 === e ? n : r(n, e) } }, function (t, e, n) { var i = n(105), r = n(80).concat("length", "prototype"); e.f = Object.getOwnPropertyNames || function (t) { return i(t, r) } }, function (t, e, n) { var i = n(23), r = n(26), o = n(79)("IE_PROTO"), a = Object.prototype; t.exports = Object.getPrototypeOf || function (t) { return t = r(t), i(t, o) ? t[o] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? a : null } }, function (t, e, n) { "use strict"; function i(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } n.d(e, "a", function () { return a }); var r = n(3), o = n(308), a = new (function () { function t() { (function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") })(this, t), this.IS_DESKTOP = null, this.IS_MOBILE = null, this.IS_TABLET = null, this.IS_PHONE = null } return function (t, e, n) { e && i(t.prototype, e), n && i(t, n) }(t, [{ key: "init", value: function () { var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : $("html"); this._initDOM(t), this._initEl(), this._bindEvents(), this._resize() } }, { key: "_initDOM", value: function (t) { this.$html = t } }, { key: "_initEl", value: function () { this.md = new o(window.navigator.userAgent) } }, { key: "_bindEvents", value: function () { r.a.on(r.a.E.RESIZE_FORCED, this._resize, this) } }, { key: "_resize", value: function () { this._setValues(), this._setBodyClass() } }, { key: "_setValues", value: function () { this.IS_MOBILE = null !== this.md.mobile() || r.a.bW <= r.a.MOBILE_WIDTH_MAX || r.a.wH <= r.a.MOBILE_HEIGHT_MAX, this.IS_PHONE = null !== this.md.phone() || r.a.bW <= r.a.PHONE_WIDTH_MAX || r.a.wH <= r.a.PHONE_WIDTH_MAX, this.IS_TABLET = this.IS_MOBILE && !this.IS_PHONE, this.IS_DESKTOP = !this.IS_MOBILE } }, { key: "_setBodyClass", value: function () { !0 === this.IS_DESKTOP ? (this.$html[0].classList.remove("mobile"), this.$html[0].classList.add("desktop")) : !0 === this.IS_MOBILE && (this.$html[0].classList.remove("desktop"), this.$html[0].classList.add("mobile")) } }]), t }()) }, function (t, e, n) { "use strict"; function i() { } function r(t, e) { this.x = t || 0, this.y = e || 0 } function o() { this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], 0 < arguments.length && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.") } function a(t, e, n, i) { this._x = t || 0, this._y = e || 0, this._z = n || 0, this._w = void 0 === i ? 1 : i } function s(t, e, n) { this.x = t || 0, this.y = e || 0, this.z = n || 0 } function c() { this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], 0 < arguments.length && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.") } function u(t, e, n, i, o, a, s, l, h, f) { Object.defineProperty(this, "id", { value: Rc++ }), this.uuid = Ac.generateUUID(), this.name = "", this.image = void 0 === t ? u.DEFAULT_IMAGE : t, this.mipmaps = [], this.mapping = void 0 === e ? u.DEFAULT_MAPPING : e, this.wrapS = void 0 === n ? as : n, this.wrapT = void 0 === i ? as : i, this.magFilter = void 0 === o ? hs : o, this.minFilter = void 0 === a ? ps : a, this.anisotropy = void 0 === h ? 1 : h, this.format = void 0 === s ? As : s, this.type = void 0 === l ? ds : l, this.offset = new r(0, 0), this.repeat = new r(1, 1), this.center = new r(0, 0), this.rotation = 0, this.matrixAutoUpdate = !0, this.matrix = new c, this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = void 0 === f ? vc : f, this.version = 0, this.onUpdate = null } function l(t, e, n, i) { this.x = t || 0, this.y = e || 0, this.z = n || 0, this.w = void 0 === i ? 1 : i } function h(t, e, n) { this.width = t, this.height = e, this.scissor = new l(0, 0, t, e), this.scissorTest = !1, this.viewport = new l(0, 0, t, e), n = n || {}, this.texture = new u(void 0, void 0, n.wrapS, n.wrapT, n.magFilter, n.minFilter, n.format, n.type, n.anisotropy, n.encoding), this.texture.generateMipmaps = void 0 !== n.generateMipmaps && n.generateMipmaps, this.texture.minFilter = void 0 === n.minFilter ? hs : n.minFilter, this.depthBuffer = !(void 0 !== n.depthBuffer) || n.depthBuffer, this.stencilBuffer = !(void 0 !== n.stencilBuffer) || n.stencilBuffer, this.depthTexture = void 0 === n.depthTexture ? null : n.depthTexture } function f(t, e, n) { h.call(this, t, e, n), this.activeCubeFace = 0, this.activeMipMapLevel = 0 } function p(t, e, n, i, r, o, a, s, c, l, h, f) { u.call(this, null, o, a, s, c, l, i, r, h, f), this.image = { data: t, width: e, height: n }, this.magFilter = void 0 === c ? cs : c, this.minFilter = void 0 === l ? cs : l, this.generateMipmaps = !1, this.flipY = !1, this.unpackAlignment = 1 } function d(t, e) { this.min = void 0 === t ? new s(1 / 0, 1 / 0, 1 / 0) : t, this.max = void 0 === e ? new s(-1 / 0, -1 / 0, -1 / 0) : e } function m(t, e) { this.center = void 0 === t ? new s : t, this.radius = void 0 === e ? 0 : e } function v(t, e) { this.normal = void 0 === t ? new s(1, 0, 0) : t, this.constant = void 0 === e ? 0 : e } function g(t, e, n, i, r, o) { this.planes = [void 0 === t ? new v : t, void 0 === e ? new v : e, void 0 === n ? new v : n, void 0 === i ? new v : i, void 0 === r ? new v : r, void 0 === o ? new v : o] } function y(t) { var e = {}; for (var n in t) for (var i in e[n] = {}, t[n]) { var r = t[n][i]; e[n][i] = r && (r.isColor || r.isMatrix3 || r.isMatrix4 || r.isVector2 || r.isVector3 || r.isVector4 || r.isTexture) ? r.clone() : Array.isArray(r) ? r.slice() : r } return e } function b(t) { for (var e, n = {}, i = 0; i < t.length; i++)for (var r in e = y(t[i])) n[r] = e[r]; return n } function _(t, e, n) { return void 0 === e && void 0 === n ? this.set(t) : this.setRGB(t, e, n) } function x() { function t(r, o) { !1 === n || (i(r, o), e.requestAnimationFrame(t)) } var e = null, n = !1, i = null; return { start: function () { 1 == n || null === i || (e.requestAnimationFrame(t), n = !0) }, stop: function () { n = !1 }, setAnimationLoop: function (t) { i = t }, setContext: function (t) { e = t } } } function w(t, e, n, i, r, o) { this.a = t, this.b = e, this.c = n, this.normal = i && i.isVector3 ? i : new s, this.vertexNormals = Array.isArray(i) ? i : [], this.color = r && r.isColor ? r : new _, this.vertexColors = Array.isArray(r) ? r : [], this.materialIndex = void 0 === o ? 0 : o } function T(t, e, n, i) { this._x = t || 0, this._y = e || 0, this._z = n || 0, this._order = i || T.DefaultOrder } function S() { this.mask = 1 } function M() { Object.defineProperty(this, "id", { value: kc++ }), this.uuid = Ac.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = M.DefaultUp.clone(); var t = new s, e = new T, n = new a, i = new s(1, 1, 1); e.onChange(function () { n.setFromEuler(e, !1) }), n.onChange(function () { e.setFromQuaternion(n, void 0, !1) }), Object.defineProperties(this, { position: { configurable: !0, enumerable: !0, value: t }, rotation: { configurable: !0, enumerable: !0, value: e }, quaternion: { configurable: !0, enumerable: !0, value: n }, scale: { configurable: !0, enumerable: !0, value: i }, modelViewMatrix: { value: new o }, normalMatrix: { value: new c } }), this.matrix = new o, this.matrixWorld = new o, this.matrixAutoUpdate = M.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.layers = new S, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {} } function P() { Object.defineProperty(this, "id", { value: Nc += 2 }), this.uuid = Ac.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.elementsNeedUpdate = !1, this.verticesNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1 } function E(t, e, n) { if (Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array."); this.name = "", this.array = t, this.itemSize = e, this.count = void 0 === t ? 0 : t.length / e, this.normalized = !0 === n, this.dynamic = !1, this.updateRange = { offset: 0, count: -1 }, this.version = 0 } function A(t, e, n) { E.call(this, new Int8Array(t), e, n) } function C(t, e, n) { E.call(this, new Uint8Array(t), e, n) } function L(t, e, n) { E.call(this, new Uint8ClampedArray(t), e, n) } function R(t, e, n) { E.call(this, new Int16Array(t), e, n) } function O(t, e, n) { E.call(this, new Uint16Array(t), e, n) } function I(t, e, n) { E.call(this, new Int32Array(t), e, n) } function D(t, e, n) { E.call(this, new Uint32Array(t), e, n) } function G(t, e, n) { E.call(this, new Float32Array(t), e, n) } function B(t, e, n) { E.call(this, new Float64Array(t), e, n) } function k() { this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.groupsNeedUpdate = !1 } function N(t) { if (0 === t.length) return -1 / 0; for (var e = t[0], n = 1, i = t.length; n < i; ++n)t[n] > e && (e = t[n]); return e } function H() { Object.defineProperty(this, "id", { value: Hc += 2 }), this.uuid = Ac.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {} } function F(t, e, n, i, r, o) { P.call(this), this.type = "BoxGeometry", this.parameters = { width: t, height: e, depth: n, widthSegments: i, heightSegments: r, depthSegments: o }, this.fromBufferGeometry(new U(t, e, n, i, r, o)), this.mergeVertices() } function U(t, e, n, i, r, o) { function a(t, e, n, i, r, o, a, m, v, g, y) { var b, _, x = v + 1, w = 0, T = 0, S = new s; for (_ = 0; _ < g + 1; _++) { var M = _ * (a / g) - a / 2; for (b = 0; b < x; b++) { var P = b * (o / v) - o / 2; S[t] = P * i, S[e] = M * r, S[n] = m / 2, l.push(S.x, S.y, S.z), S[t] = 0, S[e] = 0, S[n] = 0 < m ? 1 : -1, h.push(S.x, S.y, S.z), f.push(b / v), f.push(1 - _ / g), w += 1 } } for (_ = 0; _ < g; _++)for (b = 0; b < v; b++) { var E = p + b + x * _, A = p + b + x * (_ + 1), C = p + (b + 1) + x * (_ + 1), L = p + (b + 1) + x * _; u.push(E, A, L), u.push(A, C, L), T += 6 } c.addGroup(d, T, y), d += T, p += w } H.call(this), this.type = "BoxBufferGeometry", this.parameters = { width: t, height: e, depth: n, widthSegments: i, heightSegments: r, depthSegments: o }; var c = this; t = t || 1, e = e || 1, n = n || 1, i = Bo(i) || 1, r = Bo(r) || 1; var u = [], l = [], h = [], f = [], p = 0, d = 0; a("z", "y", "x", -1, -1, n, e, t, o = Bo(o) || 1, r, 0), a("z", "y", "x", 1, -1, n, e, -t, o, r, 1), a("x", "z", "y", 1, 1, t, n, e, i, o, 2), a("x", "z", "y", 1, -1, t, n, -e, i, o, 3), a("x", "y", "z", 1, -1, t, e, n, i, r, 4), a("x", "y", "z", -1, -1, t, e, -n, i, r, 5), this.setIndex(u), this.addAttribute("position", new G(l, 3)), this.addAttribute("normal", new G(h, 3)), this.addAttribute("uv", new G(f, 2)) } function z(t, e, n, i) { P.call(this), this.type = "PlaneGeometry", this.parameters = { width: t, height: e, widthSegments: n, heightSegments: i }, this.fromBufferGeometry(new j(t, e, n, i)), this.mergeVertices() } function j(t, e, n, i) { H.call(this), this.type = "PlaneBufferGeometry", this.parameters = { width: t, height: e, widthSegments: n, heightSegments: i }; var r, o, a = (t = t || 1) / 2, s = (e = e || 1) / 2, c = Bo(n) || 1, u = Bo(i) || 1, l = c + 1, h = t / c, f = e / u, p = [], d = [], m = [], v = []; for (o = 0; o < u + 1; o++) { var g = o * f - s; for (r = 0; r < l; r++) { var y = r * h - a; d.push(y, -g, 0), m.push(0, 0, 1), v.push(r / c), v.push(1 - o / u) } } for (o = 0; o < u; o++)for (r = 0; r < c; r++) { var b = r + l * o, _ = r + l * (o + 1), x = r + 1 + l * (o + 1), w = r + 1 + l * o; p.push(b, _, w), p.push(_, x, w) } this.setIndex(p), this.addAttribute("position", new G(d, 3)), this.addAttribute("normal", new G(m, 3)), this.addAttribute("uv", new G(v, 2)) } function V() { Object.defineProperty(this, "id", { value: Fc++ }), this.uuid = Ac.generateUUID(), this.name = "", this.type = "Material", this.fog = !0, this.lights = !0, this.blending = pa, this.side = ra, this.flatShading = !1, this.vertexColors = ua, this.opacity = 1, this.transparent = !1, this.blendSrc = Ea, this.blendDst = Aa, this.blendEquation = ya, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = ka, this.depthTest = !0, this.depthWrite = !0, this.clippingPlanes = null, this.clipIntersection = !1, this.clipShadows = !1, this.shadowSide = null, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = !1, this.alphaTest = 0, this.premultipliedAlpha = !1, this.visible = !0, this.userData = {}, this.needsUpdate = !0 } function W(t) { V.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.clipping = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.extensions = { derivatives: !1, fragDepth: !1, drawBuffers: !1, shaderTextureLOD: !1 }, this.defaultAttributeValues = { color: [1, 1, 1], uv: [0, 0], uv2: [0, 0] }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = !1, void 0 !== t && (void 0 !== t.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(t)) } function X(t, e) { this.origin = void 0 === t ? new s : t, this.direction = void 0 === e ? new s : e } function q(t, e, n) { this.a = void 0 === t ? new s : t, this.b = void 0 === e ? new s : e, this.c = void 0 === n ? new s : n } function Y(t) { V.call(this), this.type = "MeshBasicMaterial", this.color = new _(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = za, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.lights = !1, this.setValues(t) } function $(t, e) { M.call(this), this.type = "Mesh", this.geometry = void 0 === t ? new H : t, this.material = void 0 === e ? new Y({ color: 16777215 * Math.random() }) : e, this.drawMode = pc, this.updateMorphTargets() } function Z(t, e, n, i) { function r(t, n) { e.buffers.color.setClear(t.r, t.g, t.b, n, i) } var o, a, s = new _(0), c = 0, u = null, l = 0; return { getClearColor: function () { return s }, setClearColor: function (t, e) { s.set(t), r(s, c = void 0 === e ? 1 : e) }, getClearAlpha: function () { return c }, setClearAlpha: function (t) { r(s, c = t) }, render: function (e, i, h, f) { var p = i.background; if (null === p ? (r(s, c), u = null, l = 0) : p && p.isColor && (r(p, 1), f = !0, u = null, l = 0), (t.autoClear || f) && t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil), p && (p.isCubeTexture || p.isWebGLRenderTargetCube)) { void 0 === a && ((a = new $(new U(1, 1, 1), new W({ type: "BackgroundCubeMaterial", uniforms: y(Bc.cube.uniforms), vertexShader: Bc.cube.vertexShader, fragmentShader: Bc.cube.fragmentShader, side: oa, depthTest: !0, depthWrite: !1, fog: !1 }))).geometry.removeAttribute("normal"), a.geometry.removeAttribute("uv"), a.onBeforeRender = function (t, e, n) { this.matrixWorld.copyPosition(n.matrixWorld) }, Object.defineProperty(a.material, "map", { get: function () { return this.uniforms.tCube.value } }), n.update(a)); var d = p.isWebGLRenderTargetCube ? p.texture : p; a.material.uniforms.tCube.value = d, a.material.uniforms.tFlip.value = p.isWebGLRenderTargetCube ? 1 : -1, (u !== p || l !== d.version) && (a.material.needsUpdate = !0, u = p, l = d.version), e.unshift(a, a.geometry, a.material, 0, null) } else p && p.isTexture && (void 0 === o && ((o = new $(new j(2, 2), new W({ type: "BackgroundMaterial", uniforms: y(Bc.background.uniforms), vertexShader: Bc.background.vertexShader, fragmentShader: Bc.background.fragmentShader, side: ra, depthTest: !1, depthWrite: !1, fog: !1 }))).geometry.removeAttribute("normal"), Object.defineProperty(o.material, "map", { get: function () { return this.uniforms.t2D.value } }), n.update(o)), o.material.uniforms.t2D.value = p, !0 === p.matrixAutoUpdate && p.updateMatrix(), o.material.uniforms.uvTransform.value.copy(p.matrix), (u !== p || l !== p.version) && (o.material.needsUpdate = !0, u = p, l = p.version), e.unshift(o, o.geometry, o.material, 0, null)) } } } function K() { function t() { l.value !== i && (l.value = i, l.needsUpdate = 0 < r), n.numPlanes = r, n.numIntersection = 0 } function e(t, e, i, r) { var o = null === t ? 0 : t.length, a = null; if (0 !== o) { if (a = l.value, !0 !== r || null === a) { var c = i + 4 * o, h = e.matrixWorldInverse; u.getNormalMatrix(h), (null === a || a.length < c) && (a = new Float32Array(c)); for (var f = 0, p = i; f !== o; ++f, p += 4)s.copy(t[f]).applyMatrix4(h, u), s.normal.toArray(a, p), a[p + 3] = s.constant } l.value = a, l.needsUpdate = !0 } return n.numPlanes = o, a } var n = this, i = null, r = 0, o = !1, a = !1, s = new v, u = new c, l = { value: null, needsUpdate: !1 }; this.uniform = l, this.numPlanes = 0, this.numIntersection = 0, this.init = function (t, n, a) { var s = 0 !== t.length || n || 0 !== r || o; return o = n, i = e(t, a, 0), r = t.length, s }, this.beginShadows = function () { a = !0, e(null) }, this.endShadows = function () { a = !1, t() }, this.setState = function (n, s, c, u, h, f) { if (!o || null === n || 0 === n.length || a && !c) a ? e(null) : t(); else { var p = a ? 0 : r, d = 4 * p, m = h.clippingState || null; l.value = m, m = e(n, u, d, f); for (var v = 0; v !== d; ++v)m[v] = i[v]; h.clippingState = m, this.numIntersection = s ? this.numPlanes : 0, this.numPlanes += p } } } function J(t, e, n) { function i(t) { var a = t.target, s = r[a.id]; for (var c in null !== s.index && e.remove(s.index), s.attributes) e.remove(s.attributes[c]); a.removeEventListener("dispose", i), delete r[a.id]; var u = o[s.id]; u && (e.remove(u), delete o[s.id]), n.memory.geometries-- } var r = {}, o = {}; return { get: function (t, e) { var o = r[e.id]; return o || (e.addEventListener("dispose", i), e.isBufferGeometry ? o = e : e.isGeometry && (void 0 === e._bufferGeometry && (e._bufferGeometry = (new H).setFromObject(t)), o = e._bufferGeometry), r[e.id] = o, n.memory.geometries++, o) }, update: function (t) { var n = t.index, i = t.attributes; for (var r in null !== n && e.update(n, 34963), i) e.update(i[r], 34962); var o = t.morphAttributes; for (var r in o) for (var a = o[r], s = 0, c = a.length; s < c; s++)e.update(a[s], 34962) }, getWireframeAttribute: function (t) { var n = o[t.id]; if (n) return n; var i, r = [], a = t.index, s = t.attributes; if (null !== a) for (var c = 0, u = (i = a.array).length; c < u; c += 3) { var l = i[c + 0], h = i[c + 1], f = i[c + 2]; r.push(l, h, h, f, f, l) } else for (c = 0, u = (i = s.position.array).length / 3 - 1; c < u; c += 3)l = c + 0, h = c + 1, f = c + 2, r.push(l, h, h, f, f, l); return n = new (65535 < N(r) ? D : O)(r, 1), e.update(n, 34963), o[t.id] = n, n } } } function Q(t, e) { return Wo(e[1]) - Wo(t[1]) } function tt(t) { var e = {}, n = new Float32Array(8); return { update: function (i, r, o, a) { var s = i.morphTargetInfluences, c = s.length, u = e[r.id]; if (void 0 === u) { u = []; for (var l = 0; l < c; l++)u[l] = [l, 0]; e[r.id] = u } var h, f = o.morphTargets && r.morphAttributes.position, p = o.morphNormals && r.morphAttributes.normal; for (l = 0; l < c; l++)0 !== (h = u[l])[1] && (f && r.removeAttribute("morphTarget" + l), p && r.removeAttribute("morphNormal" + l)); for (l = 0; l < c; l++)(h = u[l])[0] = l, h[1] = s[l]; for (u.sort(Q), l = 0; 8 > l; l++) { if (h = u[l]) { var d = h[0], m = h[1]; if (m) { f && r.addAttribute("morphTarget" + l, f[d]), p && r.addAttribute("morphNormal" + l, p[d]), n[l] = m; continue } } n[l] = 0 } a.getUniforms().setValue(t, "morphTargetInfluences", n) } } } function et(t, e, n, i, r, o, a, s, c, l) { t = void 0 === t ? [] : t, e = void 0 === e ? Ja : e, u.call(this, t, e, n, i, r, o, a, s, c, l), this.flipY = !1 } function nt(t, e, n, i) { u.call(this, null), this.image = { data: t, width: e, height: n, depth: i }, this.magFilter = cs, this.minFilter = cs, this.generateMipmaps = !1, this.flipY = !1 } function it() { this.seq = [], this.map = {} } function rt(t, e, n) { var i = t[0]; if (0 >= i || 0 < i) return t; var r = e * n, o = Vc[r]; if (void 0 === o && (o = new Float32Array(r), Vc[r] = o), 0 !== e) { i.toArray(o, 0); for (var a = 1, s = 0; a !== e; ++a)s += n, t[a].toArray(o, s) } return o } function ot(t, e) { if (t.length !== e.length) return !1; for (var n = 0, i = t.length; n < i; n++)if (t[n] !== e[n]) return !1; return !0 } function at(t, e) { for (var n = 0, i = e.length; n < i; n++)t[n] = e[n] } function st(t, e) { var n = Wc[e]; void 0 === n && (n = new Int32Array(e), Wc[e] = n); for (var i = 0; i !== e; ++i)n[i] = t.allocTextureUnit(); return n } function ct(t, e) { var n = this.cache; n[0] === e || (t.uniform1f(this.addr, e), n[0] = e) } function ut(t, e) { var n = this.cache; n[0] === e || (t.uniform1i(this.addr, e), n[0] = e) } function lt(t, e) { var n = this.cache; if (void 0 !== e.x) (n[0] !== e.x || n[1] !== e.y) && (t.uniform2f(this.addr, e.x, e.y), n[0] = e.x, n[1] = e.y); else { if (ot(n, e)) return; t.uniform2fv(this.addr, e), at(n, e) } } function ht(t, e) { var n = this.cache; if (void 0 !== e.x) (n[0] !== e.x || n[1] !== e.y || n[2] !== e.z) && (t.uniform3f(this.addr, e.x, e.y, e.z), n[0] = e.x, n[1] = e.y, n[2] = e.z); else if (void 0 !== e.r) (n[0] !== e.r || n[1] !== e.g || n[2] !== e.b) && (t.uniform3f(this.addr, e.r, e.g, e.b), n[0] = e.r, n[1] = e.g, n[2] = e.b); else { if (ot(n, e)) return; t.uniform3fv(this.addr, e), at(n, e) } } function ft(t, e) { var n = this.cache; if (void 0 !== e.x) (n[0] !== e.x || n[1] !== e.y || n[2] !== e.z || n[3] !== e.w) && (t.uniform4f(this.addr, e.x, e.y, e.z, e.w), n[0] = e.x, n[1] = e.y, n[2] = e.z, n[3] = e.w); else { if (ot(n, e)) return; t.uniform4fv(this.addr, e), at(n, e) } } function pt(t, e) { var n = this.cache, i = e.elements; if (void 0 === i) { if (ot(n, e)) return; t.uniformMatrix2fv(this.addr, !1, e), at(n, e) } else { if (ot(n, i)) return; Yc.set(i), t.uniformMatrix2fv(this.addr, !1, Yc), at(n, i) } } function dt(t, e) { var n = this.cache, i = e.elements; if (void 0 === i) { if (ot(n, e)) return; t.uniformMatrix3fv(this.addr, !1, e), at(n, e) } else { if (ot(n, i)) return; qc.set(i), t.uniformMatrix3fv(this.addr, !1, qc), at(n, i) } } function mt(t, e) { var n = this.cache, i = e.elements; if (void 0 === i) { if (ot(n, e)) return; t.uniformMatrix4fv(this.addr, !1, e), at(n, e) } else { if (ot(n, i)) return; Xc.set(i), t.uniformMatrix4fv(this.addr, !1, Xc), at(n, i) } } function vt(t, e, n) { var i = this.cache, r = n.allocTextureUnit(); i[0] !== r && (t.uniform1i(this.addr, r), i[0] = r), n.setTexture2D(e || Uc, r) } function gt(t, e, n) { var i = this.cache, r = n.allocTextureUnit(); i[0] !== r && (t.uniform1i(this.addr, r), i[0] = r), n.setTexture3D(e || zc, r) } function yt(t, e, n) { var i = this.cache, r = n.allocTextureUnit(); i[0] !== r && (t.uniform1i(this.addr, r), i[0] = r), n.setTextureCube(e || jc, r) } function bt(t, e) { var n = this.cache; ot(n, e) || (t.uniform2iv(this.addr, e), at(n, e)) } function _t(t, e) { var n = this.cache; ot(n, e) || (t.uniform3iv(this.addr, e), at(n, e)) } function xt(t, e) { var n = this.cache; ot(n, e) || (t.uniform4iv(this.addr, e), at(n, e)) } function wt(t, e) { var n = this.cache; ot(n, e) || (t.uniform1fv(this.addr, e), at(n, e)) } function Tt(t, e) { var n = this.cache; ot(n, e) || (t.uniform1iv(this.addr, e), at(n, e)) } function St(t, e) { var n = this.cache, i = rt(e, this.size, 2); ot(n, i) || (t.uniform2fv(this.addr, i), this.updateCache(i)) } function Mt(t, e) { var n = this.cache, i = rt(e, this.size, 3); ot(n, i) || (t.uniform3fv(this.addr, i), this.updateCache(i)) } function Pt(t, e) { var n = this.cache, i = rt(e, this.size, 4); ot(n, i) || (t.uniform4fv(this.addr, i), this.updateCache(i)) } function Et(t, e) { var n = this.cache, i = rt(e, this.size, 4); ot(n, i) || (t.uniformMatrix2fv(this.addr, !1, i), this.updateCache(i)) } function At(t, e) { var n = this.cache, i = rt(e, this.size, 9); ot(n, i) || (t.uniformMatrix3fv(this.addr, !1, i), this.updateCache(i)) } function Ct(t, e) { var n = this.cache, i = rt(e, this.size, 16); ot(n, i) || (t.uniformMatrix4fv(this.addr, !1, i), this.updateCache(i)) } function Lt(t, e, n) { var i = this.cache, r = e.length, o = st(n, r); !1 === ot(i, o) && (t.uniform1iv(this.addr, o), at(i, o)); for (var a = 0; a !== r; ++a)n.setTexture2D(e[a] || Uc, o[a]) } function Rt(t, e, n) { var i = this.cache, r = e.length, o = st(n, r); !1 === ot(i, o) && (t.uniform1iv(this.addr, o), at(i, o)); for (var a = 0; a !== r; ++a)n.setTextureCube(e[a] || jc, o[a]) } function Ot(t, e, n) { this.id = t, this.addr = n, this.cache = [], this.setValue = function (t) { return 5126 === t ? ct : 35664 === t ? lt : 35665 === t ? ht : 35666 === t ? ft : 35674 === t ? pt : 35675 === t ? dt : 35676 === t ? mt : 35678 === t || 36198 === t ? vt : 35679 === t ? gt : 35680 === t ? yt : 5124 === t || 35670 === t ? ut : 35667 === t || 35671 === t ? bt : 35668 === t || 35672 === t ? _t : 35669 === t || 35673 === t ? xt : void 0 }(e.type) } function It(t, e, n) { this.id = t, this.addr = n, this.cache = [], this.size = e.size, this.setValue = function (t) { return 5126 === t ? wt : 35664 === t ? St : 35665 === t ? Mt : 35666 === t ? Pt : 35674 === t ? Et : 35675 === t ? At : 35676 === t ? Ct : 35678 === t ? Lt : 35680 === t ? Rt : 5124 === t || 35670 === t ? Tt : 35667 === t || 35671 === t ? bt : 35668 === t || 35672 === t ? _t : 35669 === t || 35673 === t ? xt : void 0 }(e.type) } function Dt(t) { this.id = t, it.call(this) } function Gt(t, e) { t.seq.push(e), t.map[e.id] = e } function Bt(t, e, n) { var i = t.name, r = i.length; for ($c.lastIndex = 0; ;) { var o = $c.exec(i), a = $c.lastIndex, s = o[1], c = "]" === o[2], u = o[3]; if (c && (s |= 0), void 0 === u || "[" === u && a + 2 === r) { Gt(n, void 0 === u ? new Ot(s, t, e) : new It(s, t, e)); break } var l = n.map[s]; void 0 === l && Gt(n, l = new Dt(s)), n = l } } function kt(t, e, n) { it.call(this), this.renderer = n; for (var i = t.getProgramParameter(e, 35718), r = 0; r < i; ++r) { var o = t.getActiveUniform(e, r); Bt(o, t.getUniformLocation(e, o.name), this) } } function Nt(t, e, n) { var i = t.createShader(e); return t.shaderSource(i, n), t.compileShader(i), !1 === t.getShaderParameter(i, 35713) && console.error("THREE.WebGLShader: Shader couldn't compile."), "" !== t.getShaderInfoLog(i) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", 35633 === e ? "vertex" : "fragment", t.getShaderInfoLog(i), function (t) { for (var e = t.split("\n"), n = 0; n < e.length; n++)e[n] = n + 1 + ": " + e[n]; return e.join("\n") }(n)), i } function Ht(t) { switch (t) { case vc: return ["Linear", "( value )"]; case gc: return ["sRGB", "( value )"]; case bc: return ["RGBE", "( value )"]; case xc: return ["RGBM", "( value, 7.0 )"]; case wc: return ["RGBM", "( value, 16.0 )"]; case Tc: return ["RGBD", "( value, 256.0 )"]; case yc: return ["Gamma", "( value, float( GAMMA_FACTOR ) )"]; default: throw new Error("unsupported encoding: " + t) } } function Ft(t, e) { var n = Ht(e); return "vec4 " + t + "( vec4 value ) { return " + n[0] + "ToLinear" + n[1] + "; }" } function Ut(t) { return "" !== t } function zt(t, e) { return t.replace(/NUM_DIR_LIGHTS/g, e.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights) } function jt(t, e) { return t.replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e.numClippingPlanes - e.numClipIntersection) } function Vt(t) { return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm, function (t, e) { var n = Oc[e]; if (void 0 === n) throw new Error("Can not resolve #include <" + e + ">"); return Vt(n) }) } function Wt(t) { return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g, function (t, e, n, i) { for (var r = "", o = parseInt(e); o < parseInt(n); o++)r += i.replace(/\[ i \]/g, "[ " + o + " ]"); return r }) } function Xt(t, e, n, i, r, o, a) { var s = t.context, c = i.defines, u = r.vertexShader, l = r.fragmentShader, h = "SHADOWMAP_TYPE_BASIC"; o.shadowMapType === na ? h = "SHADOWMAP_TYPE_PCF" : o.shadowMapType === ia && (h = "SHADOWMAP_TYPE_PCF_SOFT"); var f = "ENVMAP_TYPE_CUBE", p = "ENVMAP_MODE_REFLECTION", d = "ENVMAP_BLENDING_MULTIPLY"; if (o.envMap) { switch (i.envMap.mapping) { case Ja: case Qa: f = "ENVMAP_TYPE_CUBE"; break; case is: case rs: f = "ENVMAP_TYPE_CUBE_UV"; break; case ts: case es: f = "ENVMAP_TYPE_EQUIREC"; break; case ns: f = "ENVMAP_TYPE_SPHERE" }switch (i.envMap.mapping) { case Qa: case es: p = "ENVMAP_MODE_REFRACTION" }switch (i.combine) { case za: d = "ENVMAP_BLENDING_MULTIPLY"; break; case ja: d = "ENVMAP_BLENDING_MIX"; break; case Va: d = "ENVMAP_BLENDING_ADD" } } var m, v, g = 0 < t.gammaFactor ? t.gammaFactor : 1, y = a.isWebGL2 ? "" : function (t, e, n) { return [(t = t || {}).derivatives || e.envMapCubeUV || e.bumpMap || e.normalMap && !e.objectSpaceNormalMap || e.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (t.fragDepth || e.logarithmicDepthBuffer) && n.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", t.drawBuffers && n.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (t.shaderTextureLOD || e.envMap) && n.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(Ut).join("\n") }(i.extensions, o, e), b = function (t) { var e = []; for (var n in t) { var i = t[n]; !1 === i || e.push("#define " + n + " " + i) } return e.join("\n") }(c), _ = s.createProgram(); if (i.isRawShaderMaterial ? (0 < (m = [b].filter(Ut).join("\n")).length && (m += "\n"), 0 < (v = [y, b].filter(Ut).join("\n")).length && (v += "\n")) : (m = ["precision " + o.precision + " float;", "precision " + o.precision + " int;", "#define SHADER_NAME " + r.name, b, o.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + g, "#define MAX_BONES " + o.maxBones, o.useFog && o.fog ? "#define USE_FOG" : "", o.useFog && o.fogExp ? "#define FOG_EXP2" : "", o.map ? "#define USE_MAP" : "", o.envMap ? "#define USE_ENVMAP" : "", o.envMap ? "#define " + p : "", o.lightMap ? "#define USE_LIGHTMAP" : "", o.aoMap ? "#define USE_AOMAP" : "", o.emissiveMap ? "#define USE_EMISSIVEMAP" : "", o.bumpMap ? "#define USE_BUMPMAP" : "", o.normalMap ? "#define USE_NORMALMAP" : "", o.normalMap && o.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", o.displacementMap && o.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", o.specularMap ? "#define USE_SPECULARMAP" : "", o.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", o.metalnessMap ? "#define USE_METALNESSMAP" : "", o.alphaMap ? "#define USE_ALPHAMAP" : "", o.vertexColors ? "#define USE_COLOR" : "", o.flatShading ? "#define FLAT_SHADED" : "", o.skinning ? "#define USE_SKINNING" : "", o.useVertexTexture ? "#define BONE_TEXTURE" : "", o.morphTargets ? "#define USE_MORPHTARGETS" : "", o.morphNormals && !1 === o.flatShading ? "#define USE_MORPHNORMALS" : "", o.doubleSided ? "#define DOUBLE_SIDED" : "", o.flipSided ? "#define FLIP_SIDED" : "", o.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", o.shadowMapEnabled ? "#define " + h : "", o.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", o.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", o.logarithmicDepthBuffer && (a.isWebGL2 || e.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(Ut).join("\n"), v = [y, "precision " + o.precision + " float;", "precision " + o.precision + " int;", "#define SHADER_NAME " + r.name, b, o.alphaTest ? "#define ALPHATEST " + o.alphaTest + (o.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + g, o.useFog && o.fog ? "#define USE_FOG" : "", o.useFog && o.fogExp ? "#define FOG_EXP2" : "", o.map ? "#define USE_MAP" : "", o.matcap ? "#define USE_MATCAP" : "", o.envMap ? "#define USE_ENVMAP" : "", o.envMap ? "#define " + f : "", o.envMap ? "#define " + p : "", o.envMap ? "#define " + d : "", o.lightMap ? "#define USE_LIGHTMAP" : "", o.aoMap ? "#define USE_AOMAP" : "", o.emissiveMap ? "#define USE_EMISSIVEMAP" : "", o.bumpMap ? "#define USE_BUMPMAP" : "", o.normalMap ? "#define USE_NORMALMAP" : "", o.normalMap && o.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", o.specularMap ? "#define USE_SPECULARMAP" : "", o.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", o.metalnessMap ? "#define USE_METALNESSMAP" : "", o.alphaMap ? "#define USE_ALPHAMAP" : "", o.vertexColors ? "#define USE_COLOR" : "", o.gradientMap ? "#define USE_GRADIENTMAP" : "", o.flatShading ? "#define FLAT_SHADED" : "", o.doubleSided ? "#define DOUBLE_SIDED" : "", o.flipSided ? "#define FLIP_SIDED" : "", o.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", o.shadowMapEnabled ? "#define " + h : "", o.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", o.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", o.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", o.logarithmicDepthBuffer && (a.isWebGL2 || e.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", o.envMap && (a.isWebGL2 || e.get("EXT_shader_texture_lod")) ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", o.toneMapping === Wa ? "" : "#define TONE_MAPPING", o.toneMapping === Wa ? "" : Oc.tonemapping_pars_fragment, o.toneMapping === Wa ? "" : function (t, e) { var n; switch (e) { case Xa: n = "Linear"; break; case qa: n = "Reinhard"; break; case Ya: n = "Uncharted2"; break; case $a: n = "OptimizedCineon"; break; case Za: n = "ACESFilmic"; break; default: throw new Error("unsupported toneMapping: " + e) }return "vec3 " + t + "( vec3 color ) { return " + n + "ToneMapping( color ); }" }("toneMapping", o.toneMapping), o.dithering ? "#define DITHERING" : "", o.outputEncoding || o.mapEncoding || o.matcapEncoding || o.envMapEncoding || o.emissiveMapEncoding ? Oc.encodings_pars_fragment : "", o.mapEncoding ? Ft("mapTexelToLinear", o.mapEncoding) : "", o.matcapEncoding ? Ft("matcapTexelToLinear", o.matcapEncoding) : "", o.envMapEncoding ? Ft("envMapTexelToLinear", o.envMapEncoding) : "", o.emissiveMapEncoding ? Ft("emissiveMapTexelToLinear", o.emissiveMapEncoding) : "", o.outputEncoding ? function (t, e) { var n = Ht(e); return "vec4 " + t + "( vec4 value ) { return LinearTo" + n[0] + n[1] + "; }" }("linearToOutputTexel", o.outputEncoding) : "", o.depthPacking ? "#define DEPTH_PACKING " + i.depthPacking : "", "\n"].filter(Ut).join("\n")), u = jt(u = zt(u = Vt(u), o), o), l = jt(l = zt(l = Vt(l), o), o), u = Wt(u), l = Wt(l), a.isWebGL2 && !i.isRawShaderMaterial) { var x = !1, w = /^\s*#version\s+300\s+es\s*\n/; i.isShaderMaterial && null !== u.match(w) && null !== l.match(w) && (x = !0, u = u.replace(w, ""), l = l.replace(w, "")), m = "#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n" + m, v = ["#version 300 es\n", "#define varying in", x ? "" : "out highp vec4 pc_fragColor;", x ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + v } var T = v + l, S = Nt(s, 35633, m + u), M = Nt(s, 35632, T); s.attachShader(_, S), s.attachShader(_, M), void 0 === i.index0AttributeName ? !0 === o.morphTargets && s.bindAttribLocation(_, 0, "position") : s.bindAttribLocation(_, 0, i.index0AttributeName), s.linkProgram(_); var P, E, A = s.getProgramInfoLog(_).trim(), C = s.getShaderInfoLog(S).trim(), L = s.getShaderInfoLog(M).trim(), R = !0, O = !0; return !1 === s.getProgramParameter(_, 35714) ? (R = !1, console.error("THREE.WebGLProgram: shader error: ", s.getError(), "35715", s.getProgramParameter(_, 35715), "gl.getProgramInfoLog", A, C, L)) : "" === A ? ("" === C || "" === L) && (O = !1) : console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", A), O && (this.diagnostics = { runnable: R, material: i, programLog: A, vertexShader: { log: C, prefix: m }, fragmentShader: { log: L, prefix: v } }), s.deleteShader(S), s.deleteShader(M), this.getUniforms = function () { return void 0 == P && (P = new kt(s, _, t)), P }, this.getAttributes = function () { return void 0 === E && (E = function (t, e) { for (var n = {}, i = t.getProgramParameter(e, 35721), r = 0; r < i; r++) { var o = t.getActiveAttrib(e, r).name; n[o] = t.getAttribLocation(e, o) } return n }(s, _)), E }, this.destroy = function () { s.deleteProgram(_), this.program = void 0 }, Object.defineProperties(this, { uniforms: { get: function () { return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."), this.getUniforms() } }, attributes: { get: function () { return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."), this.getAttributes() } } }), this.name = r.name, this.id = Zc++, this.code = n, this.usedTimes = 1, this.program = _, this.vertexShader = S, this.fragmentShader = M, this } function qt(t, e, n) { function i(t, e) { var n; return t ? t.isTexture ? n = t.encoding : t.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."), n = t.texture.encoding) : n = vc, n === vc && e && (n = yc), n } var r = [], o = { MeshDepthMaterial: "depth", MeshDistanceMaterial: "distanceRGBA", MeshNormalMaterial: "normal", MeshBasicMaterial: "basic", MeshLambertMaterial: "lambert", MeshPhongMaterial: "phong", MeshToonMaterial: "phong", MeshStandardMaterial: "physical", MeshPhysicalMaterial: "physical", MeshMatcapMaterial: "matcap", LineBasicMaterial: "basic", LineDashedMaterial: "dashed", PointsMaterial: "points", ShadowMaterial: "shadow", SpriteMaterial: "sprite" }, a = ["precision", "supportsVertexTextures", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "fog", "useFog", "fogExp", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering"]; this.getParameters = function (e, r, a, s, c, u, l) { var h = o[e.type], f = l.isSkinnedMesh ? function (t) { var e = t.skeleton.bones; if (n.floatVertexTextures) return 1024; var i = n.maxVertexUniforms, r = Bo((i - 20) / 4), o = Uo(r, e.length); return o < e.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + e.length + " bones. This GPU supports " + o + "."), 0) : o }(l) : 0, p = n.precision; null !== e.precision && ((p = n.getMaxPrecision(e.precision)) !== e.precision && console.warn("THREE.WebGLProgram.getParameters:", e.precision, "not supported, using", p, "instead.")); var d = t.getRenderTarget(); return { shaderID: h, precision: p, supportsVertexTextures: n.vertexTextures, outputEncoding: i(d ? d.texture : null, t.gammaOutput), map: !!e.map, mapEncoding: i(e.map, t.gammaInput), matcap: !!e.matcap, matcapEncoding: i(e.matcap, t.gammaInput), envMap: !!e.envMap, envMapMode: e.envMap && e.envMap.mapping, envMapEncoding: i(e.envMap, t.gammaInput), envMapCubeUV: !!e.envMap && (e.envMap.mapping === is || e.envMap.mapping === rs), lightMap: !!e.lightMap, aoMap: !!e.aoMap, emissiveMap: !!e.emissiveMap, emissiveMapEncoding: i(e.emissiveMap, t.gammaInput), bumpMap: !!e.bumpMap, normalMap: !!e.normalMap, objectSpaceNormalMap: e.normalMapType === Ec, displacementMap: !!e.displacementMap, roughnessMap: !!e.roughnessMap, metalnessMap: !!e.metalnessMap, specularMap: !!e.specularMap, alphaMap: !!e.alphaMap, gradientMap: !!e.gradientMap, combine: e.combine, vertexColors: e.vertexColors, fog: !!s, useFog: e.fog, fogExp: s && s.isFogExp2, flatShading: e.flatShading, sizeAttenuation: e.sizeAttenuation, logarithmicDepthBuffer: n.logarithmicDepthBuffer, skinning: e.skinning && 0 < f, maxBones: f, useVertexTexture: n.floatVertexTextures, morphTargets: e.morphTargets, morphNormals: e.morphNormals, maxMorphTargets: t.maxMorphTargets, maxMorphNormals: t.maxMorphNormals, numDirLights: r.directional.length, numPointLights: r.point.length, numSpotLights: r.spot.length, numRectAreaLights: r.rectArea.length, numHemiLights: r.hemi.length, numClippingPlanes: c, numClipIntersection: u, dithering: e.dithering, shadowMapEnabled: t.shadowMap.enabled && l.receiveShadow && 0 < a.length, shadowMapType: t.shadowMap.type, toneMapping: t.toneMapping, physicallyCorrectLights: t.physicallyCorrectLights, premultipliedAlpha: e.premultipliedAlpha, alphaTest: e.alphaTest, doubleSided: e.side === aa, flipSided: e.side === oa, depthPacking: void 0 !== e.depthPacking && e.depthPacking } }, this.getProgramCode = function (e, n) { var i = []; if (n.shaderID ? i.push(n.shaderID) : (i.push(e.fragmentShader), i.push(e.vertexShader)), void 0 !== e.defines) for (var r in e.defines) i.push(r), i.push(e.defines[r]); for (var o = 0; o < a.length; o++)i.push(n[a[o]]); return i.push(e.onBeforeCompile.toString()), i.push(t.gammaOutput), i.push(t.gammaFactor), i.join() }, this.acquireProgram = function (i, o, a, s) { for (var c, u, l = 0, h = r.length; l < h; l++)if ((u = r[l]).code === s) { ++(c = u).usedTimes; break } return void 0 === c && (c = new Xt(t, e, s, i, o, a, n), r.push(c)), c }, this.releaseProgram = function (t) { if (0 == --t.usedTimes) { var e = r.indexOf(t); r[e] = r[r.length - 1], r.pop(), t.destroy() } }, this.programs = r } function Yt(t, e) { return t.renderOrder === e.renderOrder ? t.program && e.program && t.program !== e.program ? t.program.id - e.program.id : t.material.id === e.material.id ? t.z === e.z ? t.id - e.id : t.z - e.z : t.material.id - e.material.id : t.renderOrder - e.renderOrder } function $t(t, e) { return t.renderOrder === e.renderOrder ? t.z === e.z ? t.id - e.id : e.z - t.z : t.renderOrder - e.renderOrder } function Zt() { function t(t, i, r, o, a) { var s = e[n]; return void 0 === s ? (s = { id: t.id, object: t, geometry: i, material: r, program: r.program, renderOrder: t.renderOrder, z: o, group: a }, e[n] = s) : (s.id = t.id, s.object = t, s.geometry = i, s.material = r, s.program = r.program, s.renderOrder = t.renderOrder, s.z = o, s.group = a), n++, s } var e = [], n = 0, i = [], r = []; return { opaque: i, transparent: r, init: function () { n = 0, i.length = 0, r.length = 0 }, push: function (e, n, o, a, s) { var c = t(e, n, o, a, s); (!0 === o.transparent ? r : i).push(c) }, unshift: function (e, n, o, a, s) { var c = t(e, n, o, a, s); (!0 === o.transparent ? r : i).unshift(c) }, sort: function () { 1 < i.length && i.sort(Yt), 1 < r.length && r.sort($t) } } } function Kt() { var t = new function () { var t = {}; return { get: function (e) { if (void 0 !== t[e.id]) return t[e.id]; var n; switch (e.type) { case "DirectionalLight": n = { direction: new s, color: new _, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new r }; break; case "SpotLight": n = { position: new s, direction: new s, color: new _, distance: 0, coneCos: 0, penumbraCos: 0, decay: 0, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new r }; break; case "PointLight": n = { position: new s, color: new _, distance: 0, decay: 0, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new r, shadowCameraNear: 1, shadowCameraFar: 1e3 }; break; case "HemisphereLight": n = { direction: new s, skyColor: new _, groundColor: new _ }; break; case "RectAreaLight": n = { color: new _, position: new s, halfWidth: new s, halfHeight: new s } }return t[e.id] = n, n } } }, e = { id: Kc++, hash: { stateID: -1, directionalLength: -1, pointLength: -1, spotLength: -1, rectAreaLength: -1, hemiLength: -1, shadowsLength: -1 }, ambient: [0, 0, 0], directional: [], directionalShadowMap: [], directionalShadowMatrix: [], spot: [], spotShadowMap: [], spotShadowMatrix: [], rectArea: [], point: [], pointShadowMap: [], pointShadowMatrix: [], hemi: [] }, n = new s, i = new o, a = new o; return { setup: function (r, o, s) { for (var c = 0, u = 0, l = 0, h = 0, f = 0, p = 0, d = 0, m = 0, v = s.matrixWorldInverse, g = 0, y = r.length; g < y; g++) { var b = r[g], _ = b.color, x = b.intensity, w = b.distance, T = b.shadow && b.shadow.map ? b.shadow.map.texture : null; if (b.isAmbientLight) c += _.r * x, u += _.g * x, l += _.b * x; else if (b.isDirectionalLight) { if ((M = t.get(b)).color.copy(b.color).multiplyScalar(b.intensity), M.direction.setFromMatrixPosition(b.matrixWorld), n.setFromMatrixPosition(b.target.matrixWorld), M.direction.sub(n), M.direction.transformDirection(v), M.shadow = b.castShadow, b.castShadow) { var S = b.shadow; M.shadowBias = S.bias, M.shadowRadius = S.radius, M.shadowMapSize = S.mapSize } e.directionalShadowMap[h] = T, e.directionalShadowMatrix[h] = b.shadow.matrix, e.directional[h] = M, h++ } else if (b.isSpotLight) { if ((M = t.get(b)).position.setFromMatrixPosition(b.matrixWorld), M.position.applyMatrix4(v), M.color.copy(_).multiplyScalar(x), M.distance = w, M.direction.setFromMatrixPosition(b.matrixWorld), n.setFromMatrixPosition(b.target.matrixWorld), M.direction.sub(n), M.direction.transformDirection(v), M.coneCos = jo(b.angle), M.penumbraCos = jo(b.angle * (1 - b.penumbra)), M.decay = b.decay, M.shadow = b.castShadow, b.castShadow) { S = b.shadow; M.shadowBias = S.bias, M.shadowRadius = S.radius, M.shadowMapSize = S.mapSize } e.spotShadowMap[p] = T, e.spotShadowMatrix[p] = b.shadow.matrix, e.spot[p] = M, p++ } else if (b.isRectAreaLight) { (M = t.get(b)).color.copy(_).multiplyScalar(x), M.position.setFromMatrixPosition(b.matrixWorld), M.position.applyMatrix4(v), a.identity(), i.copy(b.matrixWorld), i.premultiply(v), a.extractRotation(i), M.halfWidth.set(.5 * b.width, 0, 0), M.halfHeight.set(0, .5 * b.height, 0), M.halfWidth.applyMatrix4(a), M.halfHeight.applyMatrix4(a), e.rectArea[d] = M, d++ } else if (b.isPointLight) { if ((M = t.get(b)).position.setFromMatrixPosition(b.matrixWorld), M.position.applyMatrix4(v), M.color.copy(b.color).multiplyScalar(b.intensity), M.distance = b.distance, M.decay = b.decay, M.shadow = b.castShadow, b.castShadow) { S = b.shadow; M.shadowBias = S.bias, M.shadowRadius = S.radius, M.shadowMapSize = S.mapSize, M.shadowCameraNear = S.camera.near, M.shadowCameraFar = S.camera.far } e.pointShadowMap[f] = T, e.pointShadowMatrix[f] = b.shadow.matrix, e.point[f] = M, f++ } else if (b.isHemisphereLight) { var M; (M = t.get(b)).direction.setFromMatrixPosition(b.matrixWorld), M.direction.transformDirection(v), M.direction.normalize(), M.skyColor.copy(b.color).multiplyScalar(x), M.groundColor.copy(b.groundColor).multiplyScalar(x), e.hemi[m] = M, m++ } } e.ambient[0] = c, e.ambient[1] = u, e.ambient[2] = l, e.directional.length = h, e.spot.length = p, e.rectArea.length = d, e.point.length = f, e.hemi.length = m, e.hash.stateID = e.id, e.hash.directionalLength = h, e.hash.pointLength = f, e.hash.spotLength = p, e.hash.rectAreaLength = d, e.hash.hemiLength = m, e.hash.shadowsLength = o.length }, state: e } } function Jt() { var t = new Kt, e = [], n = []; return { init: function () { e.length = 0, n.length = 0 }, state: { lightsArray: e, shadowsArray: n, lights: t }, setupLights: function (i) { t.setup(e, n, i) }, pushLight: function (t) { e.push(t) }, pushShadow: function (t) { n.push(t) } } } function Qt(t) { V.call(this), this.type = "MeshDepthMaterial", this.depthPacking = Sc, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.setValues(t) } function te(t) { V.call(this), this.type = "MeshDistanceMaterial", this.referencePosition = new s, this.nearDistance = 1, this.farDistance = 1e3, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.fog = !1, this.lights = !1, this.setValues(t) } function ee(t, e, n) { function i(e, n, i, r, o, a) { var s = e.geometry, c = null, u = b, l = e.customDepthMaterial; if (i && (u = _, l = e.customDistanceMaterial), l) c = l; else { var h = !1; n.morphTargets && (s && s.isBufferGeometry ? h = s.morphAttributes && s.morphAttributes.position && 0 < s.morphAttributes.position.length : s && s.isGeometry && (h = s.morphTargets && 0 < s.morphTargets.length)), e.isSkinnedMesh && !1 === n.skinning && console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", e); var f = e.isSkinnedMesh && n.skinning, p = 0; h && (p |= v), f && (p |= y), c = u[p] } if (t.localClippingEnabled && !0 === n.clipShadows && 0 !== n.clippingPlanes.length) { var d = c.uuid, m = n.uuid, g = x[d]; void 0 === g && (g = {}, x[d] = g); var T = g[m]; void 0 === T && (T = c.clone(), g[m] = T), c = T } return c.visible = n.visible, c.wireframe = n.wireframe, c.side = null == n.shadowSide ? w[n.side] : n.shadowSide, c.clipShadows = n.clipShadows, c.clippingPlanes = n.clippingPlanes, c.clipIntersection = n.clipIntersection, c.wireframeLinewidth = n.wireframeLinewidth, c.linewidth = n.linewidth, i && c.isMeshDistanceMaterial && (c.referencePosition.copy(r), c.nearDistance = o, c.farDistance = a), c } function a(n, r, o, s) { if (!1 !== n.visible) { if (n.layers.test(r.layers) && (n.isMesh || n.isLine || n.isPoints) && n.castShadow && (!n.frustumCulled || c.intersectsObject(n))) { n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse, n.matrixWorld); var u = e.update(n), l = n.material; if (Array.isArray(l)) for (var h = u.groups, f = 0, p = h.length; f < p; f++) { var d = h[f], v = l[d.materialIndex]; if (v && v.visible) { var g = i(n, v, s, m, o.near, o.far); t.renderBufferDirect(o, null, u, g, n, d) } } else if (l.visible) { g = i(n, l, s, m, o.near, o.far); t.renderBufferDirect(o, null, u, g, n, null) } } for (var y = n.children, b = 0, _ = y.length; b < _; b++)a(y[b], r, o, s) } } for (var c = new g, u = new o, f = new r, p = new r(n, n), d = new s, m = new s, v = 1, y = 2, b = [, , , ,], _ = [, , , ,], x = {}, w = { 0: oa, 1: ra, 2: aa }, T = [new s(1, 0, 0), new s(-1, 0, 0), new s(0, 0, 1), new s(0, 0, -1), new s(0, 1, 0), new s(0, -1, 0)], S = [new s(0, 1, 0), new s(0, 1, 0), new s(0, 1, 0), new s(0, 1, 0), new s(0, 0, 1), new s(0, 0, -1)], M = [new l, new l, new l, new l, new l, new l], P = 0; P !== 1 + (v | y); ++P) { var E = 0 != (P & v), A = 0 != (P & y), C = new Qt({ depthPacking: Mc, morphTargets: E, skinning: A }); b[P] = C; var L = new te({ morphTargets: E, skinning: A }); _[P] = L } var R = this; this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = na, this.render = function (e, n, i) { if (!1 !== R.enabled && (!1 !== R.autoUpdate || !1 !== R.needsUpdate) && 0 !== e.length) { t.context; var r = t.state; r.disable(3042), r.buffers.color.setClear(1, 1, 1, 1), r.buffers.depth.setTest(!0), r.setScissorTest(!1); for (var o, s = 0, l = e.length; s < l; s++) { var v = e[s], g = v.shadow, y = v && v.isPointLight; if (void 0 !== g) { var b = g.camera; if (f.copy(g.mapSize), f.min(p), y) { var _ = f.x, x = f.y; M[0].set(2 * _, x, _, x), M[1].set(0, x, _, x), M[2].set(3 * _, x, _, x), M[3].set(_, x, _, x), M[4].set(3 * _, 0, _, x), M[5].set(_, 0, _, x), f.x *= 4, f.y *= 2 } null === g.map && (g.map = new h(f.x, f.y, { minFilter: cs, magFilter: cs, format: As }), g.map.texture.name = v.name + ".shadowMap", b.updateProjectionMatrix()), g.isSpotLightShadow && g.update(v); var w = g.map, P = g.matrix; m.setFromMatrixPosition(v.matrixWorld), b.position.copy(m), y ? (o = 6, P.makeTranslation(-m.x, -m.y, -m.z)) : (o = 1, d.setFromMatrixPosition(v.target.matrixWorld), b.lookAt(d), b.updateMatrixWorld(), P.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), P.multiply(b.projectionMatrix), P.multiply(b.matrixWorldInverse)), t.setRenderTarget(w), t.clear(); for (var E = 0; E < o; E++) { if (y) { d.copy(b.position), d.add(T[E]), b.up.copy(S[E]), b.lookAt(d), b.updateMatrixWorld(); var A = M[E]; r.viewport(A) } u.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), c.setFromMatrix(u), a(n, i, b, y) } } else console.warn("THREE.WebGLShadowMap:", v, "has no shadow.") } R.needsUpdate = !1 } } } function ne(t, e, n, i, r, o, a) { function s(t, e) { if (t.width > e || t.height > e) { if ("data" in t) return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big (" + t.width + "x" + t.height + ")."); var n = e / No(t.width, t.height), i = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"); return i.width = Bo(t.width * n), i.height = Bo(t.height * n), i.getContext("2d").drawImage(t, 0, 0, t.width, t.height, 0, 0, i.width, i.height), console.warn("THREE.WebGLRenderer: image is too big (" + t.width + "x" + t.height + "). Resized to " + i.width + "x" + i.height), i } return t } function c(t) { return Ac.isPowerOfTwo(t.width) && Ac.isPowerOfTwo(t.height) } function u(t, e) { return t.generateMipmaps && e && t.minFilter !== cs && t.minFilter !== hs } function l(e, n, r, o) { t.generateMipmap(e), i.get(n).__maxMipLevel = Oo(No(r, o)) * Math.LOG2E } function h(t, e) { if (!r.isWebGL2) return t; if (6403 === t) { if (5126 === e) return 33326; if (5131 === e) return 33325; if (5121 === e) return 33321 } if (6407 === t) { if (5126 === e) return 34837; if (5131 === e) return 34843; if (5121 === e) return 32849 } if (6408 === t) { if (5126 === e) return 34836; if (5131 === e) return 34842; if (5121 === e) return 32856 } return t } function f(t) { return t === cs || t === us || t === ls ? 9728 : 9729 } function p(t) { var e = t.target; e.removeEventListener("dispose", p), m(e), e.isVideoTexture && delete S[e.id], a.memory.textures-- } function d(t) { var e = t.target; e.removeEventListener("dispose", d), v(e), a.memory.textures-- } function m(e) { var n = i.get(e); if (e.image && n.__image__webglTextureCube) t.deleteTexture(n.__image__webglTextureCube); else { if (void 0 === n.__webglInit) return; t.deleteTexture(n.__webglTexture) } i.remove(e) } function v(e) { var n = i.get(e), r = i.get(e.texture); if (e) { if (void 0 !== r.__webglTexture && t.deleteTexture(r.__webglTexture), e.depthTexture && e.depthTexture.dispose(), e.isWebGLRenderTargetCube) for (var o = 0; 6 > o; o++)t.deleteFramebuffer(n.__webglFramebuffer[o]), n.__webglDepthbuffer && t.deleteRenderbuffer(n.__webglDepthbuffer[o]); else t.deleteFramebuffer(n.__webglFramebuffer), n.__webglDepthbuffer && t.deleteRenderbuffer(n.__webglDepthbuffer); i.remove(e.texture), i.remove(e) } } function g(t, e) { var r = i.get(t); if (t.isVideoTexture && function (t) { var e = t.id, n = a.render.frame; S[e] !== n && (S[e] = n, t.update()) }(t), 0 < t.version && r.__version !== t.version) { var o = t.image; if (void 0 === o) console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined"); else { if (!1 !== o.complete) return void b(r, t, e); console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete") } } n.activeTexture(33984 + e), n.bindTexture(3553, r.__webglTexture) } function y(n, a, s) { var c; if (s ? (t.texParameteri(n, 10242, o.convert(a.wrapS)), t.texParameteri(n, 10243, o.convert(a.wrapT)), t.texParameteri(n, 10240, o.convert(a.magFilter)), t.texParameteri(n, 10241, o.convert(a.minFilter))) : (t.texParameteri(n, 10242, 33071), t.texParameteri(n, 10243, 33071), (a.wrapS !== as || a.wrapT !== as) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), t.texParameteri(n, 10240, f(a.magFilter)), t.texParameteri(n, 10241, f(a.minFilter)), a.minFilter !== cs && a.minFilter !== hs && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), c = e.get("EXT_texture_filter_anisotropic")) { if (a.type === _s && null === e.get("OES_texture_float_linear")) return; if (a.type === xs && null === (r.isWebGL2 || e.get("OES_texture_half_float_linear"))) return; (1 < a.anisotropy || i.get(a).__currentAnisotropy) && (t.texParameterf(n, c.TEXTURE_MAX_ANISOTROPY_EXT, Uo(a.anisotropy, r.getMaxAnisotropy())), i.get(a).__currentAnisotropy = a.anisotropy) } } function b(e, i, f) { var d; d = i.isDataTexture3D ? 32879 : 3553, void 0 === e.__webglInit && (e.__webglInit = !0, i.addEventListener("dispose", p), e.__webglTexture = t.createTexture(), a.memory.textures++), n.activeTexture(33984 + f), n.bindTexture(d, e.__webglTexture), t.pixelStorei(37440, i.flipY), t.pixelStorei(37441, i.premultiplyAlpha), t.pixelStorei(3317, i.unpackAlignment); var m = s(i.image, r.maxTextureSize); (function (t) { return !r.isWebGL2 && (t.wrapS !== as || t.wrapT !== as || t.minFilter !== cs && t.minFilter !== hs) })(i) && !1 === c(m) && (m = function (t) { return t instanceof HTMLImageElement || t instanceof HTMLCanvasElement || t instanceof ImageBitmap ? (void 0 === T && (T = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), T.width = Ac.floorPowerOfTwo(t.width), T.height = Ac.floorPowerOfTwo(t.height), T.getContext("2d").drawImage(t, 0, 0, T.width, T.height), console.warn("THREE.WebGLRenderer: image is not power of two (" + t.width + "x" + t.height + "). Resized to " + T.width + "x" + T.height), T) : t }(m)); var v = c(m), g = o.convert(i.format), b = o.convert(i.type), _ = h(g, b); y(d, i, v); var x, w = i.mipmaps; if (i.isDepthTexture) { if (_ = 6402, i.type === _s) { if (!r.isWebGL2) throw new Error("Float Depth Texture only supported in WebGL2.0"); _ = 36012 } else r.isWebGL2 && (_ = 33189); i.format === Os && 6402 === _ && i.type !== gs && i.type !== bs && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), i.type = gs, b = o.convert(i.type)), i.format === Is && (_ = 34041, i.type !== Ms && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), i.type = Ms, b = o.convert(i.type))), n.texImage2D(3553, 0, _, m.width, m.height, 0, g, b, null) } else if (i.isDataTexture) if (0 < w.length && v) { for (var S = 0, M = w.length; S < M; S++)x = w[S], n.texImage2D(3553, S, _, x.width, x.height, 0, g, b, x.data); i.generateMipmaps = !1, e.__maxMipLevel = w.length - 1 } else n.texImage2D(3553, 0, _, m.width, m.height, 0, g, b, m.data), e.__maxMipLevel = 0; else if (i.isCompressedTexture) { for (S = 0, M = w.length; S < M; S++)x = w[S], i.format !== As && i.format !== Es ? -1 < n.getCompressedTextureFormats().indexOf(g) ? n.compressedTexImage2D(3553, S, _, x.width, x.height, 0, x.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : n.texImage2D(3553, S, _, x.width, x.height, 0, g, b, x.data); e.__maxMipLevel = w.length - 1 } else if (i.isDataTexture3D) n.texImage3D(32879, 0, _, m.width, m.height, m.depth, 0, g, b, m.data), e.__maxMipLevel = 0; else if (0 < w.length && v) { for (S = 0, M = w.length; S < M; S++)x = w[S], n.texImage2D(3553, S, _, g, b, x); i.generateMipmaps = !1, e.__maxMipLevel = w.length - 1 } else n.texImage2D(3553, 0, _, g, b, m), e.__maxMipLevel = 0; u(i, v) && l(3553, i, m.width, m.height), e.__version = i.version, i.onUpdate && i.onUpdate(i) } function _(e, r, a, s) { var c = o.convert(r.texture.format), u = o.convert(r.texture.type), l = h(c, u); n.texImage2D(s, 0, l, r.width, r.height, 0, c, u, null), t.bindFramebuffer(36160, e), t.framebufferTexture2D(36160, a, s, i.get(r.texture).__webglTexture, 0), t.bindFramebuffer(36160, null) } function x(e, n) { t.bindRenderbuffer(36161, e), n.depthBuffer && !n.stencilBuffer ? (t.renderbufferStorage(36161, 33189, n.width, n.height), t.framebufferRenderbuffer(36160, 36096, 36161, e)) : n.depthBuffer && n.stencilBuffer ? (t.renderbufferStorage(36161, 34041, n.width, n.height), t.framebufferRenderbuffer(36160, 33306, 36161, e)) : t.renderbufferStorage(36161, 32854, n.width, n.height), t.bindRenderbuffer(36161, null) } function w(e) { var n = i.get(e), r = !0 === e.isWebGLRenderTargetCube; if (e.depthTexture) { if (r) throw new Error("target.depthTexture not supported in Cube render targets"); !function (e, n) { if (n && n.isWebGLRenderTargetCube) throw new Error("Depth Texture with cube render targets is not supported"); if (t.bindFramebuffer(36160, e), !n.depthTexture || !n.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture"); i.get(n.depthTexture).__webglTexture && n.depthTexture.image.width === n.width && n.depthTexture.image.height === n.height || (n.depthTexture.image.width = n.width, n.depthTexture.image.height = n.height, n.depthTexture.needsUpdate = !0), g(n.depthTexture, 0); var r = i.get(n.depthTexture).__webglTexture; if (n.depthTexture.format === Os) t.framebufferTexture2D(36160, 36096, 3553, r, 0); else { if (n.depthTexture.format !== Is) throw new Error("Unknown depthTexture format"); t.framebufferTexture2D(36160, 33306, 3553, r, 0) } }(n.__webglFramebuffer, e) } else if (r) { n.__webglDepthbuffer = []; for (var o = 0; 6 > o; o++)t.bindFramebuffer(36160, n.__webglFramebuffer[o]), n.__webglDepthbuffer[o] = t.createRenderbuffer(), x(n.__webglDepthbuffer[o], e) } else t.bindFramebuffer(36160, n.__webglFramebuffer), n.__webglDepthbuffer = t.createRenderbuffer(), x(n.__webglDepthbuffer, e); t.bindFramebuffer(36160, null) } var T, S = {}; this.setTexture2D = g, this.setTexture3D = function (t, e) { var r = i.get(t); return 0 < t.version && r.__version !== t.version ? void b(r, t, e) : (n.activeTexture(33984 + e), void n.bindTexture(32879, r.__webglTexture)) }, this.setTextureCube = function (e, f) { var d = i.get(e); if (6 === e.image.length) if (0 < e.version && d.__version !== e.version) { d.__image__webglTextureCube || (e.addEventListener("dispose", p), d.__image__webglTextureCube = t.createTexture(), a.memory.textures++), n.activeTexture(33984 + f), n.bindTexture(34067, d.__image__webglTextureCube), t.pixelStorei(37440, e.flipY); for (var m = e && e.isCompressedTexture, v = e.image[0] && e.image[0].isDataTexture, g = [], b = 0; 6 > b; b++)g[b] = m || v ? v ? e.image[b].image : e.image[b] : s(e.image[b], r.maxCubemapSize); var _ = g[0], x = c(_), w = o.convert(e.format), T = o.convert(e.type), S = h(w, T); y(34067, e, x); for (b = 0; 6 > b; b++)if (m) for (var M, P = g[b].mipmaps, E = 0, A = P.length; E < A; E++)M = P[E], e.format !== As && e.format !== Es ? -1 < n.getCompressedTextureFormats().indexOf(w) ? n.compressedTexImage2D(34069 + b, E, S, M.width, M.height, 0, M.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : n.texImage2D(34069 + b, E, S, M.width, M.height, 0, w, T, M.data); else v ? n.texImage2D(34069 + b, 0, S, g[b].width, g[b].height, 0, w, T, g[b].data) : n.texImage2D(34069 + b, 0, S, w, T, g[b]); d.__maxMipLevel = m ? P.length - 1 : 0, u(e, x) && l(34067, e, _.width, _.height), d.__version = e.version, e.onUpdate && e.onUpdate(e) } else n.activeTexture(33984 + f), n.bindTexture(34067, d.__image__webglTextureCube) }, this.setTextureCubeDynamic = function (t, e) { n.activeTexture(33984 + e), n.bindTexture(34067, i.get(t).__webglTexture) }, this.setupRenderTarget = function (e) { var r = i.get(e), o = i.get(e.texture); e.addEventListener("dispose", d), o.__webglTexture = t.createTexture(), a.memory.textures++; var s = !0 === e.isWebGLRenderTargetCube, h = c(e); if (s) { r.__webglFramebuffer = []; for (var f = 0; 6 > f; f++)r.__webglFramebuffer[f] = t.createFramebuffer() } else r.__webglFramebuffer = t.createFramebuffer(); if (s) { n.bindTexture(34067, o.__webglTexture), y(34067, e.texture, h); for (f = 0; 6 > f; f++)_(r.__webglFramebuffer[f], e, 36064, 34069 + f); u(e.texture, h) && l(34067, e.texture, e.width, e.height), n.bindTexture(34067, null) } else n.bindTexture(3553, o.__webglTexture), y(3553, e.texture, h), _(r.__webglFramebuffer, e, 36064, 3553), u(e.texture, h) && l(3553, e.texture, e.width, e.height), n.bindTexture(3553, null); e.depthBuffer && w(e) }, this.updateRenderTargetMipmap = function (t) { var e = t.texture; if (u(e, c(t))) { var r = t.isWebGLRenderTargetCube ? 34067 : 3553, o = i.get(e).__webglTexture; n.bindTexture(r, o), l(r, e, t.width, t.height), n.bindTexture(r, null) } } } function ie(t, e, n) { return { convert: function (t) { var i; if (t === os) return 10497; if (t === as) return 33071; if (t === ss) return 33648; if (t === cs) return 9728; if (t === us) return 9984; if (t === ls) return 9986; if (t === hs) return 9729; if (t === fs) return 9985; if (t === ps) return 9987; if (t === ds) return 5121; if (t === ws) return 32819; if (t === Ts) return 32820; if (t === Ss) return 33635; if (t === ms) return 5120; if (t === vs) return 5122; if (t === gs) return 5123; if (t === ys) return 5124; if (t === bs) return 5125; if (t === _s) return 5126; if (t === xs) { if (n.isWebGL2) return 5131; if (null !== (i = e.get("OES_texture_half_float"))) return i.HALF_FLOAT_OES } if (t === Ps) return 6406; if (t === Es) return 6407; if (t === As) return 6408; if (t === Cs) return 6409; if (t === Ls) return 6410; if (t === Os) return 6402; if (t === Is) return 34041; if (t === Ds) return 6403; if (t === ya) return 32774; if (t === ba) return 32778; if (t === _a) return 32779; if (t === Ta) return 0; if (t === Sa) return 1; if (t === Ma) return 768; if (t === Pa) return 769; if (t === Ea) return 770; if (t === Aa) return 771; if (t === Ca) return 772; if (t === La) return 773; if (t === Ra) return 774; if (t === Oa) return 775; if (t === Ia) return 776; if ((t === Gs || t === Bs || t === ks || t === Ns) && null !== (i = e.get("WEBGL_compressed_texture_s3tc"))) { if (t === Gs) return i.COMPRESSED_RGB_S3TC_DXT1_EXT; if (t === Bs) return i.COMPRESSED_RGBA_S3TC_DXT1_EXT; if (t === ks) return i.COMPRESSED_RGBA_S3TC_DXT3_EXT; if (t === Ns) return i.COMPRESSED_RGBA_S3TC_DXT5_EXT } if ((t === Hs || t === Fs || t === Us || t === zs) && null !== (i = e.get("WEBGL_compressed_texture_pvrtc"))) { if (t === Hs) return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG; if (t === Fs) return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG; if (t === Us) return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG; if (t === zs) return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG } if (t === js && null !== (i = e.get("WEBGL_compressed_texture_etc1"))) return i.COMPRESSED_RGB_ETC1_WEBGL; if ((t === Vs || t === Ws || t === Xs || t === qs || t === Ys || t === $s || t === Zs || t === Ks || t === Js || t === Qs || t === tc || t === ec || t === nc || t === ic) && null !== (i = e.get("WEBGL_compressed_texture_astc"))) return t; if (t === xa || t === wa) { if (n.isWebGL2) { if (t === xa) return 32775; if (t === wa) return 32776 } if (null !== (i = e.get("EXT_blend_minmax"))) { if (t === xa) return i.MIN_EXT; if (t === wa) return i.MAX_EXT } } if (t === Ms) { if (n.isWebGL2) return 34042; if (null !== (i = e.get("WEBGL_depth_texture"))) return i.UNSIGNED_INT_24_8_WEBGL } return 0 } } } function re() { M.call(this), this.type = "Group" } function oe() { M.call(this), this.type = "Camera", this.matrixWorldInverse = new o, this.projectionMatrix = new o, this.projectionMatrixInverse = new o } function ae(t, e, n, i) { oe.call(this), this.type = "PerspectiveCamera", this.fov = void 0 === t ? 50 : t, this.zoom = 1, this.near = void 0 === n ? .1 : n, this.far = void 0 === i ? 2e3 : i, this.focus = 10, this.aspect = void 0 === e ? 1 : e, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix() } function se(t) { ae.call(this), this.cameras = t || [] } function ce(t, e, n) { Qc.setFromMatrixPosition(e.matrixWorld), tu.setFromMatrixPosition(n.matrixWorld); var i = Qc.distanceTo(tu), r = e.projectionMatrix.elements, o = n.projectionMatrix.elements, a = r[14] / (r[10] - 1), s = r[14] / (r[10] + 1), c = (r[9] + 1) / r[5], u = (r[9] - 1) / r[5], l = (r[8] - 1) / r[0], h = (o[8] + 1) / o[0], f = i / (-l + h), p = f * -l; e.matrixWorld.decompose(t.position, t.quaternion, t.scale), t.translateX(p), t.translateZ(f), t.matrixWorld.compose(t.position, t.quaternion, t.scale), t.matrixWorldInverse.getInverse(t.matrixWorld); var d = a + f, m = s + f; t.projectionMatrix.makePerspective(a * l - p, a * h + (i - p), c * s / m * d, u * s / m * d, d, m) } function ue(t) { function e() { return null !== u && !0 === u.isPresenting } function n() { if (e()) { var n = u.getEyeParameters("left"), i = n.renderWidth * v, r = n.renderHeight * v; P = t.getPixelRatio(), M = t.getSize(), t.setDrawingBufferSize(2 * i, r, 1), A.start() } else c.enabled && t.setDrawingBufferSize(M.width, M.height, P), A.stop() } function i(t) { for (var e, n = navigator.getGamepads && navigator.getGamepads(), i = 0, r = 0, o = n.length; i < o; i++)if ((e = n[i]) && ("Daydream Controller" === e.id || "Gear VR Controller" === e.id || "Oculus Go Controller" === e.id || "OpenVR Gamepad" === e.id || e.id.startsWith("Oculus Touch") || e.id.startsWith("Spatial Controller"))) { if (r === t) return e; r++ } } function r() { for (var t = 0; t < p.length; t++) { var e = p[t], n = i(t); if (void 0 !== n && void 0 !== n.pose) { if (null === n.pose) return; var r = n.pose; !1 === r.hasPosition && e.position.set(.2, -.6, -.05), null !== r.position && e.position.fromArray(r.position), null !== r.orientation && e.quaternion.fromArray(r.orientation), e.matrix.compose(e.position, e.quaternion, e.scale), e.matrix.premultiply(d), e.matrix.decompose(e.position, e.quaternion, e.scale), e.matrixWorldNeedsUpdate = !0, e.visible = !0; var o = "Daydream Controller" === n.id ? 0 : 1; E[t] !== n.buttons[o].pressed && (E[t] = n.buttons[o].pressed, !0 === E[t] ? e.dispatchEvent({ type: "selectstart" }) : (e.dispatchEvent({ type: "selectend" }), e.dispatchEvent({ type: "select" }))) } else e.visible = !1 } } var c = this, u = null, h = null, f = null, p = [], d = new o, m = new o, v = 1, g = "stage"; "undefined" != typeof window && "VRFrameData" in window && (h = new window.VRFrameData, window.addEventListener("vrdisplaypresentchange", n, !1)); var y = new o, b = new a, _ = new s, w = new ae; w.bounds = new l(0, 0, .5, 1), w.layers.enable(1); var T = new ae; T.bounds = new l(.5, 0, .5, 1), T.layers.enable(2); var S = new se([w, T]); S.layers.enable(1), S.layers.enable(2); var M, P, E = []; this.enabled = !1, this.getController = function (t) { var e = p[t]; return void 0 === e && ((e = new re).matrixAutoUpdate = !1, e.visible = !1, p[t] = e), e }, this.getDevice = function () { return u }, this.setDevice = function (t) { void 0 !== t && (u = t), A.setContext(t) }, this.setFramebufferScaleFactor = function (t) { v = t }, this.setFrameOfReferenceType = function (t) { g = t }, this.setPoseTarget = function (t) { void 0 !== t && (f = t) }, this.getCamera = function (t) { var e = "stage" === g ? 1.6 : 0; if (null === u) return t.position.set(0, e, 0), t; if (u.depthNear = t.near, u.depthFar = t.far, u.getFrameData(h), "stage" === g) { var n = u.stageParameters; n ? d.fromArray(n.sittingToStandingTransform) : d.makeTranslation(0, e, 0) } var i = h.pose, o = null === f ? t : f; if (o.matrix.copy(d), o.matrix.decompose(o.position, o.quaternion, o.scale), null !== i.orientation && (b.fromArray(i.orientation), o.quaternion.multiply(b)), null !== i.position && (b.setFromRotationMatrix(d), _.fromArray(i.position), _.applyQuaternion(b), o.position.add(_)), o.updateMatrixWorld(), !1 === u.isPresenting) return t; w.near = t.near, T.near = t.near, w.far = t.far, T.far = t.far, w.matrixWorldInverse.fromArray(h.leftViewMatrix), T.matrixWorldInverse.fromArray(h.rightViewMatrix), m.getInverse(d), "stage" === g && (w.matrixWorldInverse.multiply(m), T.matrixWorldInverse.multiply(m)); var a = o.parent; null !== a && (y.getInverse(a.matrixWorld), w.matrixWorldInverse.multiply(y), T.matrixWorldInverse.multiply(y)), w.matrixWorld.getInverse(w.matrixWorldInverse), T.matrixWorld.getInverse(T.matrixWorldInverse), w.projectionMatrix.fromArray(h.leftProjectionMatrix), T.projectionMatrix.fromArray(h.rightProjectionMatrix), ce(S, w, T); var s = u.getLayers(); if (s.length) { var c = s[0]; null !== c.leftBounds && 4 === c.leftBounds.length && w.bounds.fromArray(c.leftBounds), null !== c.rightBounds && 4 === c.rightBounds.length && T.bounds.fromArray(c.rightBounds) } return r(), S }, this.getStandingMatrix = function () { return d }, this.isPresenting = e; var A = new x; this.setAnimationLoop = function (t) { A.setAnimationLoop(t) }, this.submitFrame = function () { e() && u.submitFrame() }, this.dispose = function () { "undefined" != typeof window && window.removeEventListener("vrdisplaypresentchange", n) } } function le(t) { function e() { return null === it ? mt : 1 } function n() { I = new function (t) { var e = {}; return { get: function (n) { return void 0 !== e[n] ? e[n] : (null === (i = "WEBGL_depth_texture" === n ? t.getExtension("WEBGL_depth_texture") || t.getExtension("MOZ_WEBGL_depth_texture") || t.getExtension("WEBKIT_WEBGL_depth_texture") : "EXT_texture_filter_anisotropic" === n ? t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic") : "WEBGL_compressed_texture_s3tc" === n ? t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc") : "WEBGL_compressed_texture_pvrtc" === n ? t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc") : t.getExtension(n)) && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."), e[n] = i, i); var i } } }(O), (D = new function (t, e, n) { function i(e) { if ("highp" === e) { if (0 < t.getShaderPrecisionFormat(35633, 36338).precision && 0 < t.getShaderPrecisionFormat(35632, 36338).precision) return "highp"; e = "mediump" } return "mediump" === e && 0 < t.getShaderPrecisionFormat(35633, 36337).precision && 0 < t.getShaderPrecisionFormat(35632, 36337).precision ? "mediump" : "lowp" } var r, o = "undefined" != typeof WebGL2RenderingContext && t instanceof WebGL2RenderingContext, a = void 0 === n.precision ? "highp" : n.precision, s = i(a); s !== a && (console.warn("THREE.WebGLRenderer:", a, "not supported, using", s, "instead."), a = s); var c = !0 === n.logarithmicDepthBuffer, u = t.getParameter(34930), l = t.getParameter(35660), h = t.getParameter(3379), f = t.getParameter(34076), p = t.getParameter(34921), d = t.getParameter(36347), m = t.getParameter(36348), v = t.getParameter(36349), g = 0 < l, y = o || !!e.get("OES_texture_float"); return { isWebGL2: o, getMaxAnisotropy: function () { if (void 0 !== r) return r; var n = e.get("EXT_texture_filter_anisotropic"); return r = null === n ? 0 : t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) }, getMaxPrecision: i, precision: a, logarithmicDepthBuffer: c, maxTextures: u, maxVertexTextures: l, maxTextureSize: h, maxCubemapSize: f, maxAttributes: p, maxVertexUniforms: d, maxVaryings: m, maxFragmentUniforms: v, vertexTextures: g, floatFragmentTextures: y, floatVertexTextures: g && y } }(O, I, t)).isWebGL2 || (I.get("WEBGL_depth_texture"), I.get("OES_texture_float"), I.get("OES_texture_half_float"), I.get("OES_texture_half_float_linear"), I.get("OES_standard_derivatives"), I.get("OES_element_index_uint"), I.get("ANGLE_instanced_arrays")), I.get("OES_texture_float_linear"), $ = new ie(O, I, D), (G = new function (t, e, n, i) { function r(e, n, i) { var r = new Uint8Array(4), o = t.createTexture(); t.bindTexture(e, o), t.texParameteri(e, 10241, 9728), t.texParameteri(e, 10240, 9728); for (var a = 0; a < i; a++)t.texImage2D(n + a, 0, 6408, 1, 1, 0, 6408, 5121, r); return o } function o(n, r) { y[n] = 1, 0 === b[n] && (t.enableVertexAttribArray(n), b[n] = 1), _[n] !== r && ((i.isWebGL2 ? t : e.get("ANGLE_instanced_arrays"))[i.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](n, r), _[n] = r) } function a(e) { !0 !== x[e] && (t.enable(e), x[e] = !0) } function s(e) { !1 !== x[e] && (t.disable(e), x[e] = !1) } function c(e, i, r, o, c, u, l, h) { return e === fa ? void (S && (s(3042), S = !1)) : (S || (a(3042), S = !0), e === ga ? (c = c || i, u = u || r, l = l || o, (i !== P || c !== C) && (t.blendEquationSeparate(n.convert(i), n.convert(c)), P = i, C = c), (r !== E || o !== A || u !== L || l !== R) && (t.blendFuncSeparate(n.convert(r), n.convert(o), n.convert(u), n.convert(l)), E = r, A = o, L = u, R = l), M = e, void (O = null)) : void ((e !== M || h !== O) && ((P !== ya || C !== ya) && (t.blendEquation(32774), P = ya, C = ya), h ? e === pa ? t.blendFuncSeparate(1, 771, 1, 771) : e === da ? t.blendFunc(1, 1) : e === ma ? t.blendFuncSeparate(0, 0, 769, 771) : e === va ? t.blendFuncSeparate(0, 768, 0, 770) : console.error("THREE.WebGLState: Invalid blending: ", e) : e === pa ? t.blendFuncSeparate(770, 771, 1, 771) : e === da ? t.blendFunc(770, 1) : e === ma ? t.blendFunc(0, 769) : e === va ? t.blendFunc(0, 768) : console.error("THREE.WebGLState: Invalid blending: ", e), E = null, A = null, L = null, R = null, M = e, O = h))) } function u(e) { I !== e && (e ? t.frontFace(2304) : t.frontFace(2305), I = e) } function h(e) { e === $o ? s(2884) : (a(2884), e !== D && (e === Zo ? t.cullFace(1029) : e === Ko ? t.cullFace(1028) : t.cullFace(1032))), D = e } function f(e, n, i) { e ? (a(32823), (B !== n || k !== i) && (t.polygonOffset(n, i), B = n, k = i)) : s(32823) } function p(e) { void 0 === e && (e = 33984 + N - 1), z !== e && (t.activeTexture(e), z = e) } var d = new function () { var e = !1, n = new l, i = null, r = new l(0, 0, 0, 0); return { setMask: function (n) { i === n || e || (t.colorMask(n, n, n, n), i = n) }, setLocked: function (t) { e = t }, setClear: function (e, i, o, a, s) { !0 === s && (e *= a, i *= a, o *= a), n.set(e, i, o, a), !1 === r.equals(n) && (t.clearColor(e, i, o, a), r.copy(n)) }, reset: function () { e = !1, i = null, r.set(-1, 0, 0, 0) } } }, m = new function () { var e = !1, n = null, i = null, r = null; return { setTest: function (t) { t ? a(2929) : s(2929) }, setMask: function (i) { n === i || e || (t.depthMask(i), n = i) }, setFunc: function (e) { i !== e && (e ? e === Da ? t.depthFunc(512) : e === Ga ? t.depthFunc(519) : e === Ba ? t.depthFunc(513) : e === ka ? t.depthFunc(515) : e === Na ? t.depthFunc(514) : e === Ha ? t.depthFunc(518) : e === Fa ? t.depthFunc(516) : e === Ua ? t.depthFunc(517) : t.depthFunc(515) : t.depthFunc(515), i = e) }, setLocked: function (t) { e = t }, setClear: function (e) { r !== e && (t.clearDepth(e), r = e) }, reset: function () { e = !1, n = null, i = null, r = null } } }, v = new function () { var e = !1, n = null, i = null, r = null, o = null, c = null, u = null, l = null, h = null; return { setTest: function (t) { t ? a(2960) : s(2960) }, setMask: function (i) { n === i || e || (t.stencilMask(i), n = i) }, setFunc: function (e, n, a) { (i !== e || r !== n || o !== a) && (t.stencilFunc(e, n, a), i = e, r = n, o = a) }, setOp: function (e, n, i) { (c !== e || u !== n || l !== i) && (t.stencilOp(e, n, i), c = e, u = n, l = i) }, setLocked: function (t) { e = t }, setClear: function (e) { h !== e && (t.clearStencil(e), h = e) }, reset: function () { e = !1, n = null, i = null, r = null, o = null, c = null, u = null, l = null, h = null } } }, g = t.getParameter(34921), y = new Uint8Array(g), b = new Uint8Array(g), _ = new Uint8Array(g), x = {}, w = null, T = null, S = null, M = null, P = null, E = null, A = null, C = null, L = null, R = null, O = !1, I = null, D = null, G = null, B = null, k = null, N = t.getParameter(35661), H = !1, F = 0, U = t.getParameter(7938); -1 === U.indexOf("WebGL") ? -1 !== U.indexOf("OpenGL ES") && (F = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(U)[1]), H = 2 <= F) : (F = parseFloat(/^WebGL\ ([0-9])/.exec(U)[1]), H = 1 <= F); var z = null, j = {}, V = new l, W = new l, X = {}; return X[3553] = r(3553, 3553, 1), X[34067] = r(34067, 34069, 6), d.setClear(0, 0, 0, 1), m.setClear(1), v.setClear(0), a(2929), m.setFunc(ka), u(!1), h(Zo), a(2884), c(fa), { buffers: { color: d, depth: m, stencil: v }, initAttributes: function () { for (var t = 0, e = y.length; t < e; t++)y[t] = 0 }, enableAttribute: function (t) { o(t, 0) }, enableAttributeAndDivisor: o, disableUnusedAttributes: function () { for (var e = 0, n = b.length; e !== n; ++e)b[e] !== y[e] && (t.disableVertexAttribArray(e), b[e] = 0) }, enable: a, disable: s, getCompressedTextureFormats: function () { if (null === w && (w = [], e.get("WEBGL_compressed_texture_pvrtc") || e.get("WEBGL_compressed_texture_s3tc") || e.get("WEBGL_compressed_texture_etc1") || e.get("WEBGL_compressed_texture_astc"))) for (var n = t.getParameter(34467), i = 0; i < n.length; i++)w.push(n[i]); return w }, useProgram: function (e) { return T !== e && (t.useProgram(e), T = e, !0) }, setBlending: c, setMaterial: function (t, e) { t.side === aa ? s(2884) : a(2884); var n = t.side === oa; e && (n = !n), u(n), t.blending === pa && !1 === t.transparent ? c(fa) : c(t.blending, t.blendEquation, t.blendSrc, t.blendDst, t.blendEquationAlpha, t.blendSrcAlpha, t.blendDstAlpha, t.premultipliedAlpha), m.setFunc(t.depthFunc), m.setTest(t.depthTest), m.setMask(t.depthWrite), d.setMask(t.colorWrite), f(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits) }, setFlipSided: u, setCullFace: h, setLineWidth: function (e) { e !== G && (H && t.lineWidth(e), G = e) }, setPolygonOffset: f, setScissorTest: function (t) { t ? a(3089) : s(3089) }, activeTexture: p, bindTexture: function (e, n) { null === z && p(); var i = j[z]; void 0 === i && (i = { type: void 0, texture: void 0 }, j[z] = i), (i.type !== e || i.texture !== n) && (t.bindTexture(e, n || X[e]), i.type = e, i.texture = n) }, compressedTexImage2D: function () { try { t.compressedTexImage2D.apply(t, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texImage2D: function () { try { t.texImage2D.apply(t, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, texImage3D: function () { try { t.texImage3D.apply(t, arguments) } catch (t) { console.error("THREE.WebGLState:", t) } }, scissor: function (e) { !1 === V.equals(e) && (t.scissor(e.x, e.y, e.z, e.w), V.copy(e)) }, viewport: function (e) { !1 === W.equals(e) && (t.viewport(e.x, e.y, e.z, e.w), W.copy(e)) }, reset: function () { for (var e = 0; e < b.length; e++)1 === b[e] && (t.disableVertexAttribArray(e), b[e] = 0); x = {}, w = null, z = null, j = {}, T = null, M = null, I = null, D = null, d.reset(), m.reset(), v.reset() } } }(O, I, $, D)).scissor(lt.copy(gt).multiplyScalar(mt)), G.viewport(ut.copy(vt).multiplyScalar(mt)), B = new function () { var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 }; return { memory: { geometries: 0, textures: 0 }, render: t, programs: null, autoReset: !0, reset: function () { t.frame++, t.calls = 0, t.triangles = 0, t.points = 0, t.lines = 0 }, update: function (e, n, i) { switch (i = i || 1, t.calls++, n) { case 4: t.triangles += i * (e / 3); break; case 5: case 6: t.triangles += i * (e - 2); break; case 1: t.lines += i * (e / 2); break; case 3: t.lines += i * (e - 1); break; case 2: t.lines += i * e; break; case 0: t.points += i * e; break; default: console.error("THREE.WebGLInfo: Unknown draw mode:", n) } } } }(O), k = new function () { var t = new WeakMap; return { get: function (e) { var n = t.get(e); return void 0 === n && (n = {}, t.set(e, n)), n }, remove: function (e) { t.delete(e) }, update: function (e, n, i) { t.get(e)[n] = i }, dispose: function () { t = new WeakMap } } }, N = new ne(O, I, G, k, D, $, B), H = new function (t) { function e(e, n) { var i = e.array, r = e.dynamic ? 35048 : 35044, o = t.createBuffer(); t.bindBuffer(n, o), t.bufferData(n, i, r), e.onUploadCallback(); var a = 5126; return i instanceof Float32Array ? a = 5126 : i instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : i instanceof Uint16Array ? a = 5123 : i instanceof Int16Array ? a = 5122 : i instanceof Uint32Array ? a = 5125 : i instanceof Int32Array ? a = 5124 : i instanceof Int8Array ? a = 5120 : i instanceof Uint8Array && (a = 5121), { buffer: o, type: a, bytesPerElement: i.BYTES_PER_ELEMENT, version: e.version } } function n(e, n, i) { var r = n.array, o = n.updateRange; t.bindBuffer(i, e), !1 === n.dynamic ? t.bufferData(i, r, 35044) : -1 === o.count ? t.bufferSubData(i, 0, r) : 0 === o.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (t.bufferSubData(i, o.offset * r.BYTES_PER_ELEMENT, r.subarray(o.offset, o.offset + o.count)), o.count = -1) } var i = new WeakMap; return { get: function (t) { return t.isInterleavedBufferAttribute && (t = t.data), i.get(t) }, remove: function (e) { e.isInterleavedBufferAttribute && (e = e.data); var n = i.get(e); n && (t.deleteBuffer(n.buffer), i.delete(e)) }, update: function (t, r) { t.isInterleavedBufferAttribute && (t = t.data); var o = i.get(t); void 0 === o ? i.set(t, e(t, r)) : o.version < t.version && (n(o.buffer, t, r), o.version = t.version) } } }(O), F = new J(O, H, B), U = new function (t, e) { var n = {}; return { update: function (i) { var r = e.render.frame, o = i.geometry, a = t.get(i, o); return n[a.id] !== r && (o.isGeometry && a.updateFromObject(i), t.update(a), n[a.id] = r), a }, dispose: function () { n = {} } } }(F, B), X = new tt(O), z = new qt(Q, I, D), j = new function () { var t = {}; return { get: function (e, n) { var i, r = t[e.id]; return void 0 === r ? (i = new Zt, t[e.id] = {}, t[e.id][n.id] = i) : void 0 === (i = r[n.id]) && (i = new Zt, r[n.id] = i), i }, dispose: function () { t = {} } } }, V = new function () { var t = {}; return { get: function (e, n) { var i; return void 0 === t[e.id] ? (i = new Jt, t[e.id] = {}, t[e.id][n.id] = i) : void 0 === t[e.id][n.id] ? (i = new Jt, t[e.id][n.id] = i) : i = t[e.id][n.id], i }, dispose: function () { t = {} } } }, W = new Z(Q, G, U, E), q = new function (t, e, n, i) { var r; this.setMode = function (t) { r = t }, this.render = function (e, i) { t.drawArrays(r, e, i), n.update(i, r) }, this.renderInstances = function (o, a, s) { var c; if (i.isWebGL2) c = t; else if (null === (c = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."); c[i.isWebGL2 ? "drawArraysInstanced" : "drawArraysInstancedANGLE"](r, a, s, o.maxInstancedCount), n.update(s, r, o.maxInstancedCount) } }(O, I, B, D), Y = new function (t, e, n, i) { var r, o, a; this.setMode = function (t) { r = t }, this.setIndex = function (t) { o = t.type, a = t.bytesPerElement }, this.render = function (e, i) { t.drawElements(r, i, o, e * a), n.update(i, r) }, this.renderInstances = function (s, c, u) { var l; if (i.isWebGL2) l = t; else if (null === (l = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."); l[i.isWebGL2 ? "drawElementsInstanced" : "drawElementsInstancedANGLE"](r, u, o, c * a, s.maxInstancedCount), n.update(u, r, s.maxInstancedCount) } }(O, I, B, D), B.programs = z.programs, Q.context = O, Q.capabilities = D, Q.extensions = I, Q.properties = k, Q.renderLists = j, Q.state = G, Q.info = B } function i(t) { t.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), et = !0 } function r() { console.log("THREE.WebGLRenderer: Context Restored."), et = !1, n() } function a(t) { var e = t.target; e.removeEventListener("dispose", a), function (t) { c(t), k.remove(t) }(e) } function c(t) { var e = k.get(t).program; t.program = void 0, void 0 !== e && z.releaseProgram(e) } function u(t, e, n, i) { for (var r = 0, o = t.length; r < o; r++) { var a = t[r], s = a.object, c = a.geometry, u = void 0 === i ? a.material : i, l = a.group; if (n.isArrayCamera) { ct = n; for (var f, p = n.cameras, d = 0, m = p.length; d < m; d++)if (f = p[d], s.layers.test(f.layers)) { if ("viewport" in f) G.viewport(ut.copy(f.viewport)); else { var v = f.bounds, g = v.x * pt, y = v.y * dt, b = v.z * pt, _ = v.w * dt; G.viewport(ut.set(g, y, b, _).multiplyScalar(mt)) } R.setupLights(f), h(s, e, f, c, u, l) } } else ct = null, h(s, e, n, c, u, l) } } function h(t, e, n, i, r, o) { if (t.onBeforeRender(Q, e, n, i, r, o), R = V.get(e, ct || n), t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, t.matrixWorld), t.normalMatrix.getNormalMatrix(t.modelViewMatrix), t.isImmediateRenderObject) { G.setMaterial(r); var a = d(n, e.fog, r, t); at.geometry = null, at.program = null, at.wireframe = !1, function (t, e) { t.render(function (t) { Q.renderBufferImmediate(t, e) }) }(t, a) } else Q.renderBufferDirect(n, e.fog, i, r, t, o); t.onAfterRender(Q, e, n, i, r, o), R = V.get(e, ct || n) } function f(t, e, n) { var i = k.get(t), r = R.state.lights, o = R.state.shadowsArray, s = i.lightsHash, u = r.state.hash, l = z.getParameters(t, r.state, o, e, _t.numPlanes, _t.numIntersection, n), h = z.getProgramCode(t, l), f = i.program, p = !0; if (void 0 === f) t.addEventListener("dispose", a); else if (f.code !== h) c(t); else if (s.stateID !== u.stateID || s.directionalLength !== u.directionalLength || s.pointLength !== u.pointLength || s.spotLength !== u.spotLength || s.rectAreaLength !== u.rectAreaLength || s.hemiLength !== u.hemiLength || s.shadowsLength !== u.shadowsLength) s.stateID = u.stateID, s.directionalLength = u.directionalLength, s.pointLength = u.pointLength, s.spotLength = u.spotLength, s.rectAreaLength = u.rectAreaLength, s.hemiLength = u.hemiLength, s.shadowsLength = u.shadowsLength, p = !1; else { if (void 0 !== l.shaderID) return; p = !1 } if (p) { if (l.shaderID) { var d = Bc[l.shaderID]; i.shader = { name: t.type, uniforms: y(d.uniforms), vertexShader: d.vertexShader, fragmentShader: d.fragmentShader } } else i.shader = { name: t.type, uniforms: t.uniforms, vertexShader: t.vertexShader, fragmentShader: t.fragmentShader }; t.onBeforeCompile(i.shader, Q), h = z.getProgramCode(t, l), f = z.acquireProgram(t, i.shader, l, h), i.program = f, t.program = f } var m = f.getAttributes(); if (t.morphTargets) { t.numSupportedMorphTargets = 0; for (var v = 0; v < Q.maxMorphTargets; v++)0 <= m["morphTarget" + v] && t.numSupportedMorphTargets++ } if (t.morphNormals) { t.numSupportedMorphNormals = 0; for (v = 0; v < Q.maxMorphNormals; v++)0 <= m["morphNormal" + v] && t.numSupportedMorphNormals++ } var g = i.shader.uniforms; (t.isShaderMaterial || t.isRawShaderMaterial) && !0 !== t.clipping || (i.numClippingPlanes = _t.numPlanes, i.numIntersection = _t.numIntersection, g.clippingPlanes = _t.uniform), i.fog = e, void 0 === s && (i.lightsHash = s = {}), s.stateID = u.stateID, s.directionalLength = u.directionalLength, s.pointLength = u.pointLength, s.spotLength = u.spotLength, s.rectAreaLength = u.rectAreaLength, s.hemiLength = u.hemiLength, s.shadowsLength = u.shadowsLength, t.lights && (g.ambientLightColor.value = r.state.ambient, g.directionalLights.value = r.state.directional, g.spotLights.value = r.state.spot, g.rectAreaLights.value = r.state.rectArea, g.pointLights.value = r.state.point, g.hemisphereLights.value = r.state.hemi, g.directionalShadowMap.value = r.state.directionalShadowMap, g.directionalShadowMatrix.value = r.state.directionalShadowMatrix, g.spotShadowMap.value = r.state.spotShadowMap, g.spotShadowMatrix.value = r.state.spotShadowMatrix, g.pointShadowMap.value = r.state.pointShadowMap, g.pointShadowMatrix.value = r.state.pointShadowMatrix); var b = i.program.getUniforms(), _ = kt.seqWithValue(b.seq, g); i.uniformsList = _ } function d(t, e, n, i) { ft = 0; var r = k.get(n), o = R.state.lights, a = r.lightsHash, s = o.state.hash; if (xt && (wt || t !== st)) { var c = t === st && n.id === ot; _t.setState(n.clippingPlanes, n.clipIntersection, n.clipShadows, t, r, c) } !1 === n.needsUpdate && (void 0 === r.program ? n.needsUpdate = !0 : n.fog && r.fog !== e ? n.needsUpdate = !0 : !n.lights || a.stateID === s.stateID && a.directionalLength === s.directionalLength && a.pointLength === s.pointLength && a.spotLength === s.spotLength && a.rectAreaLength === s.rectAreaLength && a.hemiLength === s.hemiLength && a.shadowsLength === s.shadowsLength ? void 0 !== r.numClippingPlanes && (r.numClippingPlanes !== _t.numPlanes || r.numIntersection !== _t.numIntersection) && (n.needsUpdate = !0) : n.needsUpdate = !0), n.needsUpdate && (f(n, e, i), n.needsUpdate = !1); var u = !1, l = !1, h = !1, d = r.program, g = d.getUniforms(), y = r.shader.uniforms; if (G.useProgram(d.program) && (u = !0, l = !0, h = !0), n.id !== ot && (ot = n.id, l = !0), u || st !== t) { if (g.setValue(O, "projectionMatrix", t.projectionMatrix), D.logarithmicDepthBuffer && g.setValue(O, "logDepthBufFC", 2 / (Oo(t.far + 1) / Ro)), st !== t && (st = t, l = !0, h = !0), n.isShaderMaterial || n.isMeshPhongMaterial || n.isMeshStandardMaterial || n.envMap) { var _ = g.map.cameraPosition; void 0 !== _ && _.setValue(O, St.setFromMatrixPosition(t.matrixWorld)) } (n.isMeshPhongMaterial || n.isMeshLambertMaterial || n.isMeshBasicMaterial || n.isMeshStandardMaterial || n.isShaderMaterial || n.skinning) && g.setValue(O, "viewMatrix", t.matrixWorldInverse) } if (n.skinning) { g.setOptional(O, i, "bindMatrix"), g.setOptional(O, i, "bindMatrixInverse"); var x = i.skeleton; if (x) { var w = x.bones; if (D.floatVertexTextures) { if (void 0 === x.boneTexture) { var T = Ho(4 * w.length); T = Ac.ceilPowerOfTwo(T), T = No(T, 4); var S = new Float32Array(T * T * 4); S.set(x.boneMatrices); var M = new p(S, T, T, As, _s); M.needsUpdate = !0, x.boneMatrices = S, x.boneTexture = M, x.boneTextureSize = T } g.setValue(O, "boneTexture", x.boneTexture), g.setValue(O, "boneTextureSize", x.boneTextureSize) } else g.setOptional(O, x, "boneMatrices") } } return l && (g.setValue(O, "toneMappingExposure", Q.toneMappingExposure), g.setValue(O, "toneMappingWhitePoint", Q.toneMappingWhitePoint), n.lights && function (t, e) { t.ambientLightColor.needsUpdate = e, t.directionalLights.needsUpdate = e, t.pointLights.needsUpdate = e, t.spotLights.needsUpdate = e, t.rectAreaLights.needsUpdate = e, t.hemisphereLights.needsUpdate = e }(y, h), e && n.fog && function (t, e) { t.fogColor.value = e.color, e.isFog ? (t.fogNear.value = e.near, t.fogFar.value = e.far) : e.isFogExp2 && (t.fogDensity.value = e.density) }(y, e), n.isMeshBasicMaterial ? m(y, n) : n.isMeshLambertMaterial ? (m(y, n), function (t, e) { e.emissiveMap && (t.emissiveMap.value = e.emissiveMap) }(y, n)) : n.isMeshPhongMaterial ? (m(y, n), n.isMeshToonMaterial ? function (t, e) { v(t, e), e.gradientMap && (t.gradientMap.value = e.gradientMap) }(y, n) : v(y, n)) : n.isMeshStandardMaterial ? (m(y, n), n.isMeshPhysicalMaterial ? function (t, e) { b(t, e), t.reflectivity.value = e.reflectivity, t.clearCoat.value = e.clearCoat, t.clearCoatRoughness.value = e.clearCoatRoughness }(y, n) : b(y, n)) : n.isMeshMatcapMaterial ? (m(y, n), function (t, e) { e.matcap && (t.matcap.value = e.matcap), e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === oa && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === oa && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias) }(y, n)) : n.isMeshDepthMaterial ? (m(y, n), function (t, e) { e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias) }(y, n)) : n.isMeshDistanceMaterial ? (m(y, n), function (t, e) { e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias), t.referencePosition.value.copy(e.referencePosition), t.nearDistance.value = e.nearDistance, t.farDistance.value = e.farDistance }(y, n)) : n.isMeshNormalMaterial ? (m(y, n), function (t, e) { e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === oa && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === oa && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias) }(y, n)) : n.isLineBasicMaterial ? (function (t, e) { t.diffuse.value = e.color, t.opacity.value = e.opacity }(y, n), n.isLineDashedMaterial && function (t, e) { t.dashSize.value = e.dashSize, t.totalSize.value = e.dashSize + e.gapSize, t.scale.value = e.scale }(y, n)) : n.isPointsMaterial ? function (t, e) { t.diffuse.value = e.color, t.opacity.value = e.opacity, t.size.value = e.size * mt, t.scale.value = .5 * dt, t.map.value = e.map, null !== e.map && (!0 === e.map.matrixAutoUpdate && e.map.updateMatrix(), t.uvTransform.value.copy(e.map.matrix)) }(y, n) : n.isSpriteMaterial ? function (t, e) { t.diffuse.value = e.color, t.opacity.value = e.opacity, t.rotation.value = e.rotation, t.map.value = e.map, null !== e.map && (!0 === e.map.matrixAutoUpdate && e.map.updateMatrix(), t.uvTransform.value.copy(e.map.matrix)) }(y, n) : n.isShadowMaterial && (y.color.value = n.color, y.opacity.value = n.opacity), void 0 !== y.ltc_1 && (y.ltc_1.value = Gc.LTC_1), void 0 !== y.ltc_2 && (y.ltc_2.value = Gc.LTC_2), kt.upload(O, r.uniformsList, y, Q)), n.isShaderMaterial && !0 === n.uniformsNeedUpdate && (kt.upload(O, r.uniformsList, y, Q), n.uniformsNeedUpdate = !1), n.isSpriteMaterial && g.setValue(O, "center", i.center), g.setValue(O, "modelViewMatrix", i.modelViewMatrix), g.setValue(O, "normalMatrix", i.normalMatrix), g.setValue(O, "modelMatrix", i.matrixWorld), d } function m(t, e) { var n; t.opacity.value = e.opacity, e.color && (t.diffuse.value = e.color), e.emissive && t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity), e.map && (t.map.value = e.map), e.alphaMap && (t.alphaMap.value = e.alphaMap), e.specularMap && (t.specularMap.value = e.specularMap), e.envMap && (t.envMap.value = e.envMap, t.flipEnvMap.value = e.envMap.isCubeTexture ? -1 : 1, t.reflectivity.value = e.reflectivity, t.refractionRatio.value = e.refractionRatio, t.maxMipLevel.value = k.get(e.envMap).__maxMipLevel), e.lightMap && (t.lightMap.value = e.lightMap, t.lightMapIntensity.value = e.lightMapIntensity), e.aoMap && (t.aoMap.value = e.aoMap, t.aoMapIntensity.value = e.aoMapIntensity), e.map ? n = e.map : e.specularMap ? n = e.specularMap : e.displacementMap ? n = e.displacementMap : e.normalMap ? n = e.normalMap : e.bumpMap ? n = e.bumpMap : e.roughnessMap ? n = e.roughnessMap : e.metalnessMap ? n = e.metalnessMap : e.alphaMap ? n = e.alphaMap : e.emissiveMap && (n = e.emissiveMap), void 0 !== n && (n.isWebGLRenderTarget && (n = n.texture), !0 === n.matrixAutoUpdate && n.updateMatrix(), t.uvTransform.value.copy(n.matrix)) } function v(t, e) { t.specular.value = e.specular, t.shininess.value = No(e.shininess, 1e-4), e.emissiveMap && (t.emissiveMap.value = e.emissiveMap), e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === oa && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === oa && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias) } function b(t, e) { t.roughness.value = e.roughness, t.metalness.value = e.metalness, e.roughnessMap && (t.roughnessMap.value = e.roughnessMap), e.metalnessMap && (t.metalnessMap.value = e.metalnessMap), e.emissiveMap && (t.emissiveMap.value = e.emissiveMap), e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === oa && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === oa && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias), e.envMap && (t.envMapIntensity.value = e.envMapIntensity) } console.log("THREE.WebGLRenderer", qo); var _ = void 0 === (t = t || {}).canvas ? document.createElementNS("http://www.w3.org/1999/xhtml", "canvas") : t.canvas, w = void 0 === t.context ? null : t.context, T = void 0 !== t.alpha && t.alpha, S = !(void 0 !== t.depth) || t.depth, M = !(void 0 !== t.stencil) || t.stencil, P = void 0 !== t.antialias && t.antialias, E = !(void 0 !== t.premultipliedAlpha) || t.premultipliedAlpha, A = void 0 !== t.preserveDrawingBuffer && t.preserveDrawingBuffer, C = void 0 === t.powerPreference ? "default" : t.powerPreference, L = null, R = null; this.domElement = _, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.physicallyCorrectLights = !1, this.toneMapping = Xa, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, this.maxMorphTargets = 8, this.maxMorphNormals = 4; var O, I, D, G, B, k, N, H, F, U, z, j, V, W, X, q, Y, $, Q = this, et = !1, nt = null, it = null, rt = null, ot = -1, at = { geometry: null, program: null, wireframe: !1 }, st = null, ct = null, ut = new l, lt = new l, ht = null, ft = 0, pt = _.width, dt = _.height, mt = 1, vt = new l(0, 0, pt, dt), gt = new l(0, 0, pt, dt), yt = !1, bt = new g, _t = new K, xt = !1, wt = !1, Tt = new o, St = new s; try { var Mt = { alpha: T, depth: S, stencil: M, antialias: P, premultipliedAlpha: E, preserveDrawingBuffer: A, powerPreference: C }; if (_.addEventListener("webglcontextlost", i, !1), _.addEventListener("webglcontextrestored", r, !1), null === (O = w || _.getContext("webgl", Mt) || _.getContext("experimental-webgl", Mt))) throw null !== _.getContext("webgl") ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context."); void 0 === O.getShaderPrecisionFormat && (O.getShaderPrecisionFormat = function () { return { rangeMin: 1, rangeMax: 1, precision: 1 } }) } catch (t) { console.error("THREE.WebGLRenderer: " + t.message) } n(); var Pt = null; "undefined" != typeof navigator && (Pt = "xr" in navigator ? new function (t) { function e() { return null !== s && null !== u } function n(t) { var e = p[d.indexOf(t.inputSource)]; e && e.dispatchEvent({ type: t.type }) } function i() { t.setFramebuffer(null), b.stop() } function r(t, e) { null === e ? t.matrixWorld.copy(t.matrix) : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix), t.matrixWorldInverse.getInverse(t.matrixWorld) } var o = t.context, a = null, s = null, c = 1, u = null, h = "stage", f = null, p = [], d = [], m = new ae; m.layers.enable(1), m.viewport = new l; var v = new ae; v.layers.enable(2), v.viewport = new l; var g = new se([m, v]); g.layers.enable(1), g.layers.enable(2), this.enabled = !1, this.getController = function (t) { var e = p[t]; return void 0 === e && ((e = new re).matrixAutoUpdate = !1, e.visible = !1, p[t] = e), e }, this.getDevice = function () { return a }, this.setDevice = function (t) { void 0 !== t && (a = t), t instanceof XRDevice && o.setCompatibleXRDevice(t) }, this.setFramebufferScaleFactor = function (t) { c = t }, this.setFrameOfReferenceType = function (t) { h = t }, this.setSession = function (e) { null !== (s = e) && (s.addEventListener("select", n), s.addEventListener("selectstart", n), s.addEventListener("selectend", n), s.addEventListener("end", i), s.baseLayer = new XRWebGLLayer(s, o, { framebufferScaleFactor: c }), s.requestFrameOfReference(h).then(function (e) { u = e, t.setFramebuffer(s.baseLayer.framebuffer), b.setContext(s), b.start() }), d = s.getInputSources(), s.addEventListener("inputsourceschange", function () { d = s.getInputSources(), console.log(d); for (var t = 0; t < p.length; t++)p[t].userData.inputSource = d[t] })) }, this.getCamera = function (t) { if (e()) { var n = t.parent, i = g.cameras; r(g, n); for (var o = 0; o < i.length; o++)r(i[o], n); t.matrixWorld.copy(g.matrixWorld); for (var a = t.children, s = (o = 0, a.length); o < s; o++)a[o].updateMatrixWorld(!0); return ce(g, m, v), g } return t }, this.isPresenting = e; var y = null, b = new x; b.setAnimationLoop(function (t, e) { if (null !== (f = e.getDevicePose(u))) for (var n = s.baseLayer, i = e.views, r = 0; r < i.length; r++) { var o = i[r], a = n.getViewport(o), c = f.getViewMatrix(o), l = g.cameras[r]; l.matrix.fromArray(c).getInverse(l.matrix), l.projectionMatrix.fromArray(o.projectionMatrix), l.viewport.set(a.x, a.y, a.width, a.height), 0 === r && g.matrix.copy(l.matrix) } for (r = 0; r < p.length; r++) { var h = p[r], m = d[r]; if (m) { var v = e.getInputPose(m, u); if (null !== v) { "targetRay" in v ? h.matrix.elements = v.targetRay.transformMatrix : "pointerMatrix" in v && (h.matrix.elements = v.pointerMatrix), h.matrix.decompose(h.position, h.rotation, h.scale), h.visible = !0; continue } } h.visible = !1 } y && y(t) }), this.setAnimationLoop = function (t) { y = t }, this.dispose = function () { }, this.getStandingMatrix = function () { return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."), new THREE.Matrix4 }, this.submitFrame = function () { } }(Q) : new ue(Q)), this.vr = Pt; var Et = new ee(Q, U, D.maxTextureSize); this.shadowMap = Et, this.getContext = function () { return O }, this.getContextAttributes = function () { return O.getContextAttributes() }, this.forceContextLoss = function () { var t = I.get("WEBGL_lose_context"); t && t.loseContext() }, this.forceContextRestore = function () { var t = I.get("WEBGL_lose_context"); t && t.restoreContext() }, this.getPixelRatio = function () { return mt }, this.setPixelRatio = function (t) { void 0 === t || (mt = t, this.setSize(pt, dt, !1)) }, this.getSize = function () { return { width: pt, height: dt } }, this.setSize = function (t, e, n) { return Pt.isPresenting() ? void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (pt = t, dt = e, _.width = t * mt, _.height = e * mt, !1 !== n && (_.style.width = t + "px", _.style.height = e + "px"), void this.setViewport(0, 0, t, e)) }, this.getDrawingBufferSize = function () { return { width: pt * mt, height: dt * mt } }, this.setDrawingBufferSize = function (t, e, n) { pt = t, dt = e, mt = n, _.width = t * n, _.height = e * n, this.setViewport(0, 0, t, e) }, this.getCurrentViewport = function () { return ut }, this.setViewport = function (t, e, n, i) { vt.set(t, dt - e - i, n, i), G.viewport(ut.copy(vt).multiplyScalar(mt)) }, this.setScissor = function (t, e, n, i) { gt.set(t, dt - e - i, n, i), G.scissor(lt.copy(gt).multiplyScalar(mt)) }, this.setScissorTest = function (t) { G.setScissorTest(yt = t) }, this.getClearColor = function () { return W.getClearColor() }, this.setClearColor = function () { W.setClearColor.apply(W, arguments) }, this.getClearAlpha = function () { return W.getClearAlpha() }, this.setClearAlpha = function () { W.setClearAlpha.apply(W, arguments) }, this.clear = function (t, e, n) { var i = 0; (void 0 === t || t) && (i |= 16384), (void 0 === e || e) && (i |= 256), (void 0 === n || n) && (i |= 1024), O.clear(i) }, this.clearColor = function () { this.clear(!0, !1, !1) }, this.clearDepth = function () { this.clear(!1, !0, !1) }, this.clearStencil = function () { this.clear(!1, !1, !0) }, this.dispose = function () { _.removeEventListener("webglcontextlost", i, !1), _.removeEventListener("webglcontextrestored", r, !1), j.dispose(), V.dispose(), k.dispose(), U.dispose(), Pt.dispose(), Ct.stop() }, this.renderBufferImmediate = function (t, e) { G.initAttributes(); var n = k.get(t); t.hasPositions && !n.position && (n.position = O.createBuffer()), t.hasNormals && !n.normal && (n.normal = O.createBuffer()), t.hasUvs && !n.uv && (n.uv = O.createBuffer()), t.hasColors && !n.color && (n.color = O.createBuffer()); var i = e.getAttributes(); t.hasPositions && (O.bindBuffer(34962, n.position), O.bufferData(34962, t.positionArray, 35048), G.enableAttribute(i.position), O.vertexAttribPointer(i.position, 3, 5126, !1, 0, 0)), t.hasNormals && (O.bindBuffer(34962, n.normal), O.bufferData(34962, t.normalArray, 35048), G.enableAttribute(i.normal), O.vertexAttribPointer(i.normal, 3, 5126, !1, 0, 0)), t.hasUvs && (O.bindBuffer(34962, n.uv), O.bufferData(34962, t.uvArray, 35048), G.enableAttribute(i.uv), O.vertexAttribPointer(i.uv, 2, 5126, !1, 0, 0)), t.hasColors && (O.bindBuffer(34962, n.color), O.bufferData(34962, t.colorArray, 35048), G.enableAttribute(i.color), O.vertexAttribPointer(i.color, 3, 5126, !1, 0, 0)), G.disableUnusedAttributes(), O.drawArrays(4, 0, t.count), t.count = 0 }, this.renderBufferDirect = function (t, n, i, r, o, a) { var s = o.isMesh && 0 > o.normalMatrix.determinant(); G.setMaterial(r, s); var c = d(t, n, r, o), u = !1; (at.geometry !== i.id || at.program !== c.id || at.wireframe !== (!0 === r.wireframe)) && (at.geometry = i.id, at.program = c.id, at.wireframe = !0 === r.wireframe, u = !0), o.morphTargetInfluences && (X.update(o, i, r, c), u = !0); var l = i.index, h = i.attributes.position, f = 1; !0 === r.wireframe && (l = F.getWireframeAttribute(i), f = 2); var p, m = q; null !== l && (p = H.get(l), (m = Y).setIndex(p)), u && (function (t, e, n) { if (n && n.isInstancedBufferGeometry & !D.isWebGL2 && null === I.get("ANGLE_instanced_arrays")) console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."); else { G.initAttributes(); var i = n.attributes, r = e.getAttributes(), o = t.defaultAttributeValues; for (var a in r) { var s = r[a]; if (0 <= s) { var c = i[a]; if (void 0 !== c) { var u = c.normalized, l = c.itemSize, h = H.get(c); if (void 0 === h) continue; var f = h.buffer, p = h.type, d = h.bytesPerElement; if (c.isInterleavedBufferAttribute) { var m = c.data, v = m.stride, g = c.offset; m && m.isInstancedInterleavedBuffer ? (G.enableAttributeAndDivisor(s, m.meshPerAttribute), void 0 === n.maxInstancedCount && (n.maxInstancedCount = m.meshPerAttribute * m.count)) : G.enableAttribute(s), O.bindBuffer(34962, f), O.vertexAttribPointer(s, l, p, u, v * d, g * d) } else c.isInstancedBufferAttribute ? (G.enableAttributeAndDivisor(s, c.meshPerAttribute), void 0 === n.maxInstancedCount && (n.maxInstancedCount = c.meshPerAttribute * c.count)) : G.enableAttribute(s), O.bindBuffer(34962, f), O.vertexAttribPointer(s, l, p, u, 0, 0) } else if (void 0 !== o) { var y = o[a]; if (void 0 !== y) switch (y.length) { case 2: O.vertexAttrib2fv(s, y); break; case 3: O.vertexAttrib3fv(s, y); break; case 4: O.vertexAttrib4fv(s, y); break; default: O.vertexAttrib1fv(s, y) } } } } G.disableUnusedAttributes() } }(r, c, i), null !== l && O.bindBuffer(34963, p.buffer)); var v = 1 / 0; null === l ? void 0 !== h && (v = h.count) : v = l.count; var g = i.drawRange.start * f, y = i.drawRange.count * f, b = null === a ? 0 : a.start * f, _ = null === a ? 1 / 0 : a.count * f, x = No(g, b), w = Uo(v, g + y, b + _) - 1, T = No(0, w - x + 1); if (0 !== T) { if (o.isMesh) if (!0 === r.wireframe) G.setLineWidth(r.wireframeLinewidth * e()), m.setMode(1); else switch (o.drawMode) { case pc: m.setMode(4); break; case dc: m.setMode(5); break; case mc: m.setMode(6) } else if (o.isLine) { var S = r.linewidth; void 0 === S && (S = 1), G.setLineWidth(S * e()), o.isLineSegments ? m.setMode(1) : o.isLineLoop ? m.setMode(2) : m.setMode(3) } else o.isPoints ? m.setMode(0) : o.isSprite && m.setMode(4); i && i.isInstancedBufferGeometry ? 0 < i.maxInstancedCount && m.renderInstances(i, x, T) : m.render(x, T) } }, this.compile = function (t, e) { (R = V.get(t, e)).init(), t.traverse(function (t) { t.isLight && (R.pushLight(t), t.castShadow && R.pushShadow(t)) }), R.setupLights(e), t.traverse(function (e) { if (e.material) if (Array.isArray(e.material)) for (var n = 0; n < e.material.length; n++)f(e.material[n], t.fog, e); else f(e.material, t.fog, e) }) }; var At = null, Ct = new x; Ct.setAnimationLoop(function (t) { Pt.isPresenting() || At && At(t) }), "undefined" != typeof window && Ct.setContext(window), this.setAnimationLoop = function (t) { At = t, Pt.setAnimationLoop(t), Ct.start() }, this.render = function (t, e, n, i) { if (e && e.isCamera) { if (!et) { at.geometry = null, at.program = null, at.wireframe = !1, ot = -1, st = null, !0 === t.autoUpdate && t.updateMatrixWorld(), null === e.parent && e.updateMatrixWorld(), Pt.enabled && (e = Pt.getCamera(e)), (R = V.get(t, e)).init(), t.onBeforeRender(Q, t, e, n), Tt.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse), bt.setFromMatrix(Tt), wt = this.localClippingEnabled, xt = _t.init(this.clippingPlanes, wt, e), (L = j.get(t, e)).init(), function t(e, n, i) { if (!1 !== e.visible) { if (e.layers.test(n.layers)) if (e.isLight) R.pushLight(e), e.castShadow && R.pushShadow(e); else if (e.isSprite) { if (!e.frustumCulled || bt.intersectsSprite(e)) { i && St.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Tt); var r = U.update(e), o = e.material; L.push(e, r, o, St.z, null) } } else if (e.isImmediateRenderObject) i && St.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Tt), L.push(e, null, e.material, St.z, null); else if ((e.isMesh || e.isLine || e.isPoints) && (e.isSkinnedMesh && e.skeleton.update(), !e.frustumCulled || bt.intersectsObject(e))) if (i && St.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Tt), r = U.update(e), o = e.material, Array.isArray(o)) for (var a = r.groups, s = 0, c = a.length; s < c; s++) { var u = a[s], l = o[u.materialIndex]; l && l.visible && L.push(e, r, l, St.z, u) } else o.visible && L.push(e, r, o, St.z, null); var h = e.children; for (s = 0, c = h.length; s < c; s++)t(h[s], n, i) } }(t, e, Q.sortObjects), !0 === Q.sortObjects && L.sort(), xt && _t.beginShadows(); var r = R.state.shadowsArray; Et.render(r, t, e), R.setupLights(e), xt && _t.endShadows(), this.info.autoReset && this.info.reset(), void 0 === n && (n = null), this.setRenderTarget(n), W.render(L, t, e, i); var o = L.opaque, a = L.transparent; if (t.overrideMaterial) { var s = t.overrideMaterial; o.length && u(o, t, e, s), a.length && u(a, t, e, s) } else o.length && u(o, t, e), a.length && u(a, t, e); n && N.updateRenderTargetMipmap(n), G.buffers.depth.setTest(!0), G.buffers.depth.setMask(!0), G.buffers.color.setMask(!0), G.setPolygonOffset(!1), t.onAfterRender(Q, t, e), Pt.enabled && Pt.submitFrame(), L = null, R = null } } else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.") }, this.allocTextureUnit = function () { var t = ft; return t >= D.maxTextures && console.warn("THREE.WebGLRenderer: Trying to use " + t + " texture units while this GPU supports only " + D.maxTextures), ft += 1, t }, this.setTexture2D = function () { var t = !1; return function (e, n) { e && e.isWebGLRenderTarget && (!t && (console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."), t = !0), e = e.texture), N.setTexture2D(e, n) } }(), this.setTexture3D = function (t, e) { N.setTexture3D(t, e) }, this.setTexture = function () { var t = !1; return function (e, n) { t || (console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."), t = !0), N.setTexture2D(e, n) } }(), this.setTextureCube = function () { var t = !1; return function (e, n) { e && e.isWebGLRenderTargetCube && (!t && (console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."), t = !0), e = e.texture), e && e.isCubeTexture || Array.isArray(e.image) && 6 === e.image.length ? N.setTextureCube(e, n) : N.setTextureCubeDynamic(e, n) } }(), this.setFramebuffer = function (t) { nt = t }, this.getRenderTarget = function () { return it }, this.setRenderTarget = function (t) { it = t, t && void 0 === k.get(t).__webglFramebuffer && N.setupRenderTarget(t); var e = nt, n = !1; if (t) { var i = k.get(t).__webglFramebuffer; t.isWebGLRenderTargetCube ? (e = i[t.activeCubeFace], n = !0) : e = i, ut.copy(t.viewport), lt.copy(t.scissor), ht = t.scissorTest } else ut.copy(vt).multiplyScalar(mt), lt.copy(gt).multiplyScalar(mt), ht = yt; if (rt !== e && (O.bindFramebuffer(36160, e), rt = e), G.viewport(ut), G.scissor(lt), G.setScissorTest(ht), n) { var r = k.get(t.texture); O.framebufferTexture2D(36160, 36064, 34069 + t.activeCubeFace, r.__webglTexture, t.activeMipMapLevel) } }, this.readRenderTargetPixels = function (t, e, n, i, r, o) { if (t && t.isWebGLRenderTarget) { var a = k.get(t).__webglFramebuffer; if (a) { var s = !1; a !== rt && (O.bindFramebuffer(36160, a), s = !0); try { var c = t.texture, u = c.format, l = c.type; if (u !== As && $.convert(u) !== O.getParameter(35739)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."); if (!(l === ds || $.convert(l) === O.getParameter(35738) || l === _s && (D.isWebGL2 || I.get("OES_texture_float") || I.get("WEBGL_color_buffer_float")) || l === xs && (D.isWebGL2 ? I.get("EXT_color_buffer_float") : I.get("EXT_color_buffer_half_float")))) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."); 36053 === O.checkFramebufferStatus(36160) ? 0 <= e && e <= t.width - i && 0 <= n && n <= t.height - r && O.readPixels(e, n, i, r, $.convert(u), $.convert(l), o) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.") } finally { s && O.bindFramebuffer(36160, rt) } } } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.") }, this.copyFramebufferToTexture = function (t, e, n) { var i = e.image.width, r = e.image.height, o = $.convert(e.format); this.setTexture2D(e, 0), O.copyTexImage2D(3553, n || 0, o, t.x, t.y, i, r, 0) }, this.copyTextureToTexture = function (t, e, n, i) { var r = e.image.width, o = e.image.height, a = $.convert(n.format), s = $.convert(n.type); this.setTexture2D(n, 0), e.isDataTexture ? O.texSubImage2D(3553, i || 0, t.x, t.y, r, o, a, s, e.image.data) : O.texSubImage2D(3553, i || 0, t.x, t.y, a, s, e.image) } } function he(t, e) { this.name = "", this.color = new _(t), this.density = void 0 === e ? 25e-5 : e } function fe(t, e, n) { this.name = "", this.color = new _(t), this.near = void 0 === e ? 1 : e, this.far = void 0 === n ? 1e3 : n } function pe() { M.call(this), this.type = "Scene", this.background = null, this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0 } function de(t, e) { this.array = t, this.stride = e, this.count = void 0 === t ? 0 : t.length / e, this.dynamic = !1, this.updateRange = { offset: 0, count: -1 }, this.version = 0 } function me(t, e, n, i) { this.data = t, this.itemSize = e, this.offset = n, this.normalized = !0 === i } function ve(t) { V.call(this), this.type = "SpriteMaterial", this.color = new _(16777215), this.map = null, this.rotation = 0, this.sizeAttenuation = !0, this.lights = !1, this.transparent = !0, this.setValues(t) } function ge(t) { if (M.call(this), this.type = "Sprite", void 0 === Jc) { Jc = new H; var e = new de(new Float32Array([-.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1]), 5); Jc.setIndex([0, 1, 2, 0, 2, 3]), Jc.addAttribute("position", new me(e, 3, 0, !1)), Jc.addAttribute("uv", new me(e, 2, 3, !1)) } this.geometry = Jc, this.material = void 0 === t ? new ve : t, this.center = new r(.5, .5) } function ye() { M.call(this), this.type = "LOD", Object.defineProperties(this, { levels: { enumerable: !0, value: [] } }) } function be(t, e) { t && t.isGeometry && console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."), $.call(this, t, e), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new o, this.bindMatrixInverse = new o } function _e(t, e) { if (t = t || [], this.bones = t.slice(0), this.boneMatrices = new Float32Array(16 * this.bones.length), void 0 === e) this.calculateInverses(); else if (this.bones.length === e.length) this.boneInverses = e.slice(0); else { console.warn("THREE.Skeleton boneInverses is the wrong length."), this.boneInverses = []; for (var n = 0, i = this.bones.length; n < i; n++)this.boneInverses.push(new o) } } function xe() { M.call(this), this.type = "Bone" } function we(t) { V.call(this), this.type = "LineBasicMaterial", this.color = new _(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.lights = !1, this.setValues(t) } function Te(t, e, n) { 1 === n && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."), M.call(this), this.type = "Line", this.geometry = void 0 === t ? new H : t, this.material = void 0 === e ? new we({ color: 16777215 * Math.random() }) : e } function Se(t, e) { Te.call(this, t, e), this.type = "LineSegments" } function Me(t, e) { Te.call(this, t, e), this.type = "LineLoop" } function Pe(t) { V.call(this), this.type = "PointsMaterial", this.color = new _(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.morphTargets = !1, this.lights = !1, this.setValues(t) } function Ee(t, e) { M.call(this), this.type = "Points", this.geometry = void 0 === t ? new H : t, this.material = void 0 === e ? new Pe({ color: 16777215 * Math.random() }) : e } function Ae(t, e, n, i, r, o, a, s, c) { u.call(this, t, e, n, i, r, o, a, s, c), this.format = void 0 === a ? Es : a, this.minFilter = void 0 === o ? hs : o, this.magFilter = void 0 === r ? hs : r, this.generateMipmaps = !1 } function Ce(t, e, n, i, r, o, a, s, c, l, h, f) { u.call(this, null, o, a, s, c, l, i, r, h, f), this.image = { width: e, height: n }, this.mipmaps = t, this.flipY = !1, this.generateMipmaps = !1 } function Le(t, e, n, i, r, o, a, s, c) { u.call(this, t, e, n, i, r, o, a, s, c), this.needsUpdate = !0 } function Re(t, e, n, i, r, o, a, s, c, l) { if ((l = void 0 === l ? Os : l) !== Os && l !== Is) throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"); void 0 === n && l === Os && (n = gs), void 0 === n && l === Is && (n = Ms), u.call(this, null, i, r, o, a, s, l, n, c), this.image = { width: t, height: e }, this.magFilter = void 0 === a ? cs : a, this.minFilter = void 0 === s ? cs : s, this.flipY = !1, this.generateMipmaps = !1 } function Oe(t) { H.call(this), this.type = "WireframeGeometry"; var e, n, i, r, o, a, c, u, l, h, f = [], p = [0, 0], d = {}, m = ["a", "b", "c"]; if (t && t.isGeometry) { var v = t.faces; for (e = 0, i = v.length; e < i; e++) { var g = v[e]; for (n = 0; 3 > n; n++)c = g[m[n]], u = g[m[(n + 1) % 3]], p[0] = Uo(c, u), p[1] = No(c, u), void 0 === d[l = p[0] + "," + p[1]] && (d[l] = { index1: p[0], index2: p[1] }) } for (l in d) a = d[l], h = t.vertices[a.index1], f.push(h.x, h.y, h.z), h = t.vertices[a.index2], f.push(h.x, h.y, h.z) } else if (t && t.isBufferGeometry) { var y, b, _, x, w, T, S; if (h = new s, null !== t.index) { for (y = t.attributes.position, b = t.index, 0 === (_ = t.groups).length && (_ = [{ start: 0, count: b.count, materialIndex: 0 }]), r = 0, o = _.length; r < o; ++r)for (e = w = (x = _[r]).start, i = w + x.count; e < i; e += 3)for (n = 0; 3 > n; n++)c = b.getX(e + n), u = b.getX(e + (n + 1) % 3), p[0] = Uo(c, u), p[1] = No(c, u), void 0 === d[l = p[0] + "," + p[1]] && (d[l] = { index1: p[0], index2: p[1] }); for (l in d) a = d[l], h.fromBufferAttribute(y, a.index1), f.push(h.x, h.y, h.z), h.fromBufferAttribute(y, a.index2), f.push(h.x, h.y, h.z) } else for (e = 0, i = (y = t.attributes.position).count / 3; e < i; e++)for (n = 0; 3 > n; n++)T = 3 * e + n, h.fromBufferAttribute(y, T), f.push(h.x, h.y, h.z), S = 3 * e + (n + 1) % 3, h.fromBufferAttribute(y, S), f.push(h.x, h.y, h.z) } this.addAttribute("position", new G(f, 3)) } function Ie(t, e, n) { P.call(this), this.type = "ParametricGeometry", this.parameters = { func: t, slices: e, stacks: n }, this.fromBufferGeometry(new De(t, e, n)), this.mergeVertices() } function De(t, e, n) { H.call(this), this.type = "ParametricBufferGeometry", this.parameters = { func: t, slices: e, stacks: n }; var i, r, o = [], a = [], c = [], u = [], l = 1e-5, h = new s, f = new s, p = new s, d = new s, m = new s; 3 > t.length && console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter."); var v = e + 1; for (i = 0; i <= n; i++) { var g = i / n; for (r = 0; r <= e; r++) { var y = r / e; t(y, g, f), a.push(f.x, f.y, f.z), 0 <= y - l ? (t(y - l, g, p), d.subVectors(f, p)) : (t(y + l, g, p), d.subVectors(p, f)), 0 <= g - l ? (t(y, g - l, p), m.subVectors(f, p)) : (t(y, g + l, p), m.subVectors(p, f)), h.crossVectors(d, m).normalize(), c.push(h.x, h.y, h.z), u.push(y, g) } } for (i = 0; i < n; i++)for (r = 0; r < e; r++) { var b = i * v + r, _ = i * v + r + 1, x = (i + 1) * v + r + 1, w = (i + 1) * v + r; o.push(b, _, w), o.push(_, x, w) } this.setIndex(o), this.addAttribute("position", new G(a, 3)), this.addAttribute("normal", new G(c, 3)), this.addAttribute("uv", new G(u, 2)) } function Ge(t, e, n, i) { P.call(this), this.type = "PolyhedronGeometry", this.parameters = { vertices: t, indices: e, radius: n, detail: i }, this.fromBufferGeometry(new Be(t, e, n, i)), this.mergeVertices() } function Be(t, e, n, i) { function o(t, e, n, i) { var r, o, s = Lo(2, i), c = []; for (r = 0; r <= s; r++) { c[r] = []; var u = t.clone().lerp(n, r / s), l = e.clone().lerp(n, r / s), h = s - r; for (o = 0; o <= h; o++)c[r][o] = 0 === o && r === s ? u : u.clone().lerp(l, o / h) } for (r = 0; r < s; r++)for (o = 0; o < 2 * (s - r) - 1; o++) { var f = Bo(o / 2); 0 == o % 2 ? (a(c[r][f + 1]), a(c[r + 1][f]), a(c[r][f])) : (a(c[r][f + 1]), a(c[r + 1][f + 1]), a(c[r + 1][f])) } } function a(t) { f.push(t.x, t.y, t.z) } function c(e, n) { var i = 3 * e; n.x = t[i + 0], n.y = t[i + 1], n.z = t[i + 2] } function u(t, e, n, i) { 0 > i && 1 === t.x && (p[e] = t.x - 1), 0 === n.x && 0 === n.z && (p[e] = i / 2 / Fo + .5) } function l(t) { return Vo(t.z, -t.x) } function h(t) { return Vo(-t.y, Ho(t.x * t.x + t.z * t.z)) } H.call(this), this.type = "PolyhedronBufferGeometry", this.parameters = { vertices: t, indices: e, radius: n, detail: i }, n = n || 1; var f = [], p = []; (function (t) { for (var n = new s, i = new s, r = new s, a = 0; a < e.length; a += 3)c(e[a + 0], n), c(e[a + 1], i), c(e[a + 2], r), o(n, i, r, t) })(i = i || 0), function (t) { for (var e = new s, n = 0; n < f.length; n += 3)e.x = f[n + 0], e.y = f[n + 1], e.z = f[n + 2], e.normalize().multiplyScalar(t), f[n + 0] = e.x, f[n + 1] = e.y, f[n + 2] = e.z }(n), function () { for (var t = new s, e = 0; e < f.length; e += 3) { t.x = f[e + 0], t.y = f[e + 1], t.z = f[e + 2]; var n = l(t) / 2 / Fo + .5, i = h(t) / Fo + .5; p.push(n, 1 - i) } (function () { for (var t = new s, e = new s, n = new s, i = new s, o = new r, a = new r, c = new r, h = 0, d = 0; h < f.length; h += 9, d += 6) { t.set(f[h + 0], f[h + 1], f[h + 2]), e.set(f[h + 3], f[h + 4], f[h + 5]), n.set(f[h + 6], f[h + 7], f[h + 8]), o.set(p[d + 0], p[d + 1]), a.set(p[d + 2], p[d + 3]), c.set(p[d + 4], p[d + 5]), i.copy(t).add(e).add(n).divideScalar(3); var m = l(i); u(o, d + 0, t, m), u(a, d + 2, e, m), u(c, d + 4, n, m) } })(), function () { for (var t = 0; t < p.length; t += 6) { var e = p[t + 0], n = p[t + 2], i = p[t + 4], r = No(e, n, i), o = Uo(e, n, i); .9 < r && .1 > o && (.2 > e && (p[t + 0] += 1), .2 > n && (p[t + 2] += 1), .2 > i && (p[t + 4] += 1)) } }() }(), this.addAttribute("position", new G(f, 3)), this.addAttribute("normal", new G(f.slice(), 3)), this.addAttribute("uv", new G(p, 2)), 0 === i ? this.computeVertexNormals() : this.normalizeNormals() } function ke(t, e) { P.call(this), this.type = "TetrahedronGeometry", this.parameters = { radius: t, detail: e }, this.fromBufferGeometry(new Ne(t, e)), this.mergeVertices() } function Ne(t, e) { Be.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], t, e), this.type = "TetrahedronBufferGeometry", this.parameters = { radius: t, detail: e } } function He(t, e) { P.call(this), this.type = "OctahedronGeometry", this.parameters = { radius: t, detail: e }, this.fromBufferGeometry(new Fe(t, e)), this.mergeVertices() } function Fe(t, e) { Be.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], t, e), this.type = "OctahedronBufferGeometry", this.parameters = { radius: t, detail: e } } function Ue(t, e) { P.call(this), this.type = "IcosahedronGeometry", this.parameters = { radius: t, detail: e }, this.fromBufferGeometry(new ze(t, e)), this.mergeVertices() } function ze(t, e) { var n = 1.618033988749895; Be.call(this, [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1], [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], t, e), this.type = "IcosahedronBufferGeometry", this.parameters = { radius: t, detail: e } } function je(t, e) { P.call(this), this.type = "DodecahedronGeometry", this.parameters = { radius: t, detail: e }, this.fromBufferGeometry(new Ve(t, e)), this.mergeVertices() } function Ve(t, e) { var n = 1.618033988749895, i = 1 / n; Be.call(this, [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i], [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], t, e), this.type = "DodecahedronBufferGeometry", this.parameters = { radius: t, detail: e } } function We(t, e, n, i, r, o) { P.call(this), this.type = "TubeGeometry", this.parameters = { path: t, tubularSegments: e, radius: n, radialSegments: i, closed: r }, void 0 !== o && console.warn("THREE.TubeGeometry: taper has been removed."); var a = new Xe(t, e, n, i, r); this.tangents = a.tangents, this.normals = a.normals, this.binormals = a.binormals, this.fromBufferGeometry(a), this.mergeVertices() } function Xe(t, e, n, i, o) { function a(r) { d = t.getPointAt(r / e, d); var o = c.normals[r], a = c.binormals[r]; for (l = 0; l <= i; l++) { var s = l / i * Fo * 2, u = zo(s), p = -jo(s); f.x = p * o.x + u * a.x, f.y = p * o.y + u * a.y, f.z = p * o.z + u * a.z, f.normalize(), v.push(f.x, f.y, f.z), h.x = d.x + n * f.x, h.y = d.y + n * f.y, h.z = d.z + n * f.z, m.push(h.x, h.y, h.z) } } H.call(this), this.type = "TubeBufferGeometry", this.parameters = { path: t, tubularSegments: e, radius: n, radialSegments: i, closed: o }, e = e || 64, n = n || 1, i = i || 8, o = o || !1; var c = t.computeFrenetFrames(e, o); this.tangents = c.tangents, this.normals = c.normals, this.binormals = c.binormals; var u, l, h = new s, f = new s, p = new r, d = new s, m = [], v = [], g = [], y = []; (function () { for (u = 0; u < e; u++)a(u); a(!1 === o ? e : 0), function () { for (u = 0; u <= e; u++)for (l = 0; l <= i; l++)p.x = u / e, p.y = l / i, g.push(p.x, p.y) }(), function () { for (l = 1; l <= e; l++)for (u = 1; u <= i; u++) { var t = (i + 1) * (l - 1) + (u - 1), n = (i + 1) * l + (u - 1), r = (i + 1) * l + u, o = (i + 1) * (l - 1) + u; y.push(t, n, o), y.push(n, r, o) } }() })(), this.setIndex(y), this.addAttribute("position", new G(m, 3)), this.addAttribute("normal", new G(v, 3)), this.addAttribute("uv", new G(g, 2)) } function qe(t, e, n, i, r, o, a) { P.call(this), this.type = "TorusKnotGeometry", this.parameters = { radius: t, tube: e, tubularSegments: n, radialSegments: i, p: r, q: o }, void 0 !== a && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."), this.fromBufferGeometry(new Ye(t, e, n, i, r, o)), this.mergeVertices() } function Ye(t, e, n, i, r, o) { function a(t, e, n, i, r) { var o = jo(t), a = zo(t), s = n / e * t, c = jo(s); r.x = i * (2 + c) * .5 * o, r.y = i * (2 + c) * a * .5, r.z = i * zo(s) * .5 } H.call(this), this.type = "TorusKnotBufferGeometry", this.parameters = { radius: t, tube: e, tubularSegments: n, radialSegments: i, p: r, q: o }, t = t || 1, e = e || .4, n = Bo(n) || 64, i = Bo(i) || 8, r = r || 2, o = o || 3; var c, u, l = [], h = [], f = [], p = [], d = new s, m = new s, v = new s, g = new s, y = new s, b = new s, _ = new s; for (c = 0; c <= n; ++c) { var x = c / n * r * Fo * 2; for (a(x, r, o, t, v), a(x + .01, r, o, t, g), b.subVectors(g, v), _.addVectors(g, v), y.crossVectors(b, _), _.crossVectors(y, b), y.normalize(), _.normalize(), u = 0; u <= i; ++u) { var w = u / i * Fo * 2, T = -e * jo(w), S = e * zo(w); d.x = v.x + (T * _.x + S * y.x), d.y = v.y + (T * _.y + S * y.y), d.z = v.z + (T * _.z + S * y.z), h.push(d.x, d.y, d.z), m.subVectors(d, v).normalize(), f.push(m.x, m.y, m.z), p.push(c / n), p.push(u / i) } } for (u = 1; u <= n; u++)for (c = 1; c <= i; c++) { var M = (i + 1) * (u - 1) + (c - 1), P = (i + 1) * u + (c - 1), E = (i + 1) * u + c, A = (i + 1) * (u - 1) + c; l.push(M, P, A), l.push(P, E, A) } this.setIndex(l), this.addAttribute("position", new G(h, 3)), this.addAttribute("normal", new G(f, 3)), this.addAttribute("uv", new G(p, 2)) } function $e(t, e, n, i, r) { P.call(this), this.type = "TorusGeometry", this.parameters = { radius: t, tube: e, radialSegments: n, tubularSegments: i, arc: r }, this.fromBufferGeometry(new Ze(t, e, n, i, r)), this.mergeVertices() } function Ze(t, e, n, i, r) { H.call(this), this.type = "TorusBufferGeometry", this.parameters = { radius: t, tube: e, radialSegments: n, tubularSegments: i, arc: r }, t = t || 1, e = e || .4, n = Bo(n) || 8, i = Bo(i) || 6, r = r || 2 * Fo; var o, a, c = [], u = [], l = [], h = [], f = new s, p = new s, d = new s; for (o = 0; o <= n; o++)for (a = 0; a <= i; a++) { var m = a / i * r, v = o / n * Fo * 2; p.x = (t + e * jo(v)) * jo(m), p.y = (t + e * jo(v)) * zo(m), p.z = e * zo(v), u.push(p.x, p.y, p.z), f.x = t * jo(m), f.y = t * zo(m), d.subVectors(p, f).normalize(), l.push(d.x, d.y, d.z), h.push(a / i), h.push(o / n) } for (o = 1; o <= n; o++)for (a = 1; a <= i; a++) { var g = (i + 1) * o + a - 1, y = (i + 1) * (o - 1) + a - 1, b = (i + 1) * (o - 1) + a, _ = (i + 1) * o + a; c.push(g, y, _), c.push(y, b, _) } this.setIndex(c), this.addAttribute("position", new G(u, 3)), this.addAttribute("normal", new G(l, 3)), this.addAttribute("uv", new G(h, 2)) } function Ke(t, e, n, i, r) { var o, a; if (r === 0 < function (t, e, n, i) { for (var r = 0, o = e, a = n - i; o < n; o += i)r += (t[a] - t[o]) * (t[o + 1] + t[a + 1]), a = o; return r }(t, e, n, i)) for (o = e; o < n; o += i)a = vn(o, t[o], t[o + 1], a); else for (o = n - i; o >= e; o -= i)a = vn(o, t[o], t[o + 1], a); return a && fn(a, a.next) && (gn(a), a = a.next), a } function Je(t, e) { if (!t) return t; e || (e = t); var n, i = t; do { if (n = !1, i.steiner || !fn(i, i.next) && 0 !== hn(i.prev, i, i.next)) i = i.next; else { if (gn(i), (i = e = i.prev) === i.next) break; n = !0 } } while (n || i !== e); return e } function Qe(t, e, n, i, r, o, a) { if (t) { !a && o && function (t, e, n, i) { var r = t; do { null === r.z && (r.z = sn(r.x, r.y, e, n, i)), r.prevZ = r.prev, r.nextZ = r.next, r = r.next } while (r !== t); r.prevZ.nextZ = null, r.prevZ = null, function (t) { var e, n, i, r, o, a, s, c, u = 1; do { for (n = t, t = null, o = null, a = 0; n;) { for (a++, i = n, s = 0, e = 0; e < u && (s++, i = i.nextZ); e++); for (c = u; 0 < s || 0 < c && i;)0 !== s && (0 === c || !i || n.z <= i.z) ? (r = n, n = n.nextZ, s--) : (r = i, i = i.nextZ, c--), o ? o.nextZ = r : t = r, r.prevZ = o, o = r; n = i } o.nextZ = null, u *= 2 } while (1 < a) }(r) }(t, i, r, o); for (var s, c, u = t; t.prev !== t.next;)if (s = t.prev, c = t.next, o ? en(t, i, r, o) : tn(t)) e.push(s.i / n), e.push(t.i / n), e.push(c.i / n), gn(t), t = c.next, u = c.next; else if ((t = c) === u) { a ? 1 === a ? Qe(t = nn(t, e, n), e, n, i, r, o, 2) : 2 == a && rn(t, e, n, i, r, o) : Qe(Je(t), e, n, i, r, o, 1); break } } } function tn(t) { var e = t.prev, n = t, i = t.next; if (0 <= hn(e, n, i)) return !1; for (var r = t.next.next; r !== t.prev;) { if (un(e.x, e.y, n.x, n.y, i.x, i.y, r.x, r.y) && 0 <= hn(r.prev, r, r.next)) return !1; r = r.next } return !0 } function en(t, e, n, i) { var r = t.prev, o = t, a = t.next; if (0 <= hn(r, o, a)) return !1; for (var s = r.x < o.x ? r.x < a.x ? r.x : a.x : o.x < a.x ? o.x : a.x, c = r.y < o.y ? r.y < a.y ? r.y : a.y : o.y < a.y ? o.y : a.y, u = r.x > o.x ? r.x > a.x ? r.x : a.x : o.x > a.x ? o.x : a.x, l = r.y > o.y ? r.y > a.y ? r.y : a.y : o.y > a.y ? o.y : a.y, h = sn(s, c, e, n, i), f = sn(u, l, e, n, i), p = t.nextZ; p && p.z <= f;) { if (p !== t.prev && p !== t.next && un(r.x, r.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= hn(p.prev, p, p.next)) return !1; p = p.nextZ } for (p = t.prevZ; p && p.z >= h;) { if (p !== t.prev && p !== t.next && un(r.x, r.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= hn(p.prev, p, p.next)) return !1; p = p.prevZ } return !0 } function nn(t, e, n) { var i = t; do { var r = i.prev, o = i.next.next; !fn(r, o) && pn(r, i, i.next, o) && dn(r, o) && dn(o, r) && (e.push(r.i / n), e.push(i.i / n), e.push(o.i / n), gn(i), gn(i.next), i = t = o), i = i.next } while (i !== t); return i } function rn(t, e, n, i, r, o) { var a = t; do { for (var s = a.next.next; s !== a.prev;) { if (a.i !== s.i && ln(a, s)) { var c = mn(a, s); return a = Je(a, a.next), c = Je(c, c.next), Qe(a, e, n, i, r, o), void Qe(c, e, n, i, r, o) } s = s.next } a = a.next } while (a !== t) } function on(t, e) { return t.x - e.x } function an(t, e) { if (e = function (t, e) { var n, i = e, r = t.x, o = t.y, a = -1 / 0; do { if (o <= i.y && o >= i.next.y && i.next.y !== i.y) { var s = i.x + (o - i.y) * (i.next.x - i.x) / (i.next.y - i.y); if (s <= r && s > a) { if (a = s, s === r) { if (o === i.y) return i; if (o === i.next.y) return i.next } n = i.x < i.next.x ? i : i.next } } i = i.next } while (i !== e); if (!n) return null; if (r === a) return n.prev; var c, u = n, l = n.x, h = n.y, f = 1 / 0; for (i = n.next; i !== u;)r >= i.x && i.x >= l && r !== i.x && un(o < h ? r : a, o, l, h, o < h ? a : r, o, i.x, i.y) && ((c = Wo(o - i.y) / (r - i.x)) < f || c === f && i.x > n.x) && dn(i, t) && (n = i, f = c), i = i.next; return n }(t, e)) { var n = mn(e, t); Je(n, n.next) } } function sn(t, e, n, i, r) { return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - n) * r) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - i) * r) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1 } function cn(t) { var e = t, n = t; do { e.x < n.x && (n = e), e = e.next } while (e !== t); return n } function un(t, e, n, i, r, o, a, s) { return 0 <= (r - a) * (e - s) - (t - a) * (o - s) && 0 <= (t - a) * (i - s) - (n - a) * (e - s) && 0 <= (n - a) * (o - s) - (r - a) * (i - s) } function ln(t, e) { return t.next.i !== e.i && t.prev.i !== e.i && !function (t, e) { var n = t; do { if (n.i !== t.i && n.next.i !== t.i && n.i !== e.i && n.next.i !== e.i && pn(n, n.next, t, e)) return !0; n = n.next } while (n !== t); return !1 }(t, e) && dn(t, e) && dn(e, t) && function (t, e) { var n = t, i = !1, r = (t.x + e.x) / 2, o = (t.y + e.y) / 2; do { n.y > o != n.next.y > o && n.next.y !== n.y && r < (n.next.x - n.x) * (o - n.y) / (n.next.y - n.y) + n.x && (i = !i), n = n.next } while (n !== t); return i }(t, e) } function hn(t, e, n) { return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y) } function fn(t, e) { return t.x === e.x && t.y === e.y } function pn(t, e, n, i) { return !!(fn(t, e) && fn(n, i) || fn(t, i) && fn(n, e)) || 0 < hn(t, e, n) != 0 < hn(t, e, i) && 0 < hn(n, i, t) != 0 < hn(n, i, e) } function dn(t, e) { return 0 > hn(t.prev, t, t.next) ? 0 <= hn(t, e, t.next) && 0 <= hn(t, t.prev, e) : 0 > hn(t, e, t.prev) || 0 > hn(t, t.next, e) } function mn(t, e) { var n = new yn(t.i, t.x, t.y), i = new yn(e.i, e.x, e.y), r = t.next, o = e.prev; return t.next = e, e.prev = t, n.next = r, r.prev = n, i.next = n, n.prev = i, o.next = i, i.prev = o, i } function vn(t, e, n, i) { var r = new yn(t, e, n); return i ? (r.next = i.next, r.prev = i, i.next.prev = r, i.next = r) : (r.prev = r, r.next = r), r } function gn(t) { t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ) } function yn(t, e, n) { this.i = t, this.x = e, this.y = n, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1 } function bn(t) { var e = t.length; 2 < e && t[e - 1].equals(t[0]) && t.pop() } function _n(t, e) { for (var n = 0; n < e.length; n++)t.push(e[n].x), t.push(e[n].y) } function xn(t, e) { P.call(this), this.type = "ExtrudeGeometry", this.parameters = { shapes: t, options: e }, this.fromBufferGeometry(new wn(t, e)), this.mergeVertices() } function wn(t, e) { function n(t) { function n(t, e, n) { return e || console.error("THREE.ExtrudeGeometry: vec does not exist"), e.clone().multiplyScalar(n).add(t) } function c(t, e, n) { var i, o, a, s = t.x - e.x, c = t.y - e.y, u = n.x - t.x, l = n.y - t.y, h = s * s + c * c; if (Wo(s * l - c * u) > Go) { var f = Ho(h), p = Ho(u * u + l * l), d = e.x - c / f, m = e.y + s / f, v = ((n.x - l / p - d) * l - (n.y + u / p - m) * u) / (s * l - c * u), g = (i = d + s * v - t.x) * i + (o = m + c * v - t.y) * o; if (2 >= g) return new r(i, o); a = Ho(g / 2) } else { var y = !1; s > Go ? u > Go && (y = !0) : s < -Go ? u < -Go && (y = !0) : Io(c) === Io(l) && (y = !0), y ? (i = -c, o = s, a = Ho(h)) : (i = s, o = c, a = Ho(h / 2)) } return new r(i / a, o / a) } function u(t, e) { var n, i; for (Y = t.length; 0 <= --Y;) { n = Y, 0 > (i = Y - 1) && (i = t.length - 1); var r = 0, o = g + 2 * w; for (r = 0; r < o; r++) { var a = W * r, s = W * (r + 1); f(e + n + a, e + i + a, e + i + s, e + n + s) } } } function l(t, e, n) { m.push(t), m.push(e), m.push(n) } function h(t, e, n) { p(t), p(e), p(n); var r = o.length / 3, a = S.generateTopUV(i, o, r - 3, r - 2, r - 1); d(a[0]), d(a[1]), d(a[2]) } function f(t, e, n, r) { p(t), p(e), p(r), p(e), p(n), p(r); var a = o.length / 3, s = S.generateSideWallUV(i, o, a - 6, a - 3, a - 2, a - 1); d(s[0]), d(s[1]), d(s[3]), d(s[1]), d(s[2]), d(s[3]) } function p(t) { o.push(m[3 * t + 0]), o.push(m[3 * t + 1]), o.push(m[3 * t + 2]) } function d(t) { a.push(t.x), a.push(t.y) } var m = [], v = void 0 === e.curveSegments ? 12 : e.curveSegments, g = void 0 === e.steps ? 1 : e.steps, y = void 0 === e.depth ? 100 : e.depth, b = !(void 0 !== e.bevelEnabled) || e.bevelEnabled, _ = void 0 === e.bevelThickness ? 6 : e.bevelThickness, x = void 0 === e.bevelSize ? _ - 2 : e.bevelSize, w = void 0 === e.bevelSegments ? 3 : e.bevelSegments, T = e.extrudePath, S = void 0 === e.UVGenerator ? iu : e.UVGenerator; void 0 !== e.amount && (console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."), y = e.amount); var M, P, E, A, C, L = !1; T && (M = T.getSpacedPoints(g), L = !0, b = !1, P = T.computeFrenetFrames(g, !1), E = new s, A = new s, C = new s), b || (w = 0, _ = 0, x = 0); var R, O, I, D = t.extractPoints(v), G = D.shape, B = D.holes; if (!nu.isClockWise(G)) for (G = G.reverse(), O = 0, I = B.length; O < I; O++)R = B[O], nu.isClockWise(R) && (B[O] = R.reverse()); var k = nu.triangulateShape(G, B), N = G; for (O = 0, I = B.length; O < I; O++)R = B[O], G = G.concat(R); for (var H, F, U, z, j, V, W = G.length, X = k.length, q = [], Y = 0, $ = N.length, Z = $ - 1, K = Y + 1; Y < $; Y++, Z++, K++)Z === $ && (Z = 0), K === $ && (K = 0), q[Y] = c(N[Y], N[Z], N[K]); var J, Q, tt = [], et = q.concat(); for (O = 0, I = B.length; O < I; O++) { for (R = B[O], J = [], Y = 0, Z = ($ = R.length) - 1, K = Y + 1; Y < $; Y++, Z++, K++)Z === $ && (Z = 0), K === $ && (K = 0), J[Y] = c(R[Y], R[Z], R[K]); tt.push(J), et = et.concat(J) } for (H = 0; H < w; H++) { for (z = _ * jo((U = H / w) * Fo / 2), F = x * zo(U * Fo / 2), Y = 0, $ = N.length; Y < $; Y++)l((j = n(N[Y], q[Y], F)).x, j.y, -z); for (O = 0, I = B.length; O < I; O++)for (R = B[O], J = tt[O], Y = 0, $ = R.length; Y < $; Y++)l((j = n(R[Y], J[Y], F)).x, j.y, -z) } for (F = x, Y = 0; Y < W; Y++)j = b ? n(G[Y], et[Y], F) : G[Y], L ? (A.copy(P.normals[0]).multiplyScalar(j.x), E.copy(P.binormals[0]).multiplyScalar(j.y), C.copy(M[0]).add(A).add(E), l(C.x, C.y, C.z)) : l(j.x, j.y, 0); for (Q = 1; Q <= g; Q++)for (Y = 0; Y < W; Y++)j = b ? n(G[Y], et[Y], F) : G[Y], L ? (A.copy(P.normals[Q]).multiplyScalar(j.x), E.copy(P.binormals[Q]).multiplyScalar(j.y), C.copy(M[Q]).add(A).add(E), l(C.x, C.y, C.z)) : l(j.x, j.y, y / g * Q); for (H = w - 1; 0 <= H; H--) { for (z = _ * jo((U = H / w) * Fo / 2), F = x * zo(U * Fo / 2), Y = 0, $ = N.length; Y < $; Y++)l((j = n(N[Y], q[Y], F)).x, j.y, y + z); for (O = 0, I = B.length; O < I; O++)for (R = B[O], J = tt[O], Y = 0, $ = R.length; Y < $; Y++)j = n(R[Y], J[Y], F), L ? l(j.x, j.y + M[g - 1].y, M[g - 1].x + z) : l(j.x, j.y, y + z) } (function () { var t = o.length / 3; if (b) { var e = 0, n = W * e; for (Y = 0; Y < X; Y++)h((V = k[Y])[2] + n, V[1] + n, V[0] + n); for (n = W * (e = g + 2 * w), Y = 0; Y < X; Y++)h((V = k[Y])[0] + n, V[1] + n, V[2] + n) } else { for (Y = 0; Y < X; Y++)h((V = k[Y])[2], V[1], V[0]); for (Y = 0; Y < X; Y++)h((V = k[Y])[0] + W * g, V[1] + W * g, V[2] + W * g) } i.addGroup(t, o.length / 3 - t, 0) })(), function () { var t = o.length / 3, e = 0; for (u(N, e), e += N.length, O = 0, I = B.length; O < I; O++)u(R = B[O], e), e += R.length; i.addGroup(t, o.length / 3 - t, 1) }() } H.call(this), this.type = "ExtrudeBufferGeometry", this.parameters = { shapes: t, options: e }; for (var i = this, o = [], a = [], c = 0, u = (t = Array.isArray(t) ? t : [t]).length; c < u; c++)n(t[c]); this.addAttribute("position", new G(o, 3)), this.addAttribute("uv", new G(a, 2)), this.computeVertexNormals() } function Tn(t, e, n) { if (n.shapes = [], Array.isArray(t)) for (var i, r = 0, o = t.length; r < o; r++)i = t[r], n.shapes.push(i.uuid); else n.shapes.push(t.uuid); return void 0 !== e.extrudePath && (n.options.extrudePath = e.extrudePath.toJSON()), n } function Sn(t, e) { P.call(this), this.type = "TextGeometry", this.parameters = { text: t, parameters: e }, this.fromBufferGeometry(new Mn(t, e)), this.mergeVertices() } function Mn(t, e) { var n = (e = e || {}).font; if (!n || !n.isFont) return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."), new P; var i = n.generateShapes(t, e.size); e.depth = void 0 === e.height ? 50 : e.height, void 0 === e.bevelThickness && (e.bevelThickness = 10), void 0 === e.bevelSize && (e.bevelSize = 8), void 0 === e.bevelEnabled && (e.bevelEnabled = !1), wn.call(this, i, e), this.type = "TextBufferGeometry" } function Pn(t, e, n, i, r, o, a) { P.call(this), this.type = "SphereGeometry", this.parameters = { radius: t, widthSegments: e, heightSegments: n, phiStart: i, phiLength: r, thetaStart: o, thetaLength: a }, this.fromBufferGeometry(new En(t, e, n, i, r, o, a)), this.mergeVertices() } function En(t, e, n, i, r, o, a) { H.call(this), this.type = "SphereBufferGeometry", this.parameters = { radius: t, widthSegments: e, heightSegments: n, phiStart: i, phiLength: r, thetaStart: o, thetaLength: a }, t = t || 1, e = No(3, Bo(e) || 8), n = No(2, Bo(n) || 6), i = void 0 === i ? 0 : i, r = void 0 === r ? 2 * Fo : r; var c, u, l = (o = void 0 === o ? 0 : o) + (a = void 0 === a ? Fo : a), h = 0, f = [], p = new s, d = new s, m = [], v = [], g = [], y = []; for (u = 0; u <= n; u++) { var b = [], _ = u / n; for (c = 0; c <= e; c++) { var x = c / e; p.x = -t * jo(i + x * r) * zo(o + _ * a), p.y = t * jo(o + _ * a), p.z = t * zo(i + x * r) * zo(o + _ * a), v.push(p.x, p.y, p.z), d.set(p.x, p.y, p.z).normalize(), g.push(d.x, d.y, d.z), y.push(x, 1 - _), b.push(h++) } f.push(b) } for (u = 0; u < n; u++)for (c = 0; c < e; c++) { var w = f[u][c + 1], T = f[u][c], S = f[u + 1][c], M = f[u + 1][c + 1]; (0 !== u || 0 < o) && m.push(w, T, M), (u !== n - 1 || l < Fo) && m.push(T, S, M) } this.setIndex(m), this.addAttribute("position", new G(v, 3)), this.addAttribute("normal", new G(g, 3)), this.addAttribute("uv", new G(y, 2)) } function An(t, e, n, i, r, o) { P.call(this), this.type = "RingGeometry", this.parameters = { innerRadius: t, outerRadius: e, thetaSegments: n, phiSegments: i, thetaStart: r, thetaLength: o }, this.fromBufferGeometry(new Cn(t, e, n, i, r, o)), this.mergeVertices() } function Cn(t, e, n, i, o, a) { H.call(this), this.type = "RingBufferGeometry", this.parameters = { innerRadius: t, outerRadius: e, thetaSegments: n, phiSegments: i, thetaStart: o, thetaLength: a }, t = t || .5, e = e || 1, o = void 0 === o ? 0 : o, a = void 0 === a ? 2 * Fo : a, n = void 0 === n ? 8 : No(3, n); var c, u, l, h = [], f = [], p = [], d = [], m = t, v = (e - t) / (i = void 0 === i ? 1 : No(1, i)), g = new s, y = new r; for (u = 0; u <= i; u++) { for (l = 0; l <= n; l++)c = o + l / n * a, g.x = m * jo(c), g.y = m * zo(c), f.push(g.x, g.y, g.z), p.push(0, 0, 1), y.x = (g.x / e + 1) / 2, y.y = (g.y / e + 1) / 2, d.push(y.x, y.y); m += v } for (u = 0; u < i; u++) { var b = u * (n + 1); for (l = 0; l < n; l++) { var _ = c = l + b, x = c + n + 1, w = c + n + 2, T = c + 1; h.push(_, x, T), h.push(x, w, T) } } this.setIndex(h), this.addAttribute("position", new G(f, 3)), this.addAttribute("normal", new G(p, 3)), this.addAttribute("uv", new G(d, 2)) } function Ln(t, e, n, i) { P.call(this), this.type = "LatheGeometry", this.parameters = { points: t, segments: e, phiStart: n, phiLength: i }, this.fromBufferGeometry(new Rn(t, e, n, i)), this.mergeVertices() } function Rn(t, e, n, i) { H.call(this), this.type = "LatheBufferGeometry", this.parameters = { points: t, segments: e, phiStart: n, phiLength: i }, e = Bo(e) || 12, n = n || 0, i = i || 2 * Fo, i = Ac.clamp(i, 0, 2 * Fo); var o, a, c, u = [], l = [], h = [], f = 1 / e, p = new s, d = new r; for (a = 0; a <= e; a++) { var m = n + a * f * i, v = zo(m), g = jo(m); for (c = 0; c <= t.length - 1; c++)p.x = t[c].x * v, p.y = t[c].y, p.z = t[c].x * g, l.push(p.x, p.y, p.z), d.x = a / e, d.y = c / (t.length - 1), h.push(d.x, d.y) } for (a = 0; a < e; a++)for (c = 0; c < t.length - 1; c++) { var y = o = c + a * t.length, b = o + t.length, _ = o + t.length + 1, x = o + 1; u.push(y, b, x), u.push(b, _, x) } if (this.setIndex(u), this.addAttribute("position", new G(l, 3)), this.addAttribute("uv", new G(h, 2)), this.computeVertexNormals(), i === 2 * Fo) { var w = this.attributes.normal.array, T = new s, S = new s, M = new s; for (o = e * t.length * 3, a = 0, c = 0; a < t.length; a++, c += 3)T.x = w[c + 0], T.y = w[c + 1], T.z = w[c + 2], S.x = w[o + c + 0], S.y = w[o + c + 1], S.z = w[o + c + 2], M.addVectors(T, S).normalize(), w[c + 0] = w[o + c + 0] = M.x, w[c + 1] = w[o + c + 1] = M.y, w[c + 2] = w[o + c + 2] = M.z } } function On(t, e) { P.call(this), this.type = "ShapeGeometry", "object" == typeof e && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."), e = e.curveSegments), this.parameters = { shapes: t, curveSegments: e }, this.fromBufferGeometry(new In(t, e)), this.mergeVertices() } function In(t, e) { function n(t) { var n, s, u, l = r.length / 3, h = t.extractPoints(e), f = h.shape, p = h.holes; for (!1 === nu.isClockWise(f) && (f = f.reverse()), n = 0, s = p.length; n < s; n++)u = p[n], !0 === nu.isClockWise(u) && (p[n] = u.reverse()); var d = nu.triangulateShape(f, p); for (n = 0, s = p.length; n < s; n++)u = p[n], f = f.concat(u); for (n = 0, s = f.length; n < s; n++) { var m = f[n]; r.push(m.x, m.y, 0), o.push(0, 0, 1), a.push(m.x, m.y) } for (n = 0, s = d.length; n < s; n++) { var v = d[n], g = v[0] + l, y = v[1] + l, b = v[2] + l; i.push(g, y, b), c += 3 } } H.call(this), this.type = "ShapeBufferGeometry", this.parameters = { shapes: t, curveSegments: e }, e = e || 12; var i = [], r = [], o = [], a = [], s = 0, c = 0; if (!1 === Array.isArray(t)) n(t); else for (var u = 0; u < t.length; u++)n(t[u]), this.addGroup(s, c, u), s += c, c = 0; this.setIndex(i), this.addAttribute("position", new G(r, 3)), this.addAttribute("normal", new G(o, 3)), this.addAttribute("uv", new G(a, 2)) } function Dn(t, e) { if (e.shapes = [], Array.isArray(t)) for (var n, i = 0, r = t.length; i < r; i++)n = t[i], e.shapes.push(n.uuid); else e.shapes.push(t.uuid); return e } function Gn(t, e) { H.call(this), this.type = "EdgesGeometry", this.parameters = { thresholdAngle: e }, e = void 0 === e ? 1 : e; var n, i, r, o, a = [], s = jo(Ac.DEG2RAD * e), c = [0, 0], u = {}, l = ["a", "b", "c"]; t.isBufferGeometry ? (o = new P).fromBufferGeometry(t) : o = t.clone(), o.mergeVertices(), o.computeFaceNormals(); for (var h, f = o.vertices, p = o.faces, d = 0, m = p.length; d < m; d++) { h = p[d]; for (var v = 0; 3 > v; v++)n = h[l[v]], i = h[l[(v + 1) % 3]], c[0] = Uo(n, i), c[1] = No(n, i), void 0 === u[r = c[0] + "," + c[1]] ? u[r] = { index1: c[0], index2: c[1], face1: d, face2: void 0 } : u[r].face2 = d } for (r in u) { var g = u[r]; if (void 0 === g.face2 || p[g.face1].normal.dot(p[g.face2].normal) <= s) { var y = f[g.index1]; a.push(y.x, y.y, y.z), y = f[g.index2], a.push(y.x, y.y, y.z) } } this.addAttribute("position", new G(a, 3)) } function Bn(t, e, n, i, r, o, a, s) { P.call(this), this.type = "CylinderGeometry", this.parameters = { radiusTop: t, radiusBottom: e, height: n, radialSegments: i, heightSegments: r, openEnded: o, thetaStart: a, thetaLength: s }, this.fromBufferGeometry(new kn(t, e, n, i, r, o, a, s)), this.mergeVertices() } function kn(t, e, n, i, o, a, c, u) { function l(n) { var o, a, l, g = new r, _ = new s, x = 0, w = !0 === n ? t : e, T = !0 === n ? 1 : -1; for (a = v, o = 1; o <= i; o++)p.push(0, y * T, 0), d.push(0, T, 0), m.push(.5, .5), v++; for (l = v, o = 0; o <= i; o++) { var S = o / i * u + c, M = jo(S), P = zo(S); _.x = w * P, _.y = y * T, _.z = w * M, p.push(_.x, _.y, _.z), d.push(0, T, 0), g.x = .5 * M + .5, g.y = .5 * P * T + .5, m.push(g.x, g.y), v++ } for (o = 0; o < i; o++) { var E = a + o, A = l + o; !0 === n ? f.push(A, A + 1, E) : f.push(A + 1, A, E), x += 3 } h.addGroup(b, x, !0 === n ? 1 : 2), b += x } H.call(this), this.type = "CylinderBufferGeometry", this.parameters = { radiusTop: t, radiusBottom: e, height: n, radialSegments: i, heightSegments: o, openEnded: a, thetaStart: c, thetaLength: u }; var h = this; t = void 0 === t ? 1 : t, e = void 0 === e ? 1 : e, n = n || 1, i = Bo(i) || 8, o = Bo(o) || 1, a = void 0 !== a && a, c = void 0 === c ? 0 : c, u = void 0 === u ? 2 * Fo : u; var f = [], p = [], d = [], m = [], v = 0, g = [], y = n / 2, b = 0; (function () { var r, a, l = new s, _ = new s, x = 0, w = (e - t) / n; for (a = 0; a <= o; a++) { var T = [], S = a / o, M = S * (e - t) + t; for (r = 0; r <= i; r++) { var P = r / i, E = P * u + c, A = zo(E), C = jo(E); _.x = M * A, _.y = -S * n + y, _.z = M * C, p.push(_.x, _.y, _.z), l.set(A, w, C).normalize(), d.push(l.x, l.y, l.z), m.push(P, 1 - S), T.push(v++) } g.push(T) } for (r = 0; r < i; r++)for (a = 0; a < o; a++) { var L = g[a][r], R = g[a + 1][r], O = g[a + 1][r + 1], I = g[a][r + 1]; f.push(L, R, I), f.push(R, O, I), x += 6 } h.addGroup(b, x, 0), b += x })(), !1 === a && (0 < t && l(!0), 0 < e && l(!1)), this.setIndex(f), this.addAttribute("position", new G(p, 3)), this.addAttribute("normal", new G(d, 3)), this.addAttribute("uv", new G(m, 2)) } function Nn(t, e, n, i, r, o, a) { Bn.call(this, 0, t, e, n, i, r, o, a), this.type = "ConeGeometry", this.parameters = { radius: t, height: e, radialSegments: n, heightSegments: i, openEnded: r, thetaStart: o, thetaLength: a } } function Hn(t, e, n, i, r, o, a) { kn.call(this, 0, t, e, n, i, r, o, a), this.type = "ConeBufferGeometry", this.parameters = { radius: t, height: e, radialSegments: n, heightSegments: i, openEnded: r, thetaStart: o, thetaLength: a } } function Fn(t, e, n, i) { P.call(this), this.type = "CircleGeometry", this.parameters = { radius: t, segments: e, thetaStart: n, thetaLength: i }, this.fromBufferGeometry(new Un(t, e, n, i)), this.mergeVertices() } function Un(t, e, n, i) { H.call(this), this.type = "CircleBufferGeometry", this.parameters = { radius: t, segments: e, thetaStart: n, thetaLength: i }, t = t || 1, e = void 0 === e ? 8 : No(3, e), n = void 0 === n ? 0 : n, i = void 0 === i ? 2 * Fo : i; var o, a, c = [], u = [], l = [], h = [], f = new s, p = new r; for (u.push(0, 0, 0), l.push(0, 0, 1), h.push(.5, .5), a = 0, o = 3; a <= e; a++, o += 3) { var d = n + a / e * i; f.x = t * jo(d), f.y = t * zo(d), u.push(f.x, f.y, f.z), l.push(0, 0, 1), p.x = (u[o] / t + 1) / 2, p.y = (u[o + 1] / t + 1) / 2, h.push(p.x, p.y) } for (o = 1; o <= e; o++)c.push(o, o + 1, 0); this.setIndex(c), this.addAttribute("position", new G(u, 3)), this.addAttribute("normal", new G(l, 3)), this.addAttribute("uv", new G(h, 2)) } function zn(t) { V.call(this), this.type = "ShadowMaterial", this.color = new _(0), this.transparent = !0, this.setValues(t) } function jn(t) { W.call(this, t), this.type = "RawShaderMaterial" } function Vn(t) { V.call(this), this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new _(16777215), this.roughness = .5, this.metalness = .5, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new _(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = Pc, this.normalScale = new r(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t) } function Wn(t) { Vn.call(this), this.defines = { PHYSICAL: "" }, this.type = "MeshPhysicalMaterial", this.reflectivity = .5, this.clearCoat = 0, this.clearCoatRoughness = 0, this.setValues(t) } function Xn(t) { V.call(this), this.type = "MeshPhongMaterial", this.color = new _(16777215), this.specular = new _(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new _(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = Pc, this.normalScale = new r(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = za, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t) } function qn(t) { Xn.call(this), this.defines = { TOON: "" }, this.type = "MeshToonMaterial", this.gradientMap = null, this.setValues(t) } function Yn(t) { V.call(this), this.type = "MeshNormalMaterial", this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = Pc, this.normalScale = new r(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t) } function $n(t) { V.call(this), this.type = "MeshLambertMaterial", this.color = new _(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new _(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = za, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t) } function Zn(t) { V.call(this), this.defines = { MATCAP: "" }, this.type = "MeshMatcapMaterial", this.color = new _(16777215), this.matcap = null, this.map = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = Pc, this.normalScale = new r(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.alphaMap = null, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.lights = !1, this.setValues(t) } function Kn(t) { we.call(this), this.type = "LineDashedMaterial", this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.setValues(t) } function Jn(t, e, n, i) { this.parameterPositions = t, this._cachedIndex = 0, this.resultBuffer = void 0 === i ? new e.constructor(n) : i, this.sampleValues = e, this.valueSize = n } function Qn(t, e, n, i) { Jn.call(this, t, e, n, i), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0 } function ti(t, e, n, i) { Jn.call(this, t, e, n, i) } function ei(t, e, n, i) { Jn.call(this, t, e, n, i) } function ni(t, e, n, i) { if (void 0 === t) throw new Error("THREE.KeyframeTrack: track name is undefined"); if (void 0 === e || 0 === e.length) throw new Error("THREE.KeyframeTrack: no keyframes in track named " + t); this.name = t, this.times = au.convertArray(e, this.TimeBufferType), this.values = au.convertArray(n, this.ValueBufferType), this.setInterpolation(i || this.DefaultInterpolation) } function ii(t, e, n) { ni.call(this, t, e, n) } function ri(t, e, n, i) { ni.call(this, t, e, n, i) } function oi(t, e, n, i) { ni.call(this, t, e, n, i) } function ai(t, e, n, i) { Jn.call(this, t, e, n, i) } function si(t, e, n, i) { ni.call(this, t, e, n, i) } function ci(t, e, n, i) { ni.call(this, t, e, n, i) } function ui(t, e, n, i) { ni.call(this, t, e, n, i) } function li(t, e, n) { this.name = t, this.tracks = n, this.duration = void 0 === e ? -1 : e, this.uuid = Ac.generateUUID(), 0 > this.duration && this.resetDuration() } function hi(t) { if (void 0 === t.type) throw new Error("THREE.KeyframeTrack: track type undefined, can not parse"); var e = function (t) { switch (t.toLowerCase()) { case "scalar": case "double": case "float": case "number": case "integer": return oi; case "vector": case "vector2": case "vector3": case "vector4": return ui; case "color": return ri; case "quaternion": return si; case "bool": case "boolean": return ii; case "string": return ci }throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + t) }(t.type); if (void 0 === t.times) { var n = [], i = []; au.flattenJSON(t.keys, n, i, "value"), t.times = n, t.values = i } return void 0 === e.parse ? new e(t.name, t.times, t.values, t.interpolation) : e.parse(t) } function fi(t, e, n) { var i = this, r = !1, o = 0, a = 0, s = void 0; this.onStart = void 0, this.onLoad = t, this.onProgress = e, this.onError = n, this.itemStart = function (t) { a++, 0 == r && void 0 !== i.onStart && i.onStart(t, o, a), r = !0 }, this.itemEnd = function (t) { o++, void 0 !== i.onProgress && i.onProgress(t, o, a), o == a && (r = !1, void 0 !== i.onLoad && i.onLoad()) }, this.itemError = function (t) { void 0 !== i.onError && i.onError(t) }, this.resolveURL = function (t) { return s ? s(t) : t }, this.setURLModifier = function (t) { return s = t, this } } function pi(t) { this.manager = void 0 === t ? cu : t } function di(t) { this.manager = void 0 === t ? cu : t } function mi(t) { this.manager = void 0 === t ? cu : t, this._parser = null } function vi(t) { this.manager = void 0 === t ? cu : t, this._parser = null } function gi(t) { this.manager = void 0 === t ? cu : t } function yi(t) { this.manager = void 0 === t ? cu : t } function bi(t) { this.manager = void 0 === t ? cu : t } function _i() { this.type = "Curve", this.arcLengthDivisions = 200 } function xi(t, e, n, i, r, o, a, s) { _i.call(this), this.type = "EllipseCurve", this.aX = t || 0, this.aY = e || 0, this.xRadius = n || 1, this.yRadius = i || 1, this.aStartAngle = r || 0, this.aEndAngle = o || 2 * Fo, this.aClockwise = a || !1, this.aRotation = s || 0 } function wi(t, e, n, i, r, o) { xi.call(this, t, e, n, n, i, r, o), this.type = "ArcCurve" } function Ti() { function t(t, o, a, s) { e = t, n = a, i = -3 * t + 3 * o - 2 * a - s, r = 2 * t - 2 * o + a + s } var e = 0, n = 0, i = 0, r = 0; return { initCatmullRom: function (e, n, i, r, o) { t(n, i, o * (i - e), o * (r - n)) }, initNonuniformCatmullRom: function (e, n, i, r, o, a, s) { var c = (n - e) / o - (i - e) / (o + a) + (i - n) / a, u = (i - n) / a - (r - n) / (a + s) + (r - i) / s; t(n, i, c *= a, u *= a) }, calc: function (t) { var o = t * t; return e + n * t + i * o + r * (o * t) } } } function Si(t, e, n, i) { _i.call(this), this.type = "CatmullRomCurve3", this.points = t || [], this.closed = e || !1, this.curveType = n || "centripetal", this.tension = i || .5 } function Mi(t, e, n, i, r) { var o = .5 * (i - e), a = .5 * (r - n), s = t * t; return (2 * n - 2 * i + o + a) * (t * s) + (-3 * n + 3 * i - 2 * o - a) * s + o * t + n } function Pi(t, e, n, i) { return function (t, e) { var n = 1 - t; return n * n * e }(t, e) + function (t, e) { return 2 * (1 - t) * t * e }(t, n) + function (t, e) { return t * t * e }(t, i) } function Ei(t, e, n, i, r) { return function (t, e) { var n = 1 - t; return n * n * n * e }(t, e) + function (t, e) { var n = 1 - t; return 3 * n * n * t * e }(t, n) + function (t, e) { return 3 * (1 - t) * t * t * e }(t, i) + function (t, e) { return t * t * t * e }(t, r) } function Ai(t, e, n, i) { _i.call(this), this.type = "CubicBezierCurve", this.v0 = t || new r, this.v1 = e || new r, this.v2 = n || new r, this.v3 = i || new r } function Ci(t, e, n, i) { _i.call(this), this.type = "CubicBezierCurve3", this.v0 = t || new s, this.v1 = e || new s, this.v2 = n || new s, this.v3 = i || new s } function Li(t, e) { _i.call(this), this.type = "LineCurve", this.v1 = t || new r, this.v2 = e || new r } function Ri(t, e) { _i.call(this), this.type = "LineCurve3", this.v1 = t || new s, this.v2 = e || new s } function Oi(t, e, n) { _i.call(this), this.type = "QuadraticBezierCurve", this.v0 = t || new r, this.v1 = e || new r, this.v2 = n || new r } function Ii(t, e, n) { _i.call(this), this.type = "QuadraticBezierCurve3", this.v0 = t || new s, this.v1 = e || new s, this.v2 = n || new s } function Di(t) { _i.call(this), this.type = "SplineCurve", this.points = t || [] } function Gi() { _i.call(this), this.type = "CurvePath", this.curves = [], this.autoClose = !1 } function Bi(t) { Gi.call(this), this.type = "Path", this.currentPoint = new r, t && this.setFromPoints(t) } function ki(t) { Bi.call(this, t), this.uuid = Ac.generateUUID(), this.type = "Shape", this.holes = [] } function Ni(t, e) { M.call(this), this.type = "Light", this.color = new _(t), this.intensity = void 0 === e ? 1 : e, this.receiveShadow = void 0 } function Hi(t, e, n) { Ni.call(this, t, n), this.type = "HemisphereLight", this.castShadow = void 0, this.position.copy(M.DefaultUp), this.updateMatrix(), this.groundColor = new _(e) } function Fi(t) { this.camera = t, this.bias = 0, this.radius = 1, this.mapSize = new r(512, 512), this.map = null, this.matrix = new o } function Ui() { Fi.call(this, new ae(50, 1, .5, 500)) } function zi(t, e, n, i, r, o) { Ni.call(this, t, e), this.type = "SpotLight", this.position.copy(M.DefaultUp), this.updateMatrix(), this.target = new M, Object.defineProperty(this, "power", { get: function () { return this.intensity * Fo }, set: function (t) { this.intensity = t / Fo } }), this.distance = void 0 === n ? 0 : n, this.angle = void 0 === i ? Fo / 3 : i, this.penumbra = void 0 === r ? 0 : r, this.decay = void 0 === o ? 1 : o, this.shadow = new Ui } function ji(t, e, n, i) { Ni.call(this, t, e), this.type = "PointLight", Object.defineProperty(this, "power", { get: function () { return 4 * this.intensity * Fo }, set: function (t) { this.intensity = t / (4 * Fo) } }), this.distance = void 0 === n ? 0 : n, this.decay = void 0 === i ? 1 : i, this.shadow = new Fi(new ae(90, 1, .5, 500)) } function Vi(t, e, n, i, r, o) { oe.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = void 0 === t ? -1 : t, this.right = void 0 === e ? 1 : e, this.top = void 0 === n ? 1 : n, this.bottom = void 0 === i ? -1 : i, this.near = void 0 === r ? .1 : r, this.far = void 0 === o ? 2e3 : o, this.updateProjectionMatrix() } function Wi() { Fi.call(this, new Vi(-5, 5, 5, -5, .5, 500)) } function Xi(t, e) { Ni.call(this, t, e), this.type = "DirectionalLight", this.position.copy(M.DefaultUp), this.updateMatrix(), this.target = new M, this.shadow = new Wi } function qi(t, e) { Ni.call(this, t, e), this.type = "AmbientLight", this.castShadow = void 0 } function Yi(t, e, n, i) { Ni.call(this, t, e), this.type = "RectAreaLight", this.width = void 0 === n ? 10 : n, this.height = void 0 === i ? 10 : i } function $i(t) { this.manager = void 0 === t ? cu : t, this.textures = {} } function Zi(t) { this.manager = void 0 === t ? cu : t } function Ki(t) { this.manager = void 0 === t ? cu : t, this.resourcePath = "" } function Ji(t) { "undefined" == typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), "undefined" == typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.manager = void 0 === t ? cu : t, this.options = void 0 } function Qi() { this.type = "ShapePath", this.color = new _, this.subPaths = [], this.currentPath = null } function tr(t) { this.type = "Font", this.data = t } function er(t, e, n, i, r) { var o = r.glyphs[t] || r.glyphs["?"]; if (o) { var a, s, c, u, l, h, f, p, d = new Qi; if (o.o) for (var m, v = o._cachedOutline || (o._cachedOutline = o.o.split(" ")), g = 0, y = v.length; g < y;)"m" === (m = v[g++]) ? (a = v[g++] * e + n, s = v[g++] * e + i, d.moveTo(a, s)) : "l" === m ? (a = v[g++] * e + n, s = v[g++] * e + i, d.lineTo(a, s)) : "q" === m ? (c = v[g++] * e + n, u = v[g++] * e + i, l = v[g++] * e + n, h = v[g++] * e + i, d.quadraticCurveTo(l, h, c, u)) : "b" === m && (c = v[g++] * e + n, u = v[g++] * e + i, l = v[g++] * e + n, h = v[g++] * e + i, f = v[g++] * e + n, p = v[g++] * e + i, d.bezierCurveTo(l, h, f, p, c, u)); return { offsetX: o.ha * e, path: d } } } function nr(t) { this.manager = void 0 === t ? cu : t } function ir() { } function rr(t) { this.manager = void 0 === t ? cu : t } function or() { this.type = "StereoCamera", this.aspect = 1, this.eyeSep = .064, this.cameraL = new ae, this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new ae, this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1 } function ar(t, e, n, i) { M.call(this), this.type = "CubeCamera"; var r = 90, o = new ae(r, 1, t, e); o.up.set(0, -1, 0), o.lookAt(new s(1, 0, 0)), this.add(o); var a = new ae(r, 1, t, e); a.up.set(0, -1, 0), a.lookAt(new s(-1, 0, 0)), this.add(a); var c = new ae(r, 1, t, e); c.up.set(0, 0, 1), c.lookAt(new s(0, 1, 0)), this.add(c); var u = new ae(r, 1, t, e); u.up.set(0, 0, -1), u.lookAt(new s(0, -1, 0)), this.add(u); var l = new ae(r, 1, t, e); l.up.set(0, -1, 0), l.lookAt(new s(0, 0, 1)), this.add(l); var h = new ae(r, 1, t, e); h.up.set(0, -1, 0), h.lookAt(new s(0, 0, -1)), this.add(h), i = i || { format: Es, magFilter: hs, minFilter: hs }, this.renderTarget = new f(n, n, i), this.renderTarget.texture.name = "CubeCamera", this.update = function (t, e) { null === this.parent && this.updateMatrixWorld(); var n = this.renderTarget, i = n.texture.generateMipmaps; n.texture.generateMipmaps = !1, n.activeCubeFace = 0, t.render(e, o, n), n.activeCubeFace = 1, t.render(e, a, n), n.activeCubeFace = 2, t.render(e, c, n), n.activeCubeFace = 3, t.render(e, u, n), n.activeCubeFace = 4, t.render(e, l, n), n.texture.generateMipmaps = i, n.activeCubeFace = 5, t.render(e, h, n), t.setRenderTarget(null) }, this.clear = function (t, e, n, i) { for (var r = this.renderTarget, o = 0; 6 > o; o++)r.activeCubeFace = o, t.setRenderTarget(r), t.clear(e, n, i); t.setRenderTarget(null) } } function sr(t) { this.autoStart = !(void 0 !== t) || t, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1 } function cr() { M.call(this), this.type = "AudioListener", this.context = xu.getContext(), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.filter = null, this.timeDelta = 0 } function ur(t) { M.call(this), this.type = "Audio", this.listener = t, this.context = t.context, this.gain = this.context.createGain(), this.gain.connect(t.getInput()), this.autoplay = !1, this.buffer = null, this.detune = 0, this.loop = !1, this.startTime = 0, this.offset = 0, this.playbackRate = 1, this.isPlaying = !1, this.hasPlaybackControl = !0, this.sourceType = "empty", this.filters = [] } function lr(t) { ur.call(this, t), this.panner = this.context.createPanner(), this.panner.connect(this.gain) } function hr(t, e) { this.analyser = t.context.createAnalyser(), this.analyser.fftSize = void 0 === e ? 2048 : e, this.data = new Uint8Array(this.analyser.frequencyBinCount), t.getOutput().connect(this.analyser) } function fr(t, e, n) { this.binding = t, this.valueSize = n; var i, r = Float64Array; "quaternion" === e ? i = this._slerp : "string" === e || "bool" === e ? (r = Array, i = this._select) : i = this._lerp, this.buffer = new r(4 * n), this._mixBufferRegion = i, this.cumulativeWeight = 0, this.useCount = 0, this.referenceCount = 0 } function pr(t, e, n) { var i = n || dr.parseTrackName(e); this._targetGroup = t, this._bindings = t.subscribe_(e, i) } function dr(t, e, n) { this.path = e, this.parsedPath = n || dr.parseTrackName(e), this.node = dr.findNode(t, this.parsedPath.nodeName) || t, this.rootNode = t } function mr() { this.uuid = Ac.generateUUID(), this._objects = Array.prototype.slice.call(arguments), this.nCachedObjects_ = 0; var t = {}; this._indicesByUUID = t; for (var e = 0, n = arguments.length; e !== n; ++e)t[arguments[e].uuid] = e; this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {}; var i = this; this.stats = { objects: { get total() { return i._objects.length }, get inUse() { return this.total - i.nCachedObjects_ } }, get bindingsPerObject() { return i._bindings.length } } } function vr(t, e, n) { this._mixer = t, this._clip = e, this._localRoot = n || null; for (var i, r = e.tracks, o = r.length, a = Array(o), s = { endingStart: lc, endingEnd: lc }, c = 0; c !== o; ++c)i = r[c].createInterpolant(null), a[c] = i, i.settings = s; this._interpolantSettings = s, this._interpolants = a, this._propertyBindings = Array(o), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = oc, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0 } function gr(t) { this._root = t, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1 } function yr(t) { "string" == typeof t && (console.warn("THREE.Uniform: Type parameter is no longer needed."), t = arguments[1]), this.value = t } function br() { H.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0 } function _r(t, e, n) { de.call(this, t, e), this.meshPerAttribute = n || 1 } function xr(t, e, n, i) { "number" == typeof n && (i = n, n = !1, console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")), E.call(this, t, e, n), this.meshPerAttribute = i || 1 } function wr(t, e, n, i) { this.ray = new X(t, e), this.near = n || 0, this.far = i || 1 / 0, this.params = { Mesh: {}, Line: {}, LOD: {}, Points: { threshold: 1 }, Sprite: {} }, Object.defineProperties(this.params, { PointCloud: { get: function () { return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points } } }) } function Tr(t, e) { return t.distance - e.distance } function Sr(t, e, n, i) { if (!1 !== t.visible && (t.raycast(e, n), !0 === i)) for (var r = t.children, o = 0, a = r.length; o < a; o++)Sr(r[o], e, n, !0) } function Mr(t, e, n) { return this.radius = void 0 === t ? 1 : t, this.phi = void 0 === e ? 0 : e, this.theta = void 0 === n ? 0 : n, this } function Pr(t, e, n) { return this.radius = void 0 === t ? 1 : t, this.theta = void 0 === e ? 0 : e, this.y = void 0 === n ? 0 : n, this } function Er(t, e) { this.min = void 0 === t ? new r(1 / 0, 1 / 0) : t, this.max = void 0 === e ? new r(-1 / 0, -1 / 0) : e } function Ar(t, e) { this.start = void 0 === t ? new s : t, this.end = void 0 === e ? new s : e } function Cr(t) { M.call(this), this.material = t, this.render = function () { } } function Lr(t, e, n, i) { this.object = t, this.size = void 0 === e ? 1 : e; var r = void 0 === n ? 16711680 : n, o = void 0 === i ? 1 : i, a = 0, s = this.object.geometry; s && s.isGeometry ? a = 3 * s.faces.length : s && s.isBufferGeometry && (a = s.attributes.normal.count); var c = new H, u = new G(2 * a * 3, 3); c.addAttribute("position", u), Se.call(this, c, new we({ color: r, linewidth: o })), this.matrixAutoUpdate = !1, this.update() } function Rr(t, e) { M.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.color = e; for (var n = new H, i = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], r = 0, o = 1; r < 32; r++, o++) { var a = r / 32 * Fo * 2, s = o / 32 * Fo * 2; i.push(jo(a), zo(a), 1, jo(s), zo(s), 1) } n.addAttribute("position", new G(i, 3)); var c = new we({ fog: !1 }); this.cone = new Se(n, c), this.add(this.cone), this.update() } function Or(t) { for (var e, n = function t(e) { var n = []; e && e.isBone && n.push(e); for (var i = 0; i < e.children.length; i++)n.push.apply(n, t(e.children[i])); return n }(t), i = new H, r = [], o = [], a = new _(0, 0, 1), s = new _(0, 1, 0), c = 0; c < n.length; c++)(e = n[c]).parent && e.parent.isBone && (r.push(0, 0, 0), r.push(0, 0, 0), o.push(a.r, a.g, a.b), o.push(s.r, s.g, s.b)); i.addAttribute("position", new G(r, 3)), i.addAttribute("color", new G(o, 3)); var u = new we({ vertexColors: ha, depthTest: !1, depthWrite: !1, transparent: !0 }); Se.call(this, i, u), this.root = t, this.bones = n, this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1 } function Ir(t, e, n) { this.light = t, this.light.updateMatrixWorld(), this.color = n; var i = new En(e, 4, 2), r = new Y({ wireframe: !0, fog: !1 }); $.call(this, i, r), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1, this.update() } function Dr(t, e) { this.type = "RectAreaLightHelper", this.light = t, this.color = e; var n = new H; n.addAttribute("position", new G([1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0], 3)), n.computeBoundingSphere(); var i = new we({ fog: !1 }); Te.call(this, n, i); var r = new H; r.addAttribute("position", new G([1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0], 3)), r.computeBoundingSphere(), this.add(new $(r, new Y({ side: THREE.BackSide, fog: !1 }))), this.update() } function Gr(t, e, n) { M.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.color = n; var i = new Fe(e); i.rotateY(.5 * Fo), this.material = new Y({ wireframe: !0, fog: !1 }), void 0 === this.color && (this.material.vertexColors = ha); var r = i.getAttribute("position"), o = new Float32Array(3 * r.count); i.addAttribute("color", new E(o, 3)), this.add(new $(i, this.material)), this.update() } function Br(t, e, n, i) { t = t || 10, e = e || 10, n = new _(void 0 === n ? 4473924 : n), i = new _(void 0 === i ? 8947848 : i); for (var r = e / 2, o = t / e, a = t / 2, s = [], c = [], u = 0, l = 0, h = -a; u <= e; u++, h += o) { s.push(-a, 0, h, a, 0, h), s.push(h, 0, -a, h, 0, a); var f = u === r ? n : i; f.toArray(c, l), l += 3, f.toArray(c, l), l += 3, f.toArray(c, l), l += 3, f.toArray(c, l), l += 3 } var p = new H; p.addAttribute("position", new G(s, 3)), p.addAttribute("color", new G(c, 3)); var d = new we({ vertexColors: ha }); Se.call(this, p, d) } function kr(t, e, n, i, r, o) { t = t || 10, e = e || 16, n = n || 8, i = i || 64, r = new _(void 0 === r ? 4473924 : r), o = new _(void 0 === o ? 8947848 : o); var a, s, c, u, l, h, f, p = [], d = []; for (u = 0; u <= e; u++)a = zo(c = u / e * (2 * Fo)) * t, s = jo(c) * t, p.push(0, 0, 0), p.push(a, 0, s), f = 1 & u ? r : o, d.push(f.r, f.g, f.b), d.push(f.r, f.g, f.b); for (u = 0; u <= n; u++)for (f = 1 & u ? r : o, h = t - t / n * u, l = 0; l < i; l++)a = zo(c = l / i * (2 * Fo)) * h, s = jo(c) * h, p.push(a, 0, s), d.push(f.r, f.g, f.b), a = zo(c = (l + 1) / i * (2 * Fo)) * h, s = jo(c) * h, p.push(a, 0, s), d.push(f.r, f.g, f.b); var m = new H; m.addAttribute("position", new G(p, 3)), m.addAttribute("color", new G(d, 3)); var v = new we({ vertexColors: ha }); Se.call(this, m, v) } function Nr(t, e, n, i) { this.object = t, this.size = void 0 === e ? 1 : e; var r = void 0 === n ? 16776960 : n, o = void 0 === i ? 1 : i, a = 0, s = this.object.geometry; s && s.isGeometry ? a = s.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."); var c = new H, u = new G(2 * a * 3, 3); c.addAttribute("position", u), Se.call(this, c, new we({ color: r, linewidth: o })), this.matrixAutoUpdate = !1, this.update() } function Hr(t, e, n) { M.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.color = n, void 0 === e && (e = 1); var i = new H; i.addAttribute("position", new G([-e, e, 0, e, e, 0, e, -e, 0, -e, -e, 0, -e, e, 0], 3)); var r = new we({ fog: !1 }); this.lightPlane = new Te(i, r), this.add(this.lightPlane), (i = new H).addAttribute("position", new G([0, 0, 0, 0, 0, 1], 3)), this.targetLine = new Te(i, r), this.add(this.targetLine), this.update() } function Fr(t) { function e(t, e, i) { n(t, i), n(e, i) } function n(t, e) { o.push(0, 0, 0), a.push(e.r, e.g, e.b), void 0 === s[t] && (s[t] = []), s[t].push(o.length / 3 - 1) } var i = new H, r = new we({ color: 16777215, vertexColors: la }), o = [], a = [], s = {}, c = new _(16755200), u = new _(16711680), l = new _(43775), h = new _(16777215), f = new _(3355443); e("n1", "n2", c), e("n2", "n4", c), e("n4", "n3", c), e("n3", "n1", c), e("f1", "f2", c), e("f2", "f4", c), e("f4", "f3", c), e("f3", "f1", c), e("n1", "f1", c), e("n2", "f2", c), e("n3", "f3", c), e("n4", "f4", c), e("p", "n1", u), e("p", "n2", u), e("p", "n3", u), e("p", "n4", u), e("u1", "u2", l), e("u2", "u3", l), e("u3", "u1", l), e("c", "t", h), e("p", "c", f), e("cn1", "cn2", f), e("cn3", "cn4", f), e("cf1", "cf2", f), e("cf3", "cf4", f), i.addAttribute("position", new G(o, 3)), i.addAttribute("color", new G(a, 3)), Se.call(this, i, r), this.camera = t, this.camera.updateProjectionMatrix && this.camera.updateProjectionMatrix(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = s, this.update() } function Ur(t, e) { this.object = t, void 0 === e && (e = 16776960); var n = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), i = new Float32Array(24), r = new H; r.setIndex(new E(n, 1)), r.addAttribute("position", new E(i, 3)), Se.call(this, r, new we({ color: e })), this.matrixAutoUpdate = !1, this.update() } function zr(t, e) { this.type = "Box3Helper", this.box = t; var n = void 0 === e ? 16776960 : e, i = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), r = new H; r.setIndex(new E(i, 1)), r.addAttribute("position", new G([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1], 3)), Se.call(this, r, new we({ color: n })), this.geometry.computeBoundingSphere() } function jr(t, e, n) { this.type = "PlaneHelper", this.plane = t, this.size = void 0 === e ? 1 : e; var i = void 0 === n ? 16776960 : n, r = new H; r.addAttribute("position", new G([1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0], 3)), r.computeBoundingSphere(), Te.call(this, r, new we({ color: i })); var o = new H; o.addAttribute("position", new G([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1], 3)), o.computeBoundingSphere(), this.add(new $(o, new Y({ color: i, opacity: .2, transparent: !0, depthWrite: !1 }))) } function Vr(t, e, n, i, r, o) { M.call(this), void 0 === t && (t = new THREE.Vector3(0, 0, 1)), void 0 === e && (e = new THREE.Vector3(0, 0, 0)), void 0 === n && (n = 1), void 0 === i && (i = 16776960), void 0 === r && (r = .2 * n), void 0 === o && (o = .2 * r), void 0 === wu && ((wu = new H).addAttribute("position", new G([0, 0, 0, 0, 1, 0], 3)), (Tu = new kn(0, .5, 1, 5, 1)).translate(0, -.5, 0)), this.position.copy(e), this.line = new Te(wu, new we({ color: i })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new $(Tu, new Y({ color: i })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(t), this.setLength(n, r, o) } function Wr(t) { var e = [0, 0, 0, t = t || 1, 0, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 0, t], n = new H; n.addAttribute("position", new G(e, 3)), n.addAttribute("color", new G([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1], 3)); var i = new we({ vertexColors: ha }); Se.call(this, n, i) } function Xr(t, e, n, i, r, o, a) { return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new w(t, e, n, r, o, a) } function qr(t) { return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."), t } function Yr(t) { return void 0 === t && (t = []), console.warn("THREE.MultiMaterial has been removed. Use an Array instead."), t.isMultiMaterial = !0, t.materials = t, t.clone = function () { return t.slice() }, t } function $r(t, e) { return console.warn("THREE.PointCloud has been renamed to THREE.Points."), new Ee(t, e) } function Zr(t) { return console.warn("THREE.Particle has been renamed to THREE.Sprite."), new ge(t) } function Kr(t, e) { return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."), new Ee(t, e) } function Jr(t) { return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."), new Pe(t) } function Qr(t) { return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."), new Pe(t) } function to(t) { return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."), new Pe(t) } function eo(t, e, n) { return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."), new s(t, e, n) } function no(t, e) { return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."), new E(t, e).setDynamic(!0) } function io(t, e) { return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."), new A(t, e) } function ro(t, e) { return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."), new C(t, e) } function oo(t, e) { return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."), new L(t, e) } function ao(t, e) { return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."), new R(t, e) } function so(t, e) { return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."), new O(t, e) } function co(t, e) { return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."), new I(t, e) } function uo(t, e) { return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."), new D(t, e) } function lo(t, e) { return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."), new G(t, e) } function ho(t, e) { return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."), new B(t, e) } function fo(t) { console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."), Si.call(this, t), this.type = "catmullrom", this.closed = !0 } function po(t) { console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."), Si.call(this, t), this.type = "catmullrom" } function mo(t) { console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."), Si.call(this, t), this.type = "catmullrom" } function vo(t) { return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."), new Wr(t) } function go(t, e) { return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."), new Ur(t, e) } function yo(t, e) { return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."), new Se(new Gn(t.geometry), new we({ color: void 0 === e ? 16777215 : e })) } function bo(t, e) { return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."), new Se(new Oe(t.geometry), new we({ color: void 0 === e ? 16777215 : e })) } function _o(t) { return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."), new pi(t) } function xo(t) { return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."), new vi(t) } function wo() { console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function (t, e) { console.warn("THREE.Projector: .projectVector() is now vector.project()."), t.project(e) }, this.unprojectVector = function (t, e) { console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), t.unproject(e) }, this.pickingRay = function () { console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().") } } function To() { console.error("THREE.CanvasRenderer has been removed") } function So() { console.error("THREE.JSONLoader has been removed.") } function Mo() { console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js") } var Po = Math.tan, Eo = Math.atan, Ao = Math.asin, Co = Math.acos, Lo = Math.pow, Ro = Math.LN2, Oo = Math.log, Io = Math.sign, Do = Number.isInteger, Go = Number.EPSILON, Bo = Math.floor, ko = Math.ceil, No = Math.max, Ho = Math.sqrt, Fo = Math.PI, Uo = Math.min, zo = Math.sin, jo = Math.cos, Vo = Math.atan2, Wo = Math.abs, Xo = Math.round; n.r(e), n.d(e, "WebGLRenderTargetCube", function () { return f }), n.d(e, "WebGLRenderTarget", function () { return h }), n.d(e, "WebGLRenderer", function () { return le }), n.d(e, "ShaderLib", function () { return Bc }), n.d(e, "UniformsLib", function () { return Gc }), n.d(e, "UniformsUtils", function () { return Ic }), n.d(e, "ShaderChunk", function () { return Oc }), n.d(e, "FogExp2", function () { return he }), n.d(e, "Fog", function () { return fe }), n.d(e, "Scene", function () { return pe }), n.d(e, "Sprite", function () { return ge }), n.d(e, "LOD", function () { return ye }), n.d(e, "SkinnedMesh", function () { return be }), n.d(e, "Skeleton", function () { return _e }), n.d(e, "Bone", function () { return xe }), n.d(e, "Mesh", function () { return $ }), n.d(e, "LineSegments", function () { return Se }), n.d(e, "LineLoop", function () { return Me }), n.d(e, "Line", function () { return Te }), n.d(e, "Points", function () { return Ee }), n.d(e, "Group", function () { return re }), n.d(e, "VideoTexture", function () { return Ae }), n.d(e, "DataTexture", function () { return p }), n.d(e, "DataTexture3D", function () { return nt }), n.d(e, "CompressedTexture", function () { return Ce }), n.d(e, "CubeTexture", function () { return et }), n.d(e, "CanvasTexture", function () { return Le }), n.d(e, "DepthTexture", function () { return Re }), n.d(e, "Texture", function () { return u }), n.d(e, "AnimationLoader", function () { return di }), n.d(e, "CompressedTextureLoader", function () { return mi }), n.d(e, "DataTextureLoader", function () { return vi }), n.d(e, "CubeTextureLoader", function () { return yi }), n.d(e, "TextureLoader", function () { return bi }), n.d(e, "ObjectLoader", function () { return Ki }), n.d(e, "MaterialLoader", function () { return $i }), n.d(e, "BufferGeometryLoader", function () { return Zi }), n.d(e, "DefaultLoadingManager", function () { return cu }), n.d(e, "LoadingManager", function () { return fi }), n.d(e, "ImageLoader", function () { return gi }), n.d(e, "ImageBitmapLoader", function () { return Ji }), n.d(e, "FontLoader", function () { return nr }), n.d(e, "FileLoader", function () { return pi }), n.d(e, "Loader", function () { return ir }), n.d(e, "LoaderUtils", function () { return mu }), n.d(e, "Cache", function () { return su }), n.d(e, "AudioLoader", function () { return rr }), n.d(e, "SpotLightShadow", function () { return Ui }), n.d(e, "SpotLight", function () { return zi }), n.d(e, "PointLight", function () { return ji }), n.d(e, "RectAreaLight", function () { return Yi }), n.d(e, "HemisphereLight", function () { return Hi }), n.d(e, "DirectionalLightShadow", function () { return Wi }), n.d(e, "DirectionalLight", function () { return Xi }), n.d(e, "AmbientLight", function () { return qi }), n.d(e, "LightShadow", function () { return Fi }), n.d(e, "Light", function () { return Ni }), n.d(e, "StereoCamera", function () { return or }), n.d(e, "PerspectiveCamera", function () { return ae }), n.d(e, "OrthographicCamera", function () { return Vi }), n.d(e, "CubeCamera", function () { return ar }), n.d(e, "ArrayCamera", function () { return se }), n.d(e, "Camera", function () { return oe }), n.d(e, "AudioListener", function () { return cr }), n.d(e, "PositionalAudio", function () { return lr }), n.d(e, "AudioContext", function () { return xu }), n.d(e, "AudioAnalyser", function () { return hr }), n.d(e, "Audio", function () { return ur }), n.d(e, "VectorKeyframeTrack", function () { return ui }), n.d(e, "StringKeyframeTrack", function () { return ci }), n.d(e, "QuaternionKeyframeTrack", function () { return si }), n.d(e, "NumberKeyframeTrack", function () { return oi }), n.d(e, "ColorKeyframeTrack", function () { return ri }), n.d(e, "BooleanKeyframeTrack", function () { return ii }), n.d(e, "PropertyMixer", function () { return fr }), n.d(e, "PropertyBinding", function () { return dr }), n.d(e, "KeyframeTrack", function () { return ni }), n.d(e, "AnimationUtils", function () { return au }), n.d(e, "AnimationObjectGroup", function () { return mr }), n.d(e, "AnimationMixer", function () { return gr }), n.d(e, "AnimationClip", function () { return li }), n.d(e, "Uniform", function () { return yr }), n.d(e, "InstancedBufferGeometry", function () { return br }), n.d(e, "BufferGeometry", function () { return H }), n.d(e, "Geometry", function () { return P }), n.d(e, "InterleavedBufferAttribute", function () { return me }), n.d(e, "InstancedInterleavedBuffer", function () { return _r }), n.d(e, "InterleavedBuffer", function () { return de }), n.d(e, "InstancedBufferAttribute", function () { return xr }), n.d(e, "Face3", function () { return w }), n.d(e, "Object3D", function () { return M }), n.d(e, "Raycaster", function () { return wr }), n.d(e, "Layers", function () { return S }), n.d(e, "EventDispatcher", function () { return i }), n.d(e, "Clock", function () { return sr }), n.d(e, "QuaternionLinearInterpolant", function () { return ai }), n.d(e, "LinearInterpolant", function () { return ti }), n.d(e, "DiscreteInterpolant", function () { return ei }), n.d(e, "CubicInterpolant", function () { return Qn }), n.d(e, "Interpolant", function () { return Jn }), n.d(e, "Triangle", function () { return q }), n.d(e, "Math", function () { return Ac }), n.d(e, "Spherical", function () { return Mr }), n.d(e, "Cylindrical", function () { return Pr }), n.d(e, "Plane", function () { return v }), n.d(e, "Frustum", function () { return g }), n.d(e, "Sphere", function () { return m }), n.d(e, "Ray", function () { return X }), n.d(e, "Matrix4", function () { return o }), n.d(e, "Matrix3", function () { return c }), n.d(e, "Box3", function () { return d }), n.d(e, "Box2", function () { return Er }), n.d(e, "Line3", function () { return Ar }), n.d(e, "Euler", function () { return T }), n.d(e, "Vector4", function () { return l }), n.d(e, "Vector3", function () { return s }), n.d(e, "Vector2", function () { return r }), n.d(e, "Quaternion", function () { return a }), n.d(e, "Color", function () { return _ }), n.d(e, "ImmediateRenderObject", function () { return Cr }), n.d(e, "VertexNormalsHelper", function () { return Lr }), n.d(e, "SpotLightHelper", function () { return Rr }), n.d(e, "SkeletonHelper", function () { return Or }), n.d(e, "PointLightHelper", function () { return Ir }), n.d(e, "RectAreaLightHelper", function () { return Dr }), n.d(e, "HemisphereLightHelper", function () { return Gr }), n.d(e, "GridHelper", function () { return Br }), n.d(e, "PolarGridHelper", function () { return kr }), n.d(e, "FaceNormalsHelper", function () { return Nr }), n.d(e, "DirectionalLightHelper", function () { return Hr }), n.d(e, "CameraHelper", function () { return Fr }), n.d(e, "BoxHelper", function () { return Ur }), n.d(e, "Box3Helper", function () { return zr }), n.d(e, "PlaneHelper", function () { return jr }), n.d(e, "ArrowHelper", function () { return Vr }), n.d(e, "AxesHelper", function () { return Wr }), n.d(e, "Shape", function () { return ki }), n.d(e, "Path", function () { return Bi }), n.d(e, "ShapePath", function () { return Qi }), n.d(e, "Font", function () { return tr }), n.d(e, "CurvePath", function () { return Gi }), n.d(e, "Curve", function () { return _i }), n.d(e, "ImageUtils", function () { return Lc }), n.d(e, "ShapeUtils", function () { return nu }), n.d(e, "WebGLUtils", function () { return ie }), n.d(e, "WireframeGeometry", function () { return Oe }), n.d(e, "ParametricGeometry", function () { return Ie }), n.d(e, "ParametricBufferGeometry", function () { return De }), n.d(e, "TetrahedronGeometry", function () { return ke }), n.d(e, "TetrahedronBufferGeometry", function () { return Ne }), n.d(e, "OctahedronGeometry", function () { return He }), n.d(e, "OctahedronBufferGeometry", function () { return Fe }), n.d(e, "IcosahedronGeometry", function () { return Ue }), n.d(e, "IcosahedronBufferGeometry", function () { return ze }), n.d(e, "DodecahedronGeometry", function () { return je }), n.d(e, "DodecahedronBufferGeometry", function () { return Ve }), n.d(e, "PolyhedronGeometry", function () { return Ge }), n.d(e, "PolyhedronBufferGeometry", function () { return Be }), n.d(e, "TubeGeometry", function () { return We }), n.d(e, "TubeBufferGeometry", function () { return Xe }), n.d(e, "TorusKnotGeometry", function () { return qe }), n.d(e, "TorusKnotBufferGeometry", function () { return Ye }), n.d(e, "TorusGeometry", function () { return $e }), n.d(e, "TorusBufferGeometry", function () { return Ze }), n.d(e, "TextGeometry", function () { return Sn }), n.d(e, "TextBufferGeometry", function () { return Mn }), n.d(e, "SphereGeometry", function () { return Pn }), n.d(e, "SphereBufferGeometry", function () { return En }), n.d(e, "RingGeometry", function () { return An }), n.d(e, "RingBufferGeometry", function () { return Cn }), n.d(e, "PlaneGeometry", function () { return z }), n.d(e, "PlaneBufferGeometry", function () { return j }), n.d(e, "LatheGeometry", function () { return Ln }), n.d(e, "LatheBufferGeometry", function () { return Rn }), n.d(e, "ShapeGeometry", function () { return On }), n.d(e, "ShapeBufferGeometry", function () { return In }), n.d(e, "ExtrudeGeometry", function () { return xn }), n.d(e, "ExtrudeBufferGeometry", function () { return wn }), n.d(e, "EdgesGeometry", function () { return Gn }), n.d(e, "ConeGeometry", function () { return Nn }), n.d(e, "ConeBufferGeometry", function () { return Hn }), n.d(e, "CylinderGeometry", function () { return Bn }), n.d(e, "CylinderBufferGeometry", function () { return kn }), n.d(e, "CircleGeometry", function () { return Fn }), n.d(e, "CircleBufferGeometry", function () { return Un }), n.d(e, "BoxGeometry", function () { return F }), n.d(e, "BoxBufferGeometry", function () { return U }), n.d(e, "ShadowMaterial", function () { return zn }), n.d(e, "SpriteMaterial", function () { return ve }), n.d(e, "RawShaderMaterial", function () { return jn }), n.d(e, "ShaderMaterial", function () { return W }), n.d(e, "PointsMaterial", function () { return Pe }), n.d(e, "MeshPhysicalMaterial", function () { return Wn }), n.d(e, "MeshStandardMaterial", function () { return Vn }), n.d(e, "MeshPhongMaterial", function () { return Xn }), n.d(e, "MeshToonMaterial", function () { return qn }), n.d(e, "MeshNormalMaterial", function () { return Yn }), n.d(e, "MeshLambertMaterial", function () { return $n }), n.d(e, "MeshDepthMaterial", function () { return Qt }), n.d(e, "MeshDistanceMaterial", function () { return te }), n.d(e, "MeshBasicMaterial", function () { return Y }), n.d(e, "MeshMatcapMaterial", function () { return Zn }), n.d(e, "LineDashedMaterial", function () { return Kn }), n.d(e, "LineBasicMaterial", function () { return we }), n.d(e, "Material", function () { return V }), n.d(e, "Float64BufferAttribute", function () { return B }), n.d(e, "Float32BufferAttribute", function () { return G }), n.d(e, "Uint32BufferAttribute", function () { return D }), n.d(e, "Int32BufferAttribute", function () { return I }), n.d(e, "Uint16BufferAttribute", function () { return O }), n.d(e, "Int16BufferAttribute", function () { return R }), n.d(e, "Uint8ClampedBufferAttribute", function () { return L }), n.d(e, "Uint8BufferAttribute", function () { return C }), n.d(e, "Int8BufferAttribute", function () { return A }), n.d(e, "BufferAttribute", function () { return E }), n.d(e, "ArcCurve", function () { return wi }), n.d(e, "CatmullRomCurve3", function () { return Si }), n.d(e, "CubicBezierCurve", function () { return Ai }), n.d(e, "CubicBezierCurve3", function () { return Ci }), n.d(e, "EllipseCurve", function () { return xi }), n.d(e, "LineCurve", function () { return Li }), n.d(e, "LineCurve3", function () { return Ri }), n.d(e, "QuadraticBezierCurve", function () { return Oi }), n.d(e, "QuadraticBezierCurve3", function () { return Ii }), n.d(e, "SplineCurve", function () { return Di }), n.d(e, "REVISION", function () { return qo }), n.d(e, "MOUSE", function () { return Yo }), n.d(e, "CullFaceNone", function () { return $o }), n.d(e, "CullFaceBack", function () { return Zo }), n.d(e, "CullFaceFront", function () { return Ko }), n.d(e, "CullFaceFrontBack", function () { return Jo }), n.d(e, "FrontFaceDirectionCW", function () { return Qo }), n.d(e, "FrontFaceDirectionCCW", function () { return ta }), n.d(e, "BasicShadowMap", function () { return ea }), n.d(e, "PCFShadowMap", function () { return na }), n.d(e, "PCFSoftShadowMap", function () { return ia }), n.d(e, "FrontSide", function () { return ra }), n.d(e, "BackSide", function () { return oa }), n.d(e, "DoubleSide", function () { return aa }), n.d(e, "FlatShading", function () { return sa }), n.d(e, "SmoothShading", function () { return ca }), n.d(e, "NoColors", function () { return ua }), n.d(e, "FaceColors", function () { return la }), n.d(e, "VertexColors", function () { return ha }), n.d(e, "NoBlending", function () { return fa }), n.d(e, "NormalBlending", function () { return pa }), n.d(e, "AdditiveBlending", function () { return da }), n.d(e, "SubtractiveBlending", function () { return ma }), n.d(e, "MultiplyBlending", function () { return va }), n.d(e, "CustomBlending", function () { return ga }), n.d(e, "AddEquation", function () { return ya }), n.d(e, "SubtractEquation", function () { return ba }), n.d(e, "ReverseSubtractEquation", function () { return _a }), n.d(e, "MinEquation", function () { return xa }), n.d(e, "MaxEquation", function () { return wa }), n.d(e, "ZeroFactor", function () { return Ta }), n.d(e, "OneFactor", function () { return Sa }), n.d(e, "SrcColorFactor", function () { return Ma }), n.d(e, "OneMinusSrcColorFactor", function () { return Pa }), n.d(e, "SrcAlphaFactor", function () { return Ea }), n.d(e, "OneMinusSrcAlphaFactor", function () { return Aa }), n.d(e, "DstAlphaFactor", function () { return Ca }), n.d(e, "OneMinusDstAlphaFactor", function () { return La }), n.d(e, "DstColorFactor", function () { return Ra }), n.d(e, "OneMinusDstColorFactor", function () { return Oa }), n.d(e, "SrcAlphaSaturateFactor", function () { return Ia }), n.d(e, "NeverDepth", function () { return Da }), n.d(e, "AlwaysDepth", function () { return Ga }), n.d(e, "LessDepth", function () { return Ba }), n.d(e, "LessEqualDepth", function () { return ka }), n.d(e, "EqualDepth", function () { return Na }), n.d(e, "GreaterEqualDepth", function () { return Ha }), n.d(e, "GreaterDepth", function () { return Fa }), n.d(e, "NotEqualDepth", function () { return Ua }), n.d(e, "MultiplyOperation", function () { return za }), n.d(e, "MixOperation", function () { return ja }), n.d(e, "AddOperation", function () { return Va }), n.d(e, "NoToneMapping", function () { return Wa }), n.d(e, "LinearToneMapping", function () { return Xa }), n.d(e, "ReinhardToneMapping", function () { return qa }), n.d(e, "Uncharted2ToneMapping", function () { return Ya }), n.d(e, "CineonToneMapping", function () { return $a }), n.d(e, "ACESFilmicToneMapping", function () { return Za }), n.d(e, "UVMapping", function () { return Ka }), n.d(e, "CubeReflectionMapping", function () { return Ja }), n.d(e, "CubeRefractionMapping", function () { return Qa }), n.d(e, "EquirectangularReflectionMapping", function () { return ts }), n.d(e, "EquirectangularRefractionMapping", function () { return es }), n.d(e, "SphericalReflectionMapping", function () { return ns }), n.d(e, "CubeUVReflectionMapping", function () { return is }), n.d(e, "CubeUVRefractionMapping", function () { return rs }), n.d(e, "RepeatWrapping", function () { return os }), n.d(e, "ClampToEdgeWrapping", function () { return as }), n.d(e, "MirroredRepeatWrapping", function () { return ss }), n.d(e, "NearestFilter", function () { return cs }), n.d(e, "NearestMipMapNearestFilter", function () { return us }), n.d(e, "NearestMipMapLinearFilter", function () { return ls }), n.d(e, "LinearFilter", function () { return hs }), n.d(e, "LinearMipMapNearestFilter", function () { return fs }), n.d(e, "LinearMipMapLinearFilter", function () { return ps }), n.d(e, "UnsignedByteType", function () { return ds }), n.d(e, "ByteType", function () { return ms }), n.d(e, "ShortType", function () { return vs }), n.d(e, "UnsignedShortType", function () { return gs }), n.d(e, "IntType", function () { return ys }), n.d(e, "UnsignedIntType", function () { return bs }), n.d(e, "FloatType", function () { return _s }), n.d(e, "HalfFloatType", function () { return xs }), n.d(e, "UnsignedShort4444Type", function () { return ws }), n.d(e, "UnsignedShort5551Type", function () { return Ts }), n.d(e, "UnsignedShort565Type", function () { return Ss }), n.d(e, "UnsignedInt248Type", function () { return Ms }), n.d(e, "AlphaFormat", function () { return Ps }), n.d(e, "RGBFormat", function () { return Es }), n.d(e, "RGBAFormat", function () { return As }), n.d(e, "LuminanceFormat", function () { return Cs }), n.d(e, "LuminanceAlphaFormat", function () { return Ls }), n.d(e, "RGBEFormat", function () { return Rs }), n.d(e, "DepthFormat", function () { return Os }), n.d(e, "DepthStencilFormat", function () { return Is }), n.d(e, "RedFormat", function () { return Ds }), n.d(e, "RGB_S3TC_DXT1_Format", function () { return Gs }), n.d(e, "RGBA_S3TC_DXT1_Format", function () { return Bs }), n.d(e, "RGBA_S3TC_DXT3_Format", function () { return ks }), n.d(e, "RGBA_S3TC_DXT5_Format", function () { return Ns }), n.d(e, "RGB_PVRTC_4BPPV1_Format", function () { return Hs }), n.d(e, "RGB_PVRTC_2BPPV1_Format", function () { return Fs }), n.d(e, "RGBA_PVRTC_4BPPV1_Format", function () { return Us }), n.d(e, "RGBA_PVRTC_2BPPV1_Format", function () { return zs }), n.d(e, "RGB_ETC1_Format", function () { return js }), n.d(e, "RGBA_ASTC_4x4_Format", function () { return Vs }), n.d(e, "RGBA_ASTC_5x4_Format", function () { return Ws }), n.d(e, "RGBA_ASTC_5x5_Format", function () { return Xs }), n.d(e, "RGBA_ASTC_6x5_Format", function () { return qs }), n.d(e, "RGBA_ASTC_6x6_Format", function () { return Ys }), n.d(e, "RGBA_ASTC_8x5_Format", function () { return $s }), n.d(e, "RGBA_ASTC_8x6_Format", function () { return Zs }), n.d(e, "RGBA_ASTC_8x8_Format", function () { return Ks }), n.d(e, "RGBA_ASTC_10x5_Format", function () { return Js }), n.d(e, "RGBA_ASTC_10x6_Format", function () { return Qs }), n.d(e, "RGBA_ASTC_10x8_Format", function () { return tc }), n.d(e, "RGBA_ASTC_10x10_Format", function () { return ec }), n.d(e, "RGBA_ASTC_12x10_Format", function () { return nc }), n.d(e, "RGBA_ASTC_12x12_Format", function () { return ic }), n.d(e, "LoopOnce", function () { return rc }), n.d(e, "LoopRepeat", function () { return oc }), n.d(e, "LoopPingPong", function () { return ac }), n.d(e, "InterpolateDiscrete", function () { return sc }), n.d(e, "InterpolateLinear", function () { return cc }), n.d(e, "InterpolateSmooth", function () { return uc }), n.d(e, "ZeroCurvatureEnding", function () { return lc }), n.d(e, "ZeroSlopeEnding", function () { return hc }), n.d(e, "WrapAroundEnding", function () { return fc }), n.d(e, "TrianglesDrawMode", function () { return pc }), n.d(e, "TriangleStripDrawMode", function () { return dc }), n.d(e, "TriangleFanDrawMode", function () { return mc }), n.d(e, "LinearEncoding", function () { return vc }), n.d(e, "sRGBEncoding", function () { return gc }), n.d(e, "GammaEncoding", function () { return yc }), n.d(e, "RGBEEncoding", function () { return bc }), n.d(e, "LogLuvEncoding", function () { return _c }), n.d(e, "RGBM7Encoding", function () { return xc }), n.d(e, "RGBM16Encoding", function () { return wc }), n.d(e, "RGBDEncoding", function () { return Tc }), n.d(e, "BasicDepthPacking", function () { return Sc }), n.d(e, "RGBADepthPacking", function () { return Mc }), n.d(e, "TangentSpaceNormalMap", function () { return Pc }), n.d(e, "ObjectSpaceNormalMap", function () { return Ec }), n.d(e, "CubeGeometry", function () { return F }), n.d(e, "Face4", function () { return Xr }), n.d(e, "LineStrip", function () { return Mu }), n.d(e, "LinePieces", function () { return Pu }), n.d(e, "MeshFaceMaterial", function () { return qr }), n.d(e, "MultiMaterial", function () { return Yr }), n.d(e, "PointCloud", function () { return $r }), n.d(e, "Particle", function () { return Zr }), n.d(e, "ParticleSystem", function () { return Kr }), n.d(e, "PointCloudMaterial", function () { return Jr }), n.d(e, "ParticleBasicMaterial", function () { return Qr }), n.d(e, "ParticleSystemMaterial", function () { return to }), n.d(e, "Vertex", function () { return eo }), n.d(e, "DynamicBufferAttribute", function () { return no }), n.d(e, "Int8Attribute", function () { return io }), n.d(e, "Uint8Attribute", function () { return ro }), n.d(e, "Uint8ClampedAttribute", function () { return oo }), n.d(e, "Int16Attribute", function () { return ao }), n.d(e, "Uint16Attribute", function () { return so }), n.d(e, "Int32Attribute", function () { return co }), n.d(e, "Uint32Attribute", function () { return uo }), n.d(e, "Float32Attribute", function () { return lo }), n.d(e, "Float64Attribute", function () { return ho }), n.d(e, "ClosedSplineCurve3", function () { return fo }), n.d(e, "SplineCurve3", function () { return po }), n.d(e, "Spline", function () { return mo }), n.d(e, "AxisHelper", function () { return vo }), n.d(e, "BoundingBoxHelper", function () { return go }), n.d(e, "EdgesHelper", function () { return yo }), n.d(e, "WireframeHelper", function () { return bo }), n.d(e, "XHRLoader", function () { return _o }), n.d(e, "BinaryTextureLoader", function () { return xo }), n.d(e, "GeometryUtils", function () { return Eu }), n.d(e, "Projector", function () { return wo }), n.d(e, "CanvasRenderer", function () { return To }), n.d(e, "JSONLoader", function () { return So }), n.d(e, "SceneUtils", function () { return Au }), n.d(e, "LensFlare", function () { return Mo }), void 0 === Go && (Go = 2.220446049250313e-16), void 0 === Do && (Do = function (t) { return "number" == typeof t && isFinite(t) && Bo(t) === t }), void 0 === Io && (Io = function (t) { return 0 > t ? -1 : 0 < t ? 1 : +t }), 0 == "name" in Function.prototype && Object.defineProperty(Function.prototype, "name", { get: function () { return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1] } }), void 0 === Object.assign && (Object.assign = function (t) { if (void 0 === t || null === t) throw new TypeError("Cannot convert undefined or null to object"); for (var e, n = Object(t), i = 1; i < arguments.length; i++)if (void 0 !== (e = arguments[i]) && null !== e) for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (n[r] = e[r]); return n }), Object.assign(i.prototype, { addEventListener: function (t, e) { void 0 === this._listeners && (this._listeners = {}); var n = this._listeners; void 0 === n[t] && (n[t] = []), -1 === n[t].indexOf(e) && n[t].push(e) }, hasEventListener: function (t, e) { if (void 0 === this._listeners) return !1; var n = this._listeners; return void 0 !== n[t] && -1 !== n[t].indexOf(e) }, removeEventListener: function (t, e) { if (void 0 !== this._listeners) { var n = this._listeners[t]; if (void 0 !== n) { var i = n.indexOf(e); -1 !== i && n.splice(i, 1) } } }, dispatchEvent: function (t) { if (void 0 !== this._listeners) { var e = this._listeners[t.type]; if (void 0 !== e) { t.target = this; for (var n = e.slice(0), i = 0, r = n.length; i < r; i++)n[i].call(this, t) } } } }); var qo = "100", Yo = { LEFT: 0, MIDDLE: 1, RIGHT: 2 }, $o = 0, Zo = 1, Ko = 2, Jo = 3, Qo = 0, ta = 1, ea = 0, na = 1, ia = 2, ra = 0, oa = 1, aa = 2, sa = 1, ca = 2, ua = 0, la = 1, ha = 2, fa = 0, pa = 1, da = 2, ma = 3, va = 4, ga = 5, ya = 100, ba = 101, _a = 102, xa = 103, wa = 104, Ta = 200, Sa = 201, Ma = 202, Pa = 203, Ea = 204, Aa = 205, Ca = 206, La = 207, Ra = 208, Oa = 209, Ia = 210, Da = 0, Ga = 1, Ba = 2, ka = 3, Na = 4, Ha = 5, Fa = 6, Ua = 7, za = 0, ja = 1, Va = 2, Wa = 0, Xa = 1, qa = 2, Ya = 3, $a = 4, Za = 5, Ka = 300, Ja = 301, Qa = 302, ts = 303, es = 304, ns = 305, is = 306, rs = 307, os = 1e3, as = 1001, ss = 1002, cs = 1003, us = 1004, ls = 1005, hs = 1006, fs = 1007, ps = 1008, ds = 1009, ms = 1010, vs = 1011, gs = 1012, ys = 1013, bs = 1014, _s = 1015, xs = 1016, ws = 1017, Ts = 1018, Ss = 1019, Ms = 1020, Ps = 1021, Es = 1022, As = 1023, Cs = 1024, Ls = 1025, Rs = As, Os = 1026, Is = 1027, Ds = 1028, Gs = 33776, Bs = 33777, ks = 33778, Ns = 33779, Hs = 35840, Fs = 35841, Us = 35842, zs = 35843, js = 36196, Vs = 37808, Ws = 37809, Xs = 37810, qs = 37811, Ys = 37812, $s = 37813, Zs = 37814, Ks = 37815, Js = 37816, Qs = 37817, tc = 37818, ec = 37819, nc = 37820, ic = 37821, rc = 2200, oc = 2201, ac = 2202, sc = 2300, cc = 2301, uc = 2302, lc = 2400, hc = 2401, fc = 2402, pc = 0, dc = 1, mc = 2, vc = 3e3, gc = 3001, yc = 3007, bc = 3002, _c = 3003, xc = 3004, wc = 3005, Tc = 3006, Sc = 3200, Mc = 3201, Pc = 0, Ec = 1, Ac = { DEG2RAD: Fo / 180, RAD2DEG: 180 / Fo, generateUUID: function () { for (var t = [], e = 0; 256 > e; e++)t[e] = (16 > e ? "0" : "") + e.toString(16); return function () { var e = 0 | 4294967295 * Math.random(), n = 0 | 4294967295 * Math.random(), i = 0 | 4294967295 * Math.random(), r = 0 | 4294967295 * Math.random(); return (t[255 & e] + t[255 & e >> 8] + t[255 & e >> 16] + t[255 & e >> 24] + "-" + t[255 & n] + t[255 & n >> 8] + "-" + t[64 | 15 & n >> 16] + t[255 & n >> 24] + "-" + t[128 | 63 & i] + t[255 & i >> 8] + "-" + t[255 & i >> 16] + t[255 & i >> 24] + t[255 & r] + t[255 & r >> 8] + t[255 & r >> 16] + t[255 & r >> 24]).toUpperCase() } }(), clamp: function (t, e, n) { return No(e, Uo(n, t)) }, euclideanModulo: function (t, e) { return (t % e + e) % e }, mapLinear: function (t, e, n, i, r) { return i + (t - e) * (r - i) / (n - e) }, lerp: function (t, e, n) { return (1 - n) * t + n * e }, smoothstep: function (t, e, n) { return t <= e ? 0 : t >= n ? 1 : (t = (t - e) / (n - e)) * t * (3 - 2 * t) }, smootherstep: function (t, e, n) { return t <= e ? 0 : t >= n ? 1 : (t = (t - e) / (n - e)) * t * t * (t * (6 * t - 15) + 10) }, randInt: function (t, e) { return t + Bo(Math.random() * (e - t + 1)) }, randFloat: function (t, e) { return t + Math.random() * (e - t) }, randFloatSpread: function (t) { return t * (.5 - Math.random()) }, degToRad: function (t) { return t * Ac.DEG2RAD }, radToDeg: function (t) { return t * Ac.RAD2DEG }, isPowerOfTwo: function (t) { return 0 == (t & t - 1) && 0 !== t }, ceilPowerOfTwo: function (t) { return Lo(2, ko(Oo(t) / Ro)) }, floorPowerOfTwo: function (t) { return Lo(2, Bo(Oo(t) / Ro)) } }; Object.defineProperties(r.prototype, { width: { get: function () { return this.x }, set: function (t) { this.x = t } }, height: { get: function () { return this.y }, set: function (t) { this.y = t } } }), Object.assign(r.prototype, { isVector2: !0, set: function (t, e) { return this.x = t, this.y = e, this }, setScalar: function (t) { return this.x = t, this.y = t, this }, setX: function (t) { return this.x = t, this }, setY: function (t) { return this.y = t, this }, setComponent: function (t, e) { switch (t) { case 0: this.x = e; break; case 1: this.y = e; break; default: throw new Error("index is out of range: " + t) }return this }, getComponent: function (t) { switch (t) { case 0: return this.x; case 1: return this.y; default: throw new Error("index is out of range: " + t) } }, clone: function () { return new this.constructor(this.x, this.y) }, copy: function (t) { return this.x = t.x, this.y = t.y, this }, add: function (t, e) { return void 0 === e ? (this.x += t.x, this.y += t.y, this) : (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) }, addScalar: function (t) { return this.x += t, this.y += t, this }, addVectors: function (t, e) { return this.x = t.x + e.x, this.y = t.y + e.y, this }, addScaledVector: function (t, e) { return this.x += t.x * e, this.y += t.y * e, this }, sub: function (t, e) { return void 0 === e ? (this.x -= t.x, this.y -= t.y, this) : (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) }, subScalar: function (t) { return this.x -= t, this.y -= t, this }, subVectors: function (t, e) { return this.x = t.x - e.x, this.y = t.y - e.y, this }, multiply: function (t) { return this.x *= t.x, this.y *= t.y, this }, multiplyScalar: function (t) { return this.x *= t, this.y *= t, this }, divide: function (t) { return this.x /= t.x, this.y /= t.y, this }, divideScalar: function (t) { return this.multiplyScalar(1 / t) }, applyMatrix3: function (t) { var e = this.x, n = this.y, i = t.elements; return this.x = i[0] * e + i[3] * n + i[6], this.y = i[1] * e + i[4] * n + i[7], this }, min: function (t) { return this.x = Uo(this.x, t.x), this.y = Uo(this.y, t.y), this }, max: function (t) { return this.x = No(this.x, t.x), this.y = No(this.y, t.y), this }, clamp: function (t, e) { return this.x = No(t.x, Uo(e.x, this.x)), this.y = No(t.y, Uo(e.y, this.y)), this }, clampScalar: function () { var t = new r, e = new r; return function (n, i) { return t.set(n, n), e.set(i, i), this.clamp(t, e) } }(), clampLength: function (t, e) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(No(t, Uo(e, n))) }, floor: function () { return this.x = Bo(this.x), this.y = Bo(this.y), this }, ceil: function () { return this.x = ko(this.x), this.y = ko(this.y), this }, round: function () { return this.x = Xo(this.x), this.y = Xo(this.y), this }, roundToZero: function () { return this.x = 0 > this.x ? ko(this.x) : Bo(this.x), this.y = 0 > this.y ? ko(this.y) : Bo(this.y), this }, negate: function () { return this.x = -this.x, this.y = -this.y, this }, dot: function (t) { return this.x * t.x + this.y * t.y }, cross: function (t) { return this.x * t.y - this.y * t.x }, lengthSq: function () { return this.x * this.x + this.y * this.y }, length: function () { return Ho(this.x * this.x + this.y * this.y) }, manhattanLength: function () { return Wo(this.x) + Wo(this.y) }, normalize: function () { return this.divideScalar(this.length() || 1) }, angle: function () { var t = Vo(this.y, this.x); return 0 > t && (t += 2 * Fo), t }, distanceTo: function (t) { return Ho(this.distanceToSquared(t)) }, distanceToSquared: function (t) { var e = this.x - t.x, n = this.y - t.y; return e * e + n * n }, manhattanDistanceTo: function (t) { return Wo(this.x - t.x) + Wo(this.y - t.y) }, setLength: function (t) { return this.normalize().multiplyScalar(t) }, lerp: function (t, e) { return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this }, lerpVectors: function (t, e, n) { return this.subVectors(e, t).multiplyScalar(n).add(t) }, equals: function (t) { return t.x === this.x && t.y === this.y }, fromArray: function (t, e) { return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t }, fromBufferAttribute: function (t, e, n) { return void 0 !== n && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this }, rotateAround: function (t, e) { var n = jo(e), i = zo(e), r = this.x - t.x, o = this.y - t.y; return this.x = r * n - o * i + t.x, this.y = r * i + o * n + t.y, this } }), Object.assign(o.prototype, { isMatrix4: !0, set: function (t, e, n, i, r, o, a, s, c, u, l, h, f, p, d, m) { var v = this.elements; return v[0] = t, v[4] = e, v[8] = n, v[12] = i, v[1] = r, v[5] = o, v[9] = a, v[13] = s, v[2] = c, v[6] = u, v[10] = l, v[14] = h, v[3] = f, v[7] = p, v[11] = d, v[15] = m, this }, identity: function () { return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this }, clone: function () { return (new o).fromArray(this.elements) }, copy: function (t) { var e = this.elements, n = t.elements; return e[0] = n[0], e[1] = n[1], e[2] = n[2], e[3] = n[3], e[4] = n[4], e[5] = n[5], e[6] = n[6], e[7] = n[7], e[8] = n[8], e[9] = n[9], e[10] = n[10], e[11] = n[11], e[12] = n[12], e[13] = n[13], e[14] = n[14], e[15] = n[15], this }, copyPosition: function (t) { var e = this.elements, n = t.elements; return e[12] = n[12], e[13] = n[13], e[14] = n[14], this }, extractBasis: function (t, e, n) { return t.setFromMatrixColumn(this, 0), e.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), this }, makeBasis: function (t, e, n) { return this.set(t.x, e.x, n.x, 0, t.y, e.y, n.y, 0, t.z, e.z, n.z, 0, 0, 0, 0, 1), this }, extractRotation: function () { var t = new s; return function (e) { var n = this.elements, i = e.elements, r = 1 / t.setFromMatrixColumn(e, 0).length(), o = 1 / t.setFromMatrixColumn(e, 1).length(), a = 1 / t.setFromMatrixColumn(e, 2).length(); return n[0] = i[0] * r, n[1] = i[1] * r, n[2] = i[2] * r, n[3] = 0, n[4] = i[4] * o, n[5] = i[5] * o, n[6] = i[6] * o, n[7] = 0, n[8] = i[8] * a, n[9] = i[9] * a, n[10] = i[10] * a, n[11] = 0, n[12] = 0, n[13] = 0, n[14] = 0, n[15] = 1, this } }(), makeRotationFromEuler: function (t) { t && t.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order."); var e = this.elements, n = t.x, i = t.y, r = t.z, o = jo(n), a = zo(n), s = jo(i), c = zo(i), u = jo(r), l = zo(r); if ("XYZ" === t.order) { var h = o * u, f = o * l, p = a * u, d = a * l; e[0] = s * u, e[4] = -s * l, e[8] = c, e[1] = f + p * c, e[5] = h - d * c, e[9] = -a * s, e[2] = d - h * c, e[6] = p + f * c, e[10] = o * s } else if ("YXZ" === t.order) { var m = s * u, v = s * l, g = c * u, y = c * l; e[0] = m + y * a, e[4] = g * a - v, e[8] = o * c, e[1] = o * l, e[5] = o * u, e[9] = -a, e[2] = v * a - g, e[6] = y + m * a, e[10] = o * s } else if ("ZXY" === t.order) { m = s * u, v = s * l, g = c * u, y = c * l; e[0] = m - y * a, e[4] = -o * l, e[8] = g + v * a, e[1] = v + g * a, e[5] = o * u, e[9] = y - m * a, e[2] = -o * c, e[6] = a, e[10] = o * s } else if ("ZYX" === t.order) { h = o * u, f = o * l, p = a * u, d = a * l; e[0] = s * u, e[4] = p * c - f, e[8] = h * c + d, e[1] = s * l, e[5] = d * c + h, e[9] = f * c - p, e[2] = -c, e[6] = a * s, e[10] = o * s } else if ("YZX" === t.order) { var b = o * s, _ = o * c, x = a * s, w = a * c; e[0] = s * u, e[4] = w - b * l, e[8] = x * l + _, e[1] = l, e[5] = o * u, e[9] = -a * u, e[2] = -c * u, e[6] = _ * l + x, e[10] = b - w * l } else if ("XZY" === t.order) { b = o * s, _ = o * c, x = a * s, w = a * c; e[0] = s * u, e[4] = -l, e[8] = c * u, e[1] = b * l + w, e[5] = o * u, e[9] = _ * l - x, e[2] = x * l - _, e[6] = a * u, e[10] = w * l + b } return e[3] = 0, e[7] = 0, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this }, makeRotationFromQuaternion: function () { var t = new s(0, 0, 0), e = new s(1, 1, 1); return function (n) { return this.compose(t, n, e) } }(), lookAt: function () { var t = new s, e = new s, n = new s; return function (i, r, o) { var a = this.elements; return n.subVectors(i, r), 0 === n.lengthSq() && (n.z = 1), n.normalize(), t.crossVectors(o, n), 0 === t.lengthSq() && (1 === Wo(o.z) ? n.x += 1e-4 : n.z += 1e-4, n.normalize(), t.crossVectors(o, n)), t.normalize(), e.crossVectors(n, t), a[0] = t.x, a[4] = e.x, a[8] = n.x, a[1] = t.y, a[5] = e.y, a[9] = n.y, a[2] = t.z, a[6] = e.z, a[10] = n.z, this } }(), multiply: function (t, e) { return void 0 === e ? this.multiplyMatrices(this, t) : (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(t, e)) }, premultiply: function (t) { return this.multiplyMatrices(t, this) }, multiplyMatrices: function (t, e) { var n = t.elements, i = e.elements, r = this.elements, o = n[0], a = n[4], s = n[8], c = n[12], u = n[1], l = n[5], h = n[9], f = n[13], p = n[2], d = n[6], m = n[10], v = n[14], g = n[3], y = n[7], b = n[11], _ = n[15], x = i[0], w = i[4], T = i[8], S = i[12], M = i[1], P = i[5], E = i[9], A = i[13], C = i[2], L = i[6], R = i[10], O = i[14], I = i[3], D = i[7], G = i[11], B = i[15]; return r[0] = o * x + a * M + s * C + c * I, r[4] = o * w + a * P + s * L + c * D, r[8] = o * T + a * E + s * R + c * G, r[12] = o * S + a * A + s * O + c * B, r[1] = u * x + l * M + h * C + f * I, r[5] = u * w + l * P + h * L + f * D, r[9] = u * T + l * E + h * R + f * G, r[13] = u * S + l * A + h * O + f * B, r[2] = p * x + d * M + m * C + v * I, r[6] = p * w + d * P + m * L + v * D, r[10] = p * T + d * E + m * R + v * G, r[14] = p * S + d * A + m * O + v * B, r[3] = g * x + y * M + b * C + _ * I, r[7] = g * w + y * P + b * L + _ * D, r[11] = g * T + y * E + b * R + _ * G, r[15] = g * S + y * A + b * O + _ * B, this }, multiplyScalar: function (t) { var e = this.elements; return e[0] *= t, e[4] *= t, e[8] *= t, e[12] *= t, e[1] *= t, e[5] *= t, e[9] *= t, e[13] *= t, e[2] *= t, e[6] *= t, e[10] *= t, e[14] *= t, e[3] *= t, e[7] *= t, e[11] *= t, e[15] *= t, this }, applyToBufferAttribute: function () { var t = new s; return function (e) { for (var n = 0, i = e.count; n < i; n++)t.x = e.getX(n), t.y = e.getY(n), t.z = e.getZ(n), t.applyMatrix4(this), e.setXYZ(n, t.x, t.y, t.z); return e } }(), determinant: function () { var t = this.elements, e = t[0], n = t[4], i = t[8], r = t[12], o = t[1], a = t[5], s = t[9], c = t[13], u = t[2], l = t[6], h = t[10], f = t[14]; return t[3] * (+r * s * l - i * c * l - r * a * h + n * c * h + i * a * f - n * s * f) + t[7] * (+e * s * f - e * c * h + r * o * h - i * o * f + i * c * u - r * s * u) + t[11] * (+e * c * l - e * a * f - r * o * l + n * o * f + r * a * u - n * c * u) + t[15] * (-i * a * u - e * s * l + e * a * h + i * o * l - n * o * h + n * s * u) }, transpose: function () { var t, e = this.elements; return t = e[1], e[1] = e[4], e[4] = t, t = e[2], e[2] = e[8], e[8] = t, t = e[6], e[6] = e[9], e[9] = t, t = e[3], e[3] = e[12], e[12] = t, t = e[7], e[7] = e[13], e[13] = t, t = e[11], e[11] = e[14], e[14] = t, this }, setPosition: function (t) { var e = this.elements; return e[12] = t.x, e[13] = t.y, e[14] = t.z, this }, getInverse: function (t, e) { var n = this.elements, i = t.elements, r = i[0], o = i[1], a = i[2], s = i[3], c = i[4], u = i[5], l = i[6], h = i[7], f = i[8], p = i[9], d = i[10], m = i[11], v = i[12], g = i[13], y = i[14], b = i[15], _ = p * y * h - g * d * h + g * l * m - u * y * m - p * l * b + u * d * b, x = v * d * h - f * y * h - v * l * m + c * y * m + f * l * b - c * d * b, w = f * g * h - v * p * h + v * u * m - c * g * m - f * u * b + c * p * b, T = v * p * l - f * g * l - v * u * d + c * g * d + f * u * y - c * p * y, S = r * _ + o * x + a * w + s * T; if (0 == S) { var M = "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"; if (!0 === e) throw new Error(M); return console.warn(M), this.identity() } var P = 1 / S; return n[0] = _ * P, n[1] = (g * d * s - p * y * s - g * a * m + o * y * m + p * a * b - o * d * b) * P, n[2] = (u * y * s - g * l * s + g * a * h - o * y * h - u * a * b + o * l * b) * P, n[3] = (p * l * s - u * d * s - p * a * h + o * d * h + u * a * m - o * l * m) * P, n[4] = x * P, n[5] = (f * y * s - v * d * s + v * a * m - r * y * m - f * a * b + r * d * b) * P, n[6] = (v * l * s - c * y * s - v * a * h + r * y * h + c * a * b - r * l * b) * P, n[7] = (c * d * s - f * l * s + f * a * h - r * d * h - c * a * m + r * l * m) * P, n[8] = w * P, n[9] = (v * p * s - f * g * s - v * o * m + r * g * m + f * o * b - r * p * b) * P, n[10] = (c * g * s - v * u * s + v * o * h - r * g * h - c * o * b + r * u * b) * P, n[11] = (f * u * s - c * p * s - f * o * h + r * p * h + c * o * m - r * u * m) * P, n[12] = T * P, n[13] = (f * g * a - v * p * a + v * o * d - r * g * d - f * o * y + r * p * y) * P, n[14] = (v * u * a - c * g * a - v * o * l + r * g * l + c * o * y - r * u * y) * P, n[15] = (c * p * a - f * u * a + f * o * l - r * p * l - c * o * d + r * u * d) * P, this }, scale: function (t) { var e = this.elements, n = t.x, i = t.y, r = t.z; return e[0] *= n, e[4] *= i, e[8] *= r, e[1] *= n, e[5] *= i, e[9] *= r, e[2] *= n, e[6] *= i, e[10] *= r, e[3] *= n, e[7] *= i, e[11] *= r, this }, getMaxScaleOnAxis: function () { var t = this.elements, e = t[0] * t[0] + t[1] * t[1] + t[2] * t[2], n = t[4] * t[4] + t[5] * t[5] + t[6] * t[6], i = t[8] * t[8] + t[9] * t[9] + t[10] * t[10]; return Ho(No(e, n, i)) }, makeTranslation: function (t, e, n) { return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1), this }, makeRotationX: function (t) { var e = jo(t), n = zo(t); return this.set(1, 0, 0, 0, 0, e, -n, 0, 0, n, e, 0, 0, 0, 0, 1), this }, makeRotationY: function (t) { var e = jo(t), n = zo(t); return this.set(e, 0, n, 0, 0, 1, 0, 0, -n, 0, e, 0, 0, 0, 0, 1), this }, makeRotationZ: function (t) { var e = jo(t), n = zo(t); return this.set(e, -n, 0, 0, n, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this }, makeRotationAxis: function (t, e) { var n = jo(e), i = zo(e), r = 1 - n, o = t.x, a = t.y, s = t.z, c = r * o, u = r * a; return this.set(c * o + n, c * a - i * s, c * s + i * a, 0, c * a + i * s, u * a + n, u * s - i * o, 0, c * s - i * a, u * s + i * o, r * s * s + n, 0, 0, 0, 0, 1), this }, makeScale: function (t, e, n) { return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this }, makeShear: function (t, e, n) { return this.set(1, e, n, 0, t, 1, n, 0, t, e, 1, 0, 0, 0, 0, 1), this }, compose: function (t, e, n) { var i = this.elements, r = e._x, o = e._y, a = e._z, s = e._w, c = r + r, u = o + o, l = a + a, h = r * c, f = r * u, p = r * l, d = o * u, m = o * l, v = a * l, g = s * c, y = s * u, b = s * l, _ = n.x, x = n.y, w = n.z; return i[0] = (1 - (d + v)) * _, i[1] = (f + b) * _, i[2] = (p - y) * _, i[3] = 0, i[4] = (f - b) * x, i[5] = (1 - (h + v)) * x, i[6] = (m + g) * x, i[7] = 0, i[8] = (p + y) * w, i[9] = (m - g) * w, i[10] = (1 - (h + d)) * w, i[11] = 0, i[12] = t.x, i[13] = t.y, i[14] = t.z, i[15] = 1, this }, decompose: function () { var t = new s, e = new o; return function (n, i, r) { var o = this.elements, a = t.set(o[0], o[1], o[2]).length(), s = t.set(o[4], o[5], o[6]).length(), c = t.set(o[8], o[9], o[10]).length(); 0 > this.determinant() && (a = -a), n.x = o[12], n.y = o[13], n.z = o[14], e.copy(this); var u = 1 / a, l = 1 / s, h = 1 / c; return e.elements[0] *= u, e.elements[1] *= u, e.elements[2] *= u, e.elements[4] *= l, e.elements[5] *= l, e.elements[6] *= l, e.elements[8] *= h, e.elements[9] *= h, e.elements[10] *= h, i.setFromRotationMatrix(e), r.x = a, r.y = s, r.z = c, this } }(), makePerspective: function (t, e, n, i, r, o) { void 0 === o && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs."); var a = this.elements; return a[0] = 2 * r / (e - t), a[4] = 0, a[8] = (e + t) / (e - t), a[12] = 0, a[1] = 0, a[5] = 2 * r / (n - i), a[9] = (n + i) / (n - i), a[13] = 0, a[2] = 0, a[6] = 0, a[10] = -(o + r) / (o - r), a[14] = -2 * o * r / (o - r), a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this }, makeOrthographic: function (t, e, n, i, r, o) { var a = this.elements, s = 1 / (e - t), c = 1 / (n - i), u = 1 / (o - r); return a[0] = 2 * s, a[4] = 0, a[8] = 0, a[12] = -(e + t) * s, a[1] = 0, a[5] = 2 * c, a[9] = 0, a[13] = -(n + i) * c, a[2] = 0, a[6] = 0, a[10] = -2 * u, a[14] = -(o + r) * u, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this }, equals: function (t) { for (var e = this.elements, n = t.elements, i = 0; 16 > i; i++)if (e[i] !== n[i]) return !1; return !0 }, fromArray: function (t, e) { void 0 === e && (e = 0); for (var n = 0; 16 > n; n++)this.elements[n] = t[n + e]; return this }, toArray: function (t, e) { void 0 === t && (t = []), void 0 === e && (e = 0); var n = this.elements; return t[e] = n[0], t[e + 1] = n[1], t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], t[e + 7] = n[7], t[e + 8] = n[8], t[e + 9] = n[9], t[e + 10] = n[10], t[e + 11] = n[11], t[e + 12] = n[12], t[e + 13] = n[13], t[e + 14] = n[14], t[e + 15] = n[15], t } }), Object.assign(a, { slerp: function (t, e, n, i) { return n.copy(t).slerp(e, i) }, slerpFlat: function (t, e, n, i, r, o, a) { var s = n[i + 0], c = n[i + 1], u = n[i + 2], l = n[i + 3], h = r[o + 0], f = r[o + 1], p = r[o + 2], d = r[o + 3]; if (l !== d || s !== h || c !== f || u !== p) { var m = 1 - a, v = s * h + c * f + u * p + l * d, g = 0 <= v ? 1 : -1, y = 1 - v * v; if (y > Go) { var b = Ho(y), _ = Vo(b, v * g); m = zo(m * _) / b, a = zo(a * _) / b } var x = a * g; if (s = s * m + h * x, c = c * m + f * x, u = u * m + p * x, l = l * m + d * x, m == 1 - a) { var w = 1 / Ho(s * s + c * c + u * u + l * l); s *= w, c *= w, u *= w, l *= w } } t[e] = s, t[e + 1] = c, t[e + 2] = u, t[e + 3] = l } }), Object.defineProperties(a.prototype, { x: { get: function () { return this._x }, set: function (t) { this._x = t, this.onChangeCallback() } }, y: { get: function () { return this._y }, set: function (t) { this._y = t, this.onChangeCallback() } }, z: { get: function () { return this._z }, set: function (t) { this._z = t, this.onChangeCallback() } }, w: { get: function () { return this._w }, set: function (t) { this._w = t, this.onChangeCallback() } } }), Object.assign(a.prototype, { isQuaternion: !0, set: function (t, e, n, i) { return this._x = t, this._y = e, this._z = n, this._w = i, this.onChangeCallback(), this }, clone: function () { return new this.constructor(this._x, this._y, this._z, this._w) }, copy: function (t) { return this._x = t.x, this._y = t.y, this._z = t.z, this._w = t.w, this.onChangeCallback(), this }, setFromEuler: function (t, e) { if (!t || !t.isEuler) throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order."); var n = t._x, i = t._y, r = t._z, o = t.order, a = jo, s = zo, c = a(n / 2), u = a(i / 2), l = a(r / 2), h = s(n / 2), f = s(i / 2), p = s(r / 2); return "XYZ" === o ? (this._x = h * u * l + c * f * p, this._y = c * f * l - h * u * p, this._z = c * u * p + h * f * l, this._w = c * u * l - h * f * p) : "YXZ" === o ? (this._x = h * u * l + c * f * p, this._y = c * f * l - h * u * p, this._z = c * u * p - h * f * l, this._w = c * u * l + h * f * p) : "ZXY" === o ? (this._x = h * u * l - c * f * p, this._y = c * f * l + h * u * p, this._z = c * u * p + h * f * l, this._w = c * u * l - h * f * p) : "ZYX" === o ? (this._x = h * u * l - c * f * p, this._y = c * f * l + h * u * p, this._z = c * u * p - h * f * l, this._w = c * u * l + h * f * p) : "YZX" === o ? (this._x = h * u * l + c * f * p, this._y = c * f * l + h * u * p, this._z = c * u * p - h * f * l, this._w = c * u * l - h * f * p) : "XZY" === o && (this._x = h * u * l - c * f * p, this._y = c * f * l - h * u * p, this._z = c * u * p + h * f * l, this._w = c * u * l + h * f * p), !1 !== e && this.onChangeCallback(), this }, setFromAxisAngle: function (t, e) { var n = e / 2, i = zo(n); return this._x = t.x * i, this._y = t.y * i, this._z = t.z * i, this._w = jo(n), this.onChangeCallback(), this }, setFromRotationMatrix: function (t) { var e, n = t.elements, i = n[0], r = n[4], o = n[8], a = n[1], s = n[5], c = n[9], u = n[2], l = n[6], h = n[10], f = i + s + h; return 0 < f ? (e = .5 / Ho(f + 1), this._w = .25 / e, this._x = (l - c) * e, this._y = (o - u) * e, this._z = (a - r) * e) : i > s && i > h ? (e = 2 * Ho(1 + i - s - h), this._w = (l - c) / e, this._x = .25 * e, this._y = (r + a) / e, this._z = (o + u) / e) : s > h ? (e = 2 * Ho(1 + s - i - h), this._w = (o - u) / e, this._x = (r + a) / e, this._y = .25 * e, this._z = (c + l) / e) : (e = 2 * Ho(1 + h - i - s), this._w = (a - r) / e, this._x = (o + u) / e, this._y = (c + l) / e, this._z = .25 * e), this.onChangeCallback(), this }, setFromUnitVectors: function () { var t, e = new s; return function (n, i) { return void 0 === e && (e = new s), (t = n.dot(i) + 1) < 1e-6 ? (t = 0, Wo(n.x) > Wo(n.z) ? e.set(-n.y, n.x, 0) : e.set(0, -n.z, n.y)) : e.crossVectors(n, i), this._x = e.x, this._y = e.y, this._z = e.z, this._w = t, this.normalize() } }(), angleTo: function (t) { return 2 * Co(Wo(Ac.clamp(this.dot(t), -1, 1))) }, rotateTowards: function (t, e) { var n = this.angleTo(t); if (0 === n) return this; var i = Uo(1, e / n); return this.slerp(t, i), this }, inverse: function () { return this.conjugate() }, conjugate: function () { return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this }, dot: function (t) { return this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w }, lengthSq: function () { return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w }, length: function () { return Ho(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w) }, normalize: function () { var t = this.length(); return 0 === t ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (t = 1 / t, this._x *= t, this._y *= t, this._z *= t, this._w *= t), this.onChangeCallback(), this }, multiply: function (t, e) { return void 0 === e ? this.multiplyQuaternions(this, t) : (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(t, e)) }, premultiply: function (t) { return this.multiplyQuaternions(t, this) }, multiplyQuaternions: function (t, e) { var n = t._x, i = t._y, r = t._z, o = t._w, a = e._x, s = e._y, c = e._z, u = e._w; return this._x = n * u + o * a + i * c - r * s, this._y = i * u + o * s + r * a - n * c, this._z = r * u + o * c + n * s - i * a, this._w = o * u - n * a - i * s - r * c, this.onChangeCallback(), this }, slerp: function (t, e) { if (0 === e) return this; if (1 === e) return this.copy(t); var n = this._x, i = this._y, r = this._z, o = this._w, a = o * t._w + n * t._x + i * t._y + r * t._z; if (0 > a ? (this._w = -t._w, this._x = -t._x, this._y = -t._y, this._z = -t._z, a = -a) : this.copy(t), 1 <= a) return this._w = o, this._x = n, this._y = i, this._z = r, this; var s = 1 - a * a; if (s <= Go) { var c = 1 - e; return this._w = c * o + e * this._w, this._x = c * n + e * this._x, this._y = c * i + e * this._y, this._z = c * r + e * this._z, this.normalize() } var u = Ho(s), l = Vo(u, a), h = zo((1 - e) * l) / u, f = zo(e * l) / u; return this._w = o * h + this._w * f, this._x = n * h + this._x * f, this._y = i * h + this._y * f, this._z = r * h + this._z * f, this.onChangeCallback(), this }, equals: function (t) { return t._x === this._x && t._y === this._y && t._z === this._z && t._w === this._w }, fromArray: function (t, e) { return void 0 === e && (e = 0), this._x = t[e], this._y = t[e + 1], this._z = t[e + 2], this._w = t[e + 3], this.onChangeCallback(), this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this._x, t[e + 1] = this._y, t[e + 2] = this._z, t[e + 3] = this._w, t }, onChange: function (t) { return this.onChangeCallback = t, this }, onChangeCallback: function () { } }), Object.assign(s.prototype, { isVector3: !0, set: function (t, e, n) { return this.x = t, this.y = e, this.z = n, this }, setScalar: function (t) { return this.x = t, this.y = t, this.z = t, this }, setX: function (t) { return this.x = t, this }, setY: function (t) { return this.y = t, this }, setZ: function (t) { return this.z = t, this }, setComponent: function (t, e) { switch (t) { case 0: this.x = e; break; case 1: this.y = e; break; case 2: this.z = e; break; default: throw new Error("index is out of range: " + t) }return this }, getComponent: function (t) { switch (t) { case 0: return this.x; case 1: return this.y; case 2: return this.z; default: throw new Error("index is out of range: " + t) } }, clone: function () { return new this.constructor(this.x, this.y, this.z) }, copy: function (t) { return this.x = t.x, this.y = t.y, this.z = t.z, this }, add: function (t, e) { return void 0 === e ? (this.x += t.x, this.y += t.y, this.z += t.z, this) : (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) }, addScalar: function (t) { return this.x += t, this.y += t, this.z += t, this }, addVectors: function (t, e) { return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this }, addScaledVector: function (t, e) { return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this }, sub: function (t, e) { return void 0 === e ? (this.x -= t.x, this.y -= t.y, this.z -= t.z, this) : (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) }, subScalar: function (t) { return this.x -= t, this.y -= t, this.z -= t, this }, subVectors: function (t, e) { return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this }, multiply: function (t, e) { return void 0 === e ? (this.x *= t.x, this.y *= t.y, this.z *= t.z, this) : (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(t, e)) }, multiplyScalar: function (t) { return this.x *= t, this.y *= t, this.z *= t, this }, multiplyVectors: function (t, e) { return this.x = t.x * e.x, this.y = t.y * e.y, this.z = t.z * e.z, this }, applyEuler: function () { var t = new a; return function (e) { return e && e.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), this.applyQuaternion(t.setFromEuler(e)) } }(), applyAxisAngle: function () { var t = new a; return function (e, n) { return this.applyQuaternion(t.setFromAxisAngle(e, n)) } }(), applyMatrix3: function (t) { var e = this.x, n = this.y, i = this.z, r = t.elements; return this.x = r[0] * e + r[3] * n + r[6] * i, this.y = r[1] * e + r[4] * n + r[7] * i, this.z = r[2] * e + r[5] * n + r[8] * i, this }, applyMatrix4: function (t) { var e = this.x, n = this.y, i = this.z, r = t.elements, o = 1 / (r[3] * e + r[7] * n + r[11] * i + r[15]); return this.x = (r[0] * e + r[4] * n + r[8] * i + r[12]) * o, this.y = (r[1] * e + r[5] * n + r[9] * i + r[13]) * o, this.z = (r[2] * e + r[6] * n + r[10] * i + r[14]) * o, this }, applyQuaternion: function (t) { var e = this.x, n = this.y, i = this.z, r = t.x, o = t.y, a = t.z, s = t.w, c = s * e + o * i - a * n, u = s * n + a * e - r * i, l = s * i + r * n - o * e, h = -r * e - o * n - a * i; return this.x = c * s + h * -r + u * -a - l * -o, this.y = u * s + h * -o + l * -r - c * -a, this.z = l * s + h * -a + c * -o - u * -r, this }, project: function (t) { return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix) }, unproject: function () { var t = new o; return function (e) { return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld) } }(), transformDirection: function (t) { var e = this.x, n = this.y, i = this.z, r = t.elements; return this.x = r[0] * e + r[4] * n + r[8] * i, this.y = r[1] * e + r[5] * n + r[9] * i, this.z = r[2] * e + r[6] * n + r[10] * i, this.normalize() }, divide: function (t) { return this.x /= t.x, this.y /= t.y, this.z /= t.z, this }, divideScalar: function (t) { return this.multiplyScalar(1 / t) }, min: function (t) { return this.x = Uo(this.x, t.x), this.y = Uo(this.y, t.y), this.z = Uo(this.z, t.z), this }, max: function (t) { return this.x = No(this.x, t.x), this.y = No(this.y, t.y), this.z = No(this.z, t.z), this }, clamp: function (t, e) { return this.x = No(t.x, Uo(e.x, this.x)), this.y = No(t.y, Uo(e.y, this.y)), this.z = No(t.z, Uo(e.z, this.z)), this }, clampScalar: function () { var t = new s, e = new s; return function (n, i) { return t.set(n, n, n), e.set(i, i, i), this.clamp(t, e) } }(), clampLength: function (t, e) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(No(t, Uo(e, n))) }, floor: function () { return this.x = Bo(this.x), this.y = Bo(this.y), this.z = Bo(this.z), this }, ceil: function () { return this.x = ko(this.x), this.y = ko(this.y), this.z = ko(this.z), this }, round: function () { return this.x = Xo(this.x), this.y = Xo(this.y), this.z = Xo(this.z), this }, roundToZero: function () { return this.x = 0 > this.x ? ko(this.x) : Bo(this.x), this.y = 0 > this.y ? ko(this.y) : Bo(this.y), this.z = 0 > this.z ? ko(this.z) : Bo(this.z), this }, negate: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this }, dot: function (t) { return this.x * t.x + this.y * t.y + this.z * t.z }, lengthSq: function () { return this.x * this.x + this.y * this.y + this.z * this.z }, length: function () { return Ho(this.x * this.x + this.y * this.y + this.z * this.z) }, manhattanLength: function () { return Wo(this.x) + Wo(this.y) + Wo(this.z) }, normalize: function () { return this.divideScalar(this.length() || 1) }, setLength: function (t) { return this.normalize().multiplyScalar(t) }, lerp: function (t, e) { return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, this }, lerpVectors: function (t, e, n) { return this.subVectors(e, t).multiplyScalar(n).add(t) }, cross: function (t, e) { return void 0 === e ? this.crossVectors(this, t) : (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(t, e)) }, crossVectors: function (t, e) { var n = t.x, i = t.y, r = t.z, o = e.x, a = e.y, s = e.z; return this.x = i * s - r * a, this.y = r * o - n * s, this.z = n * a - i * o, this }, projectOnVector: function (t) { var e = t.dot(this) / t.lengthSq(); return this.copy(t).multiplyScalar(e) }, projectOnPlane: function () { var t = new s; return function (e) { return t.copy(this).projectOnVector(e), this.sub(t) } }(), reflect: function () { var t = new s; return function (e) { return this.sub(t.copy(e).multiplyScalar(2 * this.dot(e))) } }(), angleTo: function (t) { var e = this.dot(t) / Ho(this.lengthSq() * t.lengthSq()); return Co(Ac.clamp(e, -1, 1)) }, distanceTo: function (t) { return Ho(this.distanceToSquared(t)) }, distanceToSquared: function (t) { var e = this.x - t.x, n = this.y - t.y, i = this.z - t.z; return e * e + n * n + i * i }, manhattanDistanceTo: function (t) { return Wo(this.x - t.x) + Wo(this.y - t.y) + Wo(this.z - t.z) }, setFromSpherical: function (t) { return this.setFromSphericalCoords(t.radius, t.phi, t.theta) }, setFromSphericalCoords: function (t, e, n) { var i = zo(e) * t; return this.x = i * zo(n), this.y = jo(e) * t, this.z = i * jo(n), this }, setFromCylindrical: function (t) { return this.setFromCylindricalCoords(t.radius, t.theta, t.y) }, setFromCylindricalCoords: function (t, e, n) { return this.x = t * zo(e), this.y = n, this.z = t * jo(e), this }, setFromMatrixPosition: function (t) { var e = t.elements; return this.x = e[12], this.y = e[13], this.z = e[14], this }, setFromMatrixScale: function (t) { var e = this.setFromMatrixColumn(t, 0).length(), n = this.setFromMatrixColumn(t, 1).length(), i = this.setFromMatrixColumn(t, 2).length(); return this.x = e, this.y = n, this.z = i, this }, setFromMatrixColumn: function (t, e) { return this.fromArray(t.elements, 4 * e) }, equals: function (t) { return t.x === this.x && t.y === this.y && t.z === this.z }, fromArray: function (t, e) { return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this.z = t[e + 2], this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, t }, fromBufferAttribute: function (t, e, n) { return void 0 !== n && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this } }), Object.assign(c.prototype, { isMatrix3: !0, set: function (t, e, n, i, r, o, a, s, c) { var u = this.elements; return u[0] = t, u[1] = i, u[2] = a, u[3] = e, u[4] = r, u[5] = s, u[6] = n, u[7] = o, u[8] = c, this }, identity: function () { return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this }, clone: function () { return (new this.constructor).fromArray(this.elements) }, copy: function (t) { var e = this.elements, n = t.elements; return e[0] = n[0], e[1] = n[1], e[2] = n[2], e[3] = n[3], e[4] = n[4], e[5] = n[5], e[6] = n[6], e[7] = n[7], e[8] = n[8], this }, setFromMatrix4: function (t) { var e = t.elements; return this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]), this }, applyToBufferAttribute: function () { var t = new s; return function (e) { for (var n = 0, i = e.count; n < i; n++)t.x = e.getX(n), t.y = e.getY(n), t.z = e.getZ(n), t.applyMatrix3(this), e.setXYZ(n, t.x, t.y, t.z); return e } }(), multiply: function (t) { return this.multiplyMatrices(this, t) }, premultiply: function (t) { return this.multiplyMatrices(t, this) }, multiplyMatrices: function (t, e) { var n = t.elements, i = e.elements, r = this.elements, o = n[0], a = n[3], s = n[6], c = n[1], u = n[4], l = n[7], h = n[2], f = n[5], p = n[8], d = i[0], m = i[3], v = i[6], g = i[1], y = i[4], b = i[7], _ = i[2], x = i[5], w = i[8]; return r[0] = o * d + a * g + s * _, r[3] = o * m + a * y + s * x, r[6] = o * v + a * b + s * w, r[1] = c * d + u * g + l * _, r[4] = c * m + u * y + l * x, r[7] = c * v + u * b + l * w, r[2] = h * d + f * g + p * _, r[5] = h * m + f * y + p * x, r[8] = h * v + f * b + p * w, this }, multiplyScalar: function (t) { var e = this.elements; return e[0] *= t, e[3] *= t, e[6] *= t, e[1] *= t, e[4] *= t, e[7] *= t, e[2] *= t, e[5] *= t, e[8] *= t, this }, determinant: function () { var t = this.elements, e = t[0], n = t[1], i = t[2], r = t[3], o = t[4], a = t[5], s = t[6], c = t[7], u = t[8]; return e * o * u - e * a * c - n * r * u + n * a * s + i * r * c - i * o * s }, getInverse: function (t, e) { t && t.isMatrix4 && console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument."); var n = t.elements, i = this.elements, r = n[0], o = n[1], a = n[2], s = n[3], c = n[4], u = n[5], l = n[6], h = n[7], f = n[8], p = f * c - u * h, d = u * l - f * s, m = h * s - c * l, v = r * p + o * d + a * m; if (0 == v) { var g = "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"; if (!0 === e) throw new Error(g); return console.warn(g), this.identity() } var y = 1 / v; return i[0] = p * y, i[1] = (a * h - f * o) * y, i[2] = (u * o - a * c) * y, i[3] = d * y, i[4] = (f * r - a * l) * y, i[5] = (a * s - u * r) * y, i[6] = m * y, i[7] = (o * l - h * r) * y, i[8] = (c * r - o * s) * y, this }, transpose: function () { var t, e = this.elements; return t = e[1], e[1] = e[3], e[3] = t, t = e[2], e[2] = e[6], e[6] = t, t = e[5], e[5] = e[7], e[7] = t, this }, getNormalMatrix: function (t) { return this.setFromMatrix4(t).getInverse(this).transpose() }, transposeIntoArray: function (t) { var e = this.elements; return t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], t[6] = e[2], t[7] = e[5], t[8] = e[8], this }, setUvTransform: function (t, e, n, i, r, o, a) { var s = jo(r), c = zo(r); this.set(n * s, n * c, -n * (s * o + c * a) + o + t, -i * c, i * s, -i * (-c * o + s * a) + a + e, 0, 0, 1) }, scale: function (t, e) { var n = this.elements; return n[0] *= t, n[3] *= t, n[6] *= t, n[1] *= e, n[4] *= e, n[7] *= e, this }, rotate: function (t) { var e = jo(t), n = zo(t), i = this.elements, r = i[0], o = i[3], a = i[6], s = i[1], c = i[4], u = i[7]; return i[0] = e * r + n * s, i[3] = e * o + n * c, i[6] = e * a + n * u, i[1] = -n * r + e * s, i[4] = -n * o + e * c, i[7] = -n * a + e * u, this }, translate: function (t, e) { var n = this.elements; return n[0] += t * n[2], n[3] += t * n[5], n[6] += t * n[8], n[1] += e * n[2], n[4] += e * n[5], n[7] += e * n[8], this }, equals: function (t) { for (var e = this.elements, n = t.elements, i = 0; 9 > i; i++)if (e[i] !== n[i]) return !1; return !0 }, fromArray: function (t, e) { void 0 === e && (e = 0); for (var n = 0; 9 > n; n++)this.elements[n] = t[n + e]; return this }, toArray: function (t, e) { void 0 === t && (t = []), void 0 === e && (e = 0); var n = this.elements; return t[e] = n[0], t[e + 1] = n[1], t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], t[e + 7] = n[7], t[e + 8] = n[8], t } }); var Cc, Lc = { getDataURL: function (t) { var e; if ("undefined" == typeof HTMLCanvasElement) return t.src; if (t instanceof HTMLCanvasElement) e = t; else { void 0 === Cc && (Cc = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), Cc.width = t.width, Cc.height = t.height; var n = Cc.getContext("2d"); t instanceof ImageData ? n.putImageData(t, 0, 0) : n.drawImage(t, 0, 0, t.width, t.height), e = Cc } return 2048 < e.width || 2048 < e.height ? e.toDataURL("image/jpeg", .6) : e.toDataURL("image/png") } }, Rc = 0; u.DEFAULT_IMAGE = void 0, u.DEFAULT_MAPPING = Ka, u.prototype = Object.assign(Object.create(i.prototype), { constructor: u, isTexture: !0, updateMatrix: function () { this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y) }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.name = t.name, this.image = t.image, this.mipmaps = t.mipmaps.slice(0), this.mapping = t.mapping, this.wrapS = t.wrapS, this.wrapT = t.wrapT, this.magFilter = t.magFilter, this.minFilter = t.minFilter, this.anisotropy = t.anisotropy, this.format = t.format, this.type = t.type, this.offset.copy(t.offset), this.repeat.copy(t.repeat), this.center.copy(t.center), this.rotation = t.rotation, this.matrixAutoUpdate = t.matrixAutoUpdate, this.matrix.copy(t.matrix), this.generateMipmaps = t.generateMipmaps, this.premultiplyAlpha = t.premultiplyAlpha, this.flipY = t.flipY, this.unpackAlignment = t.unpackAlignment, this.encoding = t.encoding, this }, toJSON: function (t) { var e = void 0 === t || "string" == typeof t; if (!e && void 0 !== t.textures[this.uuid]) return t.textures[this.uuid]; var n = { metadata: { version: 4.5, type: "Texture", generator: "Texture.toJSON" }, uuid: this.uuid, name: this.name, mapping: this.mapping, repeat: [this.repeat.x, this.repeat.y], offset: [this.offset.x, this.offset.y], center: [this.center.x, this.center.y], rotation: this.rotation, wrap: [this.wrapS, this.wrapT], format: this.format, type: this.type, encoding: this.encoding, minFilter: this.minFilter, magFilter: this.magFilter, anisotropy: this.anisotropy, flipY: this.flipY, premultiplyAlpha: this.premultiplyAlpha, unpackAlignment: this.unpackAlignment }; if (void 0 !== this.image) { var i = this.image; if (void 0 === i.uuid && (i.uuid = Ac.generateUUID()), !e && void 0 === t.images[i.uuid]) { var r; if (Array.isArray(i)) { r = []; for (var o = 0, a = i.length; o < a; o++)r.push(Lc.getDataURL(i[o])) } else r = Lc.getDataURL(i); t.images[i.uuid] = { uuid: i.uuid, url: r } } n.image = i.uuid } return e || (t.textures[this.uuid] = n), n }, dispose: function () { this.dispatchEvent({ type: "dispose" }) }, transformUv: function (t) { if (this.mapping !== Ka) return t; if (t.applyMatrix3(this.matrix), 0 > t.x || 1 < t.x) switch (this.wrapS) { case os: t.x -= Bo(t.x); break; case as: t.x = 0 > t.x ? 0 : 1; break; case ss: 1 === Wo(Bo(t.x) % 2) ? t.x = ko(t.x) - t.x : t.x -= Bo(t.x) }if (0 > t.y || 1 < t.y) switch (this.wrapT) { case os: t.y -= Bo(t.y); break; case as: t.y = 0 > t.y ? 0 : 1; break; case ss: 1 === Wo(Bo(t.y) % 2) ? t.y = ko(t.y) - t.y : t.y -= Bo(t.y) }return this.flipY && (t.y = 1 - t.y), t } }), Object.defineProperty(u.prototype, "needsUpdate", { set: function (t) { !0 === t && this.version++ } }), Object.assign(l.prototype, { isVector4: !0, set: function (t, e, n, i) { return this.x = t, this.y = e, this.z = n, this.w = i, this }, setScalar: function (t) { return this.x = t, this.y = t, this.z = t, this.w = t, this }, setX: function (t) { return this.x = t, this }, setY: function (t) { return this.y = t, this }, setZ: function (t) { return this.z = t, this }, setW: function (t) { return this.w = t, this }, setComponent: function (t, e) { switch (t) { case 0: this.x = e; break; case 1: this.y = e; break; case 2: this.z = e; break; case 3: this.w = e; break; default: throw new Error("index is out of range: " + t) }return this }, getComponent: function (t) { switch (t) { case 0: return this.x; case 1: return this.y; case 2: return this.z; case 3: return this.w; default: throw new Error("index is out of range: " + t) } }, clone: function () { return new this.constructor(this.x, this.y, this.z, this.w) }, copy: function (t) { return this.x = t.x, this.y = t.y, this.z = t.z, this.w = void 0 === t.w ? 1 : t.w, this }, add: function (t, e) { return void 0 === e ? (this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, this) : (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) }, addScalar: function (t) { return this.x += t, this.y += t, this.z += t, this.w += t, this }, addVectors: function (t, e) { return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this.w = t.w + e.w, this }, addScaledVector: function (t, e) { return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this.w += t.w * e, this }, sub: function (t, e) { return void 0 === e ? (this.x -= t.x, this.y -= t.y, this.z -= t.z, this.w -= t.w, this) : (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) }, subScalar: function (t) { return this.x -= t, this.y -= t, this.z -= t, this.w -= t, this }, subVectors: function (t, e) { return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this.w = t.w - e.w, this }, multiplyScalar: function (t) { return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this }, applyMatrix4: function (t) { var e = this.x, n = this.y, i = this.z, r = this.w, o = t.elements; return this.x = o[0] * e + o[4] * n + o[8] * i + o[12] * r, this.y = o[1] * e + o[5] * n + o[9] * i + o[13] * r, this.z = o[2] * e + o[6] * n + o[10] * i + o[14] * r, this.w = o[3] * e + o[7] * n + o[11] * i + o[15] * r, this }, divideScalar: function (t) { return this.multiplyScalar(1 / t) }, setAxisAngleFromQuaternion: function (t) { this.w = 2 * Co(t.w); var e = Ho(1 - t.w * t.w); return 1e-4 > e ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = t.x / e, this.y = t.y / e, this.z = t.z / e), this }, setAxisAngleFromRotationMatrix: function (t) { var e, n, i, r, o = .01, a = t.elements, s = a[0], c = a[4], u = a[8], l = a[1], h = a[5], f = a[9], p = a[2], d = a[6], m = a[10]; if (Wo(c - l) < o && Wo(u - p) < o && Wo(f - d) < o) { if (Wo(c + l) < .1 && Wo(u + p) < .1 && Wo(f + d) < .1 && Wo(s + h + m - 3) < .1) return this.set(1, 0, 0, 0), this; e = Fo; var v = (s + 1) / 2, g = (h + 1) / 2, y = (m + 1) / 2, b = (c + l) / 4, _ = (u + p) / 4, x = (f + d) / 4; return v > g && v > y ? v < o ? (n = 0, i = .707106781, r = .707106781) : (i = b / (n = Ho(v)), r = _ / n) : g > y ? g < o ? (n = .707106781, i = 0, r = .707106781) : (n = b / (i = Ho(g)), r = x / i) : y < o ? (n = .707106781, i = .707106781, r = 0) : (n = _ / (r = Ho(y)), i = x / r), this.set(n, i, r, e), this } var w = Ho((d - f) * (d - f) + (u - p) * (u - p) + (l - c) * (l - c)); return .001 > Wo(w) && (w = 1), this.x = (d - f) / w, this.y = (u - p) / w, this.z = (l - c) / w, this.w = Co((s + h + m - 1) / 2), this }, min: function (t) { return this.x = Uo(this.x, t.x), this.y = Uo(this.y, t.y), this.z = Uo(this.z, t.z), this.w = Uo(this.w, t.w), this }, max: function (t) { return this.x = No(this.x, t.x), this.y = No(this.y, t.y), this.z = No(this.z, t.z), this.w = No(this.w, t.w), this }, clamp: function (t, e) { return this.x = No(t.x, Uo(e.x, this.x)), this.y = No(t.y, Uo(e.y, this.y)), this.z = No(t.z, Uo(e.z, this.z)), this.w = No(t.w, Uo(e.w, this.w)), this }, clampScalar: function () { var t, e; return function (n, i) { return void 0 == t && (t = new l, e = new l), t.set(n, n, n, n), e.set(i, i, i, i), this.clamp(t, e) } }(), clampLength: function (t, e) { var n = this.length(); return this.divideScalar(n || 1).multiplyScalar(No(t, Uo(e, n))) }, floor: function () { return this.x = Bo(this.x), this.y = Bo(this.y), this.z = Bo(this.z), this.w = Bo(this.w), this }, ceil: function () { return this.x = ko(this.x), this.y = ko(this.y), this.z = ko(this.z), this.w = ko(this.w), this }, round: function () { return this.x = Xo(this.x), this.y = Xo(this.y), this.z = Xo(this.z), this.w = Xo(this.w), this }, roundToZero: function () { return this.x = 0 > this.x ? ko(this.x) : Bo(this.x), this.y = 0 > this.y ? ko(this.y) : Bo(this.y), this.z = 0 > this.z ? ko(this.z) : Bo(this.z), this.w = 0 > this.w ? ko(this.w) : Bo(this.w), this }, negate: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this }, dot: function (t) { return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w }, lengthSq: function () { return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w }, length: function () { return Ho(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w) }, manhattanLength: function () { return Wo(this.x) + Wo(this.y) + Wo(this.z) + Wo(this.w) }, normalize: function () { return this.divideScalar(this.length() || 1) }, setLength: function (t) { return this.normalize().multiplyScalar(t) }, lerp: function (t, e) { return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, this.w += (t.w - this.w) * e, this }, lerpVectors: function (t, e, n) { return this.subVectors(e, t).multiplyScalar(n).add(t) }, equals: function (t) { return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w }, fromArray: function (t, e) { return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this.z = t[e + 2], this.w = t[e + 3], this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, t[e + 3] = this.w, t }, fromBufferAttribute: function (t, e, n) { return void 0 !== n && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this.w = t.getW(e), this } }), h.prototype = Object.assign(Object.create(i.prototype), { constructor: h, isWebGLRenderTarget: !0, setSize: function (t, e) { (this.width !== t || this.height !== e) && (this.width = t, this.height = e, this.dispose()), this.viewport.set(0, 0, t, e), this.scissor.set(0, 0, t, e) }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.width = t.width, this.height = t.height, this.viewport.copy(t.viewport), this.texture = t.texture.clone(), this.depthBuffer = t.depthBuffer, this.stencilBuffer = t.stencilBuffer, this.depthTexture = t.depthTexture, this }, dispose: function () { this.dispatchEvent({ type: "dispose" }) } }), f.prototype = Object.create(h.prototype), f.prototype.constructor = f, f.prototype.isWebGLRenderTargetCube = !0, p.prototype = Object.create(u.prototype), p.prototype.constructor = p, p.prototype.isDataTexture = !0, Object.assign(d.prototype, { isBox3: !0, set: function (t, e) { return this.min.copy(t), this.max.copy(e), this }, setFromArray: function (t) { for (var e = 1 / 0, n = 1 / 0, i = 1 / 0, r = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, c = t.length; s < c; s += 3) { var u = t[s], l = t[s + 1], h = t[s + 2]; u < e && (e = u), l < n && (n = l), h < i && (i = h), u > r && (r = u), l > o && (o = l), h > a && (a = h) } return this.min.set(e, n, i), this.max.set(r, o, a), this }, setFromBufferAttribute: function (t) { for (var e = 1 / 0, n = 1 / 0, i = 1 / 0, r = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, c = t.count; s < c; s++) { var u = t.getX(s), l = t.getY(s), h = t.getZ(s); u < e && (e = u), l < n && (n = l), h < i && (i = h), u > r && (r = u), l > o && (o = l), h > a && (a = h) } return this.min.set(e, n, i), this.max.set(r, o, a), this }, setFromPoints: function (t) { this.makeEmpty(); for (var e = 0, n = t.length; e < n; e++)this.expandByPoint(t[e]); return this }, setFromCenterAndSize: function () { var t = new s; return function (e, n) { var i = t.copy(n).multiplyScalar(.5); return this.min.copy(e).sub(i), this.max.copy(e).add(i), this } }(), setFromObject: function (t) { return this.makeEmpty(), this.expandByObject(t) }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.min.copy(t.min), this.max.copy(t.max), this }, makeEmpty: function () { return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this }, isEmpty: function () { return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z }, getCenter: function (t) { return void 0 === t && (console.warn("THREE.Box3: .getCenter() target is now required"), t = new s), this.isEmpty() ? t.set(0, 0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5) }, getSize: function (t) { return void 0 === t && (console.warn("THREE.Box3: .getSize() target is now required"), t = new s), this.isEmpty() ? t.set(0, 0, 0) : t.subVectors(this.max, this.min) }, expandByPoint: function (t) { return this.min.min(t), this.max.max(t), this }, expandByVector: function (t) { return this.min.sub(t), this.max.add(t), this }, expandByScalar: function (t) { return this.min.addScalar(-t), this.max.addScalar(t), this }, expandByObject: function () { function t(t) { var o = t.geometry; if (void 0 !== o) if (o.isGeometry) { var a = o.vertices; for (n = 0, i = a.length; n < i; n++)r.copy(a[n]), r.applyMatrix4(t.matrixWorld), e.expandByPoint(r) } else if (o.isBufferGeometry) { var s = o.attributes.position; if (void 0 !== s) for (n = 0, i = s.count; n < i; n++)r.fromBufferAttribute(s, n).applyMatrix4(t.matrixWorld), e.expandByPoint(r) } } var e, n, i, r = new s; return function (n) { return e = this, n.updateMatrixWorld(!0), n.traverse(t), this } }(), containsPoint: function (t) { return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z) }, containsBox: function (t) { return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z }, getParameter: function (t, e) { return void 0 === e && (console.warn("THREE.Box3: .getParameter() target is now required"), e = new s), e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z)) }, intersectsBox: function (t) { return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z) }, intersectsSphere: function () { var t = new s; return function (e) { return this.clampPoint(e.center, t), t.distanceToSquared(e.center) <= e.radius * e.radius } }(), intersectsPlane: function (t) { var e, n; return 0 < t.normal.x ? (e = t.normal.x * this.min.x, n = t.normal.x * this.max.x) : (e = t.normal.x * this.max.x, n = t.normal.x * this.min.x), 0 < t.normal.y ? (e += t.normal.y * this.min.y, n += t.normal.y * this.max.y) : (e += t.normal.y * this.max.y, n += t.normal.y * this.min.y), 0 < t.normal.z ? (e += t.normal.z * this.min.z, n += t.normal.z * this.max.z) : (e += t.normal.z * this.max.z, n += t.normal.z * this.min.z), e <= -t.constant && n >= -t.constant }, intersectsTriangle: function () { function t(t) { var r, o; for (r = 0, o = t.length - 3; r <= o; r += 3) { c.fromArray(t, r); var a = l.x * Wo(c.x) + l.y * Wo(c.y) + l.z * Wo(c.z), s = e.dot(c), u = n.dot(c), h = i.dot(c); if (No(-No(s, u, h), Uo(s, u, h)) > a) return !1 } return !0 } var e = new s, n = new s, i = new s, r = new s, o = new s, a = new s, c = new s, u = new s, l = new s, h = new s; return function (s) { if (this.isEmpty()) return !1; this.getCenter(u), l.subVectors(this.max, u), e.subVectors(s.a, u), n.subVectors(s.b, u), i.subVectors(s.c, u), r.subVectors(n, e), o.subVectors(i, n), a.subVectors(e, i); var c = [0, -r.z, r.y, 0, -o.z, o.y, 0, -a.z, a.y, r.z, 0, -r.x, o.z, 0, -o.x, a.z, 0, -a.x, -r.y, r.x, 0, -o.y, o.x, 0, -a.y, a.x, 0]; return !!t(c) && !!t(c = [1, 0, 0, 0, 1, 0, 0, 0, 1]) && (h.crossVectors(r, o), t(c = [h.x, h.y, h.z])) } }(), clampPoint: function (t, e) { return void 0 === e && (console.warn("THREE.Box3: .clampPoint() target is now required"), e = new s), e.copy(t).clamp(this.min, this.max) }, distanceToPoint: function () { var t = new s; return function (e) { return t.copy(e).clamp(this.min, this.max).sub(e).length() } }(), getBoundingSphere: function () { var t = new s; return function (e) { return void 0 === e && (console.warn("THREE.Box3: .getBoundingSphere() target is now required"), e = new m), this.getCenter(e.center), e.radius = .5 * this.getSize(t).length(), e } }(), intersect: function (t) { return this.min.max(t.min), this.max.min(t.max), this.isEmpty() && this.makeEmpty(), this }, union: function (t) { return this.min.min(t.min), this.max.max(t.max), this }, applyMatrix4: function () { var t = [new s, new s, new s, new s, new s, new s, new s, new s]; return function (e) { return this.isEmpty() ? this : (t[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), t[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), t[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), t[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), t[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), t[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), t[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), t[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.setFromPoints(t), this) } }(), translate: function (t) { return this.min.add(t), this.max.add(t), this }, equals: function (t) { return t.min.equals(this.min) && t.max.equals(this.max) } }), Object.assign(m.prototype, { set: function (t, e) { return this.center.copy(t), this.radius = e, this }, setFromPoints: function () { var t = new d; return function (e, n) { var i = this.center; void 0 === n ? t.setFromPoints(e).getCenter(i) : i.copy(n); for (var r = 0, o = 0, a = e.length; o < a; o++)r = No(r, i.distanceToSquared(e[o])); return this.radius = Ho(r), this } }(), clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.center.copy(t.center), this.radius = t.radius, this }, empty: function () { return 0 >= this.radius }, containsPoint: function (t) { return t.distanceToSquared(this.center) <= this.radius * this.radius }, distanceToPoint: function (t) { return t.distanceTo(this.center) - this.radius }, intersectsSphere: function (t) { var e = this.radius + t.radius; return t.center.distanceToSquared(this.center) <= e * e }, intersectsBox: function (t) { return t.intersectsSphere(this) }, intersectsPlane: function (t) { return Wo(t.distanceToPoint(this.center)) <= this.radius }, clampPoint: function (t, e) { var n = this.center.distanceToSquared(t); return void 0 === e && (console.warn("THREE.Sphere: .clampPoint() target is now required"), e = new s), e.copy(t), n > this.radius * this.radius && (e.sub(this.center).normalize(), e.multiplyScalar(this.radius).add(this.center)), e }, getBoundingBox: function (t) { return void 0 === t && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"), t = new d), t.set(this.center, this.center), t.expandByScalar(this.radius), t }, applyMatrix4: function (t) { return this.center.applyMatrix4(t), this.radius *= t.getMaxScaleOnAxis(), this }, translate: function (t) { return this.center.add(t), this }, equals: function (t) { return t.center.equals(this.center) && t.radius === this.radius } }), Object.assign(v.prototype, { set: function (t, e) { return this.normal.copy(t), this.constant = e, this }, setComponents: function (t, e, n, i) { return this.normal.set(t, e, n), this.constant = i, this }, setFromNormalAndCoplanarPoint: function (t, e) { return this.normal.copy(t), this.constant = -e.dot(this.normal), this }, setFromCoplanarPoints: function () { var t = new s, e = new s; return function (n, i, r) { var o = t.subVectors(r, i).cross(e.subVectors(n, i)).normalize(); return this.setFromNormalAndCoplanarPoint(o, n), this } }(), clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.normal.copy(t.normal), this.constant = t.constant, this }, normalize: function () { var t = 1 / this.normal.length(); return this.normal.multiplyScalar(t), this.constant *= t, this }, negate: function () { return this.constant *= -1, this.normal.negate(), this }, distanceToPoint: function (t) { return this.normal.dot(t) + this.constant }, distanceToSphere: function (t) { return this.distanceToPoint(t.center) - t.radius }, projectPoint: function (t, e) { return void 0 === e && (console.warn("THREE.Plane: .projectPoint() target is now required"), e = new s), e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t) }, intersectLine: function () { var t = new s; return function (e, n) { void 0 === n && (console.warn("THREE.Plane: .intersectLine() target is now required"), n = new s); var i = e.delta(t), r = this.normal.dot(i); if (0 === r) return 0 === this.distanceToPoint(e.start) ? n.copy(e.start) : void 0; var o = -(e.start.dot(this.normal) + this.constant) / r; return 0 > o || 1 < o ? void 0 : n.copy(i).multiplyScalar(o).add(e.start) } }(), intersectsLine: function (t) { var e = this.distanceToPoint(t.start), n = this.distanceToPoint(t.end); return 0 > e && 0 < n || 0 > n && 0 < e }, intersectsBox: function (t) { return t.intersectsPlane(this) }, intersectsSphere: function (t) { return t.intersectsPlane(this) }, coplanarPoint: function (t) { return void 0 === t && (console.warn("THREE.Plane: .coplanarPoint() target is now required"), t = new s), t.copy(this.normal).multiplyScalar(-this.constant) }, applyMatrix4: function () { var t = new s, e = new c; return function (n, i) { var r = i || e.getNormalMatrix(n), o = this.coplanarPoint(t).applyMatrix4(n), a = this.normal.applyMatrix3(r).normalize(); return this.constant = -o.dot(a), this } }(), translate: function (t) { return this.constant -= t.dot(this.normal), this }, equals: function (t) { return t.normal.equals(this.normal) && t.constant === this.constant } }), Object.assign(g.prototype, { set: function (t, e, n, i, r, o) { var a = this.planes; return a[0].copy(t), a[1].copy(e), a[2].copy(n), a[3].copy(i), a[4].copy(r), a[5].copy(o), this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { for (var e = this.planes, n = 0; 6 > n; n++)e[n].copy(t.planes[n]); return this }, setFromMatrix: function (t) { var e = this.planes, n = t.elements, i = n[0], r = n[1], o = n[2], a = n[3], s = n[4], c = n[5], u = n[6], l = n[7], h = n[8], f = n[9], p = n[10], d = n[11], m = n[12], v = n[13], g = n[14], y = n[15]; return e[0].setComponents(a - i, l - s, d - h, y - m).normalize(), e[1].setComponents(a + i, l + s, d + h, y + m).normalize(), e[2].setComponents(a + r, l + c, d + f, y + v).normalize(), e[3].setComponents(a - r, l - c, d - f, y - v).normalize(), e[4].setComponents(a - o, l - u, d - p, y - g).normalize(), e[5].setComponents(a + o, l + u, d + p, y + g).normalize(), this }, intersectsObject: function () { var t = new m; return function (e) { var n = e.geometry; return null === n.boundingSphere && n.computeBoundingSphere(), t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld), this.intersectsSphere(t) } }(), intersectsSprite: function () { var t = new m; return function (e) { return t.center.set(0, 0, 0), t.radius = .7071067811865476, t.applyMatrix4(e.matrixWorld), this.intersectsSphere(t) } }(), intersectsSphere: function (t) { for (var e = this.planes, n = t.center, i = -t.radius, r = 0; 6 > r; r++)if (e[r].distanceToPoint(n) < i) return !1; return !0 }, intersectsBox: function () { var t = new s; return function (e) { for (var n, i = this.planes, r = 0; 6 > r; r++)if (n = i[r], t.x = 0 < n.normal.x ? e.max.x : e.min.x, t.y = 0 < n.normal.y ? e.max.y : e.min.y, t.z = 0 < n.normal.z ? e.max.z : e.min.z, 0 > n.distanceToPoint(t)) return !1; return !0 } }(), containsPoint: function (t) { for (var e = this.planes, n = 0; 6 > n; n++)if (0 > e[n].distanceToPoint(t)) return !1; return !0 } }); var Oc = { alphamap_fragment: "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif", alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif", alphatest_fragment: "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif", aomap_fragment: "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif", aomap_pars_fragment: "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif", begin_vertex: "vec3 transformed = vec3( position );", beginnormal_vertex: "vec3 objectNormal = vec3( normal );", bsdfs: "float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}", bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif", clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif", clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif", clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif", clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif", color_fragment: "#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif", color_pars_fragment: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif", color_pars_vertex: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif", color_vertex: "#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif", common: "#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}", cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif", defaultnormal_vertex: "vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif", displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif", displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif", emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif", emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif", encodings_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );", encodings_pars_fragment: "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}", envmap_fragment: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif", envmap_pars_fragment: "#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif", envmap_pars_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif", envmap_physical_pars_fragment: "#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif", envmap_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif", fog_vertex: "#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif", fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif", fog_fragment: "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif", fog_pars_fragment: "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif", gradientmap_pars_fragment: "#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif", lightmap_fragment: "#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif", lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif", lights_lambert_vertex: "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif", lights_pars_begin: "uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif", lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;", lights_phong_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)", lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif", lights_physical_pars_fragment: "struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}", lights_fragment_begin: "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif", lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif", lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif", logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif", logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif", logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif", logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif", map_fragment: "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif", map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif", map_particle_fragment: "#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif", map_particle_pars_fragment: "#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif", metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif", metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif", morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif", morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif", morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif", normal_fragment_begin: "#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif", normal_fragment_maps: "#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif", normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif", packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}", premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif", project_vertex: "vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;", dithering_fragment: "#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif", dithering_pars_fragment: "#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif", roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif", roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif", shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif", shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif", shadowmap_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif", shadowmask_pars_fragment: "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}", skinbase_vertex: "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif", skinning_pars_vertex: "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif", skinning_vertex: "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif", skinnormal_vertex: "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif", specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif", specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif", tonemapping_fragment: "#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif", tonemapping_pars_fragment: "#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}", uv_pars_fragment: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif", uv_pars_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif", uv_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif", uv2_pars_fragment: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif", uv2_pars_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif", uv2_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif", worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif", background_frag: "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}", cube_frag: "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}", depth_frag: "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}", depth_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}", distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}", distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}", equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}", linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}", meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", meshbasic_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}", meshlambert_frag: "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshlambert_vert: "#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}", meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshphysical_frag: "#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshphysical_vert: "#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", normal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}", normal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}", points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}", shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}", shadow_vert: "#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}" }, Ic = { clone: y, merge: b }, Dc = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; Object.assign(_.prototype, { isColor: !0, r: 1, g: 1, b: 1, set: function (t) { return t && t.isColor ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t), this }, setScalar: function (t) { return this.r = t, this.g = t, this.b = t, this }, setHex: function (t) { return t = Bo(t), this.r = (255 & t >> 16) / 255, this.g = (255 & t >> 8) / 255, this.b = (255 & t) / 255, this }, setRGB: function (t, e, n) { return this.r = t, this.g = e, this.b = n, this }, setHSL: function () { function t(t, e, n) { return 0 > n && (n += 1), 1 < n && (n -= 1), n < 1 / 6 ? t + 6 * (e - t) * n : n < .5 ? e : n < 2 / 3 ? t + 6 * (e - t) * (2 / 3 - n) : t } return function (e, n, i) { if (e = Ac.euclideanModulo(e, 1), n = Ac.clamp(n, 0, 1), i = Ac.clamp(i, 0, 1), 0 === n) this.r = this.g = this.b = i; else { var r = .5 >= i ? i * (1 + n) : i + n - i * n, o = 2 * i - r; this.r = t(o, r, e + 1 / 3), this.g = t(o, r, e), this.b = t(o, r, e - 1 / 3) } return this } }(), setStyle: function (t) { function e(e) { void 0 === e || 1 > parseFloat(e) && console.warn("THREE.Color: Alpha component of " + t + " will be ignored.") } var n; if (n = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)) { var i, r = n[1], o = n[2]; switch (r) { case "rgb": case "rgba": if (i = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Uo(255, parseInt(i[1], 10)) / 255, this.g = Uo(255, parseInt(i[2], 10)) / 255, this.b = Uo(255, parseInt(i[3], 10)) / 255, e(i[5]), this; if (i = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Uo(100, parseInt(i[1], 10)) / 100, this.g = Uo(100, parseInt(i[2], 10)) / 100, this.b = Uo(100, parseInt(i[3], 10)) / 100, e(i[5]), this; break; case "hsl": case "hsla": if (i = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) { var a = parseFloat(i[1]) / 360, s = parseInt(i[2], 10) / 100, c = parseInt(i[3], 10) / 100; return e(i[5]), this.setHSL(a, s, c) } } } else if (n = /^\#([A-Fa-f0-9]+)$/.exec(t)) { var u, l = (u = n[1]).length; if (3 === l) return this.r = parseInt(u.charAt(0) + u.charAt(0), 16) / 255, this.g = parseInt(u.charAt(1) + u.charAt(1), 16) / 255, this.b = parseInt(u.charAt(2) + u.charAt(2), 16) / 255, this; if (6 === l) return this.r = parseInt(u.charAt(0) + u.charAt(1), 16) / 255, this.g = parseInt(u.charAt(2) + u.charAt(3), 16) / 255, this.b = parseInt(u.charAt(4) + u.charAt(5), 16) / 255, this } t && 0 < t.length && (void 0 === (u = Dc[t]) ? console.warn("THREE.Color: Unknown color " + t) : this.setHex(u)); return this }, clone: function () { return new this.constructor(this.r, this.g, this.b) }, copy: function (t) { return this.r = t.r, this.g = t.g, this.b = t.b, this }, copyGammaToLinear: function (t, e) { return void 0 === e && (e = 2), this.r = Lo(t.r, e), this.g = Lo(t.g, e), this.b = Lo(t.b, e), this }, copyLinearToGamma: function (t, e) { void 0 === e && (e = 2); var n = 0 < e ? 1 / e : 1; return this.r = Lo(t.r, n), this.g = Lo(t.g, n), this.b = Lo(t.b, n), this }, convertGammaToLinear: function (t) { return this.copyGammaToLinear(this, t), this }, convertLinearToGamma: function (t) { return this.copyLinearToGamma(this, t), this }, copySRGBToLinear: function () { function t(t) { return .04045 > t ? .0773993808 * t : Lo(.9478672986 * t + .0521327014, 2.4) } return function (e) { return this.r = t(e.r), this.g = t(e.g), this.b = t(e.b), this } }(), copyLinearToSRGB: function () { function t(t) { return .0031308 > t ? 12.92 * t : 1.055 * Lo(t, .41666) - .055 } return function (e) { return this.r = t(e.r), this.g = t(e.g), this.b = t(e.b), this } }(), convertSRGBToLinear: function () { return this.copySRGBToLinear(this), this }, convertLinearToSRGB: function () { return this.copyLinearToSRGB(this), this }, getHex: function () { return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0 }, getHexString: function () { return ("000000" + this.getHex().toString(16)).slice(-6) }, getHSL: function (t) { void 0 === t && (console.warn("THREE.Color: .getHSL() target is now required"), t = { h: 0, s: 0, l: 0 }); var e, n, i = this.r, r = this.g, o = this.b, a = No(i, r, o), s = Uo(i, r, o), c = (s + a) / 2; if (s === a) e = 0, n = 0; else { var u = a - s; n = .5 >= c ? u / (a + s) : u / (2 - a - s), a === i ? e = (r - o) / u + (r < o ? 6 : 0) : a === r ? e = (o - i) / u + 2 : a === o && (e = (i - r) / u + 4), e /= 6 } return t.h = e, t.s = n, t.l = c, t }, getStyle: function () { return "rgb(" + (0 | 255 * this.r) + "," + (0 | 255 * this.g) + "," + (0 | 255 * this.b) + ")" }, offsetHSL: function () { var t = {}; return function (e, n, i) { return this.getHSL(t), t.h += e, t.s += n, t.l += i, this.setHSL(t.h, t.s, t.l), this } }(), add: function (t) { return this.r += t.r, this.g += t.g, this.b += t.b, this }, addColors: function (t, e) { return this.r = t.r + e.r, this.g = t.g + e.g, this.b = t.b + e.b, this }, addScalar: function (t) { return this.r += t, this.g += t, this.b += t, this }, sub: function (t) { return this.r = No(0, this.r - t.r), this.g = No(0, this.g - t.g), this.b = No(0, this.b - t.b), this }, multiply: function (t) { return this.r *= t.r, this.g *= t.g, this.b *= t.b, this }, multiplyScalar: function (t) { return this.r *= t, this.g *= t, this.b *= t, this }, lerp: function (t, e) { return this.r += (t.r - this.r) * e, this.g += (t.g - this.g) * e, this.b += (t.b - this.b) * e, this }, lerpHSL: function () { var t = { h: 0, s: 0, l: 0 }, e = { h: 0, s: 0, l: 0 }; return function (n, i) { this.getHSL(t), n.getHSL(e); var r = Ac.lerp(t.h, e.h, i), o = Ac.lerp(t.s, e.s, i), a = Ac.lerp(t.l, e.l, i); return this.setHSL(r, o, a), this } }(), equals: function (t) { return t.r === this.r && t.g === this.g && t.b === this.b }, fromArray: function (t, e) { return void 0 === e && (e = 0), this.r = t[e], this.g = t[e + 1], this.b = t[e + 2], this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.r, t[e + 1] = this.g, t[e + 2] = this.b, t }, toJSON: function () { return this.getHex() } }); var Gc = { common: { diffuse: { value: new _(15658734) }, opacity: { value: 1 }, map: { value: null }, uvTransform: { value: new c }, alphaMap: { value: null } }, specularmap: { specularMap: { value: null } }, envmap: { envMap: { value: null }, flipEnvMap: { value: -1 }, reflectivity: { value: 1 }, refractionRatio: { value: .98 }, maxMipLevel: { value: 0 } }, aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } }, lightmap: { lightMap: { value: null }, lightMapIntensity: { value: 1 } }, emissivemap: { emissiveMap: { value: null } }, bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } }, normalmap: { normalMap: { value: null }, normalScale: { value: new r(1, 1) } }, displacementmap: { displacementMap: { value: null }, displacementScale: { value: 1 }, displacementBias: { value: 0 } }, roughnessmap: { roughnessMap: { value: null } }, metalnessmap: { metalnessMap: { value: null } }, gradientmap: { gradientMap: { value: null } }, fog: { fogDensity: { value: 25e-5 }, fogNear: { value: 1 }, fogFar: { value: 2e3 }, fogColor: { value: new _(16777215) } }, lights: { ambientLightColor: { value: [] }, directionalLights: { value: [], properties: { direction: {}, color: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {} } }, directionalShadowMap: { value: [] }, directionalShadowMatrix: { value: [] }, spotLights: { value: [], properties: { color: {}, position: {}, direction: {}, distance: {}, coneCos: {}, penumbraCos: {}, decay: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {} } }, spotShadowMap: { value: [] }, spotShadowMatrix: { value: [] }, pointLights: { value: [], properties: { color: {}, position: {}, decay: {}, distance: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {}, shadowCameraNear: {}, shadowCameraFar: {} } }, pointShadowMap: { value: [] }, pointShadowMatrix: { value: [] }, hemisphereLights: { value: [], properties: { direction: {}, skyColor: {}, groundColor: {} } }, rectAreaLights: { value: [], properties: { color: {}, position: {}, width: {}, height: {} } } }, points: { diffuse: { value: new _(15658734) }, opacity: { value: 1 }, size: { value: 1 }, scale: { value: 1 }, map: { value: null }, uvTransform: { value: new c } }, sprite: { diffuse: { value: new _(15658734) }, opacity: { value: 1 }, center: { value: new r(.5, .5) }, rotation: { value: 0 }, map: { value: null }, uvTransform: { value: new c } } }, Bc = { basic: { uniforms: b([Gc.common, Gc.specularmap, Gc.envmap, Gc.aomap, Gc.lightmap, Gc.fog]), vertexShader: Oc.meshbasic_vert, fragmentShader: Oc.meshbasic_frag }, lambert: { uniforms: b([Gc.common, Gc.specularmap, Gc.envmap, Gc.aomap, Gc.lightmap, Gc.emissivemap, Gc.fog, Gc.lights, { emissive: { value: new _(0) } }]), vertexShader: Oc.meshlambert_vert, fragmentShader: Oc.meshlambert_frag }, phong: { uniforms: b([Gc.common, Gc.specularmap, Gc.envmap, Gc.aomap, Gc.lightmap, Gc.emissivemap, Gc.bumpmap, Gc.normalmap, Gc.displacementmap, Gc.gradientmap, Gc.fog, Gc.lights, { emissive: { value: new _(0) }, specular: { value: new _(1118481) }, shininess: { value: 30 } }]), vertexShader: Oc.meshphong_vert, fragmentShader: Oc.meshphong_frag }, standard: { uniforms: b([Gc.common, Gc.envmap, Gc.aomap, Gc.lightmap, Gc.emissivemap, Gc.bumpmap, Gc.normalmap, Gc.displacementmap, Gc.roughnessmap, Gc.metalnessmap, Gc.fog, Gc.lights, { emissive: { value: new _(0) }, roughness: { value: .5 }, metalness: { value: .5 }, envMapIntensity: { value: 1 } }]), vertexShader: Oc.meshphysical_vert, fragmentShader: Oc.meshphysical_frag }, matcap: { uniforms: b([Gc.common, Gc.bumpmap, Gc.normalmap, Gc.displacementmap, Gc.fog, { matcap: { value: null } }]), vertexShader: Oc.meshmatcap_vert, fragmentShader: Oc.meshmatcap_frag }, points: { uniforms: b([Gc.points, Gc.fog]), vertexShader: Oc.points_vert, fragmentShader: Oc.points_frag }, dashed: { uniforms: b([Gc.common, Gc.fog, { scale: { value: 1 }, dashSize: { value: 1 }, totalSize: { value: 2 } }]), vertexShader: Oc.linedashed_vert, fragmentShader: Oc.linedashed_frag }, depth: { uniforms: b([Gc.common, Gc.displacementmap]), vertexShader: Oc.depth_vert, fragmentShader: Oc.depth_frag }, normal: { uniforms: b([Gc.common, Gc.bumpmap, Gc.normalmap, Gc.displacementmap, { opacity: { value: 1 } }]), vertexShader: Oc.normal_vert, fragmentShader: Oc.normal_frag }, sprite: { uniforms: b([Gc.sprite, Gc.fog]), vertexShader: Oc.sprite_vert, fragmentShader: Oc.sprite_frag }, background: { uniforms: { uvTransform: { value: new c }, t2D: { value: null } }, vertexShader: Oc.background_vert, fragmentShader: Oc.background_frag }, cube: { uniforms: { tCube: { value: null }, tFlip: { value: -1 }, opacity: { value: 1 } }, vertexShader: Oc.cube_vert, fragmentShader: Oc.cube_frag }, equirect: { uniforms: { tEquirect: { value: null } }, vertexShader: Oc.equirect_vert, fragmentShader: Oc.equirect_frag }, distanceRGBA: { uniforms: b([Gc.common, Gc.displacementmap, { referencePosition: { value: new s }, nearDistance: { value: 1 }, farDistance: { value: 1e3 } }]), vertexShader: Oc.distanceRGBA_vert, fragmentShader: Oc.distanceRGBA_frag }, shadow: { uniforms: b([Gc.lights, Gc.fog, { color: { value: new _(0) }, opacity: { value: 1 } }]), vertexShader: Oc.shadow_vert, fragmentShader: Oc.shadow_frag } }; Bc.physical = { uniforms: b([Bc.standard.uniforms, { clearCoat: { value: 0 }, clearCoatRoughness: { value: 0 } }]), vertexShader: Oc.meshphysical_vert, fragmentShader: Oc.meshphysical_frag }, Object.assign(w.prototype, { clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { this.a = t.a, this.b = t.b, this.c = t.c, this.normal.copy(t.normal), this.color.copy(t.color), this.materialIndex = t.materialIndex; for (var e = 0, n = t.vertexNormals.length; e < n; e++)this.vertexNormals[e] = t.vertexNormals[e].clone(); for (e = 0, n = t.vertexColors.length; e < n; e++)this.vertexColors[e] = t.vertexColors[e].clone(); return this } }), T.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], T.DefaultOrder = "XYZ", Object.defineProperties(T.prototype, { x: { get: function () { return this._x }, set: function (t) { this._x = t, this.onChangeCallback() } }, y: { get: function () { return this._y }, set: function (t) { this._y = t, this.onChangeCallback() } }, z: { get: function () { return this._z }, set: function (t) { this._z = t, this.onChangeCallback() } }, order: { get: function () { return this._order }, set: function (t) { this._order = t, this.onChangeCallback() } } }), Object.assign(T.prototype, { isEuler: !0, set: function (t, e, n, i) { return this._x = t, this._y = e, this._z = n, this._order = i || this._order, this.onChangeCallback(), this }, clone: function () { return new this.constructor(this._x, this._y, this._z, this._order) }, copy: function (t) { return this._x = t._x, this._y = t._y, this._z = t._z, this._order = t._order, this.onChangeCallback(), this }, setFromRotationMatrix: function (t, e, n) { var i = Ac.clamp, r = t.elements, o = r[0], a = r[4], s = r[8], c = r[1], u = r[5], l = r[9], h = r[2], f = r[6], p = r[10]; return "XYZ" === (e = e || this._order) ? (this._y = Ao(i(s, -1, 1)), .99999 > Wo(s) ? (this._x = Vo(-l, p), this._z = Vo(-a, o)) : (this._x = Vo(f, u), this._z = 0)) : "YXZ" === e ? (this._x = Ao(-i(l, -1, 1)), .99999 > Wo(l) ? (this._y = Vo(s, p), this._z = Vo(c, u)) : (this._y = Vo(-h, o), this._z = 0)) : "ZXY" === e ? (this._x = Ao(i(f, -1, 1)), .99999 > Wo(f) ? (this._y = Vo(-h, p), this._z = Vo(-a, u)) : (this._y = 0, this._z = Vo(c, o))) : "ZYX" === e ? (this._y = Ao(-i(h, -1, 1)), .99999 > Wo(h) ? (this._x = Vo(f, p), this._z = Vo(c, o)) : (this._x = 0, this._z = Vo(-a, u))) : "YZX" === e ? (this._z = Ao(i(c, -1, 1)), .99999 > Wo(c) ? (this._x = Vo(-l, u), this._y = Vo(-h, o)) : (this._x = 0, this._y = Vo(s, p))) : "XZY" === e ? (this._z = Ao(-i(a, -1, 1)), .99999 > Wo(a) ? (this._x = Vo(f, u), this._y = Vo(s, o)) : (this._x = Vo(-l, p), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + e), this._order = e, !1 !== n && this.onChangeCallback(), this }, setFromQuaternion: function () { var t = new o; return function (e, n, i) { return t.makeRotationFromQuaternion(e), this.setFromRotationMatrix(t, n, i) } }(), setFromVector3: function (t, e) { return this.set(t.x, t.y, t.z, e || this._order) }, reorder: function () { var t = new a; return function (e) { return t.setFromEuler(this), this.setFromQuaternion(t, e) } }(), equals: function (t) { return t._x === this._x && t._y === this._y && t._z === this._z && t._order === this._order }, fromArray: function (t) { return this._x = t[0], this._y = t[1], this._z = t[2], void 0 !== t[3] && (this._order = t[3]), this.onChangeCallback(), this }, toArray: function (t, e) { return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this._x, t[e + 1] = this._y, t[e + 2] = this._z, t[e + 3] = this._order, t }, toVector3: function (t) { return t ? t.set(this._x, this._y, this._z) : new s(this._x, this._y, this._z) }, onChange: function (t) { return this.onChangeCallback = t, this }, onChangeCallback: function () { } }), Object.assign(S.prototype, { set: function (t) { this.mask = 0 | 1 << t }, enable: function (t) { this.mask |= 0 | 1 << t }, toggle: function (t) { this.mask ^= 0 | 1 << t }, disable: function (t) { this.mask &= ~(0 | 1 << t) }, test: function (t) { return 0 != (this.mask & t.mask) } }); var kc = 0; M.DefaultUp = new s(0, 1, 0), M.DefaultMatrixAutoUpdate = !0, M.prototype = Object.assign(Object.create(i.prototype), { constructor: M, isObject3D: !0, onBeforeRender: function () { }, onAfterRender: function () { }, applyMatrix: function (t) { this.matrix.multiplyMatrices(t, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale) }, applyQuaternion: function (t) { return this.quaternion.premultiply(t), this }, setRotationFromAxisAngle: function (t, e) { this.quaternion.setFromAxisAngle(t, e) }, setRotationFromEuler: function (t) { this.quaternion.setFromEuler(t, !0) }, setRotationFromMatrix: function (t) { this.quaternion.setFromRotationMatrix(t) }, setRotationFromQuaternion: function (t) { this.quaternion.copy(t) }, rotateOnAxis: function () { var t = new a; return function (e, n) { return t.setFromAxisAngle(e, n), this.quaternion.multiply(t), this } }(), rotateOnWorldAxis: function () { var t = new a; return function (e, n) { return t.setFromAxisAngle(e, n), this.quaternion.premultiply(t), this } }(), rotateX: function () { var t = new s(1, 0, 0); return function (e) { return this.rotateOnAxis(t, e) } }(), rotateY: function () { var t = new s(0, 1, 0); return function (e) { return this.rotateOnAxis(t, e) } }(), rotateZ: function () { var t = new s(0, 0, 1); return function (e) { return this.rotateOnAxis(t, e) } }(), translateOnAxis: function () { var t = new s; return function (e, n) { return t.copy(e).applyQuaternion(this.quaternion), this.position.add(t.multiplyScalar(n)), this } }(), translateX: function () { var t = new s(1, 0, 0); return function (e) { return this.translateOnAxis(t, e) } }(), translateY: function () { var t = new s(0, 1, 0); return function (e) { return this.translateOnAxis(t, e) } }(), translateZ: function () { var t = new s(0, 0, 1); return function (e) { return this.translateOnAxis(t, e) } }(), localToWorld: function (t) { return t.applyMatrix4(this.matrixWorld) }, worldToLocal: function () { var t = new o; return function (e) { return e.applyMatrix4(t.getInverse(this.matrixWorld)) } }(), lookAt: function () { var t = new a, e = new o, n = new s, i = new s; return function (r, o, a) { r.isVector3 ? n.copy(r) : n.set(r, o, a); var s = this.parent; this.updateWorldMatrix(!0, !1), i.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? e.lookAt(i, n, this.up) : e.lookAt(n, i, this.up), this.quaternion.setFromRotationMatrix(e), s && (e.extractRotation(s.matrixWorld), t.setFromRotationMatrix(e), this.quaternion.premultiply(t.inverse())) } }(), add: function (t) { if (1 < arguments.length) { for (var e = 0; e < arguments.length; e++)this.add(arguments[e]); return this } return t === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", t), this) : (t && t.isObject3D ? (null !== t.parent && t.parent.remove(t), t.parent = this, t.dispatchEvent({ type: "added" }), this.children.push(t)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t), this) }, remove: function (t) { if (1 < arguments.length) { for (var e = 0; e < arguments.length; e++)this.remove(arguments[e]); return this } var n = this.children.indexOf(t); return -1 !== n && (t.parent = null, t.dispatchEvent({ type: "removed" }), this.children.splice(n, 1)), this }, getObjectById: function (t) { return this.getObjectByProperty("id", t) }, getObjectByName: function (t) { return this.getObjectByProperty("name", t) }, getObjectByProperty: function (t, e) { if (this[t] === e) return this; for (var n = 0, i = this.children.length; n < i; n++) { var r = this.children[n].getObjectByProperty(t, e); if (void 0 !== r) return r } }, getWorldPosition: function (t) { return void 0 === t && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"), t = new s), this.updateMatrixWorld(!0), t.setFromMatrixPosition(this.matrixWorld) }, getWorldQuaternion: function () { var t = new s, e = new s; return function (n) { return void 0 === n && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"), n = new a), this.updateMatrixWorld(!0), this.matrixWorld.decompose(t, n, e), n } }(), getWorldScale: function () { var t = new s, e = new a; return function (n) { return void 0 === n && (console.warn("THREE.Object3D: .getWorldScale() target is now required"), n = new s), this.updateMatrixWorld(!0), this.matrixWorld.decompose(t, e, n), n } }(), getWorldDirection: function (t) { void 0 === t && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"), t = new s), this.updateMatrixWorld(!0); var e = this.matrixWorld.elements; return t.set(e[8], e[9], e[10]).normalize() }, raycast: function () { }, traverse: function (t) { t(this); for (var e = this.children, n = 0, i = e.length; n < i; n++)e[n].traverse(t) }, traverseVisible: function (t) { if (!1 !== this.visible) { t(this); for (var e = this.children, n = 0, i = e.length; n < i; n++)e[n].traverseVisible(t) } }, traverseAncestors: function (t) { var e = this.parent; null !== e && (t(e), e.traverseAncestors(t)) }, updateMatrix: function () { this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0 }, updateMatrixWorld: function (t) { this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || t) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, t = !0); for (var e = this.children, n = 0, i = e.length; n < i; n++)e[n].updateMatrixWorld(t) }, updateWorldMatrix: function (t, e) { var n = this.parent; if (!0 === t && null !== n && n.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), !0 === e) for (var i = this.children, r = 0, o = i.length; r < o; r++)i[r].updateWorldMatrix(!1, !0) }, toJSON: function (t) { function e(e, n) { return void 0 === e[n.uuid] && (e[n.uuid] = n.toJSON(t)), n.uuid } function n(t) { var e = []; for (var n in t) { var i = t[n]; delete i.metadata, e.push(i) } return e } var i = void 0 === t || "string" == typeof t, r = {}; i && (t = { geometries: {}, materials: {}, textures: {}, images: {}, shapes: {} }, r.metadata = { version: 4.5, type: "Object", generator: "Object3D.toJSON" }); var o = {}; if (o.uuid = this.uuid, o.type = this.type, "" !== this.name && (o.name = this.name), !0 === this.castShadow && (o.castShadow = !0), !0 === this.receiveShadow && (o.receiveShadow = !0), !1 === this.visible && (o.visible = !1), !1 === this.frustumCulled && (o.frustumCulled = !1), 0 !== this.renderOrder && (o.renderOrder = this.renderOrder), "{}" !== JSON.stringify(this.userData) && (o.userData = this.userData), o.layers = this.layers.mask, o.matrix = this.matrix.toArray(), !1 === this.matrixAutoUpdate && (o.matrixAutoUpdate = !1), this.isMesh || this.isLine || this.isPoints) { o.geometry = e(t.geometries, this.geometry); var a = this.geometry.parameters; if (void 0 !== a && void 0 !== a.shapes) { var s = a.shapes; if (Array.isArray(s)) for (var c, u = 0, l = s.length; u < l; u++)c = s[u], e(t.shapes, c); else e(t.shapes, s) } } if (void 0 !== this.material) if (Array.isArray(this.material)) { var h = []; for (u = 0, l = this.material.length; u < l; u++)h.push(e(t.materials, this.material[u])); o.material = h } else o.material = e(t.materials, this.material); if (0 < this.children.length) { o.children = []; for (u = 0; u < this.children.length; u++)o.children.push(this.children[u].toJSON(t).object) } if (i) { var f = n(t.geometries), p = n(t.materials), d = n(t.textures), m = n(t.images); s = n(t.shapes); 0 < f.length && (r.geometries = f), 0 < p.length && (r.materials = p), 0 < d.length && (r.textures = d), 0 < m.length && (r.images = m), 0 < s.length && (r.shapes = s) } return r.object = o, r }, clone: function (t) { return (new this.constructor).copy(this, t) }, copy: function (t, e) { if (void 0 === e && (e = !0), this.name = t.name, this.up.copy(t.up), this.position.copy(t.position), this.quaternion.copy(t.quaternion), this.scale.copy(t.scale), this.matrix.copy(t.matrix), this.matrixWorld.copy(t.matrixWorld), this.matrixAutoUpdate = t.matrixAutoUpdate, this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate, this.layers.mask = t.layers.mask, this.visible = t.visible, this.castShadow = t.castShadow, this.receiveShadow = t.receiveShadow, this.frustumCulled = t.frustumCulled, this.renderOrder = t.renderOrder, this.userData = JSON.parse(JSON.stringify(t.userData)), !0 === e) for (var n, i = 0; i < t.children.length; i++)n = t.children[i], this.add(n.clone()); return this } }); var Nc = 0; P.prototype = Object.assign(Object.create(i.prototype), { constructor: P, isGeometry: !0, applyMatrix: function (t) { for (var e = (new c).getNormalMatrix(t), n = 0, i = this.vertices.length; n < i; n++)this.vertices[n].applyMatrix4(t); var r; for (n = 0, i = this.faces.length; n < i; n++) { (r = this.faces[n]).normal.applyMatrix3(e).normalize(); for (var o = 0, a = r.vertexNormals.length; o < a; o++)r.vertexNormals[o].applyMatrix3(e).normalize() } return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this }, rotateX: function () { var t = new o; return function (e) { return t.makeRotationX(e), this.applyMatrix(t), this } }(), rotateY: function () { var t = new o; return function (e) { return t.makeRotationY(e), this.applyMatrix(t), this } }(), rotateZ: function () { var t = new o; return function (e) { return t.makeRotationZ(e), this.applyMatrix(t), this } }(), translate: function () { var t = new o; return function (e, n, i) { return t.makeTranslation(e, n, i), this.applyMatrix(t), this } }(), scale: function () { var t = new o; return function (e, n, i) { return t.makeScale(e, n, i), this.applyMatrix(t), this } }(), lookAt: function () { var t = new M; return function (e) { t.lookAt(e), t.updateMatrix(), this.applyMatrix(t.matrix) } }(), fromBufferGeometry: function (t) { function e(t, e, i, o) { var a = void 0 === u ? [] : [n.colors[t].clone(), n.colors[e].clone(), n.colors[i].clone()], f = new w(t, e, i, void 0 === c ? [] : [(new s).fromArray(c, 3 * t), (new s).fromArray(c, 3 * e), (new s).fromArray(c, 3 * i)], a, o); n.faces.push(f), void 0 !== l && n.faceVertexUvs[0].push([(new r).fromArray(l, 2 * t), (new r).fromArray(l, 2 * e), (new r).fromArray(l, 2 * i)]), void 0 !== h && n.faceVertexUvs[1].push([(new r).fromArray(h, 2 * t), (new r).fromArray(h, 2 * e), (new r).fromArray(h, 2 * i)]) } var n = this, i = null === t.index ? void 0 : t.index.array, o = t.attributes, a = o.position.array, c = void 0 === o.normal ? void 0 : o.normal.array, u = void 0 === o.color ? void 0 : o.color.array, l = void 0 === o.uv ? void 0 : o.uv.array, h = void 0 === o.uv2 ? void 0 : o.uv2.array; void 0 !== h && (this.faceVertexUvs[1] = []); for (var f = 0, p = 0; f < a.length; f += 3, p += 2)n.vertices.push((new s).fromArray(a, f)), void 0 !== u && n.colors.push((new _).fromArray(u, f)); var d = t.groups; if (0 < d.length) for (f = 0; f < d.length; f++) { var m = d[f], v = m.start, g = m.count; for (p = v; p < v + g; p += 3)void 0 === i ? e(p, p + 1, p + 2, m.materialIndex) : e(i[p], i[p + 1], i[p + 2], m.materialIndex) } else if (void 0 !== i) for (f = 0; f < i.length; f += 3)e(i[f], i[f + 1], i[f + 2]); else for (f = 0; f < a.length / 3; f += 3)e(f, f + 1, f + 2); return this.computeFaceNormals(), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), this }, center: function () { var t = new s; return function () { return this.computeBoundingBox(), this.boundingBox.getCenter(t).negate(), this.translate(t.x, t.y, t.z), this } }(), normalize: function () { this.computeBoundingSphere(); var t = this.boundingSphere.center, e = this.boundingSphere.radius, n = 0 === e ? 1 : 1 / e, i = new o; return i.set(n, 0, 0, -n * t.x, 0, n, 0, -n * t.y, 0, 0, n, -n * t.z, 0, 0, 0, 1), this.applyMatrix(i), this }, computeFaceNormals: function () { for (var t = new s, e = new s, n = 0, i = this.faces.length; n < i; n++) { var r = this.faces[n], o = this.vertices[r.a], a = this.vertices[r.b], c = this.vertices[r.c]; t.subVectors(c, a), e.subVectors(o, a), t.cross(e), t.normalize(), r.normal.copy(t) } }, computeVertexNormals: function (t) { var e, n, i, r, o, a; for (void 0 === t && (t = !0), a = Array(this.vertices.length), e = 0, n = this.vertices.length; e < n; e++)a[e] = new s; if (t) { var c, u, l, h = new s, f = new s; for (i = 0, r = this.faces.length; i < r; i++)o = this.faces[i], c = this.vertices[o.a], u = this.vertices[o.b], l = this.vertices[o.c], h.subVectors(l, u), f.subVectors(c, u), h.cross(f), a[o.a].add(h), a[o.b].add(h), a[o.c].add(h) } else for (this.computeFaceNormals(), i = 0, r = this.faces.length; i < r; i++)a[(o = this.faces[i]).a].add(o.normal), a[o.b].add(o.normal), a[o.c].add(o.normal); for (e = 0, n = this.vertices.length; e < n; e++)a[e].normalize(); for (i = 0, r = this.faces.length; i < r; i++) { var p = (o = this.faces[i]).vertexNormals; 3 === p.length ? (p[0].copy(a[o.a]), p[1].copy(a[o.b]), p[2].copy(a[o.c])) : (p[0] = a[o.a].clone(), p[1] = a[o.b].clone(), p[2] = a[o.c].clone()) } 0 < this.faces.length && (this.normalsNeedUpdate = !0) }, computeFlatVertexNormals: function () { var t, e, n; for (this.computeFaceNormals(), t = 0, e = this.faces.length; t < e; t++) { var i = (n = this.faces[t]).vertexNormals; 3 === i.length ? (i[0].copy(n.normal), i[1].copy(n.normal), i[2].copy(n.normal)) : (i[0] = n.normal.clone(), i[1] = n.normal.clone(), i[2] = n.normal.clone()) } 0 < this.faces.length && (this.normalsNeedUpdate = !0) }, computeMorphNormals: function () { var t, e, n, i, r; for (n = 0, i = this.faces.length; n < i; n++)for ((r = this.faces[n]).__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(), r.__originalVertexNormals || (r.__originalVertexNormals = []), t = 0, e = r.vertexNormals.length; t < e; t++)r.__originalVertexNormals[t] ? r.__originalVertexNormals[t].copy(r.vertexNormals[t]) : r.__originalVertexNormals[t] = r.vertexNormals[t].clone(); var o = new P; for (o.faces = this.faces, t = 0, e = this.morphTargets.length; t < e; t++) { if (!this.morphNormals[t]) { this.morphNormals[t] = {}, this.morphNormals[t].faceNormals = [], this.morphNormals[t].vertexNormals = []; var a = this.morphNormals[t].faceNormals, c = this.morphNormals[t].vertexNormals; for (n = 0, i = this.faces.length; n < i; n++)u = new s, l = { a: new s, b: new s, c: new s }, a.push(u), c.push(l) } var u, l, h = this.morphNormals[t]; for (o.vertices = this.morphTargets[t].vertices, o.computeFaceNormals(), o.computeVertexNormals(), n = 0, i = this.faces.length; n < i; n++)r = this.faces[n], u = h.faceNormals[n], l = h.vertexNormals[n], u.copy(r.normal), l.a.copy(r.vertexNormals[0]), l.b.copy(r.vertexNormals[1]), l.c.copy(r.vertexNormals[2]) } for (n = 0, i = this.faces.length; n < i; n++)(r = this.faces[n]).normal = r.__originalFaceNormal, r.vertexNormals = r.__originalVertexNormals }, computeBoundingBox: function () { null === this.boundingBox && (this.boundingBox = new d), this.boundingBox.setFromPoints(this.vertices) }, computeBoundingSphere: function () { null === this.boundingSphere && (this.boundingSphere = new m), this.boundingSphere.setFromPoints(this.vertices) }, merge: function (t, e, n) { if (t && t.isGeometry) { var i, r = this.vertices.length, o = this.vertices, a = t.vertices, s = this.faces, u = t.faces, l = this.faceVertexUvs[0], h = t.faceVertexUvs[0], f = this.colors, p = t.colors; void 0 === n && (n = 0), void 0 !== e && (i = (new c).getNormalMatrix(e)); for (var d = 0, m = a.length; d < m; d++) { var v = a[d].clone(); void 0 !== e && v.applyMatrix4(e), o.push(v) } for (d = 0, m = p.length; d < m; d++)f.push(p[d].clone()); for (d = 0, m = u.length; d < m; d++) { var g, y, b, _ = u[d], x = _.vertexNormals, T = _.vertexColors; (g = new w(_.a + r, _.b + r, _.c + r)).normal.copy(_.normal), void 0 !== i && g.normal.applyMatrix3(i).normalize(); for (var S = 0, M = x.length; S < M; S++)y = x[S].clone(), void 0 !== i && y.applyMatrix3(i).normalize(), g.vertexNormals.push(y); g.color.copy(_.color); for (S = 0, M = T.length; S < M; S++)b = T[S], g.vertexColors.push(b.clone()); g.materialIndex = _.materialIndex + n, s.push(g) } for (d = 0, m = h.length; d < m; d++) { var P = h[d], E = []; if (void 0 !== P) { for (S = 0, M = P.length; S < M; S++)E.push(P[S].clone()); l.push(E) } } } else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", t) }, mergeMesh: function (t) { return t && t.isMesh ? (t.matrixAutoUpdate && t.updateMatrix(), void this.merge(t.geometry, t.matrix)) : void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", t) }, mergeVertices: function () { var t, e, n, i, r, o, a, s, c = {}, u = [], l = []; for (n = 0, i = this.vertices.length; n < i; n++)t = this.vertices[n], void 0 === c[e = Xo(1e4 * t.x) + "_" + Xo(1e4 * t.y) + "_" + Xo(1e4 * t.z)] ? (c[e] = n, u.push(this.vertices[n]), l[n] = u.length - 1) : l[n] = l[c[e]]; var h = []; for (n = 0, i = this.faces.length; n < i; n++) { (r = this.faces[n]).a = l[r.a], r.b = l[r.b], r.c = l[r.c], o = [r.a, r.b, r.c]; for (var f = 0; 3 > f; f++)if (o[f] === o[(f + 1) % 3]) { h.push(n); break } } for (n = h.length - 1; 0 <= n; n--) { var p = h[n]; for (this.faces.splice(p, 1), a = 0, s = this.faceVertexUvs.length; a < s; a++)this.faceVertexUvs[a].splice(p, 1) } var d = this.vertices.length - u.length; return this.vertices = u, d }, setFromPoints: function (t) { this.vertices = []; for (var e, n = 0, i = t.length; n < i; n++)e = t[n], this.vertices.push(new s(e.x, e.y, e.z || 0)); return this }, sortFacesByMaterialIndex: function () { for (var t = this.faces, e = t.length, n = 0; n < e; n++)t[n]._id = n; t.sort(function (t, e) { return t.materialIndex - e.materialIndex }); var i, r, o = this.faceVertexUvs[0], a = this.faceVertexUvs[1]; o && o.length === e && (i = []), a && a.length === e && (r = []); var s; for (n = 0; n < e; n++)s = t[n]._id, i && i.push(o[s]), r && r.push(a[s]); i && (this.faceVertexUvs[0] = i), r && (this.faceVertexUvs[1] = r) }, toJSON: function () { function t(t, e, n) { return n ? t | 1 << e : t & ~(1 << e) } function e(t) { var e = t.x.toString() + t.y.toString() + t.z.toString(); return void 0 === f[e] ? (f[e] = h.length / 3, h.push(t.x, t.y, t.z), f[e]) : f[e] } function n(t) { var e = t.r.toString() + t.g.toString() + t.b.toString(); return void 0 === d[e] ? (d[e] = p.length, p.push(t.getHex()), d[e]) : d[e] } function i(t) { var e = t.x.toString() + t.y.toString(); return void 0 === v[e] ? (v[e] = m.length / 2, m.push(t.x, t.y), v[e]) : v[e] } var r = { metadata: { version: 4.5, type: "Geometry", generator: "Geometry.toJSON" } }; if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), void 0 !== this.parameters) { var o = this.parameters; for (var a in o) void 0 !== o[a] && (r[a] = o[a]); return r } for (var s, c = [], u = 0; u < this.vertices.length; u++)s = this.vertices[u], c.push(s.x, s.y, s.z); var l = [], h = [], f = {}, p = [], d = {}, m = [], v = {}; for (u = 0; u < this.faces.length; u++) { var g = this.faces[u], y = void 0 !== this.faceVertexUvs[0][u], b = 0 < g.normal.length(), _ = 0 < g.vertexNormals.length, x = 1 !== g.color.r || 1 !== g.color.g || 1 !== g.color.b, w = 0 < g.vertexColors.length, T = 0; if (T = t(T = t(T = t(T = t(T = t(T = t(T = t(T = t(T, 0, 0), 1, !0), 2, !1), 3, y), 4, b), 5, _), 6, x), 7, w), l.push(T), l.push(g.a, g.b, g.c), l.push(g.materialIndex), y) { var S = this.faceVertexUvs[0][u]; l.push(i(S[0]), i(S[1]), i(S[2])) } if (b && l.push(e(g.normal)), _) { var M = g.vertexNormals; l.push(e(M[0]), e(M[1]), e(M[2])) } if (x && l.push(n(g.color)), w) { var P = g.vertexColors; l.push(n(P[0]), n(P[1]), n(P[2])) } } return r.data = {}, r.data.vertices = c, r.data.normals = h, 0 < p.length && (r.data.colors = p), 0 < m.length && (r.data.uvs = [m]), r.data.faces = l, r }, clone: function () { return (new P).copy(this) }, copy: function (t) { var e, n, i, r, o, a; this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.name = t.name; var s = t.vertices; for (e = 0, n = s.length; e < n; e++)this.vertices.push(s[e].clone()); var c = t.colors; for (e = 0, n = c.length; e < n; e++)this.colors.push(c[e].clone()); var u = t.faces; for (e = 0, n = u.length; e < n; e++)this.faces.push(u[e].clone()); for (e = 0, n = t.faceVertexUvs.length; e < n; e++) { var l = t.faceVertexUvs[e]; for (void 0 === this.faceVertexUvs[e] && (this.faceVertexUvs[e] = []), i = 0, r = l.length; i < r; i++) { var h = l[i], f = []; for (o = 0, a = h.length; o < a; o++) { var p = h[o]; f.push(p.clone()) } this.faceVertexUvs[e].push(f) } } var d = t.morphTargets; for (e = 0, n = d.length; e < n; e++) { var m = { name: d[e].name }; if (void 0 !== d[e].vertices) for (m.vertices = [], i = 0, r = d[e].vertices.length; i < r; i++)m.vertices.push(d[e].vertices[i].clone()); if (void 0 !== d[e].normals) for (m.normals = [], i = 0, r = d[e].normals.length; i < r; i++)m.normals.push(d[e].normals[i].clone()); this.morphTargets.push(m) } var v = t.morphNormals; for (e = 0, n = v.length; e < n; e++) { var g = {}; if (void 0 !== v[e].vertexNormals) for (g.vertexNormals = [], i = 0, r = v[e].vertexNormals.length; i < r; i++) { var y = v[e].vertexNormals[i], b = {}; b.a = y.a.clone(), b.b = y.b.clone(), b.c = y.c.clone(), g.vertexNormals.push(b) } if (void 0 !== v[e].faceNormals) for (g.faceNormals = [], i = 0, r = v[e].faceNormals.length; i < r; i++)g.faceNormals.push(v[e].faceNormals[i].clone()); this.morphNormals.push(g) } var _ = t.skinWeights; for (e = 0, n = _.length; e < n; e++)this.skinWeights.push(_[e].clone()); var x = t.skinIndices; for (e = 0, n = x.length; e < n; e++)this.skinIndices.push(x[e].clone()); var w = t.lineDistances; for (e = 0, n = w.length; e < n; e++)this.lineDistances.push(w[e]); var T = t.boundingBox; null !== T && (this.boundingBox = T.clone()); var S = t.boundingSphere; return null !== S && (this.boundingSphere = S.clone()), this.elementsNeedUpdate = t.elementsNeedUpdate, this.verticesNeedUpdate = t.verticesNeedUpdate, this.uvsNeedUpdate = t.uvsNeedUpdate, this.normalsNeedUpdate = t.normalsNeedUpdate, this.colorsNeedUpdate = t.colorsNeedUpdate, this.lineDistancesNeedUpdate = t.lineDistancesNeedUpdate, this.groupsNeedUpdate = t.groupsNeedUpdate, this }, dispose: function () { this.dispatchEvent({ type: "dispose" }) } }), Object.defineProperty(E.prototype, "needsUpdate", { set: function (t) { !0 === t && this.version++ } }), Object.assign(E.prototype, { isBufferAttribute: !0, onUploadCallback: function () { }, setArray: function (t) { if (Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array."); return this.count = void 0 === t ? 0 : t.length / this.itemSize, this.array = t, this }, setDynamic: function (t) { return this.dynamic = t, this }, copy: function (t) { return this.name = t.name, this.array = new t.array.constructor(t.array), this.itemSize = t.itemSize, this.count = t.count, this.normalized = t.normalized, this.dynamic = t.dynamic, this }, copyAt: function (t, e, n) { t *= this.itemSize, n *= e.itemSize; for (var i = 0, r = this.itemSize; i < r; i++)this.array[t + i] = e.array[n + i]; return this }, copyArray: function (t) { return this.array.set(t), this }, copyColorsArray: function (t) { for (var e, n = this.array, i = 0, r = 0, o = t.length; r < o; r++)void 0 === (e = t[r]) && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", r), e = new _), n[i++] = e.r, n[i++] = e.g, n[i++] = e.b; return this }, copyVector2sArray: function (t) { for (var e, n = this.array, i = 0, o = 0, a = t.length; o < a; o++)void 0 === (e = t[o]) && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", o), e = new r), n[i++] = e.x, n[i++] = e.y; return this }, copyVector3sArray: function (t) { for (var e, n = this.array, i = 0, r = 0, o = t.length; r < o; r++)void 0 === (e = t[r]) && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", r), e = new s), n[i++] = e.x, n[i++] = e.y, n[i++] = e.z; return this }, copyVector4sArray: function (t) { for (var e, n = this.array, i = 0, r = 0, o = t.length; r < o; r++)void 0 === (e = t[r]) && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", r), e = new l), n[i++] = e.x, n[i++] = e.y, n[i++] = e.z, n[i++] = e.w; return this }, set: function (t, e) { return void 0 === e && (e = 0), this.array.set(t, e), this }, getX: function (t) { return this.array[t * this.itemSize] }, setX: function (t, e) { return this.array[t * this.itemSize] = e, this }, getY: function (t) { return this.array[t * this.itemSize + 1] }, setY: function (t, e) { return this.array[t * this.itemSize + 1] = e, this }, getZ: function (t) { return this.array[t * this.itemSize + 2] }, setZ: function (t, e) { return this.array[t * this.itemSize + 2] = e, this }, getW: function (t) { return this.array[t * this.itemSize + 3] }, setW: function (t, e) { return this.array[t * this.itemSize + 3] = e, this }, setXY: function (t, e, n) { return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this }, setXYZ: function (t, e, n, i) { return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = i, this }, setXYZW: function (t, e, n, i, r) { return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = i, this.array[t + 3] = r, this }, onUpload: function (t) { return this.onUploadCallback = t, this }, clone: function () { return new this.constructor(this.array, this.itemSize).copy(this) } }), A.prototype = Object.create(E.prototype), A.prototype.constructor = A, C.prototype = Object.create(E.prototype), C.prototype.constructor = C, L.prototype = Object.create(E.prototype), L.prototype.constructor = L, R.prototype = Object.create(E.prototype), R.prototype.constructor = R, O.prototype = Object.create(E.prototype), O.prototype.constructor = O, I.prototype = Object.create(E.prototype), I.prototype.constructor = I, D.prototype = Object.create(E.prototype), D.prototype.constructor = D, G.prototype = Object.create(E.prototype), G.prototype.constructor = G, B.prototype = Object.create(E.prototype), B.prototype.constructor = B, Object.assign(k.prototype, { computeGroups: function (t) { for (var e, n, i = [], r = void 0, o = t.faces, a = 0; a < o.length; a++)(n = o[a]).materialIndex !== r && (r = n.materialIndex, void 0 != e && (e.count = 3 * a - e.start, i.push(e)), e = { start: 3 * a, materialIndex: r }); void 0 !== e && (e.count = 3 * a - e.start, i.push(e)), this.groups = i }, fromGeometry: function (t) { var e, n = t.faces, i = t.vertices, o = t.faceVertexUvs, a = o[0] && 0 < o[0].length, s = o[1] && 0 < o[1].length, c = t.morphTargets, u = c.length; if (0 < u) { e = []; for (var l = 0; l < u; l++)e[l] = { name: c[l].name, data: [] }; this.morphTargets.position = e } var h, f = t.morphNormals, p = f.length; if (0 < p) { h = []; for (l = 0; l < p; l++)h[l] = { name: f[l].name, data: [] }; this.morphTargets.normal = h } var d = t.skinIndices, m = t.skinWeights, v = d.length === i.length, g = m.length === i.length; 0 < i.length && 0 === n.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported."); var y; for (l = 0; l < n.length; l++) { y = n[l], this.vertices.push(i[y.a], i[y.b], i[y.c]); var b = y.vertexNormals; if (3 === b.length) this.normals.push(b[0], b[1], b[2]); else { var _ = y.normal; this.normals.push(_, _, _) } var x, w = y.vertexColors; if (3 === w.length) this.colors.push(w[0], w[1], w[2]); else { var T = y.color; this.colors.push(T, T, T) } if (!0 === a) void 0 === (x = o[0][l]) ? (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", l), this.uvs.push(new r, new r, new r)) : this.uvs.push(x[0], x[1], x[2]); if (!0 === s) void 0 === (x = o[1][l]) ? (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", l), this.uvs2.push(new r, new r, new r)) : this.uvs2.push(x[0], x[1], x[2]); for (var S, M = 0; M < u; M++)S = c[M].vertices, e[M].data.push(S[y.a], S[y.b], S[y.c]); var P; for (M = 0; M < p; M++)P = f[M].vertexNormals[l], h[M].data.push(P.a, P.b, P.c); v && this.skinIndices.push(d[y.a], d[y.b], d[y.c]), g && this.skinWeights.push(m[y.a], m[y.b], m[y.c]) } return this.computeGroups(t), this.verticesNeedUpdate = t.verticesNeedUpdate, this.normalsNeedUpdate = t.normalsNeedUpdate, this.colorsNeedUpdate = t.colorsNeedUpdate, this.uvsNeedUpdate = t.uvsNeedUpdate, this.groupsNeedUpdate = t.groupsNeedUpdate, this } }); var Hc = 1; H.prototype = Object.assign(Object.create(i.prototype), { constructor: H, isBufferGeometry: !0, getIndex: function () { return this.index }, setIndex: function (t) { this.index = Array.isArray(t) ? new (65535 < N(t) ? D : O)(t, 1) : t }, addAttribute: function (t, e) { return e && e.isBufferAttribute || e && e.isInterleavedBufferAttribute ? "index" === t ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), this.setIndex(e), this) : (this.attributes[t] = e, this) : (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), this.addAttribute(t, new E(arguments[1], arguments[2]))) }, getAttribute: function (t) { return this.attributes[t] }, removeAttribute: function (t) { return delete this.attributes[t], this }, addGroup: function (t, e, n) { this.groups.push({ start: t, count: e, materialIndex: void 0 === n ? 0 : n }) }, clearGroups: function () { this.groups = [] }, setDrawRange: function (t, e) { this.drawRange.start = t, this.drawRange.count = e }, applyMatrix: function (t) { var e = this.attributes.position; void 0 !== e && (t.applyToBufferAttribute(e), e.needsUpdate = !0); var n = this.attributes.normal; void 0 !== n && ((new c).getNormalMatrix(t).applyToBufferAttribute(n), n.needsUpdate = !0); return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this }, rotateX: function () { var t = new o; return function (e) { return t.makeRotationX(e), this.applyMatrix(t), this } }(), rotateY: function () { var t = new o; return function (e) { return t.makeRotationY(e), this.applyMatrix(t), this } }(), rotateZ: function () { var t = new o; return function (e) { return t.makeRotationZ(e), this.applyMatrix(t), this } }(), translate: function () { var t = new o; return function (e, n, i) { return t.makeTranslation(e, n, i), this.applyMatrix(t), this } }(), scale: function () { var t = new o; return function (e, n, i) { return t.makeScale(e, n, i), this.applyMatrix(t), this } }(), lookAt: function () { var t = new M; return function (e) { t.lookAt(e), t.updateMatrix(), this.applyMatrix(t.matrix) } }(), center: function () { var t = new s; return function () { return this.computeBoundingBox(), this.boundingBox.getCenter(t).negate(), this.translate(t.x, t.y, t.z), this } }(), setFromObject: function (t) { var e = t.geometry; if (t.isPoints || t.isLine) { var n = new G(3 * e.vertices.length, 3), i = new G(3 * e.colors.length, 3); if (this.addAttribute("position", n.copyVector3sArray(e.vertices)), this.addAttribute("color", i.copyColorsArray(e.colors)), e.lineDistances && e.lineDistances.length === e.vertices.length) { var r = new G(e.lineDistances.length, 1); this.addAttribute("lineDistance", r.copyArray(e.lineDistances)) } null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()) } else t.isMesh && e && e.isGeometry && this.fromGeometry(e); return this }, setFromPoints: function (t) { for (var e, n = [], i = 0, r = t.length; i < r; i++)e = t[i], n.push(e.x, e.y, e.z || 0); return this.addAttribute("position", new G(n, 3)), this }, updateFromObject: function (t) { var e, n = t.geometry; if (t.isMesh) { var i = n.__directGeometry; if (!0 === n.elementsNeedUpdate && (i = void 0, n.elementsNeedUpdate = !1), void 0 === i) return this.fromGeometry(n); i.verticesNeedUpdate = n.verticesNeedUpdate, i.normalsNeedUpdate = n.normalsNeedUpdate, i.colorsNeedUpdate = n.colorsNeedUpdate, i.uvsNeedUpdate = n.uvsNeedUpdate, i.groupsNeedUpdate = n.groupsNeedUpdate, n.verticesNeedUpdate = !1, n.normalsNeedUpdate = !1, n.colorsNeedUpdate = !1, n.uvsNeedUpdate = !1, n.groupsNeedUpdate = !1, n = i } return !0 === n.verticesNeedUpdate && (void 0 !== (e = this.attributes.position) && (e.copyVector3sArray(n.vertices), e.needsUpdate = !0), n.verticesNeedUpdate = !1), !0 === n.normalsNeedUpdate && (void 0 !== (e = this.attributes.normal) && (e.copyVector3sArray(n.normals), e.needsUpdate = !0), n.normalsNeedUpdate = !1), !0 === n.colorsNeedUpdate && (void 0 !== (e = this.attributes.color) && (e.copyColorsArray(n.colors), e.needsUpdate = !0), n.colorsNeedUpdate = !1), n.uvsNeedUpdate && (void 0 !== (e = this.attributes.uv) && (e.copyVector2sArray(n.uvs), e.needsUpdate = !0), n.uvsNeedUpdate = !1), n.lineDistancesNeedUpdate && (void 0 !== (e = this.attributes.lineDistance) && (e.copyArray(n.lineDistances), e.needsUpdate = !0), n.lineDistancesNeedUpdate = !1), n.groupsNeedUpdate && (n.computeGroups(t.geometry), this.groups = n.groups, n.groupsNeedUpdate = !1), this }, fromGeometry: function (t) { return t.__directGeometry = (new k).fromGeometry(t), this.fromDirectGeometry(t.__directGeometry) }, fromDirectGeometry: function (t) { var e = new Float32Array(3 * t.vertices.length); if (this.addAttribute("position", new E(e, 3).copyVector3sArray(t.vertices)), 0 < t.normals.length) { var n = new Float32Array(3 * t.normals.length); this.addAttribute("normal", new E(n, 3).copyVector3sArray(t.normals)) } if (0 < t.colors.length) { var i = new Float32Array(3 * t.colors.length); this.addAttribute("color", new E(i, 3).copyColorsArray(t.colors)) } if (0 < t.uvs.length) { var r = new Float32Array(2 * t.uvs.length); this.addAttribute("uv", new E(r, 2).copyVector2sArray(t.uvs)) } if (0 < t.uvs2.length) { var o = new Float32Array(2 * t.uvs2.length); this.addAttribute("uv2", new E(o, 2).copyVector2sArray(t.uvs2)) } for (var a in this.groups = t.groups, t.morphTargets) { for (var s = [], c = t.morphTargets[a], u = 0, l = c.length; u < l; u++) { var h = c[u], f = new G(3 * h.data.length, 3); f.name = h.name, s.push(f.copyVector3sArray(h.data)) } this.morphAttributes[a] = s } if (0 < t.skinIndices.length) { var p = new G(4 * t.skinIndices.length, 4); this.addAttribute("skinIndex", p.copyVector4sArray(t.skinIndices)) } if (0 < t.skinWeights.length) { var d = new G(4 * t.skinWeights.length, 4); this.addAttribute("skinWeight", d.copyVector4sArray(t.skinWeights)) } return null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), this }, computeBoundingBox: function () { null === this.boundingBox && (this.boundingBox = new d); var t = this.attributes.position; void 0 === t ? this.boundingBox.makeEmpty() : this.boundingBox.setFromBufferAttribute(t), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this) }, computeBoundingSphere: function () { var t = new d, e = new s; return function () { null === this.boundingSphere && (this.boundingSphere = new m); var n = this.attributes.position; if (n) { var i = this.boundingSphere.center; t.setFromBufferAttribute(n), t.getCenter(i); for (var r = 0, o = 0, a = n.count; o < a; o++)e.x = n.getX(o), e.y = n.getY(o), e.z = n.getZ(o), r = No(r, i.distanceToSquared(e)); this.boundingSphere.radius = Ho(r), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this) } } }(), computeFaceNormals: function () { }, computeVertexNormals: function () { var t = this.index, e = this.attributes; if (e.position) { var n = e.position.array; if (void 0 === e.normal) this.addAttribute("normal", new E(new Float32Array(n.length), 3)); else for (var i = e.normal.array, r = 0, o = i.length; r < o; r++)i[r] = 0; var a, c, u, l = e.normal.array, h = new s, f = new s, p = new s, d = new s, m = new s; if (t) { var v = t.array; for (r = 0, o = t.count; r < o; r += 3)a = 3 * v[r + 0], c = 3 * v[r + 1], u = 3 * v[r + 2], h.fromArray(n, a), f.fromArray(n, c), p.fromArray(n, u), d.subVectors(p, f), m.subVectors(h, f), d.cross(m), l[a] += d.x, l[a + 1] += d.y, l[a + 2] += d.z, l[c] += d.x, l[c + 1] += d.y, l[c + 2] += d.z, l[u] += d.x, l[u + 1] += d.y, l[u + 2] += d.z } else for (r = 0, o = n.length; r < o; r += 9)h.fromArray(n, r), f.fromArray(n, r + 3), p.fromArray(n, r + 6), d.subVectors(p, f), m.subVectors(h, f), d.cross(m), l[r] = d.x, l[r + 1] = d.y, l[r + 2] = d.z, l[r + 3] = d.x, l[r + 4] = d.y, l[r + 5] = d.z, l[r + 6] = d.x, l[r + 7] = d.y, l[r + 8] = d.z; this.normalizeNormals(), e.normal.needsUpdate = !0 } }, merge: function (t, e) { if (t && t.isBufferGeometry) { void 0 === e && (e = 0, console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.")); var n = this.attributes; for (var i in n) if (void 0 !== t.attributes[i]) for (var r = n[i].array, o = t.attributes[i], a = o.array, s = 0, c = o.itemSize * e; s < a.length; s++, c++)r[c] = a[s]; return this } console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", t) }, normalizeNormals: function () { var t = new s; return function () { for (var e = this.attributes.normal, n = 0, i = e.count; n < i; n++)t.x = e.getX(n), t.y = e.getY(n), t.z = e.getZ(n), t.normalize(), e.setXYZ(n, t.x, t.y, t.z) } }(), toNonIndexed: function () { if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), this; var t = new H, e = this.index.array, n = this.attributes; for (var i in n) { for (var r = n[i], o = r.array, a = r.itemSize, s = new o.constructor(e.length * a), c = 0, u = 0, l = 0, h = e.length; l < h; l++) { c = e[l] * a; for (var f = 0; f < a; f++)s[u++] = o[c++] } t.addAttribute(i, new E(s, a)) } var p, d = this.groups; for (l = 0, h = d.length; l < h; l++)p = d[l], t.addGroup(p.start, p.count, p.materialIndex); return t }, toJSON: function () { var t = { metadata: { version: 4.5, type: "BufferGeometry", generator: "BufferGeometry.toJSON" } }; if (t.uuid = this.uuid, t.type = this.type, "" !== this.name && (t.name = this.name), 0 < Object.keys(this.userData).length && (t.userData = this.userData), void 0 !== this.parameters) { var e = this.parameters; for (var n in e) void 0 !== e[n] && (t[n] = e[n]); return t } t.data = { attributes: {} }; var i = this.index; if (null !== i) { var r = Array.prototype.slice.call(i.array); t.data.index = { type: i.array.constructor.name, array: r } } var o = this.attributes; for (var n in o) { var a = o[n]; r = Array.prototype.slice.call(a.array); t.data.attributes[n] = { itemSize: a.itemSize, type: a.array.constructor.name, array: r, normalized: a.normalized } } var s = this.groups; 0 < s.length && (t.data.groups = JSON.parse(JSON.stringify(s))); var c = this.boundingSphere; return null !== c && (t.data.boundingSphere = { center: c.center.toArray(), radius: c.radius }), t }, clone: function () { return (new H).copy(this) }, copy: function (t) { var e, n, i; this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.name = t.name; var r = t.index; null !== r && this.setIndex(r.clone()); var o = t.attributes; for (e in o) { var a = o[e]; this.addAttribute(e, a.clone()) } var s = t.morphAttributes; for (e in s) { var c = [], u = s[e]; for (n = 0, i = u.length; n < i; n++)c.push(u[n].clone()); this.morphAttributes[e] = c } var l = t.groups; for (n = 0, i = l.length; n < i; n++) { var h = l[n]; this.addGroup(h.start, h.count, h.materialIndex) } var f = t.boundingBox; null !== f && (this.boundingBox = f.clone()); var p = t.boundingSphere; return null !== p && (this.boundingSphere = p.clone()), this.drawRange.start = t.drawRange.start, this.drawRange.count = t.drawRange.count, this.userData = t.userData, this }, dispose: function () { this.dispatchEvent({ type: "dispose" }) } }), F.prototype = Object.create(P.prototype), F.prototype.constructor = F, U.prototype = Object.create(H.prototype), U.prototype.constructor = U, z.prototype = Object.create(P.prototype), z.prototype.constructor = z, j.prototype = Object.create(H.prototype), j.prototype.constructor = j; var Fc = 0; V.prototype = Object.assign(Object.create(i.prototype), { constructor: V, isMaterial: !0, onBeforeCompile: function () { }, setValues: function (t) { if (void 0 !== t) for (var e in t) { var n = t[e]; if (void 0 !== n) if ("shading" != e) { var i = this[e]; void 0 !== i ? i && i.isColor ? i.set(n) : i && i.isVector3 && n && n.isVector3 ? i.copy(n) : this[e] = n : console.warn("THREE." + this.type + ": '" + e + "' is not a property of this material.") } else console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = n === sa; else console.warn("THREE.Material: '" + e + "' parameter is undefined.") } }, toJSON: function (t) { function e(t) { var e = []; for (var n in t) { var i = t[n]; delete i.metadata, e.push(i) } return e } var n = void 0 === t || "string" == typeof t; n && (t = { textures: {}, images: {} }); var i = { metadata: { version: 4.5, type: "Material", generator: "Material.toJSON" } }; if (i.uuid = this.uuid, i.type = this.type, "" !== this.name && (i.name = this.name), this.color && this.color.isColor && (i.color = this.color.getHex()), void 0 !== this.roughness && (i.roughness = this.roughness), void 0 !== this.metalness && (i.metalness = this.metalness), this.emissive && this.emissive.isColor && (i.emissive = this.emissive.getHex()), 1 !== this.emissiveIntensity && (i.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (i.specular = this.specular.getHex()), void 0 !== this.shininess && (i.shininess = this.shininess), void 0 !== this.clearCoat && (i.clearCoat = this.clearCoat), void 0 !== this.clearCoatRoughness && (i.clearCoatRoughness = this.clearCoatRoughness), this.map && this.map.isTexture && (i.map = this.map.toJSON(t).uuid), this.alphaMap && this.alphaMap.isTexture && (i.alphaMap = this.alphaMap.toJSON(t).uuid), this.lightMap && this.lightMap.isTexture && (i.lightMap = this.lightMap.toJSON(t).uuid), this.aoMap && this.aoMap.isTexture && (i.aoMap = this.aoMap.toJSON(t).uuid, i.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (i.bumpMap = this.bumpMap.toJSON(t).uuid, i.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (i.normalMap = this.normalMap.toJSON(t).uuid, i.normalMapType = this.normalMapType, i.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (i.displacementMap = this.displacementMap.toJSON(t).uuid, i.displacementScale = this.displacementScale, i.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (i.roughnessMap = this.roughnessMap.toJSON(t).uuid), this.metalnessMap && this.metalnessMap.isTexture && (i.metalnessMap = this.metalnessMap.toJSON(t).uuid), this.emissiveMap && this.emissiveMap.isTexture && (i.emissiveMap = this.emissiveMap.toJSON(t).uuid), this.specularMap && this.specularMap.isTexture && (i.specularMap = this.specularMap.toJSON(t).uuid), this.envMap && this.envMap.isTexture && (i.envMap = this.envMap.toJSON(t).uuid, i.reflectivity = this.reflectivity, void 0 !== this.combine && (i.combine = this.combine), void 0 !== this.envMapIntensity && (i.envMapIntensity = this.envMapIntensity)), this.gradientMap && this.gradientMap.isTexture && (i.gradientMap = this.gradientMap.toJSON(t).uuid), void 0 !== this.size && (i.size = this.size), void 0 !== this.sizeAttenuation && (i.sizeAttenuation = this.sizeAttenuation), this.blending !== pa && (i.blending = this.blending), !0 === this.flatShading && (i.flatShading = this.flatShading), this.side !== ra && (i.side = this.side), this.vertexColors !== ua && (i.vertexColors = this.vertexColors), 1 > this.opacity && (i.opacity = this.opacity), !0 === this.transparent && (i.transparent = this.transparent), i.depthFunc = this.depthFunc, i.depthTest = this.depthTest, i.depthWrite = this.depthWrite, 0 !== this.rotation && (i.rotation = this.rotation), !0 === this.polygonOffset && (i.polygonOffset = !0), 0 !== this.polygonOffsetFactor && (i.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (i.polygonOffsetUnits = this.polygonOffsetUnits), 1 !== this.linewidth && (i.linewidth = this.linewidth), void 0 !== this.dashSize && (i.dashSize = this.dashSize), void 0 !== this.gapSize && (i.gapSize = this.gapSize), void 0 !== this.scale && (i.scale = this.scale), !0 === this.dithering && (i.dithering = !0), 0 < this.alphaTest && (i.alphaTest = this.alphaTest), !0 === this.premultipliedAlpha && (i.premultipliedAlpha = this.premultipliedAlpha), !0 === this.wireframe && (i.wireframe = this.wireframe), 1 < this.wireframeLinewidth && (i.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (i.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (i.wireframeLinejoin = this.wireframeLinejoin), !0 === this.morphTargets && (i.morphTargets = !0), !0 === this.skinning && (i.skinning = !0), !1 === this.visible && (i.visible = !1), "{}" !== JSON.stringify(this.userData) && (i.userData = this.userData), n) { var r = e(t.textures), o = e(t.images); 0 < r.length && (i.textures = r), 0 < o.length && (i.images = o) } return i }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { this.name = t.name, this.fog = t.fog, this.lights = t.lights, this.blending = t.blending, this.side = t.side, this.flatShading = t.flatShading, this.vertexColors = t.vertexColors, this.opacity = t.opacity, this.transparent = t.transparent, this.blendSrc = t.blendSrc, this.blendDst = t.blendDst, this.blendEquation = t.blendEquation, this.blendSrcAlpha = t.blendSrcAlpha, this.blendDstAlpha = t.blendDstAlpha, this.blendEquationAlpha = t.blendEquationAlpha, this.depthFunc = t.depthFunc, this.depthTest = t.depthTest, this.depthWrite = t.depthWrite, this.colorWrite = t.colorWrite, this.precision = t.precision, this.polygonOffset = t.polygonOffset, this.polygonOffsetFactor = t.polygonOffsetFactor, this.polygonOffsetUnits = t.polygonOffsetUnits, this.dithering = t.dithering, this.alphaTest = t.alphaTest, this.premultipliedAlpha = t.premultipliedAlpha, this.visible = t.visible, this.userData = JSON.parse(JSON.stringify(t.userData)), this.clipShadows = t.clipShadows, this.clipIntersection = t.clipIntersection; var e = t.clippingPlanes, n = null; if (null !== e) { var i = e.length; n = Array(i); for (var r = 0; r !== i; ++r)n[r] = e[r].clone() } return this.clippingPlanes = n, this.shadowSide = t.shadowSide, this }, dispose: function () { this.dispatchEvent({ type: "dispose" }) } }), W.prototype = Object.create(V.prototype), W.prototype.constructor = W, W.prototype.isShaderMaterial = !0, W.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.fragmentShader = t.fragmentShader, this.vertexShader = t.vertexShader, this.uniforms = y(t.uniforms), this.defines = Object.assign({}, t.defines), this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.lights = t.lights, this.clipping = t.clipping, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this.extensions = t.extensions, this }, W.prototype.toJSON = function (t) { var e = V.prototype.toJSON.call(this, t); for (var n in e.uniforms = {}, this.uniforms) { var i = this.uniforms[n].value; e.uniforms[n] = i && i.isTexture ? { type: "t", value: i.toJSON(t).uuid } : i && i.isColor ? { type: "c", value: i.getHex() } : i && i.isVector2 ? { type: "v2", value: i.toArray() } : i && i.isVector3 ? { type: "v3", value: i.toArray() } : i && i.isVector4 ? { type: "v4", value: i.toArray() } : i && i.isMatrix4 ? { type: "m4", value: i.toArray() } : { value: i } } 0 < Object.keys(this.defines).length && (e.defines = this.defines), e.vertexShader = this.vertexShader, e.fragmentShader = this.fragmentShader; var r = {}; for (var o in this.extensions) !0 === this.extensions[o] && (r[o] = !0); return 0 < Object.keys(r).length && (e.extensions = r), e }, Object.assign(X.prototype, { set: function (t, e) { return this.origin.copy(t), this.direction.copy(e), this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.origin.copy(t.origin), this.direction.copy(t.direction), this }, at: function (t, e) { return void 0 === e && (console.warn("THREE.Ray: .at() target is now required"), e = new s), e.copy(this.direction).multiplyScalar(t).add(this.origin) }, lookAt: function (t) { return this.direction.copy(t).sub(this.origin).normalize(), this }, recast: function () { var t = new s; return function (e) { return this.origin.copy(this.at(e, t)), this } }(), closestPointToPoint: function (t, e) { void 0 === e && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"), e = new s), e.subVectors(t, this.origin); var n = e.dot(this.direction); return 0 > n ? e.copy(this.origin) : e.copy(this.direction).multiplyScalar(n).add(this.origin) }, distanceToPoint: function (t) { return Ho(this.distanceSqToPoint(t)) }, distanceSqToPoint: function () { var t = new s; return function (e) { var n = t.subVectors(e, this.origin).dot(this.direction); return 0 > n ? this.origin.distanceToSquared(e) : (t.copy(this.direction).multiplyScalar(n).add(this.origin), t.distanceToSquared(e)) } }(), distanceSqToSegment: function () { var t = new s, e = new s, n = new s; return function (i, r, o, a) { t.copy(i).add(r).multiplyScalar(.5), e.copy(r).sub(i).normalize(), n.copy(this.origin).sub(t); var s, c, u, l, h = .5 * i.distanceTo(r), f = -this.direction.dot(e), p = n.dot(this.direction), d = -n.dot(e), m = n.lengthSq(), v = Wo(1 - f * f); if (0 < v) if (c = f * p - d, l = h * v, 0 <= (s = f * d - p)) if (c >= -l) if (c <= l) { var g = 1 / v; u = (s *= g) * (s + f * (c *= g) + 2 * p) + c * (f * s + c + 2 * d) + m } else u = -(s = No(0, -(f * (c = h) + p))) * s + c * (c + 2 * d) + m; else u = -(s = No(0, -(f * (c = -h) + p))) * s + c * (c + 2 * d) + m; else c <= -l ? u = -(s = No(0, -(-f * h + p))) * s + (c = 0 < s ? -h : Uo(No(-h, -d), h)) * (c + 2 * d) + m : c <= l ? (s = 0, u = (c = Uo(No(-h, -d), h)) * (c + 2 * d) + m) : u = -(s = No(0, -(f * h + p))) * s + (c = 0 < s ? h : Uo(No(-h, -d), h)) * (c + 2 * d) + m; else u = -(s = No(0, -(f * (c = 0 < f ? -h : h) + p))) * s + c * (c + 2 * d) + m; return o && o.copy(this.direction).multiplyScalar(s).add(this.origin), a && a.copy(e).multiplyScalar(c).add(t), u } }(), intersectSphere: function () { var t = new s; return function (e, n) { t.subVectors(e.center, this.origin); var i = t.dot(this.direction), r = t.dot(t) - i * i, o = e.radius * e.radius; if (r > o) return null; var a = Ho(o - r), s = i - a, c = i + a; return 0 > s && 0 > c ? null : 0 > s ? this.at(c, n) : this.at(s, n) } }(), intersectsSphere: function (t) { return this.distanceSqToPoint(t.center) <= t.radius * t.radius }, distanceToPlane: function (t) { var e = t.normal.dot(this.direction); if (0 === e) return 0 === t.distanceToPoint(this.origin) ? 0 : null; var n = -(this.origin.dot(t.normal) + t.constant) / e; return 0 <= n ? n : null }, intersectPlane: function (t, e) { var n = this.distanceToPlane(t); return null === n ? null : this.at(n, e) }, intersectsPlane: function (t) { var e = t.distanceToPoint(this.origin); return 0 === e || !!(0 > t.normal.dot(this.direction) * e) }, intersectBox: function (t, e) { var n, i, r, o, a, s, c = 1 / this.direction.x, u = 1 / this.direction.y, l = 1 / this.direction.z, h = this.origin; return 0 <= c ? (n = (t.min.x - h.x) * c, i = (t.max.x - h.x) * c) : (n = (t.max.x - h.x) * c, i = (t.min.x - h.x) * c), 0 <= u ? (r = (t.min.y - h.y) * u, o = (t.max.y - h.y) * u) : (r = (t.max.y - h.y) * u, o = (t.min.y - h.y) * u), n > o || r > i ? null : ((r > n || n != n) && (n = r), (o < i || i != i) && (i = o), 0 <= l ? (a = (t.min.z - h.z) * l, s = (t.max.z - h.z) * l) : (a = (t.max.z - h.z) * l, s = (t.min.z - h.z) * l), n > s || a > i ? null : ((a > n || n != n) && (n = a), (s < i || i != i) && (i = s), 0 > i ? null : this.at(0 <= n ? n : i, e))) }, intersectsBox: function () { var t = new s; return function (e) { return null !== this.intersectBox(e, t) } }(), intersectTriangle: function () { var t = new s, e = new s, n = new s, i = new s; return function (r, o, a, s, c) { e.subVectors(o, r), n.subVectors(a, r), i.crossVectors(e, n); var u, l = this.direction.dot(i); if (0 < l) { if (s) return null; u = 1 } else { if (!(0 > l)) return null; u = -1, l = -l } t.subVectors(this.origin, r); var h = u * this.direction.dot(n.crossVectors(t, n)); if (0 > h) return null; var f = u * this.direction.dot(e.cross(t)); if (0 > f) return null; if (h + f > l) return null; var p = -u * t.dot(i); return 0 > p ? null : this.at(p / l, c) } }(), applyMatrix4: function (t) { return this.origin.applyMatrix4(t), this.direction.transformDirection(t), this }, equals: function (t) { return t.origin.equals(this.origin) && t.direction.equals(this.direction) } }), Object.assign(q, { getNormal: function () { var t = new s; return function (e, n, i, r) { void 0 === r && (console.warn("THREE.Triangle: .getNormal() target is now required"), r = new s), r.subVectors(i, n), t.subVectors(e, n), r.cross(t); var o = r.lengthSq(); return 0 < o ? r.multiplyScalar(1 / Ho(o)) : r.set(0, 0, 0) } }(), getBarycoord: function () { var t = new s, e = new s, n = new s; return function (i, r, o, a, c) { t.subVectors(a, r), e.subVectors(o, r), n.subVectors(i, r); var u = t.dot(t), l = t.dot(e), h = t.dot(n), f = e.dot(e), p = e.dot(n), d = u * f - l * l; if (void 0 === c && (console.warn("THREE.Triangle: .getBarycoord() target is now required"), c = new s), 0 == d) return c.set(-2, -1, -1); var m = 1 / d, v = (f * h - l * p) * m, g = (u * p - l * h) * m; return c.set(1 - v - g, g, v) } }(), containsPoint: function () { var t = new s; return function (e, n, i, r) { return q.getBarycoord(e, n, i, r, t), 0 <= t.x && 0 <= t.y && 1 >= t.x + t.y } }(), getUV: function () { var t = new s; return function (e, n, i, r, o, a, s, c) { return this.getBarycoord(e, n, i, r, t), c.set(0, 0), c.addScaledVector(o, t.x), c.addScaledVector(a, t.y), c.addScaledVector(s, t.z), c } }() }), Object.assign(q.prototype, { set: function (t, e, n) { return this.a.copy(t), this.b.copy(e), this.c.copy(n), this }, setFromPointsAndIndices: function (t, e, n, i) { return this.a.copy(t[e]), this.b.copy(t[n]), this.c.copy(t[i]), this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.a.copy(t.a), this.b.copy(t.b), this.c.copy(t.c), this }, getArea: function () { var t = new s, e = new s; return function () { return t.subVectors(this.c, this.b), e.subVectors(this.a, this.b), .5 * t.cross(e).length() } }(), getMidpoint: function (t) { return void 0 === t && (console.warn("THREE.Triangle: .getMidpoint() target is now required"), t = new s), t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3) }, getNormal: function (t) { return q.getNormal(this.a, this.b, this.c, t) }, getPlane: function (t) { return void 0 === t && (console.warn("THREE.Triangle: .getPlane() target is now required"), t = new s), t.setFromCoplanarPoints(this.a, this.b, this.c) }, getBarycoord: function (t, e) { return q.getBarycoord(t, this.a, this.b, this.c, e) }, containsPoint: function (t) { return q.containsPoint(t, this.a, this.b, this.c) }, getUV: function (t, e, n, i, r) { return q.getUV(t, this.a, this.b, this.c, e, n, i, r) }, intersectsBox: function (t) { return t.intersectsTriangle(this) }, closestPointToPoint: function () { var t = new s, e = new s, n = new s, i = new s, r = new s, o = new s; return function (a, c) { void 0 === c && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"), c = new s); var u, l, h = this.a, f = this.b, p = this.c; t.subVectors(f, h), e.subVectors(p, h), i.subVectors(a, h); var d = t.dot(i), m = e.dot(i); if (0 >= d && 0 >= m) return c.copy(h); r.subVectors(a, f); var v = t.dot(r), g = e.dot(r); if (0 <= v && g <= v) return c.copy(f); var y = d * g - v * m; if (0 >= y && 0 <= d && 0 >= v) return u = d / (d - v), c.copy(h).addScaledVector(t, u); o.subVectors(a, p); var b = t.dot(o), _ = e.dot(o); if (0 <= _ && b <= _) return c.copy(p); var x = b * m - d * _; if (0 >= x && 0 <= m && 0 >= _) return l = m / (m - _), c.copy(h).addScaledVector(e, l); var w = v * _ - b * g; if (0 >= w && 0 <= g - v && 0 <= b - _) return n.subVectors(p, f), l = (g - v) / (g - v + (b - _)), c.copy(f).addScaledVector(n, l); var T = 1 / (w + x + y); return u = x * T, l = y * T, c.copy(h).addScaledVector(t, u).addScaledVector(e, l) } }(), equals: function (t) { return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c) } }), Y.prototype = Object.create(V.prototype), Y.prototype.constructor = Y, Y.prototype.isMeshBasicMaterial = !0, Y.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this }, $.prototype = Object.assign(Object.create(M.prototype), { constructor: $, isMesh: !0, setDrawMode: function (t) { this.drawMode = t }, copy: function (t) { return M.prototype.copy.call(this, t), this.drawMode = t.drawMode, void 0 !== t.morphTargetInfluences && (this.morphTargetInfluences = t.morphTargetInfluences.slice()), void 0 !== t.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, t.morphTargetDictionary)), this }, updateMorphTargets: function () { var t, e, n, i = this.geometry; if (i.isBufferGeometry) { var r = i.morphAttributes, o = Object.keys(r); if (0 < o.length) { var a = r[o[0]]; if (void 0 !== a) for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, t = 0, e = a.length; t < e; t++)n = a[t].name || t + "", this.morphTargetInfluences.push(0), this.morphTargetDictionary[n] = t } } else { var s = i.morphTargets; void 0 !== s && 0 < s.length && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.") } }, raycast: function () { function t(t, e, n, i, r, o, a, s) { if (null === (e.side === oa ? i.intersectTriangle(a, o, r, !0, s) : i.intersectTriangle(r, o, a, e.side !== aa, s))) return null; b.copy(s), b.applyMatrix4(t.matrixWorld); var c = n.ray.origin.distanceTo(b); return c < n.near || c > n.far ? null : { distance: c, point: b.clone(), object: t } } function e(e, n, i, o, a, s, h, f, p) { c.fromBufferAttribute(a, h), u.fromBufferAttribute(a, f), l.fromBufferAttribute(a, p); var m = t(e, n, i, o, c, u, l, y); if (m) { s && (d.fromBufferAttribute(s, h), v.fromBufferAttribute(s, f), g.fromBufferAttribute(s, p), m.uv = q.getUV(y, c, u, l, d, v, g, new r)); var b = new w(h, f, p); q.getNormal(c, u, l, b.normal), m.face = b } return m } var n = new o, i = new X, a = new m, c = new s, u = new s, l = new s, h = new s, f = new s, p = new s, d = new r, v = new r, g = new r, y = new s, b = new s; return function (o, s) { var m, b = this.geometry, _ = this.material, x = this.matrixWorld; if (void 0 !== _ && (null === b.boundingSphere && b.computeBoundingSphere(), a.copy(b.boundingSphere), a.applyMatrix4(x), !1 !== o.ray.intersectsSphere(a)) && (n.getInverse(x), i.copy(o.ray).applyMatrix4(n), null === b.boundingBox || !1 !== i.intersectsBox(b.boundingBox))) if (b.isBufferGeometry) { var w, T, S, M, P, E, A, C, L, R = b.index, O = b.attributes.position, I = b.attributes.uv, D = b.groups, G = b.drawRange; if (null !== R) if (Array.isArray(_)) for (M = 0, E = D.length; M < E; M++)for (L = _[(C = D[M]).materialIndex], P = No(C.start, G.start), A = Uo(C.start + C.count, G.start + G.count); P < A; P += 3)w = R.getX(P), T = R.getX(P + 1), S = R.getX(P + 2), (m = e(this, L, o, i, O, I, w, T, S)) && (m.faceIndex = Bo(P / 3), s.push(m)); else for (M = No(0, G.start), E = Uo(R.count, G.start + G.count); M < E; M += 3)w = R.getX(M), T = R.getX(M + 1), S = R.getX(M + 2), (m = e(this, _, o, i, O, I, w, T, S)) && (m.faceIndex = Bo(M / 3), s.push(m)); else if (void 0 !== O) if (Array.isArray(_)) for (M = 0, E = D.length; M < E; M++)for (L = _[(C = D[M]).materialIndex], P = No(C.start, G.start), A = Uo(C.start + C.count, G.start + G.count); P < A; P += 3)(m = e(this, L, o, i, O, I, w = P, T = P + 1, S = P + 2)) && (m.faceIndex = Bo(P / 3), s.push(m)); else for (M = No(0, G.start), E = Uo(O.count, G.start + G.count); M < E; M += 3)(m = e(this, _, o, i, O, I, w = M, T = M + 1, S = M + 2)) && (m.faceIndex = Bo(M / 3), s.push(m)) } else if (b.isGeometry) { var B, k, N, H, F = Array.isArray(_), U = b.vertices, z = b.faces, j = b.faceVertexUvs[0]; 0 < j.length && (H = j); for (var V = 0, W = z.length; V < W; V++) { var X = z[V], Y = F ? _[X.materialIndex] : _; if (void 0 !== Y) { if (B = U[X.a], k = U[X.b], N = U[X.c], !0 === Y.morphTargets) { var $ = b.morphTargets, Z = this.morphTargetInfluences; c.set(0, 0, 0), u.set(0, 0, 0), l.set(0, 0, 0); for (var K, J = 0, Q = $.length; J < Q; J++)if (0 !== (K = Z[J])) { var tt = $[J].vertices; c.addScaledVector(h.subVectors(tt[X.a], B), K), u.addScaledVector(f.subVectors(tt[X.b], k), K), l.addScaledVector(p.subVectors(tt[X.c], N), K) } c.add(B), u.add(k), l.add(N), B = c, k = u, N = l } if (m = t(this, Y, o, i, B, k, N, y)) { if (H && H[V]) { var et = H[V]; d.copy(et[0]), v.copy(et[1]), g.copy(et[2]), m.uv = q.getUV(y, B, k, N, d, v, g, new r) } m.face = X, m.faceIndex = V, s.push(m) } } } } } }(), clone: function () { return new this.constructor(this.geometry, this.material).copy(this) } }), et.prototype = Object.create(u.prototype), et.prototype.constructor = et, et.prototype.isCubeTexture = !0, Object.defineProperty(et.prototype, "images", { get: function () { return this.image }, set: function (t) { this.image = t } }), nt.prototype = Object.create(u.prototype), nt.prototype.constructor = nt, nt.prototype.isDataTexture3D = !0; var Uc = new u, zc = new nt, jc = new et, Vc = [], Wc = [], Xc = new Float32Array(16), qc = new Float32Array(9), Yc = new Float32Array(4); It.prototype.updateCache = function (t) { var e = this.cache; t instanceof Float32Array && e.length !== t.length && (this.cache = new Float32Array(t.length)), at(e, t) }, Dt.prototype.setValue = function (t, e, n) { for (var i, r = this.seq, o = 0, a = r.length; o !== a; ++o)(i = r[o]).setValue(t, e[i.id], n) }; var $c = /([\w\d_]+)(\])?(\[|\.)?/g; kt.prototype.setValue = function (t, e, n) { var i = this.map[e]; void 0 !== i && i.setValue(t, n, this.renderer) }, kt.prototype.setOptional = function (t, e, n) { var i = e[n]; void 0 !== i && this.setValue(t, n, i) }, kt.upload = function (t, e, n, i) { for (var r = 0, o = e.length; r !== o; ++r) { var a = e[r], s = n[a.id]; !1 !== s.needsUpdate && a.setValue(t, s.value, i) } }, kt.seqWithValue = function (t, e) { for (var n, i = [], r = 0, o = t.length; r !== o; ++r)(n = t[r]).id in e && i.push(n); return i }; var Zc = 0, Kc = 0; Qt.prototype = Object.create(V.prototype), Qt.prototype.constructor = Qt, Qt.prototype.isMeshDepthMaterial = !0, Qt.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.depthPacking = t.depthPacking, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this }, te.prototype = Object.create(V.prototype), te.prototype.constructor = te, te.prototype.isMeshDistanceMaterial = !0, te.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.referencePosition.copy(t.referencePosition), this.nearDistance = t.nearDistance, this.farDistance = t.farDistance, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this }, re.prototype = Object.assign(Object.create(M.prototype), { constructor: re, isGroup: !0 }), oe.prototype = Object.assign(Object.create(M.prototype), { constructor: oe, isCamera: !0, copy: function (t, e) { return M.prototype.copy.call(this, t, e), this.matrixWorldInverse.copy(t.matrixWorldInverse), this.projectionMatrix.copy(t.projectionMatrix), this.projectionMatrixInverse.copy(t.projectionMatrixInverse), this }, getWorldDirection: function (t) { void 0 === t && (console.warn("THREE.Camera: .getWorldDirection() target is now required"), t = new s), this.updateMatrixWorld(!0); var e = this.matrixWorld.elements; return t.set(-e[8], -e[9], -e[10]).normalize() }, updateMatrixWorld: function (t) { M.prototype.updateMatrixWorld.call(this, t), this.matrixWorldInverse.getInverse(this.matrixWorld) }, clone: function () { return (new this.constructor).copy(this) } }), ae.prototype = Object.assign(Object.create(oe.prototype), { constructor: ae, isPerspectiveCamera: !0, copy: function (t, e) { return oe.prototype.copy.call(this, t, e), this.fov = t.fov, this.zoom = t.zoom, this.near = t.near, this.far = t.far, this.focus = t.focus, this.aspect = t.aspect, this.view = null === t.view ? null : Object.assign({}, t.view), this.filmGauge = t.filmGauge, this.filmOffset = t.filmOffset, this }, setFocalLength: function (t) { var e = .5 * this.getFilmHeight() / t; this.fov = 2 * Ac.RAD2DEG * Eo(e), this.updateProjectionMatrix() }, getFocalLength: function () { var t = Po(.5 * Ac.DEG2RAD * this.fov); return .5 * this.getFilmHeight() / t }, getEffectiveFOV: function () { return 2 * Ac.RAD2DEG * Eo(Po(.5 * Ac.DEG2RAD * this.fov) / this.zoom) }, getFilmWidth: function () { return this.filmGauge * Uo(this.aspect, 1) }, getFilmHeight: function () { return this.filmGauge / No(this.aspect, 1) }, setViewOffset: function (t, e, n, i, r, o) { this.aspect = t / e, null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = o, this.updateProjectionMatrix() }, clearViewOffset: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix() }, updateProjectionMatrix: function () { var t = this.near, e = t * Po(.5 * Ac.DEG2RAD * this.fov) / this.zoom, n = 2 * e, i = this.aspect * n, r = -.5 * i, o = this.view; if (null !== this.view && this.view.enabled) { var a = o.fullWidth, s = o.fullHeight; r += o.offsetX * i / a, e -= o.offsetY * n / s, i *= o.width / a, n *= o.height / s } var c = this.filmOffset; 0 !== c && (r += t * c / this.getFilmWidth()), this.projectionMatrix.makePerspective(r, r + i, e, e - n, t, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix) }, toJSON: function (t) { var e = M.prototype.toJSON.call(this, t); return e.object.fov = this.fov, e.object.zoom = this.zoom, e.object.near = this.near, e.object.far = this.far, e.object.focus = this.focus, e.object.aspect = this.aspect, null !== this.view && (e.object.view = Object.assign({}, this.view)), e.object.filmGauge = this.filmGauge, e.object.filmOffset = this.filmOffset, e } }), se.prototype = Object.assign(Object.create(ae.prototype), { constructor: se, isArrayCamera: !0 }); var Jc, Qc = new s, tu = new s; he.prototype.isFogExp2 = !0, he.prototype.clone = function () { return new he(this.color, this.density) }, he.prototype.toJSON = function () { return { type: "FogExp2", color: this.color.getHex(), density: this.density } }, fe.prototype.isFog = !0, fe.prototype.clone = function () { return new fe(this.color, this.near, this.far) }, fe.prototype.toJSON = function () { return { type: "Fog", color: this.color.getHex(), near: this.near, far: this.far } }, pe.prototype = Object.assign(Object.create(M.prototype), { constructor: pe, copy: function (t, e) { return M.prototype.copy.call(this, t, e), null !== t.background && (this.background = t.background.clone()), null !== t.fog && (this.fog = t.fog.clone()), null !== t.overrideMaterial && (this.overrideMaterial = t.overrideMaterial.clone()), this.autoUpdate = t.autoUpdate, this.matrixAutoUpdate = t.matrixAutoUpdate, this }, toJSON: function (t) { var e = M.prototype.toJSON.call(this, t); return null !== this.background && (e.object.background = this.background.toJSON(t)), null !== this.fog && (e.object.fog = this.fog.toJSON()), e } }), Object.defineProperty(de.prototype, "needsUpdate", { set: function (t) { !0 === t && this.version++ } }), Object.assign(de.prototype, { isInterleavedBuffer: !0, onUploadCallback: function () { }, setArray: function (t) { if (Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array."); return this.count = void 0 === t ? 0 : t.length / this.stride, this.array = t, this }, setDynamic: function (t) { return this.dynamic = t, this }, copy: function (t) { return this.array = new t.array.constructor(t.array), this.count = t.count, this.stride = t.stride, this.dynamic = t.dynamic, this }, copyAt: function (t, e, n) { t *= this.stride, n *= e.stride; for (var i = 0, r = this.stride; i < r; i++)this.array[t + i] = e.array[n + i]; return this }, set: function (t, e) { return void 0 === e && (e = 0), this.array.set(t, e), this }, clone: function () { return (new this.constructor).copy(this) }, onUpload: function (t) { return this.onUploadCallback = t, this } }), Object.defineProperties(me.prototype, { count: { get: function () { return this.data.count } }, array: { get: function () { return this.data.array } } }), Object.assign(me.prototype, { isInterleavedBufferAttribute: !0, setX: function (t, e) { return this.data.array[t * this.data.stride + this.offset] = e, this }, setY: function (t, e) { return this.data.array[t * this.data.stride + this.offset + 1] = e, this }, setZ: function (t, e) { return this.data.array[t * this.data.stride + this.offset + 2] = e, this }, setW: function (t, e) { return this.data.array[t * this.data.stride + this.offset + 3] = e, this }, getX: function (t) { return this.data.array[t * this.data.stride + this.offset] }, getY: function (t) { return this.data.array[t * this.data.stride + this.offset + 1] }, getZ: function (t) { return this.data.array[t * this.data.stride + this.offset + 2] }, getW: function (t) { return this.data.array[t * this.data.stride + this.offset + 3] }, setXY: function (t, e, n) { return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this }, setXYZ: function (t, e, n, i) { return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this.data.array[t + 2] = i, this }, setXYZW: function (t, e, n, i, r) { return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this.data.array[t + 2] = i, this.data.array[t + 3] = r, this } }), ve.prototype = Object.create(V.prototype), ve.prototype.constructor = ve, ve.prototype.isSpriteMaterial = !0, ve.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, this.rotation = t.rotation, this.sizeAttenuation = t.sizeAttenuation, this }, ge.prototype = Object.assign(Object.create(M.prototype), { constructor: ge, isSprite: !0, raycast: function () { function t(t, e, n, i, r, o) { a.subVectors(t, n).addScalar(.5).multiply(i), void 0 === r ? c.copy(a) : (c.x = o * a.x - r * a.y, c.y = r * a.x + o * a.y), t.copy(e), t.x += c.x, t.y += c.y, t.applyMatrix4(u) } var e = new s, n = new s, i = new s, a = new r, c = new r, u = new o, l = new s, h = new s, f = new s, p = new r, d = new r, m = new r; return function (o, a) { n.setFromMatrixScale(this.matrixWorld), u.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld), i.setFromMatrixPosition(this.modelViewMatrix); var s, c, v = this.material.rotation; 0 !== v && (c = jo(v), s = zo(v)); var g = this.center; t(l.set(-.5, -.5, 0), i, g, n, s, c), t(h.set(.5, -.5, 0), i, g, n, s, c), t(f.set(.5, .5, 0), i, g, n, s, c), p.set(0, 0), d.set(1, 0), m.set(1, 1); var y = o.ray.intersectTriangle(l, h, f, !1, e); if (null !== y || (t(h.set(-.5, .5, 0), i, g, n, s, c), d.set(0, 1), null !== (y = o.ray.intersectTriangle(l, f, h, !1, e)))) { var b = o.ray.origin.distanceTo(e); b < o.near || b > o.far || a.push({ distance: b, point: e.clone(), uv: q.getUV(e, l, h, f, p, d, m, new r), face: null, object: this }) } } }(), clone: function () { return new this.constructor(this.material).copy(this) }, copy: function (t) { return M.prototype.copy.call(this, t), void 0 !== t.center && this.center.copy(t.center), this } }), ye.prototype = Object.assign(Object.create(M.prototype), { constructor: ye, copy: function (t) { M.prototype.copy.call(this, t, !1); for (var e, n = t.levels, i = 0, r = n.length; i < r; i++)e = n[i], this.addLevel(e.object.clone(), e.distance); return this }, addLevel: function (t, e) { void 0 === e && (e = 0), e = Wo(e); for (var n = this.levels, i = 0; i < n.length && !(e < n[i].distance); i++); n.splice(i, 0, { distance: e, object: t }), this.add(t) }, getObjectForDistance: function (t) { for (var e = this.levels, n = 1, i = e.length; n < i && !(t < e[n].distance); n++); return e[n - 1].object }, raycast: function () { var t = new s; return function (e, n) { t.setFromMatrixPosition(this.matrixWorld); var i = e.ray.origin.distanceTo(t); this.getObjectForDistance(i).raycast(e, n) } }(), update: function () { var t = new s, e = new s; return function (n) { var i = this.levels; if (1 < i.length) { t.setFromMatrixPosition(n.matrixWorld), e.setFromMatrixPosition(this.matrixWorld); var r = t.distanceTo(e); i[0].object.visible = !0; for (var o = 1, a = i.length; o < a && r >= i[o].distance; o++)i[o - 1].object.visible = !1, i[o].object.visible = !0; for (; o < a; o++)i[o].object.visible = !1 } } }(), toJSON: function (t) { var e = M.prototype.toJSON.call(this, t); e.object.levels = []; for (var n, i = this.levels, r = 0, o = i.length; r < o; r++)n = i[r], e.object.levels.push({ object: n.object.uuid, distance: n.distance }); return e } }), be.prototype = Object.assign(Object.create($.prototype), { constructor: be, isSkinnedMesh: !0, bind: function (t, e) { this.skeleton = t, void 0 === e && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), e = this.matrixWorld), this.bindMatrix.copy(e), this.bindMatrixInverse.getInverse(e) }, pose: function () { this.skeleton.pose() }, normalizeSkinWeights: function () { for (var t = new l, e = this.geometry.attributes.skinWeight, n = 0, i = e.count; n < i; n++) { t.x = e.getX(n), t.y = e.getY(n), t.z = e.getZ(n), t.w = e.getW(n); var r = 1 / t.manhattanLength(); r == 1 / 0 ? t.set(1, 0, 0, 0) : t.multiplyScalar(r), e.setXYZW(n, t.x, t.y, t.z, t.w) } }, updateMatrixWorld: function (t) { $.prototype.updateMatrixWorld.call(this, t), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode) }, clone: function () { return new this.constructor(this.geometry, this.material).copy(this) } }), Object.assign(_e.prototype, { calculateInverses: function () { this.boneInverses = []; for (var t, e = 0, n = this.bones.length; e < n; e++)t = new o, this.bones[e] && t.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(t) }, pose: function () { var t, e, n; for (e = 0, n = this.bones.length; e < n; e++)(t = this.bones[e]) && t.matrixWorld.getInverse(this.boneInverses[e]); for (e = 0, n = this.bones.length; e < n; e++)(t = this.bones[e]) && (t.parent && t.parent.isBone ? (t.matrix.getInverse(t.parent.matrixWorld), t.matrix.multiply(t.matrixWorld)) : t.matrix.copy(t.matrixWorld), t.matrix.decompose(t.position, t.quaternion, t.scale)) }, update: function () { var t = new o, e = new o; return function () { for (var n, i = this.bones, r = this.boneInverses, o = this.boneMatrices, a = this.boneTexture, s = 0, c = i.length; s < c; s++)n = i[s] ? i[s].matrixWorld : e, t.multiplyMatrices(n, r[s]), t.toArray(o, 16 * s); void 0 !== a && (a.needsUpdate = !0) } }(), clone: function () { return new _e(this.bones, this.boneInverses) }, getBoneByName: function (t) { for (var e, n = 0, i = this.bones.length; n < i; n++)if ((e = this.bones[n]).name === t) return e } }), xe.prototype = Object.assign(Object.create(M.prototype), { constructor: xe, isBone: !0 }), we.prototype = Object.create(V.prototype), we.prototype.constructor = we, we.prototype.isLineBasicMaterial = !0, we.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.linewidth = t.linewidth, this.linecap = t.linecap, this.linejoin = t.linejoin, this }, Te.prototype = Object.assign(Object.create(M.prototype), { constructor: Te, isLine: !0, computeLineDistances: function () { var t = new s, e = new s; return function () { var n = this.geometry; if (n.isBufferGeometry) if (null === n.index) { for (var i = n.attributes.position, r = [0], o = 1, a = i.count; o < a; o++)t.fromBufferAttribute(i, o - 1), e.fromBufferAttribute(i, o), r[o] = r[o - 1], r[o] += t.distanceTo(e); n.addAttribute("lineDistance", new G(r, 1)) } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); else if (n.isGeometry) { var s = n.vertices; (r = n.lineDistances)[0] = 0; for (o = 1, a = s.length; o < a; o++)r[o] = r[o - 1], r[o] += s[o - 1].distanceTo(s[o]) } return this } }(), raycast: function () { var t = new o, e = new X, n = new m; return function (i, r) { var o = i.linePrecision, a = this.geometry, c = this.matrixWorld; if (null === a.boundingSphere && a.computeBoundingSphere(), n.copy(a.boundingSphere), n.applyMatrix4(c), n.radius += o, !1 !== i.ray.intersectsSphere(n)) { t.getInverse(c), e.copy(i.ray).applyMatrix4(t); var u = o / ((this.scale.x + this.scale.y + this.scale.z) / 3), l = u * u, h = new s, f = new s, p = new s, d = new s, m = this && this.isLineSegments ? 2 : 1; if (a.isBufferGeometry) { var v = a.index, g = a.attributes.position.array; if (null !== v) for (var y = v.array, b = 0, _ = y.length - 1; b < _; b += m) { var x = y[b], w = y[b + 1]; if (h.fromArray(g, 3 * x), f.fromArray(g, 3 * w), !(e.distanceSqToSegment(h, f, d, p) > l)) d.applyMatrix4(this.matrixWorld), (M = i.ray.origin.distanceTo(d)) < i.near || M > i.far || r.push({ distance: M, point: p.clone().applyMatrix4(this.matrixWorld), index: b, face: null, faceIndex: null, object: this }) } else for (b = 0, _ = g.length / 3 - 1; b < _; b += m) { if (h.fromArray(g, 3 * b), f.fromArray(g, 3 * b + 3), !(e.distanceSqToSegment(h, f, d, p) > l)) d.applyMatrix4(this.matrixWorld), (M = i.ray.origin.distanceTo(d)) < i.near || M > i.far || r.push({ distance: M, point: p.clone().applyMatrix4(this.matrixWorld), index: b, face: null, faceIndex: null, object: this }) } } else if (a.isGeometry) { var T = a.vertices, S = T.length; for (b = 0; b < S - 1; b += m)if (!(e.distanceSqToSegment(T[b], T[b + 1], d, p) > l)) { var M; d.applyMatrix4(this.matrixWorld), (M = i.ray.origin.distanceTo(d)) < i.near || M > i.far || r.push({ distance: M, point: p.clone().applyMatrix4(this.matrixWorld), index: b, face: null, faceIndex: null, object: this }) } } } } }(), copy: function (t) { return M.prototype.copy.call(this, t), this.geometry.copy(t.geometry), this.material.copy(t.material), this }, clone: function () { return (new this.constructor).copy(this) } }), Se.prototype = Object.assign(Object.create(Te.prototype), { constructor: Se, isLineSegments: !0, computeLineDistances: function () { var t = new s, e = new s; return function () { var n = this.geometry; if (n.isBufferGeometry) if (null === n.index) { for (var i = n.attributes.position, r = [], o = 0, a = i.count; o < a; o += 2)t.fromBufferAttribute(i, o), e.fromBufferAttribute(i, o + 1), r[o] = 0 == o ? 0 : r[o - 1], r[o + 1] = r[o] + t.distanceTo(e); n.addAttribute("lineDistance", new G(r, 1)) } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); else if (n.isGeometry) { var s = n.vertices; for (r = n.lineDistances, o = 0, a = s.length; o < a; o += 2)t.copy(s[o]), e.copy(s[o + 1]), r[o] = 0 == o ? 0 : r[o - 1], r[o + 1] = r[o] + t.distanceTo(e) } return this } }() }), Me.prototype = Object.assign(Object.create(Te.prototype), { constructor: Me, isLineLoop: !0 }), Pe.prototype = Object.create(V.prototype), Pe.prototype.constructor = Pe, Pe.prototype.isPointsMaterial = !0, Pe.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, this.size = t.size, this.sizeAttenuation = t.sizeAttenuation, this.morphTargets = t.morphTargets, this }, Ee.prototype = Object.assign(Object.create(M.prototype), { constructor: Ee, isPoints: !0, raycast: function () { var t = new o, e = new X, n = new m; return function (i, r) { function o(t, n) { var o = e.distanceSqToPoint(t); if (o < f) { e.closestPointToPoint(t, d), d.applyMatrix4(u); var s = i.ray.origin.distanceTo(d); if (s < i.near || s > i.far) return; r.push({ distance: s, distanceToRay: Ho(o), point: d.clone(), index: n, face: null, object: a }) } } var a = this, c = this.geometry, u = this.matrixWorld, l = i.params.Points.threshold; if (null === c.boundingSphere && c.computeBoundingSphere(), n.copy(c.boundingSphere), n.applyMatrix4(u), n.radius += l, !1 !== i.ray.intersectsSphere(n)) { t.getInverse(u), e.copy(i.ray).applyMatrix4(t); var h = l / ((this.scale.x + this.scale.y + this.scale.z) / 3), f = h * h, p = new s, d = new s; if (c.isBufferGeometry) { var m = c.index, v = c.attributes.position.array; if (null !== m) for (var g, y = m.array, b = 0, _ = y.length; b < _; b++)g = y[b], p.fromArray(v, 3 * g), o(p, g); else { b = 0; for (var x = v.length / 3; b < x; b++)p.fromArray(v, 3 * b), o(p, b) } } else { var w = c.vertices; for (b = 0, x = w.length; b < x; b++)o(w[b], b) } } } }(), clone: function () { return new this.constructor(this.geometry, this.material).copy(this) } }), Ae.prototype = Object.assign(Object.create(u.prototype), { constructor: Ae, isVideoTexture: !0, update: function () { var t = this.image; t.readyState >= t.HAVE_CURRENT_DATA && (this.needsUpdate = !0) } }), Ce.prototype = Object.create(u.prototype), Ce.prototype.constructor = Ce, Ce.prototype.isCompressedTexture = !0, Le.prototype = Object.create(u.prototype), Le.prototype.constructor = Le, Le.prototype.isCanvasTexture = !0, Re.prototype = Object.create(u.prototype), Re.prototype.constructor = Re, Re.prototype.isDepthTexture = !0, Oe.prototype = Object.create(H.prototype), Oe.prototype.constructor = Oe, Ie.prototype = Object.create(P.prototype), Ie.prototype.constructor = Ie, De.prototype = Object.create(H.prototype), De.prototype.constructor = De, Ge.prototype = Object.create(P.prototype), Ge.prototype.constructor = Ge, Be.prototype = Object.create(H.prototype), Be.prototype.constructor = Be, ke.prototype = Object.create(P.prototype), ke.prototype.constructor = ke, Ne.prototype = Object.create(Be.prototype), Ne.prototype.constructor = Ne, He.prototype = Object.create(P.prototype), He.prototype.constructor = He, Fe.prototype = Object.create(Be.prototype), Fe.prototype.constructor = Fe, Ue.prototype = Object.create(P.prototype), Ue.prototype.constructor = Ue, ze.prototype = Object.create(Be.prototype), ze.prototype.constructor = ze, je.prototype = Object.create(P.prototype), je.prototype.constructor = je, Ve.prototype = Object.create(Be.prototype), Ve.prototype.constructor = Ve, We.prototype = Object.create(P.prototype), We.prototype.constructor = We, Xe.prototype = Object.create(H.prototype), Xe.prototype.constructor = Xe, qe.prototype = Object.create(P.prototype), qe.prototype.constructor = qe, Ye.prototype = Object.create(H.prototype), Ye.prototype.constructor = Ye, $e.prototype = Object.create(P.prototype), $e.prototype.constructor = $e, Ze.prototype = Object.create(H.prototype), Ze.prototype.constructor = Ze; var eu = function (t, e, n) { n = n || 2; var i, r, o, a, s, c, u, l = e && e.length, h = l ? e[0] * n : t.length, f = Ke(t, 0, h, n, !0), p = []; if (!f) return p; if (l && (f = function (t, e, n, i) { var r, o, a, s = []; for (r = 0, o = e.length; r < o; r++)(a = Ke(t, e[r] * i, r < o - 1 ? e[r + 1] * i : t.length, i, !1)) === a.next && (a.steiner = !0), s.push(cn(a)); for (s.sort(on), r = 0; r < s.length; r++)an(s[r], n), n = Je(n, n.next); return n }(t, e, f, n)), t.length > 80 * n) { i = o = t[0], r = a = t[1]; for (var d = n; d < h; d += n)s = t[d], c = t[d + 1], s < i && (i = s), c < r && (r = c), s > o && (o = s), c > a && (a = c); u = 0 === (u = No(o - i, a - r)) ? 0 : 1 / u } return Qe(f, p, n, i, r, u), p }, nu = { area: function (t) { for (var e = t.length, n = 0, i = e - 1, r = 0; r < e; i = r++)n += t[i].x * t[r].y - t[r].x * t[i].y; return .5 * n }, isClockWise: function (t) { return 0 > nu.area(t) }, triangulateShape: function (t, e) { var n = [], i = [], r = []; bn(t), _n(n, t); var o = t.length; e.forEach(bn); for (var a = 0; a < e.length; a++)i.push(o), o += e[a].length, _n(n, e[a]); var s = eu(n, i); for (a = 0; a < s.length; a += 3)r.push(s.slice(a, a + 3)); return r } }; xn.prototype = Object.create(P.prototype), xn.prototype.constructor = xn, xn.prototype.toJSON = function () { var t = P.prototype.toJSON.call(this); return Tn(this.parameters.shapes, this.parameters.options, t) }, wn.prototype = Object.create(H.prototype), wn.prototype.constructor = wn, wn.prototype.toJSON = function () { var t = H.prototype.toJSON.call(this); return Tn(this.parameters.shapes, this.parameters.options, t) }; var iu = { generateTopUV: function (t, e, n, i, o) { var a = e[3 * n], s = e[3 * n + 1], c = e[3 * i], u = e[3 * i + 1], l = e[3 * o], h = e[3 * o + 1]; return [new r(a, s), new r(c, u), new r(l, h)] }, generateSideWallUV: function (t, e, n, i, o, a) { var s = e[3 * n], c = e[3 * n + 1], u = e[3 * n + 2], l = e[3 * i], h = e[3 * i + 1], f = e[3 * i + 2], p = e[3 * o], d = e[3 * o + 1], m = e[3 * o + 2], v = e[3 * a], g = e[3 * a + 1], y = e[3 * a + 2]; return .01 > Wo(c - h) ? [new r(s, 1 - u), new r(l, 1 - f), new r(p, 1 - m), new r(v, 1 - y)] : [new r(c, 1 - u), new r(h, 1 - f), new r(d, 1 - m), new r(g, 1 - y)] } }; Sn.prototype = Object.create(P.prototype), Sn.prototype.constructor = Sn, Mn.prototype = Object.create(wn.prototype), Mn.prototype.constructor = Mn, Pn.prototype = Object.create(P.prototype), Pn.prototype.constructor = Pn, En.prototype = Object.create(H.prototype), En.prototype.constructor = En, An.prototype = Object.create(P.prototype), An.prototype.constructor = An, Cn.prototype = Object.create(H.prototype), Cn.prototype.constructor = Cn, Ln.prototype = Object.create(P.prototype), Ln.prototype.constructor = Ln, Rn.prototype = Object.create(H.prototype), Rn.prototype.constructor = Rn, On.prototype = Object.create(P.prototype), On.prototype.constructor = On, On.prototype.toJSON = function () { var t = P.prototype.toJSON.call(this); return Dn(this.parameters.shapes, t) }, In.prototype = Object.create(H.prototype), In.prototype.constructor = In, In.prototype.toJSON = function () { var t = H.prototype.toJSON.call(this); return Dn(this.parameters.shapes, t) }, Gn.prototype = Object.create(H.prototype), Gn.prototype.constructor = Gn, Bn.prototype = Object.create(P.prototype), Bn.prototype.constructor = Bn, kn.prototype = Object.create(H.prototype), kn.prototype.constructor = kn, Nn.prototype = Object.create(Bn.prototype), Nn.prototype.constructor = Nn, Hn.prototype = Object.create(kn.prototype), Hn.prototype.constructor = Hn, Fn.prototype = Object.create(P.prototype), Fn.prototype.constructor = Fn, Un.prototype = Object.create(H.prototype), Un.prototype.constructor = Un; var ru = Object.freeze({ WireframeGeometry: Oe, ParametricGeometry: Ie, ParametricBufferGeometry: De, TetrahedronGeometry: ke, TetrahedronBufferGeometry: Ne, OctahedronGeometry: He, OctahedronBufferGeometry: Fe, IcosahedronGeometry: Ue, IcosahedronBufferGeometry: ze, DodecahedronGeometry: je, DodecahedronBufferGeometry: Ve, PolyhedronGeometry: Ge, PolyhedronBufferGeometry: Be, TubeGeometry: We, TubeBufferGeometry: Xe, TorusKnotGeometry: qe, TorusKnotBufferGeometry: Ye, TorusGeometry: $e, TorusBufferGeometry: Ze, TextGeometry: Sn, TextBufferGeometry: Mn, SphereGeometry: Pn, SphereBufferGeometry: En, RingGeometry: An, RingBufferGeometry: Cn, PlaneGeometry: z, PlaneBufferGeometry: j, LatheGeometry: Ln, LatheBufferGeometry: Rn, ShapeGeometry: On, ShapeBufferGeometry: In, ExtrudeGeometry: xn, ExtrudeBufferGeometry: wn, EdgesGeometry: Gn, ConeGeometry: Nn, ConeBufferGeometry: Hn, CylinderGeometry: Bn, CylinderBufferGeometry: kn, CircleGeometry: Fn, CircleBufferGeometry: Un, BoxGeometry: F, BoxBufferGeometry: U }); zn.prototype = Object.create(V.prototype), zn.prototype.constructor = zn, zn.prototype.isShadowMaterial = !0, zn.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this }, jn.prototype = Object.create(W.prototype), jn.prototype.constructor = jn, jn.prototype.isRawShaderMaterial = !0, Vn.prototype = Object.create(V.prototype), Vn.prototype.constructor = Vn, Vn.prototype.isMeshStandardMaterial = !0, Vn.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.defines = { STANDARD: "" }, this.color.copy(t.color), this.roughness = t.roughness, this.metalness = t.metalness, this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), this.emissiveMap = t.emissiveMap, this.emissiveIntensity = t.emissiveIntensity, this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.roughnessMap = t.roughnessMap, this.metalnessMap = t.metalnessMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.envMapIntensity = t.envMapIntensity, this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this }, Wn.prototype = Object.create(Vn.prototype), Wn.prototype.constructor = Wn, Wn.prototype.isMeshPhysicalMaterial = !0, Wn.prototype.copy = function (t) { return Vn.prototype.copy.call(this, t), this.defines = { PHYSICAL: "" }, this.reflectivity = t.reflectivity, this.clearCoat = t.clearCoat, this.clearCoatRoughness = t.clearCoatRoughness, this }, Xn.prototype = Object.create(V.prototype), Xn.prototype.constructor = Xn, Xn.prototype.isMeshPhongMaterial = !0, Xn.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.specular.copy(t.specular), this.shininess = t.shininess, this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), this.emissiveMap = t.emissiveMap, this.emissiveIntensity = t.emissiveIntensity, this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this }, qn.prototype = Object.create(Xn.prototype), qn.prototype.constructor = qn, qn.prototype.isMeshToonMaterial = !0, qn.prototype.copy = function (t) { return Xn.prototype.copy.call(this, t), this.gradientMap = t.gradientMap, this }, Yn.prototype = Object.create(V.prototype), Yn.prototype.constructor = Yn, Yn.prototype.isMeshNormalMaterial = !0, Yn.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this }, $n.prototype = Object.create(V.prototype), $n.prototype.constructor = $n, $n.prototype.isMeshLambertMaterial = !0, $n.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), this.emissiveMap = t.emissiveMap, this.emissiveIntensity = t.emissiveIntensity, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this }, Zn.prototype = Object.create(V.prototype), Zn.prototype.constructor = Zn, Zn.prototype.isMeshMatcapMaterial = !0, Zn.prototype.copy = function (t) { return V.prototype.copy.call(this, t), this.defines = { MATCAP: "" }, this.color.copy(t.color), this.matcap = t.matcap, this.map = t.map, this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.alphaMap = t.alphaMap, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this }, Kn.prototype = Object.create(we.prototype), Kn.prototype.constructor = Kn, Kn.prototype.isLineDashedMaterial = !0, Kn.prototype.copy = function (t) { return we.prototype.copy.call(this, t), this.scale = t.scale, this.dashSize = t.dashSize, this.gapSize = t.gapSize, this }; var ou = Object.freeze({ ShadowMaterial: zn, SpriteMaterial: ve, RawShaderMaterial: jn, ShaderMaterial: W, PointsMaterial: Pe, MeshPhysicalMaterial: Wn, MeshStandardMaterial: Vn, MeshPhongMaterial: Xn, MeshToonMaterial: qn, MeshNormalMaterial: Yn, MeshLambertMaterial: $n, MeshDepthMaterial: Qt, MeshDistanceMaterial: te, MeshBasicMaterial: Y, MeshMatcapMaterial: Zn, LineDashedMaterial: Kn, LineBasicMaterial: we, Material: V }), au = { arraySlice: function (t, e, n) { return au.isTypedArray(t) ? new t.constructor(t.subarray(e, void 0 === n ? t.length : n)) : t.slice(e, n) }, convertArray: function (t, e, n) { return t && (n || t.constructor !== e) ? "number" == typeof e.BYTES_PER_ELEMENT ? new e(t) : Array.prototype.slice.call(t) : t }, isTypedArray: function (t) { return ArrayBuffer.isView(t) && !(t instanceof DataView) }, getKeyframeOrder: function (t) { for (var e = t.length, n = Array(e), i = 0; i !== e; ++i)n[i] = i; return n.sort(function (e, n) { return t[e] - t[n] }), n }, sortedArray: function (t, e, n) { for (var i, r = t.length, o = new t.constructor(r), a = 0, s = 0; s !== r; ++a) { i = n[a] * e; for (var c = 0; c !== e; ++c)o[s++] = t[i + c] } return o }, flattenJSON: function (t, e, n, i) { for (var r = 1, o = t[0]; void 0 !== o && void 0 === o[i];)o = t[r++]; if (void 0 !== o) { var a = o[i]; if (void 0 !== a) if (Array.isArray(a)) do { void 0 !== (a = o[i]) && (e.push(o.time), n.push.apply(n, a)), o = t[r++] } while (void 0 !== o); else if (void 0 !== a.toArray) do { void 0 !== (a = o[i]) && (e.push(o.time), a.toArray(n, n.length)), o = t[r++] } while (void 0 !== o); else do { void 0 !== (a = o[i]) && (e.push(o.time), n.push(a)), o = t[r++] } while (void 0 !== o) } } }; Object.assign(Jn.prototype, { evaluate: function (t) { var e = this.parameterPositions, n = this._cachedIndex, i = e[n], r = e[n - 1]; t: { e: { var o; n: { i: if (!(t < i)) { for (var a = n + 2; ;) { if (void 0 === i) { if (t < r) break i; return n = e.length, this._cachedIndex = n, this.afterEnd_(n - 1, t, r) } if (n === a) break; if (r = i, t < (i = e[++n])) break e } o = e.length; break n } if (t >= r) break t; var s = e[1]; t < s && (n = 2, r = s); for (a = n - 2; ;) { if (void 0 === r) return this._cachedIndex = 0, this.beforeStart_(0, t, i); if (n === a) break; if (i = r, t >= (r = e[--n - 1])) break e } o = n, n = 0 } for (; n < o;) { var c = n + o >>> 1; t < e[c] ? o = c : n = c + 1 } if (i = e[n], void 0 === (r = e[n - 1])) return this._cachedIndex = 0, this.beforeStart_(0, t, i); if (void 0 === i) return n = e.length, this._cachedIndex = n, this.afterEnd_(n - 1, r, t) } this._cachedIndex = n, this.intervalChanged_(n, r, i) } return this.interpolate_(n, r, t, i) }, settings: null, DefaultSettings_: {}, getSettings_: function () { return this.settings || this.DefaultSettings_ }, copySampleValue_: function (t) { for (var e = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = 0; r !== i; ++r)e[r] = n[t * i + r]; return e }, interpolate_: function () { throw new Error("call to abstract method") }, intervalChanged_: function () { } }), Object.assign(Jn.prototype, { beforeStart_: Jn.prototype.copySampleValue_, afterEnd_: Jn.prototype.copySampleValue_ }), Qn.prototype = Object.assign(Object.create(Jn.prototype), { constructor: Qn, DefaultSettings_: { endingStart: lc, endingEnd: lc }, intervalChanged_: function (t, e, n) { var i = this.parameterPositions, r = t - 2, o = t + 1, a = i[r], s = i[o]; if (void 0 === a) switch (this.getSettings_().endingStart) { case hc: r = t, a = 2 * e - n; break; case fc: a = e + i[r = i.length - 2] - i[r + 1]; break; default: r = t, a = n }if (void 0 === s) switch (this.getSettings_().endingEnd) { case hc: o = t, s = 2 * n - e; break; case fc: o = 1, s = n + i[1] - i[0]; break; default: o = t - 1, s = e }var c = .5 * (n - e), u = this.valueSize; this._weightPrev = c / (e - a), this._weightNext = c / (s - n), this._offsetPrev = r * u, this._offsetNext = o * u }, interpolate_: function (t, e, n, i) { for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = t * a, c = this._offsetPrev, u = this._offsetNext, l = this._weightPrev, h = this._weightNext, f = (n - e) / (i - e), p = f * f, d = p * f, m = 0; m !== a; ++m)r[m] = (-l * d + 2 * l * p - l * f) * o[c + m] + ((1 + l) * d + (-1.5 - 2 * l) * p + (-.5 + l) * f + 1) * o[s - a + m] + ((-1 - h) * d + (1.5 + h) * p + .5 * f) * o[s + m] + (h * d - h * p) * o[u + m]; return r } }), ti.prototype = Object.assign(Object.create(Jn.prototype), { constructor: ti, interpolate_: function (t, e, n, i) { for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = t * a, c = (n - e) / (i - e), u = 0; u !== a; ++u)r[u] = o[s - a + u] * (1 - c) + o[s + u] * c; return r } }), ei.prototype = Object.assign(Object.create(Jn.prototype), { constructor: ei, interpolate_: function (t) { return this.copySampleValue_(t - 1) } }), Object.assign(ni, { toJSON: function (t) { var e, n = t.constructor; if (void 0 !== n.toJSON) e = n.toJSON(t); else { e = { name: t.name, times: au.convertArray(t.times, Array), values: au.convertArray(t.values, Array) }; var i = t.getInterpolation(); i !== t.DefaultInterpolation && (e.interpolation = i) } return e.type = t.ValueTypeName, e } }), Object.assign(ni.prototype, { constructor: ni, TimeBufferType: Float32Array, ValueBufferType: Float32Array, DefaultInterpolation: cc, InterpolantFactoryMethodDiscrete: function (t) { return new ei(this.times, this.values, this.getValueSize(), t) }, InterpolantFactoryMethodLinear: function (t) { return new ti(this.times, this.values, this.getValueSize(), t) }, InterpolantFactoryMethodSmooth: function (t) { return new Qn(this.times, this.values, this.getValueSize(), t) }, setInterpolation: function (t) { var e; if (t === sc ? e = this.InterpolantFactoryMethodDiscrete : t === cc ? e = this.InterpolantFactoryMethodLinear : t === uc && (e = this.InterpolantFactoryMethodSmooth), void 0 === e) { var n = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name; if (void 0 === this.createInterpolant) { if (t === this.DefaultInterpolation) throw new Error(n); this.setInterpolation(this.DefaultInterpolation) } return console.warn("THREE.KeyframeTrack:", n), this } return this.createInterpolant = e, this }, getInterpolation: function () { switch (this.createInterpolant) { case this.InterpolantFactoryMethodDiscrete: return sc; case this.InterpolantFactoryMethodLinear: return cc; case this.InterpolantFactoryMethodSmooth: return uc } }, getValueSize: function () { return this.values.length / this.times.length }, shift: function (t) { if (0 !== t) for (var e = this.times, n = 0, i = e.length; n !== i; ++n)e[n] += t; return this }, scale: function (t) { if (1 !== t) for (var e = this.times, n = 0, i = e.length; n !== i; ++n)e[n] *= t; return this }, trim: function (t, e) { for (var n = this.times, i = n.length, r = 0, o = i - 1; r !== i && n[r] < t;)++r; for (; -1 !== o && n[o] > e;)--o; if (++o, 0 !== r || o !== i) { r >= o && (r = (o = No(o, 1)) - 1); var a = this.getValueSize(); this.times = au.arraySlice(n, r, o), this.values = au.arraySlice(this.values, r * a, o * a) } return this }, validate: function () { var t = !0, e = this.getValueSize(); 0 != e - Bo(e) && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), t = !1); var n = this.times, i = this.values, r = n.length; 0 === r && (console.error("THREE.KeyframeTrack: Track is empty.", this), t = !1); for (var o, a = null, s = 0; s !== r; s++) { if ("number" == typeof (o = n[s]) && isNaN(o)) { console.error("THREE.KeyframeTrack: Time is not a valid number.", this, s, o), t = !1; break } if (null !== a && a > o) { console.error("THREE.KeyframeTrack: Out of order keys.", this, s, o, a), t = !1; break } a = o } if (void 0 !== i && au.isTypedArray(i)) { s = 0; for (var c, u = i.length; s !== u; ++s)if (c = i[s], isNaN(c)) { console.error("THREE.KeyframeTrack: Value is not a valid number.", this, s, c), t = !1; break } } return t }, optimize: function () { for (var t = this.times, e = this.values, n = this.getValueSize(), i = this.getInterpolation() === uc, r = 1, o = t.length - 1, a = 1; a < o; ++a) { var s = !1, c = t[a]; if (c !== t[a + 1] && (1 !== a || c !== c[0])) if (i) s = !0; else for (var u, l = a * n, h = 0; h !== n; ++h)if ((u = e[l + h]) !== e[l - n + h] || u !== e[l + n + h]) { s = !0; break } if (s) { if (a !== r) { t[r] = t[a]; var f = a * n, p = r * n; for (h = 0; h !== n; ++h)e[p + h] = e[f + h] } ++r } } if (0 < o) { t[r] = t[o]; for (f = o * n, p = r * n, h = 0; h !== n; ++h)e[p + h] = e[f + h]; ++r } return r !== t.length && (this.times = au.arraySlice(t, 0, r), this.values = au.arraySlice(e, 0, r * n)), this } }), ii.prototype = Object.assign(Object.create(ni.prototype), { constructor: ii, ValueTypeName: "bool", ValueBufferType: Array, DefaultInterpolation: sc, InterpolantFactoryMethodLinear: void 0, InterpolantFactoryMethodSmooth: void 0 }), ri.prototype = Object.assign(Object.create(ni.prototype), { constructor: ri, ValueTypeName: "color" }), oi.prototype = Object.assign(Object.create(ni.prototype), { constructor: oi, ValueTypeName: "number" }), ai.prototype = Object.assign(Object.create(Jn.prototype), { constructor: ai, interpolate_: function (t, e, n, i) { for (var r = this.resultBuffer, o = this.sampleValues, s = this.valueSize, c = t * s, u = c + s; c !== u; c += 4)a.slerpFlat(r, 0, o, c - s, o, c, (n - e) / (i - e)); return r } }), si.prototype = Object.assign(Object.create(ni.prototype), { constructor: si, ValueTypeName: "quaternion", DefaultInterpolation: cc, InterpolantFactoryMethodLinear: function (t) { return new ai(this.times, this.values, this.getValueSize(), t) }, InterpolantFactoryMethodSmooth: void 0 }), ci.prototype = Object.assign(Object.create(ni.prototype), { constructor: ci, ValueTypeName: "string", ValueBufferType: Array, DefaultInterpolation: sc, InterpolantFactoryMethodLinear: void 0, InterpolantFactoryMethodSmooth: void 0 }), ui.prototype = Object.assign(Object.create(ni.prototype), { constructor: ui, ValueTypeName: "vector" }), Object.assign(li, { parse: function (t) { for (var e = [], n = t.tracks, i = 1 / (t.fps || 1), r = 0, o = n.length; r !== o; ++r)e.push(hi(n[r]).scale(i)); return new li(t.name, t.duration, e) }, toJSON: function (t) { for (var e = [], n = t.tracks, i = { name: t.name, duration: t.duration, tracks: e, uuid: t.uuid }, r = 0, o = n.length; r !== o; ++r)e.push(ni.toJSON(n[r])); return i }, CreateFromMorphTargetSequence: function (t, e, n, i) { for (var r = e.length, o = [], a = 0; a < r; a++) { var s = [], c = []; s.push((a + r - 1) % r, a, (a + 1) % r), c.push(0, 1, 0); var u = au.getKeyframeOrder(s); s = au.sortedArray(s, 1, u), c = au.sortedArray(c, 1, u), i || 0 !== s[0] || (s.push(r), c.push(c[0])), o.push(new oi(".morphTargetInfluences[" + e[a].name + "]", s, c).scale(1 / n)) } return new li(t, -1, o) }, findByName: function (t, e) { var n = t; if (!Array.isArray(t)) { var i = t; n = i.geometry && i.geometry.animations || i.animations } for (var r = 0; r < n.length; r++)if (n[r].name === e) return n[r]; return null }, CreateClipsFromMorphTargetSequences: function (t, e, n) { for (var i = {}, r = /^([\w-]*?)([\d]+)$/, o = 0, a = t.length; o < a; o++) { var s = t[o], c = s.name.match(r); if (c && 1 < c.length) { var u = i[h = c[1]]; u || (i[h] = u = []), u.push(s) } } var l = []; for (var h in i) l.push(li.CreateFromMorphTargetSequence(h, i[h], e, n)); return l }, parseAnimation: function (t, e) { if (!t) return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null; for (var n, i = function (t, e, n, i, r) { if (0 !== n.length) { var o = [], a = []; au.flattenJSON(n, o, a, i), 0 !== o.length && r.push(new t(e, o, a)) } }, r = [], o = t.name || "default", a = t.length || -1, s = t.fps || 30, c = t.hierarchy || [], u = 0; u < c.length; u++)if ((n = c[u].keys) && 0 !== n.length) if (n[0].morphTargets) { for (var l = {}, h = 0; h < n.length; h++)if (n[h].morphTargets) for (var f = 0; f < n[h].morphTargets.length; f++)l[n[h].morphTargets[f]] = -1; for (var p in l) { var d, m = [], v = []; for (f = 0; f !== n[h].morphTargets.length; ++f)d = n[h], m.push(d.time), v.push(d.morphTarget === p ? 1 : 0); r.push(new oi(".morphTargetInfluence[" + p + "]", m, v)) } a = l.length * (s || 1) } else { var g = ".bones[" + e[u].name + "]"; i(ui, g + ".position", n, "pos", r), i(si, g + ".quaternion", n, "rot", r), i(ui, g + ".scale", n, "scl", r) } return 0 === r.length ? null : new li(o, a, r) } }), Object.assign(li.prototype, { resetDuration: function () { for (var t, e = 0, n = 0, i = this.tracks.length; n !== i; ++n)t = this.tracks[n], e = No(e, t.times[t.times.length - 1]); return this.duration = e, this }, trim: function () { for (var t = 0; t < this.tracks.length; t++)this.tracks[t].trim(0, this.duration); return this }, validate: function () { for (var t = !0, e = 0; e < this.tracks.length; e++)t = t && this.tracks[e].validate(); return t }, optimize: function () { for (var t = 0; t < this.tracks.length; t++)this.tracks[t].optimize(); return this } }); var su = { enabled: !1, files: {}, add: function (t, e) { !1 === this.enabled || (this.files[t] = e) }, get: function (t) { return !1 === this.enabled ? void 0 : this.files[t] }, remove: function (t) { delete this.files[t] }, clear: function () { this.files = {} } }, cu = new fi, uu = {}; Object.assign(pi.prototype, { load: function (t, e, n, i) { void 0 === t && (t = ""), void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t); var r = this, o = su.get(t); if (void 0 !== o) return r.manager.itemStart(t), setTimeout(function () { e && e(o), r.manager.itemEnd(t) }, 0), o; if (void 0 === uu[t]) { var a = t.match(/^data:(.*?)(;base64)?,(.*)$/); if (a) { var s = a[1], c = !!a[2], u = a[3]; u = decodeURIComponent(u), c && (u = atob(u)); try { var l, h = (this.responseType || "").toLowerCase(); switch (h) { case "arraybuffer": case "blob": for (var f = new Uint8Array(u.length), p = 0; p < u.length; p++)f[p] = u.charCodeAt(p); l = "blob" === h ? new Blob([f.buffer], { type: s }) : f.buffer; break; case "document": var d = new DOMParser; l = d.parseFromString(u, s); break; case "json": l = JSON.parse(u); break; default: l = u }setTimeout(function () { e && e(l), r.manager.itemEnd(t) }, 0) } catch (e) { setTimeout(function () { i && i(e), r.manager.itemError(t), r.manager.itemEnd(t) }, 0) } } else { uu[t] = [], uu[t].push({ onLoad: e, onProgress: n, onError: i }); var m = new XMLHttpRequest; for (var v in m.open("GET", t, !0), m.addEventListener("load", function (e) { var n = this.response; su.add(t, n); var i = uu[t]; if (delete uu[t], 200 === this.status || 0 === this.status) { 0 === this.status && console.warn("THREE.FileLoader: HTTP Status 0 received."); for (var o = 0, a = i.length; o < a; o++)(s = i[o]).onLoad && s.onLoad(n); r.manager.itemEnd(t) } else { var s; for (o = 0, a = i.length; o < a; o++)(s = i[o]).onError && s.onError(e); r.manager.itemError(t), r.manager.itemEnd(t) } }, !1), m.addEventListener("progress", function (e) { for (var n, i = uu[t], r = 0, o = i.length; r < o; r++)(n = i[r]).onProgress && n.onProgress(e) }, !1), m.addEventListener("error", function (e) { var n = uu[t]; delete uu[t]; for (var i, o = 0, a = n.length; o < a; o++)(i = n[o]).onError && i.onError(e); r.manager.itemError(t), r.manager.itemEnd(t) }, !1), m.addEventListener("abort", function (e) { var n = uu[t]; delete uu[t]; for (var i, o = 0, a = n.length; o < a; o++)(i = n[o]).onError && i.onError(e); r.manager.itemError(t), r.manager.itemEnd(t) }, !1), void 0 !== this.responseType && (m.responseType = this.responseType), void 0 !== this.withCredentials && (m.withCredentials = this.withCredentials), m.overrideMimeType && m.overrideMimeType(void 0 === this.mimeType ? "text/plain" : this.mimeType), this.requestHeader) m.setRequestHeader(v, this.requestHeader[v]); m.send(null) } return r.manager.itemStart(t), m } uu[t].push({ onLoad: e, onProgress: n, onError: i }) }, setPath: function (t) { return this.path = t, this }, setResponseType: function (t) { return this.responseType = t, this }, setWithCredentials: function (t) { return this.withCredentials = t, this }, setMimeType: function (t) { return this.mimeType = t, this }, setRequestHeader: function (t) { return this.requestHeader = t, this } }), Object.assign(di.prototype, { load: function (t, e, n, i) { var r = this, o = new pi(r.manager); o.setPath(r.path), o.load(t, function (t) { e(r.parse(JSON.parse(t))) }, n, i) }, parse: function (t, e) { for (var n, i = [], r = 0; r < t.length; r++)n = li.parse(t[r]), i.push(n); e(i) }, setPath: function (t) { return this.path = t, this } }), Object.assign(mi.prototype, { load: function (t, e, n, i) { function r(r) { c.load(t[r], function (t) { var n = o._parser(t, !0); a[r] = { width: n.width, height: n.height, format: n.format, mipmaps: n.mipmaps }, 6 === (u += 1) && (1 === n.mipmapCount && (s.minFilter = hs), s.format = n.format, s.needsUpdate = !0, e && e(s)) }, n, i) } var o = this, a = [], s = new Ce; s.image = a; var c = new pi(this.manager); if (c.setPath(this.path), c.setResponseType("arraybuffer"), Array.isArray(t)) for (var u = 0, l = 0, h = t.length; l < h; ++l)r(l); else c.load(t, function (t) { var n = o._parser(t, !0); if (n.isCubemap) for (var i = n.mipmaps.length / n.mipmapCount, r = 0; r < i; r++) { a[r] = { mipmaps: [] }; for (var c = 0; c < n.mipmapCount; c++)a[r].mipmaps.push(n.mipmaps[r * n.mipmapCount + c]), a[r].format = n.format, a[r].width = n.width, a[r].height = n.height } else s.image.width = n.width, s.image.height = n.height, s.mipmaps = n.mipmaps; 1 === n.mipmapCount && (s.minFilter = hs), s.format = n.format, s.needsUpdate = !0, e && e(s) }, n, i); return s }, setPath: function (t) { return this.path = t, this } }), Object.assign(vi.prototype, { load: function (t, e, n, i) { var r = this, o = new p, a = new pi(this.manager); return a.setResponseType("arraybuffer"), a.setPath(this.path), a.load(t, function (t) { var n = r._parser(t); n && (void 0 === n.image ? void 0 !== n.data && (o.image.width = n.width, o.image.height = n.height, o.image.data = n.data) : o.image = n.image, o.wrapS = void 0 === n.wrapS ? as : n.wrapS, o.wrapT = void 0 === n.wrapT ? as : n.wrapT, o.magFilter = void 0 === n.magFilter ? hs : n.magFilter, o.minFilter = void 0 === n.minFilter ? ps : n.minFilter, o.anisotropy = void 0 === n.anisotropy ? 1 : n.anisotropy, void 0 !== n.format && (o.format = n.format), void 0 !== n.type && (o.type = n.type), void 0 !== n.mipmaps && (o.mipmaps = n.mipmaps), 1 === n.mipmapCount && (o.minFilter = hs), o.needsUpdate = !0, e && e(o, n)) }, n, i), o }, setPath: function (t) { return this.path = t, this } }), Object.assign(gi.prototype, { crossOrigin: "anonymous", load: function (t, e, n, i) { function r() { c.removeEventListener("load", r, !1), c.removeEventListener("error", o, !1), su.add(t, this), e && e(this), a.manager.itemEnd(t) } function o(e) { c.removeEventListener("load", r, !1), c.removeEventListener("error", o, !1), i && i(e), a.manager.itemError(t), a.manager.itemEnd(t) } void 0 === t && (t = ""), void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t); var a = this, s = su.get(t); if (void 0 !== s) return a.manager.itemStart(t), setTimeout(function () { e && e(s), a.manager.itemEnd(t) }, 0), s; var c = document.createElementNS("http://www.w3.org/1999/xhtml", "img"); return c.addEventListener("load", r, !1), c.addEventListener("error", o, !1), "data:" !== t.substr(0, 5) && void 0 !== this.crossOrigin && (c.crossOrigin = this.crossOrigin), a.manager.itemStart(t), c.src = t, c }, setCrossOrigin: function (t) { return this.crossOrigin = t, this }, setPath: function (t) { return this.path = t, this } }), Object.assign(yi.prototype, { crossOrigin: "anonymous", load: function (t, e, n, i) { function r(n) { a.load(t[n], function (t) { o.images[n] = t, 6 === ++s && (o.needsUpdate = !0, e && e(o)) }, void 0, i) } var o = new et, a = new gi(this.manager); a.setCrossOrigin(this.crossOrigin), a.setPath(this.path); for (var s = 0, c = 0; c < t.length; ++c)r(c); return o }, setCrossOrigin: function (t) { return this.crossOrigin = t, this }, setPath: function (t) { return this.path = t, this } }), Object.assign(bi.prototype, { crossOrigin: "anonymous", load: function (t, e, n, i) { var r = new u, o = new gi(this.manager); return o.setCrossOrigin(this.crossOrigin), o.setPath(this.path), o.load(t, function (n) { r.image = n; var i = 0 < t.search(/\.jpe?g($|\?)/i) || 0 === t.search(/^data\:image\/jpeg/); r.format = i ? Es : As, r.needsUpdate = !0, void 0 !== e && e(r) }, n, i), r }, setCrossOrigin: function (t) { return this.crossOrigin = t, this }, setPath: function (t) { return this.path = t, this } }), Object.assign(_i.prototype, { getPoint: function () { return console.warn("THREE.Curve: .getPoint() not implemented."), null }, getPointAt: function (t, e) { var n = this.getUtoTmapping(t); return this.getPoint(n, e) }, getPoints: function (t) { void 0 === t && (t = 5); for (var e = [], n = 0; n <= t; n++)e.push(this.getPoint(n / t)); return e }, getSpacedPoints: function (t) { void 0 === t && (t = 5); for (var e = [], n = 0; n <= t; n++)e.push(this.getPointAt(n / t)); return e }, getLength: function () { var t = this.getLengths(); return t[t.length - 1] }, getLengths: function (t) { if (void 0 === t && (t = this.arcLengthDivisions), this.cacheArcLengths && this.cacheArcLengths.length === t + 1 && !this.needsUpdate) return this.cacheArcLengths; this.needsUpdate = !1; var e, n, i = [], r = this.getPoint(0), o = 0; for (i.push(0), n = 1; n <= t; n++)o += (e = this.getPoint(n / t)).distanceTo(r), i.push(o), r = e; return this.cacheArcLengths = i, i }, updateArcLengths: function () { this.needsUpdate = !0, this.getLengths() }, getUtoTmapping: function (t, e) { var n, i = this.getLengths(), r = 0, o = i.length; n = e || t * i[o - 1]; for (var a, s = 0, c = o - 1; s <= c;)if (0 > (a = i[r = Bo(s + (c - s) / 2)] - n)) s = r + 1; else { if (!(0 < a)) { c = r; break } c = r - 1 } if (i[r = c] === n) return r / (o - 1); var u = i[r]; return (r + (n - u) / (i[r + 1] - u)) / (o - 1) }, getTangent: function (t) { var e = t - 1e-4, n = t + 1e-4; 0 > e && (e = 0), 1 < n && (n = 1); var i = this.getPoint(e); return this.getPoint(n).clone().sub(i).normalize() }, getTangentAt: function (t) { var e = this.getUtoTmapping(t); return this.getTangent(e) }, computeFrenetFrames: function (t, e) { var n, i, r, a = new s, c = [], u = [], l = [], h = new s, f = new o; for (n = 0; n <= t; n++)i = n / t, c[n] = this.getTangentAt(i), c[n].normalize(); u[0] = new s, l[0] = new s; var p = Number.MAX_VALUE, d = Wo(c[0].x), m = Wo(c[0].y), v = Wo(c[0].z); for (d <= p && (p = d, a.set(1, 0, 0)), m <= p && (p = m, a.set(0, 1, 0)), v <= p && a.set(0, 0, 1), h.crossVectors(c[0], a).normalize(), u[0].crossVectors(c[0], h), l[0].crossVectors(c[0], u[0]), n = 1; n <= t; n++)u[n] = u[n - 1].clone(), l[n] = l[n - 1].clone(), h.crossVectors(c[n - 1], c[n]), h.length() > Go && (h.normalize(), r = Co(Ac.clamp(c[n - 1].dot(c[n]), -1, 1)), u[n].applyMatrix4(f.makeRotationAxis(h, r))), l[n].crossVectors(c[n], u[n]); if (!0 === e) for (r = Co(Ac.clamp(u[0].dot(u[t]), -1, 1)), r /= t, 0 < c[0].dot(h.crossVectors(u[0], u[t])) && (r = -r), n = 1; n <= t; n++)u[n].applyMatrix4(f.makeRotationAxis(c[n], r * n)), l[n].crossVectors(c[n], u[n]); return { tangents: c, normals: u, binormals: l } }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.arcLengthDivisions = t.arcLengthDivisions, this }, toJSON: function () { return { metadata: { version: 4.5, type: "Curve", generator: "Curve.toJSON" }, arcLengthDivisions: this.arcLengthDivisions, type: this.type } }, fromJSON: function (t) { return this.arcLengthDivisions = t.arcLengthDivisions, this } }), xi.prototype = Object.create(_i.prototype), xi.prototype.constructor = xi, xi.prototype.isEllipseCurve = !0, xi.prototype.getPoint = function (t, e) { for (var n = e || new r, i = 2 * Fo, o = this.aEndAngle - this.aStartAngle, a = Wo(o) < Go; 0 > o;)o += i; for (; o > i;)o -= i; o < Go && (o = a ? 0 : i), !0 !== this.aClockwise || a || (o === i ? o = -i : o -= i); var s = this.aStartAngle + t * o, c = this.aX + this.xRadius * jo(s), u = this.aY + this.yRadius * zo(s); if (0 !== this.aRotation) { var l = jo(this.aRotation), h = zo(this.aRotation), f = c - this.aX, p = u - this.aY; c = f * l - p * h + this.aX, u = f * h + p * l + this.aY } return n.set(c, u) }, xi.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.aX = t.aX, this.aY = t.aY, this.xRadius = t.xRadius, this.yRadius = t.yRadius, this.aStartAngle = t.aStartAngle, this.aEndAngle = t.aEndAngle, this.aClockwise = t.aClockwise, this.aRotation = t.aRotation, this }, xi.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.aX = this.aX, t.aY = this.aY, t.xRadius = this.xRadius, t.yRadius = this.yRadius, t.aStartAngle = this.aStartAngle, t.aEndAngle = this.aEndAngle, t.aClockwise = this.aClockwise, t.aRotation = this.aRotation, t }, xi.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.aX = t.aX, this.aY = t.aY, this.xRadius = t.xRadius, this.yRadius = t.yRadius, this.aStartAngle = t.aStartAngle, this.aEndAngle = t.aEndAngle, this.aClockwise = t.aClockwise, this.aRotation = t.aRotation, this }, wi.prototype = Object.create(xi.prototype), wi.prototype.constructor = wi, wi.prototype.isArcCurve = !0; var lu = new s, hu = new Ti, fu = new Ti, pu = new Ti; Si.prototype = Object.create(_i.prototype), Si.prototype.constructor = Si, Si.prototype.isCatmullRomCurve3 = !0, Si.prototype.getPoint = function (t, e) { var n, i, r, o, a = e || new s, c = this.points, u = c.length, l = (u - (this.closed ? 0 : 1)) * t, h = Bo(l), f = l - h; if (this.closed ? h += 0 < h ? 0 : (Bo(Wo(h) / u) + 1) * u : 0 == f && h === u - 1 && (h = u - 2, f = 1), this.closed || 0 < h ? n = c[(h - 1) % u] : (lu.subVectors(c[0], c[1]).add(c[0]), n = lu), i = c[h % u], r = c[(h + 1) % u], this.closed || h + 2 < u ? o = c[(h + 2) % u] : (lu.subVectors(c[u - 1], c[u - 2]).add(c[u - 1]), o = lu), "centripetal" === this.curveType || "chordal" === this.curveType) { var p = "chordal" === this.curveType ? .5 : .25, d = Lo(n.distanceToSquared(i), p), m = Lo(i.distanceToSquared(r), p), v = Lo(r.distanceToSquared(o), p); 1e-4 > m && (m = 1), 1e-4 > d && (d = m), 1e-4 > v && (v = m), hu.initNonuniformCatmullRom(n.x, i.x, r.x, o.x, d, m, v), fu.initNonuniformCatmullRom(n.y, i.y, r.y, o.y, d, m, v), pu.initNonuniformCatmullRom(n.z, i.z, r.z, o.z, d, m, v) } else "catmullrom" === this.curveType && (hu.initCatmullRom(n.x, i.x, r.x, o.x, this.tension), fu.initCatmullRom(n.y, i.y, r.y, o.y, this.tension), pu.initCatmullRom(n.z, i.z, r.z, o.z, this.tension)); return a.set(hu.calc(f), fu.calc(f), pu.calc(f)), a }, Si.prototype.copy = function (t) { _i.prototype.copy.call(this, t), this.points = []; for (var e, n = 0, i = t.points.length; n < i; n++)e = t.points[n], this.points.push(e.clone()); return this.closed = t.closed, this.curveType = t.curveType, this.tension = t.tension, this }, Si.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); t.points = []; for (var e, n = 0, i = this.points.length; n < i; n++)e = this.points[n], t.points.push(e.toArray()); return t.closed = this.closed, t.curveType = this.curveType, t.tension = this.tension, t }, Si.prototype.fromJSON = function (t) { _i.prototype.fromJSON.call(this, t), this.points = []; for (var e, n = 0, i = t.points.length; n < i; n++)e = t.points[n], this.points.push((new s).fromArray(e)); return this.closed = t.closed, this.curveType = t.curveType, this.tension = t.tension, this }, Ai.prototype = Object.create(_i.prototype), Ai.prototype.constructor = Ai, Ai.prototype.isCubicBezierCurve = !0, Ai.prototype.getPoint = function (t, e) { var n = e || new r, i = this.v0, o = this.v1, a = this.v2, s = this.v3; return n.set(Ei(t, i.x, o.x, a.x, s.x), Ei(t, i.y, o.y, a.y, s.y)), n }, Ai.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), this.v2.copy(t.v2), this.v3.copy(t.v3), this }, Ai.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v0 = this.v0.toArray(), t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t.v3 = this.v3.toArray(), t }, Ai.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v0.fromArray(t.v0), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this.v3.fromArray(t.v3), this }, Ci.prototype = Object.create(_i.prototype), Ci.prototype.constructor = Ci, Ci.prototype.isCubicBezierCurve3 = !0, Ci.prototype.getPoint = function (t, e) { var n = e || new s, i = this.v0, r = this.v1, o = this.v2, a = this.v3; return n.set(Ei(t, i.x, r.x, o.x, a.x), Ei(t, i.y, r.y, o.y, a.y), Ei(t, i.z, r.z, o.z, a.z)), n }, Ci.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), this.v2.copy(t.v2), this.v3.copy(t.v3), this }, Ci.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v0 = this.v0.toArray(), t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t.v3 = this.v3.toArray(), t }, Ci.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v0.fromArray(t.v0), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this.v3.fromArray(t.v3), this }, Li.prototype = Object.create(_i.prototype), Li.prototype.constructor = Li, Li.prototype.isLineCurve = !0, Li.prototype.getPoint = function (t, e) { var n = e || new r; return 1 === t ? n.copy(this.v2) : (n.copy(this.v2).sub(this.v1), n.multiplyScalar(t).add(this.v1)), n }, Li.prototype.getPointAt = function (t, e) { return this.getPoint(t, e) }, Li.prototype.getTangent = function () { return this.v2.clone().sub(this.v1).normalize() }, Li.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v1.copy(t.v1), this.v2.copy(t.v2), this }, Li.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t }, Li.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this }, Ri.prototype = Object.create(_i.prototype), Ri.prototype.constructor = Ri, Ri.prototype.isLineCurve3 = !0, Ri.prototype.getPoint = function (t, e) { var n = e || new s; return 1 === t ? n.copy(this.v2) : (n.copy(this.v2).sub(this.v1), n.multiplyScalar(t).add(this.v1)), n }, Ri.prototype.getPointAt = function (t, e) { return this.getPoint(t, e) }, Ri.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v1.copy(t.v1), this.v2.copy(t.v2), this }, Ri.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t }, Ri.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this }, Oi.prototype = Object.create(_i.prototype), Oi.prototype.constructor = Oi, Oi.prototype.isQuadraticBezierCurve = !0, Oi.prototype.getPoint = function (t, e) { var n = e || new r, i = this.v0, o = this.v1, a = this.v2; return n.set(Pi(t, i.x, o.x, a.x), Pi(t, i.y, o.y, a.y)), n }, Oi.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), this.v2.copy(t.v2), this }, Oi.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v0 = this.v0.toArray(), t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t }, Oi.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v0.fromArray(t.v0), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this }, Ii.prototype = Object.create(_i.prototype), Ii.prototype.constructor = Ii, Ii.prototype.isQuadraticBezierCurve3 = !0, Ii.prototype.getPoint = function (t, e) { var n = e || new s, i = this.v0, r = this.v1, o = this.v2; return n.set(Pi(t, i.x, r.x, o.x), Pi(t, i.y, r.y, o.y), Pi(t, i.z, r.z, o.z)), n }, Ii.prototype.copy = function (t) { return _i.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), this.v2.copy(t.v2), this }, Ii.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); return t.v0 = this.v0.toArray(), t.v1 = this.v1.toArray(), t.v2 = this.v2.toArray(), t }, Ii.prototype.fromJSON = function (t) { return _i.prototype.fromJSON.call(this, t), this.v0.fromArray(t.v0), this.v1.fromArray(t.v1), this.v2.fromArray(t.v2), this }, Di.prototype = Object.create(_i.prototype), Di.prototype.constructor = Di, Di.prototype.isSplineCurve = !0, Di.prototype.getPoint = function (t, e) { var n = e || new r, i = this.points, o = (i.length - 1) * t, a = Bo(o), s = o - a, c = i[0 === a ? a : a - 1], u = i[a], l = i[a > i.length - 2 ? i.length - 1 : a + 1], h = i[a > i.length - 3 ? i.length - 1 : a + 2]; return n.set(Mi(s, c.x, u.x, l.x, h.x), Mi(s, c.y, u.y, l.y, h.y)), n }, Di.prototype.copy = function (t) { _i.prototype.copy.call(this, t), this.points = []; for (var e, n = 0, i = t.points.length; n < i; n++)e = t.points[n], this.points.push(e.clone()); return this }, Di.prototype.toJSON = function () { var t = _i.prototype.toJSON.call(this); t.points = []; for (var e, n = 0, i = this.points.length; n < i; n++)e = this.points[n], t.points.push(e.toArray()); return t }, Di.prototype.fromJSON = function (t) { _i.prototype.fromJSON.call(this, t), this.points = []; for (var e, n = 0, i = t.points.length; n < i; n++)e = t.points[n], this.points.push((new r).fromArray(e)); return this }; var du = Object.freeze({ ArcCurve: wi, CatmullRomCurve3: Si, CubicBezierCurve: Ai, CubicBezierCurve3: Ci, EllipseCurve: xi, LineCurve: Li, LineCurve3: Ri, QuadraticBezierCurve: Oi, QuadraticBezierCurve3: Ii, SplineCurve: Di }); Gi.prototype = Object.assign(Object.create(_i.prototype), { constructor: Gi, add: function (t) { this.curves.push(t) }, closePath: function () { var t = this.curves[0].getPoint(0), e = this.curves[this.curves.length - 1].getPoint(1); t.equals(e) || this.curves.push(new Li(e, t)) }, getPoint: function (t) { for (var e = t * this.getLength(), n = this.getCurveLengths(), i = 0; i < n.length;) { if (n[i] >= e) { var r = n[i] - e, o = this.curves[i], a = o.getLength(), s = 0 === a ? 0 : 1 - r / a; return o.getPointAt(s) } i++ } return null }, getLength: function () { var t = this.getCurveLengths(); return t[t.length - 1] }, updateArcLengths: function () { this.needsUpdate = !0, this.cacheLengths = null, this.getCurveLengths() }, getCurveLengths: function () { if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths; for (var t = [], e = 0, n = 0, i = this.curves.length; n < i; n++)e += this.curves[n].getLength(), t.push(e); return this.cacheLengths = t, t }, getSpacedPoints: function (t) { void 0 === t && (t = 40); for (var e = [], n = 0; n <= t; n++)e.push(this.getPoint(n / t)); return this.autoClose && e.push(e[0]), e }, getPoints: function (t) { t = t || 12; for (var e, n = [], i = 0, r = this.curves; i < r.length; i++)for (var o, a = r[i], s = a && a.isEllipseCurve ? 2 * t : a && (a.isLineCurve || a.isLineCurve3) ? 1 : a && a.isSplineCurve ? t * a.points.length : t, c = a.getPoints(s), u = 0; u < c.length; u++)o = c[u], e && e.equals(o) || (n.push(o), e = o); return this.autoClose && 1 < n.length && !n[n.length - 1].equals(n[0]) && n.push(n[0]), n }, copy: function (t) { _i.prototype.copy.call(this, t), this.curves = []; for (var e, n = 0, i = t.curves.length; n < i; n++)e = t.curves[n], this.curves.push(e.clone()); return this.autoClose = t.autoClose, this }, toJSON: function () { var t = _i.prototype.toJSON.call(this); t.autoClose = this.autoClose, t.curves = []; for (var e, n = 0, i = this.curves.length; n < i; n++)e = this.curves[n], t.curves.push(e.toJSON()); return t }, fromJSON: function (t) { _i.prototype.fromJSON.call(this, t), this.autoClose = t.autoClose, this.curves = []; for (var e, n = 0, i = t.curves.length; n < i; n++)e = t.curves[n], this.curves.push((new du[e.type]).fromJSON(e)); return this } }), Bi.prototype = Object.assign(Object.create(Gi.prototype), { constructor: Bi, setFromPoints: function (t) { this.moveTo(t[0].x, t[0].y); for (var e = 1, n = t.length; e < n; e++)this.lineTo(t[e].x, t[e].y) }, moveTo: function (t, e) { this.currentPoint.set(t, e) }, lineTo: function (t, e) { var n = new Li(this.currentPoint.clone(), new r(t, e)); this.curves.push(n), this.currentPoint.set(t, e) }, quadraticCurveTo: function (t, e, n, i) { var o = new Oi(this.currentPoint.clone(), new r(t, e), new r(n, i)); this.curves.push(o), this.currentPoint.set(n, i) }, bezierCurveTo: function (t, e, n, i, o, a) { var s = new Ai(this.currentPoint.clone(), new r(t, e), new r(n, i), new r(o, a)); this.curves.push(s), this.currentPoint.set(o, a) }, splineThru: function (t) { var e = new Di([this.currentPoint.clone()].concat(t)); this.curves.push(e), this.currentPoint.copy(t[t.length - 1]) }, arc: function (t, e, n, i, r, o) { var a = this.currentPoint.x, s = this.currentPoint.y; this.absarc(t + a, e + s, n, i, r, o) }, absarc: function (t, e, n, i, r, o) { this.absellipse(t, e, n, n, i, r, o) }, ellipse: function (t, e, n, i, r, o, a, s) { var c = this.currentPoint.x, u = this.currentPoint.y; this.absellipse(t + c, e + u, n, i, r, o, a, s) }, absellipse: function (t, e, n, i, r, o, a, s) { var c = new xi(t, e, n, i, r, o, a, s); if (0 < this.curves.length) { var u = c.getPoint(0); u.equals(this.currentPoint) || this.lineTo(u.x, u.y) } this.curves.push(c); var l = c.getPoint(1); this.currentPoint.copy(l) }, copy: function (t) { return Gi.prototype.copy.call(this, t), this.currentPoint.copy(t.currentPoint), this }, toJSON: function () { var t = Gi.prototype.toJSON.call(this); return t.currentPoint = this.currentPoint.toArray(), t }, fromJSON: function (t) { return Gi.prototype.fromJSON.call(this, t), this.currentPoint.fromArray(t.currentPoint), this } }), ki.prototype = Object.assign(Object.create(Bi.prototype), { constructor: ki, getPointsHoles: function (t) { for (var e = [], n = 0, i = this.holes.length; n < i; n++)e[n] = this.holes[n].getPoints(t); return e }, extractPoints: function (t) { return { shape: this.getPoints(t), holes: this.getPointsHoles(t) } }, copy: function (t) { Bi.prototype.copy.call(this, t), this.holes = []; for (var e, n = 0, i = t.holes.length; n < i; n++)e = t.holes[n], this.holes.push(e.clone()); return this }, toJSON: function () { var t = Bi.prototype.toJSON.call(this); t.uuid = this.uuid, t.holes = []; for (var e, n = 0, i = this.holes.length; n < i; n++)e = this.holes[n], t.holes.push(e.toJSON()); return t }, fromJSON: function (t) { Bi.prototype.fromJSON.call(this, t), this.uuid = t.uuid, this.holes = []; for (var e, n = 0, i = t.holes.length; n < i; n++)e = t.holes[n], this.holes.push((new Bi).fromJSON(e)); return this } }), Ni.prototype = Object.assign(Object.create(M.prototype), { constructor: Ni, isLight: !0, copy: function (t) { return M.prototype.copy.call(this, t), this.color.copy(t.color), this.intensity = t.intensity, this }, toJSON: function (t) { var e = M.prototype.toJSON.call(this, t); return e.object.color = this.color.getHex(), e.object.intensity = this.intensity, void 0 !== this.groundColor && (e.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (e.object.distance = this.distance), void 0 !== this.angle && (e.object.angle = this.angle), void 0 !== this.decay && (e.object.decay = this.decay), void 0 !== this.penumbra && (e.object.penumbra = this.penumbra), void 0 !== this.shadow && (e.object.shadow = this.shadow.toJSON()), e } }), Hi.prototype = Object.assign(Object.create(Ni.prototype), { constructor: Hi, isHemisphereLight: !0, copy: function (t) { return Ni.prototype.copy.call(this, t), this.groundColor.copy(t.groundColor), this } }), Object.assign(Fi.prototype, { copy: function (t) { return this.camera = t.camera.clone(), this.bias = t.bias, this.radius = t.radius, this.mapSize.copy(t.mapSize), this }, clone: function () { return (new this.constructor).copy(this) }, toJSON: function () { var t = {}; return 0 !== this.bias && (t.bias = this.bias), 1 !== this.radius && (t.radius = this.radius), (512 !== this.mapSize.x || 512 !== this.mapSize.y) && (t.mapSize = this.mapSize.toArray()), t.camera = this.camera.toJSON(!1).object, delete t.camera.matrix, t } }), Ui.prototype = Object.assign(Object.create(Fi.prototype), { constructor: Ui, isSpotLightShadow: !0, update: function (t) { var e = this.camera, n = 2 * Ac.RAD2DEG * t.angle, i = this.mapSize.width / this.mapSize.height, r = t.distance || e.far; (n !== e.fov || i !== e.aspect || r !== e.far) && (e.fov = n, e.aspect = i, e.far = r, e.updateProjectionMatrix()) } }), zi.prototype = Object.assign(Object.create(Ni.prototype), { constructor: zi, isSpotLight: !0, copy: function (t) { return Ni.prototype.copy.call(this, t), this.distance = t.distance, this.angle = t.angle, this.penumbra = t.penumbra, this.decay = t.decay, this.target = t.target.clone(), this.shadow = t.shadow.clone(), this } }), ji.prototype = Object.assign(Object.create(Ni.prototype), { constructor: ji, isPointLight: !0, copy: function (t) { return Ni.prototype.copy.call(this, t), this.distance = t.distance, this.decay = t.decay, this.shadow = t.shadow.clone(), this } }), Vi.prototype = Object.assign(Object.create(oe.prototype), { constructor: Vi, isOrthographicCamera: !0, copy: function (t, e) { return oe.prototype.copy.call(this, t, e), this.left = t.left, this.right = t.right, this.top = t.top, this.bottom = t.bottom, this.near = t.near, this.far = t.far, this.zoom = t.zoom, this.view = null === t.view ? null : Object.assign({}, t.view), this }, setViewOffset: function (t, e, n, i, r, o) { null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = o, this.updateProjectionMatrix() }, clearViewOffset: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix() }, updateProjectionMatrix: function () { var t = (this.right - this.left) / (2 * this.zoom), e = (this.top - this.bottom) / (2 * this.zoom), n = (this.right + this.left) / 2, i = (this.top + this.bottom) / 2, r = n - t, o = n + t, a = i + e, s = i - e; if (null !== this.view && this.view.enabled) { var c = this.zoom / (this.view.width / this.view.fullWidth), u = this.zoom / (this.view.height / this.view.fullHeight), l = (this.right - this.left) / this.view.width, h = (this.top - this.bottom) / this.view.height; o = (r += l * (this.view.offsetX / c)) + l * (this.view.width / c), s = (a -= h * (this.view.offsetY / u)) - h * (this.view.height / u) } this.projectionMatrix.makeOrthographic(r, o, a, s, this.near, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix) }, toJSON: function (t) { var e = M.prototype.toJSON.call(this, t); return e.object.zoom = this.zoom, e.object.left = this.left, e.object.right = this.right, e.object.top = this.top, e.object.bottom = this.bottom, e.object.near = this.near, e.object.far = this.far, null !== this.view && (e.object.view = Object.assign({}, this.view)), e } }), Wi.prototype = Object.assign(Object.create(Fi.prototype), { constructor: Wi }), Xi.prototype = Object.assign(Object.create(Ni.prototype), { constructor: Xi, isDirectionalLight: !0, copy: function (t) { return Ni.prototype.copy.call(this, t), this.target = t.target.clone(), this.shadow = t.shadow.clone(), this } }), qi.prototype = Object.assign(Object.create(Ni.prototype), { constructor: qi, isAmbientLight: !0 }), Yi.prototype = Object.assign(Object.create(Ni.prototype), { constructor: Yi, isRectAreaLight: !0, copy: function (t) { return Ni.prototype.copy.call(this, t), this.width = t.width, this.height = t.height, this }, toJSON: function (t) { var e = Ni.prototype.toJSON.call(this, t); return e.object.width = this.width, e.object.height = this.height, e } }), Object.assign($i.prototype, { load: function (t, e, n, i) { var r = this, o = new pi(r.manager); o.setPath(r.path), o.load(t, function (t) { e(r.parse(JSON.parse(t))) }, n, i) }, parse: function (t) { function e(t) { return void 0 === n[t] && console.warn("THREE.MaterialLoader: Undefined texture", t), n[t] } var n = this.textures, i = new ou[t.type]; if (void 0 !== t.uuid && (i.uuid = t.uuid), void 0 !== t.name && (i.name = t.name), void 0 !== t.color && i.color.setHex(t.color), void 0 !== t.roughness && (i.roughness = t.roughness), void 0 !== t.metalness && (i.metalness = t.metalness), void 0 !== t.emissive && i.emissive.setHex(t.emissive), void 0 !== t.specular && i.specular.setHex(t.specular), void 0 !== t.shininess && (i.shininess = t.shininess), void 0 !== t.clearCoat && (i.clearCoat = t.clearCoat), void 0 !== t.clearCoatRoughness && (i.clearCoatRoughness = t.clearCoatRoughness), void 0 !== t.vertexColors && (i.vertexColors = t.vertexColors), void 0 !== t.fog && (i.fog = t.fog), void 0 !== t.flatShading && (i.flatShading = t.flatShading), void 0 !== t.blending && (i.blending = t.blending), void 0 !== t.combine && (i.combine = t.combine), void 0 !== t.side && (i.side = t.side), void 0 !== t.opacity && (i.opacity = t.opacity), void 0 !== t.transparent && (i.transparent = t.transparent), void 0 !== t.alphaTest && (i.alphaTest = t.alphaTest), void 0 !== t.depthTest && (i.depthTest = t.depthTest), void 0 !== t.depthWrite && (i.depthWrite = t.depthWrite), void 0 !== t.colorWrite && (i.colorWrite = t.colorWrite), void 0 !== t.wireframe && (i.wireframe = t.wireframe), void 0 !== t.wireframeLinewidth && (i.wireframeLinewidth = t.wireframeLinewidth), void 0 !== t.wireframeLinecap && (i.wireframeLinecap = t.wireframeLinecap), void 0 !== t.wireframeLinejoin && (i.wireframeLinejoin = t.wireframeLinejoin), void 0 !== t.rotation && (i.rotation = t.rotation), 1 !== t.linewidth && (i.linewidth = t.linewidth), void 0 !== t.dashSize && (i.dashSize = t.dashSize), void 0 !== t.gapSize && (i.gapSize = t.gapSize), void 0 !== t.scale && (i.scale = t.scale), void 0 !== t.polygonOffset && (i.polygonOffset = t.polygonOffset), void 0 !== t.polygonOffsetFactor && (i.polygonOffsetFactor = t.polygonOffsetFactor), void 0 !== t.polygonOffsetUnits && (i.polygonOffsetUnits = t.polygonOffsetUnits), void 0 !== t.skinning && (i.skinning = t.skinning), void 0 !== t.morphTargets && (i.morphTargets = t.morphTargets), void 0 !== t.dithering && (i.dithering = t.dithering), void 0 !== t.visible && (i.visible = t.visible), void 0 !== t.userData && (i.userData = t.userData), void 0 !== t.uniforms) for (var a in t.uniforms) { var c = t.uniforms[a]; switch (i.uniforms[a] = {}, c.type) { case "t": i.uniforms[a].value = e(c.value); break; case "c": i.uniforms[a].value = (new _).setHex(c.value); break; case "v2": i.uniforms[a].value = (new r).fromArray(c.value); break; case "v3": i.uniforms[a].value = (new s).fromArray(c.value); break; case "v4": i.uniforms[a].value = (new l).fromArray(c.value); break; case "m4": i.uniforms[a].value = (new o).fromArray(c.value); break; default: i.uniforms[a].value = c.value } } if (void 0 !== t.defines && (i.defines = t.defines), void 0 !== t.vertexShader && (i.vertexShader = t.vertexShader), void 0 !== t.fragmentShader && (i.fragmentShader = t.fragmentShader), void 0 !== t.extensions) for (var u in t.extensions) i.extensions[u] = t.extensions[u]; if (void 0 !== t.shading && (i.flatShading = 1 === t.shading), void 0 !== t.size && (i.size = t.size), void 0 !== t.sizeAttenuation && (i.sizeAttenuation = t.sizeAttenuation), void 0 !== t.map && (i.map = e(t.map)), void 0 !== t.alphaMap && (i.alphaMap = e(t.alphaMap), i.transparent = !0), void 0 !== t.bumpMap && (i.bumpMap = e(t.bumpMap)), void 0 !== t.bumpScale && (i.bumpScale = t.bumpScale), void 0 !== t.normalMap && (i.normalMap = e(t.normalMap)), void 0 !== t.normalMapType && (i.normalMapType = t.normalMapType), void 0 !== t.normalScale) { var h = t.normalScale; !1 === Array.isArray(h) && (h = [h, h]), i.normalScale = (new r).fromArray(h) } return void 0 !== t.displacementMap && (i.displacementMap = e(t.displacementMap)), void 0 !== t.displacementScale && (i.displacementScale = t.displacementScale), void 0 !== t.displacementBias && (i.displacementBias = t.displacementBias), void 0 !== t.roughnessMap && (i.roughnessMap = e(t.roughnessMap)), void 0 !== t.metalnessMap && (i.metalnessMap = e(t.metalnessMap)), void 0 !== t.emissiveMap && (i.emissiveMap = e(t.emissiveMap)), void 0 !== t.emissiveIntensity && (i.emissiveIntensity = t.emissiveIntensity), void 0 !== t.specularMap && (i.specularMap = e(t.specularMap)), void 0 !== t.envMap && (i.envMap = e(t.envMap)), void 0 !== t.envMapIntensity && (i.envMapIntensity = t.envMapIntensity), void 0 !== t.reflectivity && (i.reflectivity = t.reflectivity), void 0 !== t.lightMap && (i.lightMap = e(t.lightMap)), void 0 !== t.lightMapIntensity && (i.lightMapIntensity = t.lightMapIntensity), void 0 !== t.aoMap && (i.aoMap = e(t.aoMap)), void 0 !== t.aoMapIntensity && (i.aoMapIntensity = t.aoMapIntensity), void 0 !== t.gradientMap && (i.gradientMap = e(t.gradientMap)), i }, setPath: function (t) { return this.path = t, this }, setTextures: function (t) { return this.textures = t, this } }); var mu = { decodeText: function (t) { if ("undefined" != typeof TextDecoder) return (new TextDecoder).decode(t); for (var e = "", n = 0, i = t.length; n < i; n++)e += String.fromCharCode(t[n]); return decodeURIComponent(escape(e)) }, extractUrlBase: function (t) { var e = t.lastIndexOf("/"); return -1 === e ? "./" : t.substr(0, e + 1) } }; Object.assign(Zi.prototype, { load: function (t, e, n, i) { var r = this, o = new pi(r.manager); o.setPath(r.path), o.load(t, function (t) { e(r.parse(JSON.parse(t))) }, n, i) }, parse: function (t) { var e = new H, n = t.data.index; if (void 0 !== n) { var i = new vu[n.type](n.array); e.setIndex(new E(i, 1)) } var r = t.data.attributes; for (var o in r) { var a = r[o]; i = new vu[a.type](a.array); e.addAttribute(o, new E(i, a.itemSize, a.normalized)) } var c = t.data.groups || t.data.drawcalls || t.data.offsets; if (void 0 !== c) for (var u, l = 0, h = c.length; l !== h; ++l)u = c[l], e.addGroup(u.start, u.count, u.materialIndex); var f = t.data.boundingSphere; if (void 0 !== f) { var p = new s; void 0 !== f.center && p.fromArray(f.center), e.boundingSphere = new m(p, f.radius) } return t.name && (e.name = t.name), t.userData && (e.userData = t.userData), e }, setPath: function (t) { return this.path = t, this } }); var vu = { Int8Array: Int8Array, Uint8Array: Uint8Array, Uint8ClampedArray: "undefined" == typeof Uint8ClampedArray ? Uint8Array : Uint8ClampedArray, Int16Array: Int16Array, Uint16Array: Uint16Array, Int32Array: Int32Array, Uint32Array: Uint32Array, Float32Array: Float32Array, Float64Array: Float64Array }; Object.assign(Ki.prototype, { crossOrigin: "anonymous", load: function (t, e, n, i) { var r = this, o = void 0 === this.path ? mu.extractUrlBase(t) : this.path; this.resourcePath = this.resourcePath || o; var a = new pi(r.manager); a.setPath(this.path), a.load(t, function (n) { var o = null; try { o = JSON.parse(n) } catch (e) { return void 0 !== i && i(e), void console.error("THREE:ObjectLoader: Can't parse " + t + ".", e.message) } var a = o.metadata; return void 0 === a || void 0 === a.type || "geometry" === a.type.toLowerCase() ? void console.error("THREE.ObjectLoader: Can't load " + t) : void r.parse(o, e) }, n, i) }, setPath: function (t) { return this.path = t, this }, setResourcePath: function (t) { return this.resourcePath = t, this }, setCrossOrigin: function (t) { return this.crossOrigin = t, this }, parse: function (t, e) { var n = this.parseShape(t.shapes), i = this.parseGeometries(t.geometries, n), r = this.parseImages(t.images, function () { void 0 !== e && e(s) }), o = this.parseTextures(t.textures, r), a = this.parseMaterials(t.materials, o), s = this.parseObject(t.object, i, a); return t.animations && (s.animations = this.parseAnimations(t.animations)), (void 0 === t.images || 0 === t.images.length) && void 0 !== e && e(s), s }, parseShape: function (t) { var e = {}; if (void 0 !== t) for (var n, i = 0, r = t.length; i < r; i++)e[(n = (new ki).fromJSON(t[i])).uuid] = n; return e }, parseGeometries: function (t, e) { var n = {}; if (void 0 !== t) for (var i = new Zi, r = 0, o = t.length; r < o; r++) { var a, s = t[r]; switch (s.type) { case "PlaneGeometry": case "PlaneBufferGeometry": a = new ru[s.type](s.width, s.height, s.widthSegments, s.heightSegments); break; case "BoxGeometry": case "BoxBufferGeometry": case "CubeGeometry": a = new ru[s.type](s.width, s.height, s.depth, s.widthSegments, s.heightSegments, s.depthSegments); break; case "CircleGeometry": case "CircleBufferGeometry": a = new ru[s.type](s.radius, s.segments, s.thetaStart, s.thetaLength); break; case "CylinderGeometry": case "CylinderBufferGeometry": a = new ru[s.type](s.radiusTop, s.radiusBottom, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength); break; case "ConeGeometry": case "ConeBufferGeometry": a = new ru[s.type](s.radius, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength); break; case "SphereGeometry": case "SphereBufferGeometry": a = new ru[s.type](s.radius, s.widthSegments, s.heightSegments, s.phiStart, s.phiLength, s.thetaStart, s.thetaLength); break; case "DodecahedronGeometry": case "DodecahedronBufferGeometry": case "IcosahedronGeometry": case "IcosahedronBufferGeometry": case "OctahedronGeometry": case "OctahedronBufferGeometry": case "TetrahedronGeometry": case "TetrahedronBufferGeometry": a = new ru[s.type](s.radius, s.detail); break; case "RingGeometry": case "RingBufferGeometry": a = new ru[s.type](s.innerRadius, s.outerRadius, s.thetaSegments, s.phiSegments, s.thetaStart, s.thetaLength); break; case "TorusGeometry": case "TorusBufferGeometry": a = new ru[s.type](s.radius, s.tube, s.radialSegments, s.tubularSegments, s.arc); break; case "TorusKnotGeometry": case "TorusKnotBufferGeometry": a = new ru[s.type](s.radius, s.tube, s.tubularSegments, s.radialSegments, s.p, s.q); break; case "LatheGeometry": case "LatheBufferGeometry": a = new ru[s.type](s.points, s.segments, s.phiStart, s.phiLength); break; case "PolyhedronGeometry": case "PolyhedronBufferGeometry": a = new ru[s.type](s.vertices, s.indices, s.radius, s.details); break; case "ShapeGeometry": case "ShapeBufferGeometry": for (var c = [], u = 0, l = s.shapes.length; u < l; u++)h = e[s.shapes[u]], c.push(h); a = new ru[s.type](c, s.curveSegments); break; case "ExtrudeGeometry": case "ExtrudeBufferGeometry": var h; for (c = [], u = 0, l = s.shapes.length; u < l; u++)h = e[s.shapes[u]], c.push(h); var f = s.options.extrudePath; void 0 !== f && (s.options.extrudePath = (new du[f.type]).fromJSON(f)), a = new ru[s.type](c, s.options); break; case "BufferGeometry": a = i.parse(s); break; case "Geometry": if ("THREE" in window && "LegacyJSONLoader" in THREE) a = (new THREE.LegacyJSONLoader).parse(s, this.resourcePath).geometry; else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".'); break; default: console.warn('THREE.ObjectLoader: Unsupported geometry type "' + s.type + '"'); continue }a.uuid = s.uuid, void 0 !== s.name && (a.name = s.name), !0 === a.isBufferGeometry && void 0 !== s.userData && (a.userData = s.userData), n[s.uuid] = a } return n }, parseMaterials: function (t, e) { var n = {}, i = {}; if (void 0 !== t) { var r = new $i; r.setTextures(e); for (var o, a = 0, s = t.length; a < s; a++)if ("MultiMaterial" === (o = t[a]).type) { for (var c, u = [], l = 0; l < o.materials.length; l++)void 0 === n[(c = o.materials[l]).uuid] && (n[c.uuid] = r.parse(c)), u.push(n[c.uuid]); i[o.uuid] = u } else i[o.uuid] = r.parse(o), n[o.uuid] = i[o.uuid] } return i }, parseAnimations: function (t) { for (var e = [], n = 0; n < t.length; n++) { var i = t[n], r = li.parse(i); void 0 !== i.uuid && (r.uuid = i.uuid), e.push(r) } return e }, parseImages: function (t, e) { function n(t) { return i.manager.itemStart(t), o.load(t, function () { i.manager.itemEnd(t) }, void 0, function () { i.manager.itemError(t), i.manager.itemEnd(t) }) } var i = this, r = {}; if (void 0 !== t && 0 < t.length) { var o = new gi(new fi(e)); o.setCrossOrigin(this.crossOrigin); for (var a = 0, s = t.length; a < s; a++) { var c = t[a], u = c.url; if (Array.isArray(u)) { r[c.uuid] = []; for (var l = 0, h = u.length; l < h; l++) { var f = u[l], p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(f) ? f : i.resourcePath + f; r[c.uuid].push(n(p)) } } else { p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url) ? c.url : i.resourcePath + c.url; r[c.uuid] = n(p) } } } return r }, parseTextures: function (t, e) { function n(t, e) { return "number" == typeof t ? t : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", t), e[t]) } var i = {}; if (void 0 !== t) for (var r, o = 0, a = t.length; o < a; o++) { var s; void 0 === (r = t[o]).image && console.warn('THREE.ObjectLoader: No "image" specified for', r.uuid), void 0 === e[r.image] && console.warn("THREE.ObjectLoader: Undefined image", r.image), (s = Array.isArray(e[r.image]) ? new et(e[r.image]) : new u(e[r.image])).needsUpdate = !0, s.uuid = r.uuid, void 0 !== r.name && (s.name = r.name), void 0 !== r.mapping && (s.mapping = n(r.mapping, gu)), void 0 !== r.offset && s.offset.fromArray(r.offset), void 0 !== r.repeat && s.repeat.fromArray(r.repeat), void 0 !== r.center && s.center.fromArray(r.center), void 0 !== r.rotation && (s.rotation = r.rotation), void 0 !== r.wrap && (s.wrapS = n(r.wrap[0], yu), s.wrapT = n(r.wrap[1], yu)), void 0 !== r.format && (s.format = r.format), void 0 !== r.type && (s.type = r.type), void 0 !== r.encoding && (s.encoding = r.encoding), void 0 !== r.minFilter && (s.minFilter = n(r.minFilter, bu)), void 0 !== r.magFilter && (s.magFilter = n(r.magFilter, bu)), void 0 !== r.anisotropy && (s.anisotropy = r.anisotropy), void 0 !== r.flipY && (s.flipY = r.flipY), void 0 !== r.premultiplyAlpha && (s.premultiplyAlpha = r.premultiplyAlpha), void 0 !== r.unpackAlignment && (s.unpackAlignment = r.unpackAlignment), i[r.uuid] = s } return i }, parseObject: function (t, e, n) { function i(t) { return void 0 === e[t] && console.warn("THREE.ObjectLoader: Undefined geometry", t), e[t] } function r(t) { if (void 0 !== t) { if (Array.isArray(t)) { for (var e, i = [], r = 0, o = t.length; r < o; r++)e = t[r], void 0 === n[e] && console.warn("THREE.ObjectLoader: Undefined material", e), i.push(n[e]); return i } return void 0 === n[t] && console.warn("THREE.ObjectLoader: Undefined material", t), n[t] } } var o; switch (t.type) { case "Scene": o = new pe, void 0 !== t.background && Do(t.background) && (o.background = new _(t.background)), void 0 !== t.fog && ("Fog" === t.fog.type ? o.fog = new fe(t.fog.color, t.fog.near, t.fog.far) : "FogExp2" === t.fog.type && (o.fog = new he(t.fog.color, t.fog.density))); break; case "PerspectiveCamera": o = new ae(t.fov, t.aspect, t.near, t.far), void 0 !== t.focus && (o.focus = t.focus), void 0 !== t.zoom && (o.zoom = t.zoom), void 0 !== t.filmGauge && (o.filmGauge = t.filmGauge), void 0 !== t.filmOffset && (o.filmOffset = t.filmOffset), void 0 !== t.view && (o.view = Object.assign({}, t.view)); break; case "OrthographicCamera": o = new Vi(t.left, t.right, t.top, t.bottom, t.near, t.far), void 0 !== t.zoom && (o.zoom = t.zoom), void 0 !== t.view && (o.view = Object.assign({}, t.view)); break; case "AmbientLight": o = new qi(t.color, t.intensity); break; case "DirectionalLight": o = new Xi(t.color, t.intensity); break; case "PointLight": o = new ji(t.color, t.intensity, t.distance, t.decay); break; case "RectAreaLight": o = new Yi(t.color, t.intensity, t.width, t.height); break; case "SpotLight": o = new zi(t.color, t.intensity, t.distance, t.angle, t.penumbra, t.decay); break; case "HemisphereLight": o = new Hi(t.color, t.groundColor, t.intensity); break; case "SkinnedMesh": console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet."); case "Mesh": var a = i(t.geometry), s = r(t.material); o = a.bones && 0 < a.bones.length ? new be(a, s) : new $(a, s); break; case "LOD": o = new ye; break; case "Line": o = new Te(i(t.geometry), r(t.material), t.mode); break; case "LineLoop": o = new Me(i(t.geometry), r(t.material)); break; case "LineSegments": o = new Se(i(t.geometry), r(t.material)); break; case "PointCloud": case "Points": o = new Ee(i(t.geometry), r(t.material)); break; case "Sprite": o = new ge(r(t.material)); break; case "Group": o = new re; break; default: o = new M }if (o.uuid = t.uuid, void 0 !== t.name && (o.name = t.name), void 0 === t.matrix ? (void 0 !== t.position && o.position.fromArray(t.position), void 0 !== t.rotation && o.rotation.fromArray(t.rotation), void 0 !== t.quaternion && o.quaternion.fromArray(t.quaternion), void 0 !== t.scale && o.scale.fromArray(t.scale)) : (o.matrix.fromArray(t.matrix), void 0 !== t.matrixAutoUpdate && (o.matrixAutoUpdate = t.matrixAutoUpdate), o.matrixAutoUpdate && o.matrix.decompose(o.position, o.quaternion, o.scale)), void 0 !== t.castShadow && (o.castShadow = t.castShadow), void 0 !== t.receiveShadow && (o.receiveShadow = t.receiveShadow), t.shadow && (void 0 !== t.shadow.bias && (o.shadow.bias = t.shadow.bias), void 0 !== t.shadow.radius && (o.shadow.radius = t.shadow.radius), void 0 !== t.shadow.mapSize && o.shadow.mapSize.fromArray(t.shadow.mapSize), void 0 !== t.shadow.camera && (o.shadow.camera = this.parseObject(t.shadow.camera))), void 0 !== t.visible && (o.visible = t.visible), void 0 !== t.frustumCulled && (o.frustumCulled = t.frustumCulled), void 0 !== t.renderOrder && (o.renderOrder = t.renderOrder), void 0 !== t.userData && (o.userData = t.userData), void 0 !== t.layers && (o.layers.mask = t.layers), void 0 !== t.children) for (var c = t.children, u = 0; u < c.length; u++)o.add(this.parseObject(c[u], e, n)); if ("LOD" === t.type) for (var l = t.levels, h = 0; h < l.length; h++) { var f = l[h], p = o.getObjectByProperty("uuid", f.object); void 0 !== p && o.addLevel(p, f.distance) } return o } }); var gu = { UVMapping: Ka, CubeReflectionMapping: Ja, CubeRefractionMapping: Qa, EquirectangularReflectionMapping: ts, EquirectangularRefractionMapping: es, SphericalReflectionMapping: ns, CubeUVReflectionMapping: is, CubeUVRefractionMapping: rs }, yu = { RepeatWrapping: os, ClampToEdgeWrapping: as, MirroredRepeatWrapping: ss }, bu = { NearestFilter: cs, NearestMipMapNearestFilter: us, NearestMipMapLinearFilter: ls, LinearFilter: hs, LinearMipMapNearestFilter: fs, LinearMipMapLinearFilter: ps }; Ji.prototype = { constructor: Ji, setOptions: function (t) { return this.options = t, this }, load: function (t, e, n, i) { void 0 === t && (t = ""), void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t); var r = this, o = su.get(t); return void 0 === o ? void fetch(t).then(function (t) { return t.blob() }).then(function (t) { return createImageBitmap(t, r.options) }).then(function (n) { su.add(t, n), e && e(n), r.manager.itemEnd(t) }).catch(function (e) { i && i(e), r.manager.itemError(t), r.manager.itemEnd(t) }) : (r.manager.itemStart(t), setTimeout(function () { e && e(o), r.manager.itemEnd(t) }, 0), o) }, setCrossOrigin: function () { return this }, setPath: function (t) { return this.path = t, this } }, Object.assign(Qi.prototype, { moveTo: function (t, e) { this.currentPath = new Bi, this.subPaths.push(this.currentPath), this.currentPath.moveTo(t, e) }, lineTo: function (t, e) { this.currentPath.lineTo(t, e) }, quadraticCurveTo: function (t, e, n, i) { this.currentPath.quadraticCurveTo(t, e, n, i) }, bezierCurveTo: function (t, e, n, i, r, o) { this.currentPath.bezierCurveTo(t, e, n, i, r, o) }, splineThru: function (t) { this.currentPath.splineThru(t) }, toShapes: function (t, e) { function n(t) { for (var e = [], n = 0, i = t.length; n < i; n++) { var r = t[n], o = new ki; o.curves = r.curves, e.push(o) } return e } function i(t, e) { for (var n = e.length, i = !1, r = n - 1, o = 0; o < n; r = o++) { var a = e[r], s = e[o], c = s.x - a.x, u = s.y - a.y; if (Wo(u) > Go) { if (0 > u && (a = e[o], c = -c, s = e[r], u = -u), t.y < a.y || t.y > s.y) continue; if (t.y !== a.y) { var l = u * (t.x - a.x) - c * (t.y - a.y); if (0 == l) return !0; if (0 > l) continue; i = !i } else if (t.x === a.x) return !0 } else { if (t.y !== a.y) continue; if (s.x <= t.x && t.x <= a.x || a.x <= t.x && t.x <= s.x) return !0 } } return i } var r = nu.isClockWise, o = this.subPaths; if (0 === o.length) return []; if (!0 === e) return n(o); var a, s, c, u = []; if (1 === o.length) return s = o[0], (c = new ki).curves = s.curves, u.push(c), u; var l = !r(o[0].getPoints()); l = t ? !l : l; var h, f = [], p = [], d = [], m = 0; p[m] = void 0, d[m] = []; for (var v = 0, g = o.length; v < g; v++)a = r(h = (s = o[v]).getPoints()), (a = t ? !a : a) ? (!l && p[m] && m++, p[m] = { s: new ki, p: h }, p[m].s.curves = s.curves, l && m++, d[m] = []) : d[m].push({ h: s, p: h[0] }); if (!p[0]) return n(o); if (1 < p.length) { for (var y = !1, b = [], _ = 0, x = p.length; _ < x; _++)f[_] = []; var w; for (_ = 0, x = p.length; _ < x; _++) { w = d[_]; for (var T = 0; T < w.length; T++) { for (var S = w[T], M = !0, P = 0; P < p.length; P++)i(S.p, p[P].p) && (_ !== P && b.push({ froms: _, tos: P, hole: T }), M ? (M = !1, f[P].push(S)) : y = !0); M && f[_].push(S) } } 0 < b.length && !y && (d = f) } v = 0; for (var E, A = p.length; v < A; v++) { c = p[v].s, u.push(c); for (var C = 0, L = (E = d[v]).length; C < L; C++)c.holes.push(E[C].h) } return u } }), Object.assign(tr.prototype, { isFont: !0, generateShapes: function (t, e) { void 0 === e && (e = 100); for (var n = [], i = function (t, e, n) { for (var i, r = Array.from ? Array.from(t) : (t + "").split(""), o = e / n.resolution, a = (n.boundingBox.yMax - n.boundingBox.yMin + n.underlineThickness) * o, s = [], c = 0, u = 0, l = 0; l < r.length; l++)if ("\n" === (i = r[l])) c = 0, u -= a; else { var h = er(i, o, c, u, n); c += h.offsetX, s.push(h.path) } return s }(t, e, this.data), r = 0, o = i.length; r < o; r++)Array.prototype.push.apply(n, i[r].toShapes()); return n } }), Object.assign(nr.prototype, { load: function (t, e, n, i) { var r = this, o = new pi(this.manager); o.setPath(this.path), o.load(t, function (t) { var n; try { n = JSON.parse(t) } catch (e) { console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."), n = JSON.parse(t.substring(65, t.length - 2)) } var i = r.parse(n); e && e(i) }, n, i) }, parse: function (t) { return new tr(t) }, setPath: function (t) { return this.path = t, this } }), ir.Handlers = { handlers: [], add: function (t, e) { this.handlers.push(t, e) }, get: function (t) { for (var e = this.handlers, n = 0, i = e.length; n < i; n += 2) { var r = e[n], o = e[n + 1]; if (r.test(t)) return o } return null } }, Object.assign(ir.prototype, { crossOrigin: "anonymous", onLoadStart: function () { }, onLoadProgress: function () { }, onLoadComplete: function () { }, initMaterials: function (t, e, n) { for (var i = [], r = 0; r < t.length; ++r)i[r] = this.createMaterial(t[r], e, n); return i }, createMaterial: function () { var t = { NoBlending: fa, NormalBlending: pa, AdditiveBlending: da, SubtractiveBlending: ma, MultiplyBlending: va, CustomBlending: ga }, e = new _, n = new bi, i = new $i; return function (r, o, a) { function s(t, e, i, r, s) { var u, l = o + t, h = ir.Handlers.get(l); null === h ? (n.setCrossOrigin(a), u = n.load(l)) : u = h.load(l), void 0 !== e && (u.repeat.fromArray(e), 1 !== e[0] && (u.wrapS = os), 1 !== e[1] && (u.wrapT = os)), void 0 !== i && u.offset.fromArray(i), void 0 !== r && ("repeat" === r[0] && (u.wrapS = os), "mirror" === r[0] && (u.wrapS = ss), "repeat" === r[1] && (u.wrapT = os), "mirror" === r[1] && (u.wrapT = ss)), void 0 !== s && (u.anisotropy = s); var f = Ac.generateUUID(); return c[f] = u, f } var c = {}, u = { uuid: Ac.generateUUID(), type: "MeshLambertMaterial" }; for (var l in r) { var h = r[l]; switch (l) { case "DbgColor": case "DbgIndex": case "opticalDensity": case "illumination": break; case "DbgName": u.name = h; break; case "blending": u.blending = t[h]; break; case "colorAmbient": case "mapAmbient": console.warn("THREE.Loader.createMaterial:", l, "is no longer supported."); break; case "colorDiffuse": u.color = e.fromArray(h).getHex(); break; case "colorSpecular": u.specular = e.fromArray(h).getHex(); break; case "colorEmissive": u.emissive = e.fromArray(h).getHex(); break; case "specularCoef": u.shininess = h; break; case "shading": "basic" === h.toLowerCase() && (u.type = "MeshBasicMaterial"), "phong" === h.toLowerCase() && (u.type = "MeshPhongMaterial"), "standard" === h.toLowerCase() && (u.type = "MeshStandardMaterial"); break; case "mapDiffuse": u.map = s(h, r.mapDiffuseRepeat, r.mapDiffuseOffset, r.mapDiffuseWrap, r.mapDiffuseAnisotropy); break; case "mapDiffuseRepeat": case "mapDiffuseOffset": case "mapDiffuseWrap": case "mapDiffuseAnisotropy": break; case "mapEmissive": u.emissiveMap = s(h, r.mapEmissiveRepeat, r.mapEmissiveOffset, r.mapEmissiveWrap, r.mapEmissiveAnisotropy); break; case "mapEmissiveRepeat": case "mapEmissiveOffset": case "mapEmissiveWrap": case "mapEmissiveAnisotropy": break; case "mapLight": u.lightMap = s(h, r.mapLightRepeat, r.mapLightOffset, r.mapLightWrap, r.mapLightAnisotropy); break; case "mapLightRepeat": case "mapLightOffset": case "mapLightWrap": case "mapLightAnisotropy": break; case "mapAO": u.aoMap = s(h, r.mapAORepeat, r.mapAOOffset, r.mapAOWrap, r.mapAOAnisotropy); break; case "mapAORepeat": case "mapAOOffset": case "mapAOWrap": case "mapAOAnisotropy": break; case "mapBump": u.bumpMap = s(h, r.mapBumpRepeat, r.mapBumpOffset, r.mapBumpWrap, r.mapBumpAnisotropy); break; case "mapBumpScale": u.bumpScale = h; break; case "mapBumpRepeat": case "mapBumpOffset": case "mapBumpWrap": case "mapBumpAnisotropy": break; case "mapNormal": u.normalMap = s(h, r.mapNormalRepeat, r.mapNormalOffset, r.mapNormalWrap, r.mapNormalAnisotropy); break; case "mapNormalFactor": u.normalScale = h; break; case "mapNormalRepeat": case "mapNormalOffset": case "mapNormalWrap": case "mapNormalAnisotropy": break; case "mapSpecular": u.specularMap = s(h, r.mapSpecularRepeat, r.mapSpecularOffset, r.mapSpecularWrap, r.mapSpecularAnisotropy); break; case "mapSpecularRepeat": case "mapSpecularOffset": case "mapSpecularWrap": case "mapSpecularAnisotropy": break; case "mapMetalness": u.metalnessMap = s(h, r.mapMetalnessRepeat, r.mapMetalnessOffset, r.mapMetalnessWrap, r.mapMetalnessAnisotropy); break; case "mapMetalnessRepeat": case "mapMetalnessOffset": case "mapMetalnessWrap": case "mapMetalnessAnisotropy": break; case "mapRoughness": u.roughnessMap = s(h, r.mapRoughnessRepeat, r.mapRoughnessOffset, r.mapRoughnessWrap, r.mapRoughnessAnisotropy); break; case "mapRoughnessRepeat": case "mapRoughnessOffset": case "mapRoughnessWrap": case "mapRoughnessAnisotropy": break; case "mapAlpha": u.alphaMap = s(h, r.mapAlphaRepeat, r.mapAlphaOffset, r.mapAlphaWrap, r.mapAlphaAnisotropy); break; case "mapAlphaRepeat": case "mapAlphaOffset": case "mapAlphaWrap": case "mapAlphaAnisotropy": break; case "flipSided": u.side = oa; break; case "doubleSided": u.side = aa; break; case "transparency": console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"), u.opacity = h; break; case "depthTest": case "depthWrite": case "colorWrite": case "opacity": case "reflectivity": case "transparent": case "visible": case "wireframe": u[l] = h; break; case "vertexColors": !0 === h && (u.vertexColors = ha), "face" === h && (u.vertexColors = la); break; default: console.error("THREE.Loader.createMaterial: Unsupported", l, h) } } return "MeshBasicMaterial" === u.type && delete u.emissive, "MeshPhongMaterial" !== u.type && delete u.specular, 1 > u.opacity && (u.transparent = !0), i.setTextures(c), i.parse(u) } }() }); var _u, xu = { getContext: function () { return void 0 === _u && (_u = new (window.AudioContext || window.webkitAudioContext)), _u }, setContext: function (t) { _u = t } }; Object.assign(rr.prototype, { load: function (t, e, n, i) { var r = new pi(this.manager); r.setResponseType("arraybuffer"), r.setPath(this.path), r.load(t, function (t) { var n = t.slice(0); xu.getContext().decodeAudioData(n, function (t) { e(t) }) }, n, i) }, setPath: function (t) { return this.path = t, this } }), Object.assign(or.prototype, { update: function () { var t, e, n, i, r, a, s, c, u = new o, l = new o; return function (o) { if (t !== this || e !== o.focus || n !== o.fov || i !== o.aspect * this.aspect || r !== o.near || a !== o.far || s !== o.zoom || c !== this.eyeSep) { t = this, e = o.focus, n = o.fov, i = o.aspect * this.aspect, r = o.near, a = o.far, s = o.zoom; var h, f, p = o.projectionMatrix.clone(), d = (c = this.eyeSep / 2) * r / e, m = r * Po(Ac.DEG2RAD * n * .5) / s; l.elements[12] = -c, u.elements[12] = c, h = -m * i + d, f = m * i + d, p.elements[0] = 2 * r / (f - h), p.elements[8] = (f + h) / (f - h), this.cameraL.projectionMatrix.copy(p), h = -m * i - d, f = m * i - d, p.elements[0] = 2 * r / (f - h), p.elements[8] = (f + h) / (f - h), this.cameraR.projectionMatrix.copy(p) } this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(l), this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(u) } }() }), ar.prototype = Object.create(M.prototype), ar.prototype.constructor = ar, Object.assign(sr.prototype, { start: function () { this.startTime = ("undefined" == typeof performance ? Date : performance).now(), this.oldTime = this.startTime, this.elapsedTime = 0, this.running = !0 }, stop: function () { this.getElapsedTime(), this.running = !1, this.autoStart = !1 }, getElapsedTime: function () { return this.getDelta(), this.elapsedTime }, getDelta: function () { var t = 0; if (this.autoStart && !this.running) return this.start(), 0; if (this.running) { var e = ("undefined" == typeof performance ? Date : performance).now(); t = (e - this.oldTime) / 1e3, this.oldTime = e, this.elapsedTime += t } return t } }), cr.prototype = Object.assign(Object.create(M.prototype), { constructor: cr, getInput: function () { return this.gain }, removeFilter: function () { return null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), this.gain.connect(this.context.destination), this.filter = null), this }, getFilter: function () { return this.filter }, setFilter: function (t) { return null === this.filter ? this.gain.disconnect(this.context.destination) : (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)), this.filter = t, this.gain.connect(this.filter), this.filter.connect(this.context.destination), this }, getMasterVolume: function () { return this.gain.gain.value }, setMasterVolume: function (t) { return this.gain.gain.setTargetAtTime(t, this.context.currentTime, .01), this }, updateMatrixWorld: function () { var t = new s, e = new a, n = new s, i = new s, r = new sr; return function (o) { M.prototype.updateMatrixWorld.call(this, o); var a = this.context.listener, s = this.up; if (this.timeDelta = r.getDelta(), this.matrixWorld.decompose(t, e, n), i.set(0, 0, -1).applyQuaternion(e), a.positionX) { var c = this.context.currentTime + this.timeDelta; a.positionX.linearRampToValueAtTime(t.x, c), a.positionY.linearRampToValueAtTime(t.y, c), a.positionZ.linearRampToValueAtTime(t.z, c), a.forwardX.linearRampToValueAtTime(i.x, c), a.forwardY.linearRampToValueAtTime(i.y, c), a.forwardZ.linearRampToValueAtTime(i.z, c), a.upX.linearRampToValueAtTime(s.x, c), a.upY.linearRampToValueAtTime(s.y, c), a.upZ.linearRampToValueAtTime(s.z, c) } else a.setPosition(t.x, t.y, t.z), a.setOrientation(i.x, i.y, i.z, s.x, s.y, s.z) } }() }), ur.prototype = Object.assign(Object.create(M.prototype), { constructor: ur, getOutput: function () { return this.gain }, setNodeSource: function (t) { return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = t, this.connect(), this }, setMediaElementSource: function (t) { return this.hasPlaybackControl = !1, this.sourceType = "mediaNode", this.source = this.context.createMediaElementSource(t), this.connect(), this }, setBuffer: function (t) { return this.buffer = t, this.sourceType = "buffer", this.autoplay && this.play(), this }, play: function () { if (!0 !== this.isPlaying) { if (!1 !== this.hasPlaybackControl) { var t = this.context.createBufferSource(); return t.buffer = this.buffer, t.detune.value = this.detune, t.loop = this.loop, t.onended = this.onEnded.bind(this), t.playbackRate.setValueAtTime(this.playbackRate, this.startTime), this.startTime = this.context.currentTime, t.start(this.startTime, this.offset), this.isPlaying = !0, this.source = t, this.connect() } console.warn("THREE.Audio: this Audio has no playback control.") } else console.warn("THREE.Audio: Audio is already playing.") }, pause: function () { return !1 === this.hasPlaybackControl ? void console.warn("THREE.Audio: this Audio has no playback control.") : (!0 === this.isPlaying && (this.source.stop(), this.source.onended = null, this.offset += (this.context.currentTime - this.startTime) * this.playbackRate, this.isPlaying = !1), this) }, stop: function () { return !1 === this.hasPlaybackControl ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(), this.source.onended = null, this.offset = 0, this.isPlaying = !1, this) }, connect: function () { if (0 < this.filters.length) { this.source.connect(this.filters[0]); for (var t = 1, e = this.filters.length; t < e; t++)this.filters[t - 1].connect(this.filters[t]); this.filters[this.filters.length - 1].connect(this.getOutput()) } else this.source.connect(this.getOutput()); return this }, disconnect: function () { if (0 < this.filters.length) { this.source.disconnect(this.filters[0]); for (var t = 1, e = this.filters.length; t < e; t++)this.filters[t - 1].disconnect(this.filters[t]); this.filters[this.filters.length - 1].disconnect(this.getOutput()) } else this.source.disconnect(this.getOutput()); return this }, getFilters: function () { return this.filters }, setFilters: function (t) { return t || (t = []), !0 === this.isPlaying ? (this.disconnect(), this.filters = t, this.connect()) : this.filters = t, this }, setDetune: function (t) { return this.detune = t, !0 === this.isPlaying && this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, .01), this }, getDetune: function () { return this.detune }, getFilter: function () { return this.getFilters()[0] }, setFilter: function (t) { return this.setFilters(t ? [t] : []) }, setPlaybackRate: function (t) { return !1 === this.hasPlaybackControl ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.playbackRate = t, !0 === this.isPlaying && this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, .01), this) }, getPlaybackRate: function () { return this.playbackRate }, onEnded: function () { this.isPlaying = !1 }, getLoop: function () { return !1 === this.hasPlaybackControl ? (console.warn("THREE.Audio: this Audio has no playback control."), !1) : this.loop }, setLoop: function (t) { return !1 === this.hasPlaybackControl ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.loop = t, !0 === this.isPlaying && (this.source.loop = this.loop), this) }, getVolume: function () { return this.gain.gain.value }, setVolume: function (t) { return this.gain.gain.setTargetAtTime(t, this.context.currentTime, .01), this } }), lr.prototype = Object.assign(Object.create(ur.prototype), { constructor: lr, getOutput: function () { return this.panner }, getRefDistance: function () { return this.panner.refDistance }, setRefDistance: function (t) { return this.panner.refDistance = t, this }, getRolloffFactor: function () { return this.panner.rolloffFactor }, setRolloffFactor: function (t) { return this.panner.rolloffFactor = t, this }, getDistanceModel: function () { return this.panner.distanceModel }, setDistanceModel: function (t) { return this.panner.distanceModel = t, this }, getMaxDistance: function () { return this.panner.maxDistance }, setMaxDistance: function (t) { return this.panner.maxDistance = t, this }, setDirectionalCone: function (t, e, n) { return this.panner.coneInnerAngle = t, this.panner.coneOuterAngle = e, this.panner.coneOuterGain = n, this }, updateMatrixWorld: function () { var t = new s, e = new a, n = new s, i = new s; return function (r) { if (M.prototype.updateMatrixWorld.call(this, r), !1 !== this.isPlaying) { this.matrixWorld.decompose(t, e, n), i.set(0, 0, 1).applyQuaternion(e); var o = this.panner; if (o.positionX) { var a = this.context.currentTime + this.listener.timeDelta; o.positionX.linearRampToValueAtTime(t.x, a), o.positionY.linearRampToValueAtTime(t.y, a), o.positionZ.linearRampToValueAtTime(t.z, a), o.orientationX.linearRampToValueAtTime(i.x, a), o.orientationY.linearRampToValueAtTime(i.y, a), o.orientationZ.linearRampToValueAtTime(i.z, a) } else o.setPosition(t.x, t.y, t.z), o.setOrientation(i.x, i.y, i.z) } } }() }), Object.assign(hr.prototype, { getFrequencyData: function () { return this.analyser.getByteFrequencyData(this.data), this.data }, getAverageFrequency: function () { for (var t = 0, e = this.getFrequencyData(), n = 0; n < e.length; n++)t += e[n]; return t / e.length } }), Object.assign(fr.prototype, { accumulate: function (t, e) { var n = this.buffer, i = this.valueSize, r = t * i + i, o = this.cumulativeWeight; if (0 === o) { for (var a = 0; a !== i; ++a)n[r + a] = n[a]; o = e } else { var s = e / (o += e); this._mixBufferRegion(n, r, 0, s, i) } this.cumulativeWeight = o }, apply: function (t) { var e = this.valueSize, n = this.buffer, i = t * e + e, r = this.cumulativeWeight, o = this.binding; this.cumulativeWeight = 0, 1 > r && this._mixBufferRegion(n, i, 3 * e, 1 - r, e); for (var a = e; a !== e + e; ++a)if (n[a] !== n[a + e]) { o.setValue(n, i); break } }, saveOriginalState: function () { var t = this.binding, e = this.buffer, n = this.valueSize, i = 3 * n; t.getValue(e, i); for (var r = n; r !== i; ++r)e[r] = e[i + r % n]; this.cumulativeWeight = 0 }, restoreOriginalState: function () { var t = 3 * this.valueSize; this.binding.setValue(this.buffer, t) }, _select: function (t, e, n, i, r) { if (.5 <= i) for (var o = 0; o !== r; ++o)t[e + o] = t[n + o] }, _slerp: function (t, e, n, i) { a.slerpFlat(t, e, t, e, t, n, i) }, _lerp: function (t, e, n, i, r) { for (var o, a = 0; a !== r; ++a)t[o = e + a] = t[o] * (1 - i) + t[n + a] * i } }); var wu, Tu, Su = "\\[\\]\\.:\\/"; Object.assign(pr.prototype, { getValue: function (t, e) { this.bind(); var n = this._targetGroup.nCachedObjects_, i = this._bindings[n]; void 0 !== i && i.getValue(t, e) }, setValue: function (t, e) { for (var n = this._bindings, i = this._targetGroup.nCachedObjects_, r = n.length; i !== r; ++i)n[i].setValue(t, e) }, bind: function () { for (var t = this._bindings, e = this._targetGroup.nCachedObjects_, n = t.length; e !== n; ++e)t[e].bind() }, unbind: function () { for (var t = this._bindings, e = this._targetGroup.nCachedObjects_, n = t.length; e !== n; ++e)t[e].unbind() } }), Object.assign(dr, { Composite: pr, create: function (t, e, n) { return t && t.isAnimationObjectGroup ? new dr.Composite(t, e, n) : new dr(t, e, n) }, sanitizeNodeName: function () { var t = /[\[\]\.:\/]/g; return function (e) { return e.replace(/\s/g, "_").replace(t, "") } }(), parseTrackName: function () { var t = "[^" + Su + "]", e = "[^" + Su.replace("\\.", "") + "]", n = /((?:WC+[\/:])*)/.source.replace("WC", t), i = /(WCOD+)?/.source.replace("WCOD", e), r = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", t), o = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", t), a = new RegExp("^" + n + i + r + o + "$"), s = ["material", "materials", "bones"]; return function (t) { var e = a.exec(t); if (!e) throw new Error("PropertyBinding: Cannot parse trackName: " + t); var n = { nodeName: e[2], objectName: e[3], objectIndex: e[4], propertyName: e[5], propertyIndex: e[6] }, i = n.nodeName && n.nodeName.lastIndexOf("."); if (void 0 !== i && -1 !== i) { var r = n.nodeName.substring(i + 1); -1 !== s.indexOf(r) && (n.nodeName = n.nodeName.substring(0, i), n.objectName = r) } if (null === n.propertyName || 0 === n.propertyName.length) throw new Error("PropertyBinding: can not parse propertyName from trackName: " + t); return n } }(), findNode: function (t, e) { if (!e || "" === e || "root" === e || "." === e || -1 === e || e === t.name || e === t.uuid) return t; if (t.skeleton) { var n = t.skeleton.getBoneByName(e); if (void 0 !== n) return n } if (t.children) { var i = function (t) { for (var n, r = 0; r < t.length; r++) { if ((n = t[r]).name === e || n.uuid === e) return n; var o = i(n.children); if (o) return o } return null }, r = i(t.children); if (r) return r } return null } }), Object.assign(dr.prototype, { _getValue_unavailable: function () { }, _setValue_unavailable: function () { }, BindingType: { Direct: 0, EntireArray: 1, ArrayElement: 2, HasFromToArray: 3 }, Versioning: { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 }, GetterByBindingType: [function (t, e) { t[e] = this.node[this.propertyName] }, function (t, e) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)t[e++] = n[i] }, function (t, e) { t[e] = this.resolvedProperty[this.propertyIndex] }, function (t, e) { this.resolvedProperty.toArray(t, e) }], SetterByBindingTypeAndVersioning: [[function (t, e) { this.targetObject[this.propertyName] = t[e] }, function (t, e) { this.targetObject[this.propertyName] = t[e], this.targetObject.needsUpdate = !0 }, function (t, e) { this.targetObject[this.propertyName] = t[e], this.targetObject.matrixWorldNeedsUpdate = !0 }], [function (t, e) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = t[e++] }, function (t, e) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = t[e++]; this.targetObject.needsUpdate = !0 }, function (t, e) { for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i)n[i] = t[e++]; this.targetObject.matrixWorldNeedsUpdate = !0 }], [function (t, e) { this.resolvedProperty[this.propertyIndex] = t[e] }, function (t, e) { this.resolvedProperty[this.propertyIndex] = t[e], this.targetObject.needsUpdate = !0 }, function (t, e) { this.resolvedProperty[this.propertyIndex] = t[e], this.targetObject.matrixWorldNeedsUpdate = !0 }], [function (t, e) { this.resolvedProperty.fromArray(t, e) }, function (t, e) { this.resolvedProperty.fromArray(t, e), this.targetObject.needsUpdate = !0 }, function (t, e) { this.resolvedProperty.fromArray(t, e), this.targetObject.matrixWorldNeedsUpdate = !0 }]], getValue: function (t, e) { this.bind(), this.getValue(t, e) }, setValue: function (t, e) { this.bind(), this.setValue(t, e) }, bind: function () { var t = this.node, e = this.parsedPath, n = e.objectName, i = e.propertyName, r = e.propertyIndex; if (t || (t = dr.findNode(this.rootNode, e.nodeName) || this.rootNode, this.node = t), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, t) { if (n) { var o = e.objectIndex; switch (n) { case "materials": if (!t.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this); if (!t.material.materials) return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this); t = t.material.materials; break; case "bones": if (!t.skeleton) return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this); t = t.skeleton.bones; for (var a = 0; a < t.length; a++)if (t[a].name === o) { o = a; break } break; default: if (void 0 === t[n]) return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this); t = t[n] }if (void 0 !== o) { if (void 0 === t[o]) return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, t); t = t[o] } } var s = t[i]; if (void 0 !== s) { var c = this.Versioning.None; this.targetObject = t, void 0 === t.needsUpdate ? void 0 !== t.matrixWorldNeedsUpdate && (c = this.Versioning.MatrixWorldNeedsUpdate) : c = this.Versioning.NeedsUpdate; var u = this.BindingType.Direct; if (void 0 !== r) { if ("morphTargetInfluences" === i) { if (!t.geometry) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this); if (t.geometry.isBufferGeometry) { if (!t.geometry.morphAttributes) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this); for (a = 0; a < this.node.geometry.morphAttributes.position.length; a++)if (t.geometry.morphAttributes.position[a].name === r) { r = a; break } } else { if (!t.geometry.morphTargets) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.", this); for (a = 0; a < this.node.geometry.morphTargets.length; a++)if (t.geometry.morphTargets[a].name === r) { r = a; break } } } u = this.BindingType.ArrayElement, this.resolvedProperty = s, this.propertyIndex = r } else void 0 !== s.fromArray && void 0 !== s.toArray ? (u = this.BindingType.HasFromToArray, this.resolvedProperty = s) : Array.isArray(s) ? (u = this.BindingType.EntireArray, this.resolvedProperty = s) : this.propertyName = i; this.getValue = this.GetterByBindingType[u], this.setValue = this.SetterByBindingTypeAndVersioning[u][c] } else { var l = e.nodeName; console.error("THREE.PropertyBinding: Trying to update property for track: " + l + "." + i + " but it wasn't found.", t) } } else console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.") }, unbind: function () { this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound } }), Object.assign(dr.prototype, { _getValue_unbound: dr.prototype.getValue, _setValue_unbound: dr.prototype.setValue }), Object.assign(mr.prototype, { isAnimationObjectGroup: !0, add: function () { for (var t = this._objects, e = t.length, n = this.nCachedObjects_, i = this._indicesByUUID, r = this._paths, o = this._parsedPaths, a = this._bindings, s = a.length, c = void 0, u = 0, l = arguments.length; u !== l; ++u) { var h = arguments[u], f = h.uuid, p = i[f]; if (void 0 === p) { p = e++, i[f] = p, t.push(h); for (var d = 0, m = s; d !== m; ++d)a[d].push(new dr(h, r[d], o[d])) } else if (p < n) { c = t[p]; var v = --n, g = t[v]; i[g.uuid] = p, t[p] = g, i[f] = v, t[v] = h; for (d = 0, m = s; d !== m; ++d) { var y = a[d], b = y[v], _ = y[p]; y[p] = b, void 0 === _ && (_ = new dr(h, r[d], o[d])), y[v] = _ } } else t[p] !== c && console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.") } this.nCachedObjects_ = n }, remove: function () { for (var t = this._objects, e = this.nCachedObjects_, n = this._indicesByUUID, i = this._bindings, r = i.length, o = 0, a = arguments.length; o !== a; ++o) { var s = arguments[o], c = s.uuid, u = n[c]; if (void 0 !== u && u >= e) { var l = e++, h = t[l]; n[h.uuid] = u, t[u] = h, n[c] = l, t[l] = s; for (var f = 0; f !== r; ++f) { var p = i[f], d = p[l], m = p[u]; p[u] = d, p[l] = m } } } this.nCachedObjects_ = e }, uncache: function () { for (var t = this._objects, e = t.length, n = this.nCachedObjects_, i = this._indicesByUUID, r = this._bindings, o = r.length, a = 0, s = arguments.length; a !== s; ++a) { var c = arguments[a].uuid, u = i[c]; if (void 0 !== u) if (delete i[c], u < n) { var l = --n, h = t[l], f = t[g = --e]; i[h.uuid] = u, t[u] = h, i[f.uuid] = l, t[l] = f, t.pop(); for (var p = 0, d = o; p !== d; ++p) { var m = (y = r[p])[l], v = y[g]; y[u] = m, y[l] = v, y.pop() } } else { var g; i[(f = t[g = --e]).uuid] = u, t[u] = f, t.pop(); var y; for (p = 0, d = o; p !== d; ++p)(y = r[p])[u] = y[g], y.pop() } } this.nCachedObjects_ = n }, subscribe_: function (t, e) { var n = this._bindingsIndicesByPath, i = n[t], r = this._bindings; if (void 0 !== i) return r[i]; var o = this._paths, a = this._parsedPaths, s = this._objects, c = s.length, u = this.nCachedObjects_, l = Array(c); i = r.length, n[t] = i, o.push(t), a.push(e), r.push(l); for (var h, f = u, p = s.length; f !== p; ++f)h = s[f], l[f] = new dr(h, t, e); return l }, unsubscribe_: function (t) { var e = this._bindingsIndicesByPath, n = e[t]; if (void 0 !== n) { var i = this._paths, r = this._parsedPaths, o = this._bindings, a = o.length - 1, s = o[a]; e[t[a]] = n, o[n] = s, o.pop(), r[n] = r[a], r.pop(), i[n] = i[a], i.pop() } } }), Object.assign(vr.prototype, { play: function () { return this._mixer._activateAction(this), this }, stop: function () { return this._mixer._deactivateAction(this), this.reset() }, reset: function () { return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping() }, isRunning: function () { return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this) }, isScheduled: function () { return this._mixer._isActiveAction(this) }, startAt: function (t) { return this._startTime = t, this }, setLoop: function (t, e) { return this.loop = t, this.repetitions = e, this }, setEffectiveWeight: function (t) { return this.weight = t, this._effectiveWeight = this.enabled ? t : 0, this.stopFading() }, getEffectiveWeight: function () { return this._effectiveWeight }, fadeIn: function (t) { return this._scheduleFading(t, 0, 1) }, fadeOut: function (t) { return this._scheduleFading(t, 1, 0) }, crossFadeFrom: function (t, e, n) { if (t.fadeOut(e), this.fadeIn(e), n) { var i = this._clip.duration, r = t._clip.duration; t.warp(1, r / i, e), this.warp(i / r, 1, e) } return this }, crossFadeTo: function (t, e, n) { return t.crossFadeFrom(this, e, n) }, stopFading: function () { var t = this._weightInterpolant; return null !== t && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(t)), this }, setEffectiveTimeScale: function (t) { return this.timeScale = t, this._effectiveTimeScale = this.paused ? 0 : t, this.stopWarping() }, getEffectiveTimeScale: function () { return this._effectiveTimeScale }, setDuration: function (t) { return this.timeScale = this._clip.duration / t, this.stopWarping() }, syncWith: function (t) { return this.time = t.time, this.timeScale = t.timeScale, this.stopWarping() }, halt: function (t) { return this.warp(this._effectiveTimeScale, 0, t) }, warp: function (t, e, n) { var i = this._mixer, r = i.time, o = this._timeScaleInterpolant, a = this.timeScale; null === o && (o = i._lendControlInterpolant(), this._timeScaleInterpolant = o); var s = o.parameterPositions, c = o.sampleValues; return s[0] = r, s[1] = r + n, c[0] = t / a, c[1] = e / a, this }, stopWarping: function () { var t = this._timeScaleInterpolant; return null !== t && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(t)), this }, getMixer: function () { return this._mixer }, getClip: function () { return this._clip }, getRoot: function () { return this._localRoot || this._mixer._root }, _update: function (t, e, n, i) { if (this.enabled) { var r = this._startTime; if (null !== r) { var o = (t - r) * n; if (0 > o || 0 === n) return; this._startTime = null, e = n * o } e *= this._updateTimeScale(t); var a = this._updateTime(e), s = this._updateWeight(t); if (0 < s) for (var c = this._interpolants, u = this._propertyBindings, l = 0, h = c.length; l !== h; ++l)c[l].evaluate(a), u[l].accumulate(i, s) } else this._updateWeight(t) }, _updateWeight: function (t) { var e = 0; if (this.enabled) { e = this.weight; var n = this._weightInterpolant; if (null !== n) { var i = n.evaluate(t)[0]; e *= i, t > n.parameterPositions[1] && (this.stopFading(), 0 === i && (this.enabled = !1)) } } return this._effectiveWeight = e, e }, _updateTimeScale: function (t) { var e = 0; if (!this.paused) { e = this.timeScale; var n = this._timeScaleInterpolant; if (null !== n) e *= n.evaluate(t)[0], t > n.parameterPositions[1] && (this.stopWarping(), 0 === e ? this.paused = !0 : this.timeScale = e) } return this._effectiveTimeScale = e, e }, _updateTime: function (t) { var e = this.time + t, n = this._clip.duration, i = this.loop, r = this._loopCount, o = i === ac; if (0 === t) return -1 === r ? e : o && 1 == (1 & r) ? n - e : e; if (i === rc) { -1 === r && (this._loopCount = 0, this._setEndings(!0, !0, !1)); t: { if (e >= n) e = n; else { if (!(0 > e)) break t; e = 0 } this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, this._mixer.dispatchEvent({ type: "finished", action: this, direction: 0 > t ? -1 : 1 }) } } else { if (-1 === r && (0 <= t ? (r = 0, this._setEndings(!0, 0 === this.repetitions, o)) : this._setEndings(0 === this.repetitions, !0, o)), e >= n || 0 > e) { var a = Bo(e / n); e -= n * a, r += Wo(a); var s = this.repetitions - r; if (0 >= s) this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, e = 0 < t ? n : 0, this._mixer.dispatchEvent({ type: "finished", action: this, direction: 0 < t ? 1 : -1 }); else { if (1 == s) { var c = 0 > t; this._setEndings(c, !c, o) } else this._setEndings(!1, !1, o); this._loopCount = r, this._mixer.dispatchEvent({ type: "loop", action: this, loopDelta: a }) } } if (o && 1 == (1 & r)) return this.time = e, n - e } return this.time = e, e }, _setEndings: function (t, e, n) { var i = this._interpolantSettings; n ? (i.endingStart = hc, i.endingEnd = hc) : (i.endingStart = t ? this.zeroSlopeAtStart ? hc : lc : fc, i.endingEnd = e ? this.zeroSlopeAtEnd ? hc : lc : fc) }, _scheduleFading: function (t, e, n) { var i = this._mixer, r = i.time, o = this._weightInterpolant; null === o && (o = i._lendControlInterpolant(), this._weightInterpolant = o); var a = o.parameterPositions, s = o.sampleValues; return a[0] = r, s[0] = e, a[1] = r + t, s[1] = n, this } }), gr.prototype = Object.assign(Object.create(i.prototype), { constructor: gr, _bindAction: function (t, e) { var n = t._localRoot || this._root, i = t._clip.tracks, r = i.length, o = t._propertyBindings, a = t._interpolants, s = n.uuid, c = this._bindingsByRootAndName, u = c[s]; void 0 === u && (u = {}, c[s] = u); for (var l = 0; l !== r; ++l) { var h = i[l], f = h.name, p = u[f]; if (void 0 !== p) o[l] = p; else { if (void 0 !== (p = o[l])) { null === p._cacheIndex && (++p.referenceCount, this._addInactiveBinding(p, s, f)); continue } var d = e && e._propertyBindings[l].binding.parsedPath; ++(p = new fr(dr.create(n, f, d), h.ValueTypeName, h.getValueSize())).referenceCount, this._addInactiveBinding(p, s, f), o[l] = p } a[l].resultBuffer = p.buffer } }, _activateAction: function (t) { if (!this._isActiveAction(t)) { if (null === t._cacheIndex) { var e = (t._localRoot || this._root).uuid, n = t._clip.uuid, i = this._actionsByClip[n]; this._bindAction(t, i && i.knownActions[0]), this._addInactiveAction(t, n, e) } for (var r, o = t._propertyBindings, a = 0, s = o.length; a !== s; ++a)0 == (r = o[a]).useCount++ && (this._lendBinding(r), r.saveOriginalState()); this._lendAction(t) } }, _deactivateAction: function (t) { if (this._isActiveAction(t)) { for (var e, n = t._propertyBindings, i = 0, r = n.length; i !== r; ++i)0 == --(e = n[i]).useCount && (e.restoreOriginalState(), this._takeBackBinding(e)); this._takeBackAction(t) } }, _initMemoryManager: function () { this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0; var t = this; this.stats = { actions: { get total() { return t._actions.length }, get inUse() { return t._nActiveActions } }, bindings: { get total() { return t._bindings.length }, get inUse() { return t._nActiveBindings } }, controlInterpolants: { get total() { return t._controlInterpolants.length }, get inUse() { return t._nActiveControlInterpolants } } } }, _isActiveAction: function (t) { var e = t._cacheIndex; return null !== e && e < this._nActiveActions }, _addInactiveAction: function (t, e, n) { var i = this._actions, r = this._actionsByClip, o = r[e]; if (void 0 === o) o = { knownActions: [t], actionByRoot: {} }, t._byClipCacheIndex = 0, r[e] = o; else { var a = o.knownActions; t._byClipCacheIndex = a.length, a.push(t) } t._cacheIndex = i.length, i.push(t), o.actionByRoot[n] = t }, _removeInactiveAction: function (t) { var e = this._actions, n = e[e.length - 1], i = t._cacheIndex; n._cacheIndex = i, e[i] = n, e.pop(), t._cacheIndex = null; var r = t._clip.uuid, o = this._actionsByClip, a = o[r], s = a.knownActions, c = s[s.length - 1], u = t._byClipCacheIndex; c._byClipCacheIndex = u, s[u] = c, s.pop(), t._byClipCacheIndex = null, delete a.actionByRoot[(t._localRoot || this._root).uuid], 0 === s.length && delete o[r], this._removeInactiveBindingsForAction(t) }, _removeInactiveBindingsForAction: function (t) { for (var e, n = t._propertyBindings, i = 0, r = n.length; i !== r; ++i)0 == --(e = n[i]).referenceCount && this._removeInactiveBinding(e) }, _lendAction: function (t) { var e = this._actions, n = t._cacheIndex, i = this._nActiveActions++, r = e[i]; t._cacheIndex = i, e[i] = t, r._cacheIndex = n, e[n] = r }, _takeBackAction: function (t) { var e = this._actions, n = t._cacheIndex, i = --this._nActiveActions, r = e[i]; t._cacheIndex = i, e[i] = t, r._cacheIndex = n, e[n] = r }, _addInactiveBinding: function (t, e, n) { var i = this._bindingsByRootAndName, r = i[e], o = this._bindings; void 0 === r && (r = {}, i[e] = r), r[n] = t, t._cacheIndex = o.length, o.push(t) }, _removeInactiveBinding: function (t) { var e = this._bindings, n = t.binding, i = n.rootNode.uuid, r = n.path, o = this._bindingsByRootAndName, a = o[i], s = e[e.length - 1], c = t._cacheIndex; s._cacheIndex = c, e[c] = s, e.pop(), delete a[r]; t: { for (var u in a) break t; delete o[i] } }, _lendBinding: function (t) { var e = this._bindings, n = t._cacheIndex, i = this._nActiveBindings++, r = e[i]; t._cacheIndex = i, e[i] = t, r._cacheIndex = n, e[n] = r }, _takeBackBinding: function (t) { var e = this._bindings, n = t._cacheIndex, i = --this._nActiveBindings, r = e[i]; t._cacheIndex = i, e[i] = t, r._cacheIndex = n, e[n] = r }, _lendControlInterpolant: function () { var t = this._controlInterpolants, e = this._nActiveControlInterpolants++, n = t[e]; return void 0 === n && ((n = new ti(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer)).__cacheIndex = e, t[e] = n), n }, _takeBackControlInterpolant: function (t) { var e = this._controlInterpolants, n = t.__cacheIndex, i = --this._nActiveControlInterpolants, r = e[i]; t.__cacheIndex = i, e[i] = t, r.__cacheIndex = n, e[n] = r }, _controlInterpolantsResultBuffer: new Float32Array(1), clipAction: function (t, e) { var n = e || this._root, i = n.uuid, r = "string" == typeof t ? li.findByName(n, t) : t, o = null === r ? t : r.uuid, a = this._actionsByClip[o], s = null; if (void 0 !== a) { var c = a.actionByRoot[i]; if (void 0 !== c) return c; s = a.knownActions[0], null === r && (r = s._clip) } if (null === r) return null; var u = new vr(this, r, e); return this._bindAction(u, s), this._addInactiveAction(u, o, i), u }, existingAction: function (t, e) { var n = e || this._root, i = n.uuid, r = "string" == typeof t ? li.findByName(n, t) : t, o = r ? r.uuid : t, a = this._actionsByClip[o]; return void 0 === a ? null : a.actionByRoot[i] || null }, stopAllAction: function () { var t = this._actions, e = this._nActiveActions, n = this._bindings, i = this._nActiveBindings; this._nActiveActions = 0, this._nActiveBindings = 0; for (var r = 0; r !== e; ++r)t[r].reset(); for (r = 0; r !== i; ++r)n[r].useCount = 0; return this }, update: function (t) { t *= this.timeScale; for (var e = this._actions, n = this._nActiveActions, i = this.time += t, r = Io(t), o = this._accuIndex ^= 1, a = 0; a !== n; ++a)e[a]._update(i, t, r, o); var s = this._bindings, c = this._nActiveBindings; for (a = 0; a !== c; ++a)s[a].apply(o); return this }, getRoot: function () { return this._root }, uncacheClip: function (t) { var e = this._actions, n = t.uuid, i = this._actionsByClip, r = i[n]; if (void 0 !== r) { for (var o, a = r.knownActions, s = 0, c = a.length; s !== c; ++s) { o = a[s], this._deactivateAction(o); var u = o._cacheIndex, l = e[e.length - 1]; o._cacheIndex = null, o._byClipCacheIndex = null, l._cacheIndex = u, e[u] = l, e.pop(), this._removeInactiveBindingsForAction(o) } delete i[n] } }, uncacheRoot: function (t) { var e = t.uuid, n = this._actionsByClip; for (var i in n) { var r = n[i].actionByRoot[e]; void 0 !== r && (this._deactivateAction(r), this._removeInactiveAction(r)) } var o = this._bindingsByRootAndName[e]; if (void 0 !== o) for (var a in o) { var s = o[a]; s.restoreOriginalState(), this._removeInactiveBinding(s) } }, uncacheAction: function (t, e) { var n = this.existingAction(t, e); null !== n && (this._deactivateAction(n), this._removeInactiveAction(n)) } }), yr.prototype.clone = function () { return new yr(void 0 === this.value.clone ? this.value : this.value.clone()) }, br.prototype = Object.assign(Object.create(H.prototype), { constructor: br, isInstancedBufferGeometry: !0, copy: function (t) { return H.prototype.copy.call(this, t), this.maxInstancedCount = t.maxInstancedCount, this }, clone: function () { return (new this.constructor).copy(this) } }), _r.prototype = Object.assign(Object.create(de.prototype), { constructor: _r, isInstancedInterleavedBuffer: !0, copy: function (t) { return de.prototype.copy.call(this, t), this.meshPerAttribute = t.meshPerAttribute, this } }), xr.prototype = Object.assign(Object.create(E.prototype), { constructor: xr, isInstancedBufferAttribute: !0, copy: function (t) { return E.prototype.copy.call(this, t), this.meshPerAttribute = t.meshPerAttribute, this } }), Object.assign(wr.prototype, { linePrecision: 1, set: function (t, e) { this.ray.set(t, e) }, setFromCamera: function (t, e) { e && e.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld), this.ray.direction.set(t.x, t.y, .5).unproject(e).sub(this.ray.origin).normalize()) : e && e.isOrthographicCamera ? (this.ray.origin.set(t.x, t.y, (e.near + e.far) / (e.near - e.far)).unproject(e), this.ray.direction.set(0, 0, -1).transformDirection(e.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.") }, intersectObject: function (t, e, n) { var i = n || []; return Sr(t, this, i, e), i.sort(Tr), i }, intersectObjects: function (t, e, n) { var i = n || []; if (!1 === Array.isArray(t)) return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), i; for (var r = 0, o = t.length; r < o; r++)Sr(t[r], this, i, e); return i.sort(Tr), i } }), Object.assign(Mr.prototype, { set: function (t, e, n) { return this.radius = t, this.phi = e, this.theta = n, this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.radius = t.radius, this.phi = t.phi, this.theta = t.theta, this }, makeSafe: function () { return this.phi = No(1e-6, Uo(Fo - 1e-6, this.phi)), this }, setFromVector3: function (t) { return this.setFromCartesianCoords(t.x, t.y, t.z) }, setFromCartesianCoords: function (t, e, n) { return this.radius = Ho(t * t + e * e + n * n), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Vo(t, n), this.phi = Co(Ac.clamp(e / this.radius, -1, 1))), this } }), Object.assign(Pr.prototype, { set: function (t, e, n) { return this.radius = t, this.theta = e, this.y = n, this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.radius = t.radius, this.theta = t.theta, this.y = t.y, this }, setFromVector3: function (t) { return this.setFromCartesianCoords(t.x, t.y, t.z) }, setFromCartesianCoords: function (t, e, n) { return this.radius = Ho(t * t + n * n), this.theta = Vo(t, n), this.y = e, this } }), Object.assign(Er.prototype, { set: function (t, e) { return this.min.copy(t), this.max.copy(e), this }, setFromPoints: function (t) { this.makeEmpty(); for (var e = 0, n = t.length; e < n; e++)this.expandByPoint(t[e]); return this }, setFromCenterAndSize: function () { var t = new r; return function (e, n) { var i = t.copy(n).multiplyScalar(.5); return this.min.copy(e).sub(i), this.max.copy(e).add(i), this } }(), clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.min.copy(t.min), this.max.copy(t.max), this }, makeEmpty: function () { return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this }, isEmpty: function () { return this.max.x < this.min.x || this.max.y < this.min.y }, getCenter: function (t) { return void 0 === t && (console.warn("THREE.Box2: .getCenter() target is now required"), t = new r), this.isEmpty() ? t.set(0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5) }, getSize: function (t) { return void 0 === t && (console.warn("THREE.Box2: .getSize() target is now required"), t = new r), this.isEmpty() ? t.set(0, 0) : t.subVectors(this.max, this.min) }, expandByPoint: function (t) { return this.min.min(t), this.max.max(t), this }, expandByVector: function (t) { return this.min.sub(t), this.max.add(t), this }, expandByScalar: function (t) { return this.min.addScalar(-t), this.max.addScalar(t), this }, containsPoint: function (t) { return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y) }, containsBox: function (t) { return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y }, getParameter: function (t, e) { return void 0 === e && (console.warn("THREE.Box2: .getParameter() target is now required"), e = new r), e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y)) }, intersectsBox: function (t) { return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y) }, clampPoint: function (t, e) { return void 0 === e && (console.warn("THREE.Box2: .clampPoint() target is now required"), e = new r), e.copy(t).clamp(this.min, this.max) }, distanceToPoint: function () { var t = new r; return function (e) { return t.copy(e).clamp(this.min, this.max).sub(e).length() } }(), intersect: function (t) { return this.min.max(t.min), this.max.min(t.max), this }, union: function (t) { return this.min.min(t.min), this.max.max(t.max), this }, translate: function (t) { return this.min.add(t), this.max.add(t), this }, equals: function (t) { return t.min.equals(this.min) && t.max.equals(this.max) } }), Object.assign(Ar.prototype, { set: function (t, e) { return this.start.copy(t), this.end.copy(e), this }, clone: function () { return (new this.constructor).copy(this) }, copy: function (t) { return this.start.copy(t.start), this.end.copy(t.end), this }, getCenter: function (t) { return void 0 === t && (console.warn("THREE.Line3: .getCenter() target is now required"), t = new s), t.addVectors(this.start, this.end).multiplyScalar(.5) }, delta: function (t) { return void 0 === t && (console.warn("THREE.Line3: .delta() target is now required"), t = new s), t.subVectors(this.end, this.start) }, distanceSq: function () { return this.start.distanceToSquared(this.end) }, distance: function () { return this.start.distanceTo(this.end) }, at: function (t, e) { return void 0 === e && (console.warn("THREE.Line3: .at() target is now required"), e = new s), this.delta(e).multiplyScalar(t).add(this.start) }, closestPointToPointParameter: function () { var t = new s, e = new s; return function (n, i) { t.subVectors(n, this.start), e.subVectors(this.end, this.start); var r = e.dot(e), o = e.dot(t) / r; return i && (o = Ac.clamp(o, 0, 1)), o } }(), closestPointToPoint: function (t, e, n) { var i = this.closestPointToPointParameter(t, e); return void 0 === n && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"), n = new s), this.delta(n).multiplyScalar(i).add(this.start) }, applyMatrix4: function (t) { return this.start.applyMatrix4(t), this.end.applyMatrix4(t), this }, equals: function (t) { return t.start.equals(this.start) && t.end.equals(this.end) } }), Cr.prototype = Object.create(M.prototype), Cr.prototype.constructor = Cr, Cr.prototype.isImmediateRenderObject = !0, Lr.prototype = Object.create(Se.prototype), Lr.prototype.constructor = Lr, Lr.prototype.update = function () { var t = new s, e = new s, n = new c; return function () { var i = ["a", "b", "c"]; this.object.updateMatrixWorld(!0), n.getNormalMatrix(this.object.matrixWorld); var r = this.object.matrixWorld, o = this.geometry.attributes.position, a = this.object.geometry; if (a && a.isGeometry) for (var s, c = a.vertices, u = a.faces, l = 0, h = 0, f = u.length; h < f; h++)for (var p = 0, d = (s = u[h]).vertexNormals.length; p < d; p++) { var m = c[s[i[p]]], v = s.vertexNormals[p]; t.copy(m).applyMatrix4(r), e.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t), o.setXYZ(l, t.x, t.y, t.z), ++l, o.setXYZ(l, e.x, e.y, e.z), ++l } else if (a && a.isBufferGeometry) { var g = a.attributes.position, y = a.attributes.normal; for (l = 0, p = 0, d = g.count; p < d; p++)t.set(g.getX(p), g.getY(p), g.getZ(p)).applyMatrix4(r), e.set(y.getX(p), y.getY(p), y.getZ(p)), e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t), o.setXYZ(l, t.x, t.y, t.z), ++l, o.setXYZ(l, e.x, e.y, e.z), ++l } o.needsUpdate = !0 } }(), Rr.prototype = Object.create(M.prototype), Rr.prototype.constructor = Rr, Rr.prototype.dispose = function () { this.cone.geometry.dispose(), this.cone.material.dispose() }, Rr.prototype.update = function () { var t = new s; return function () { this.light.updateMatrixWorld(); var e = this.light.distance ? this.light.distance : 1e3, n = e * Po(this.light.angle); this.cone.scale.set(n, n, e), t.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(t), void 0 === this.color ? this.cone.material.color.copy(this.light.color) : this.cone.material.color.set(this.color) } }(), Or.prototype = Object.create(Se.prototype), Or.prototype.constructor = Or, Or.prototype.updateMatrixWorld = function () { var t = new s, e = new o, n = new o; return function (i) { var r = this.bones, o = this.geometry, a = o.getAttribute("position"); n.getInverse(this.root.matrixWorld); for (var s, c = 0, u = 0; c < r.length; c++)(s = r[c]).parent && s.parent.isBone && (e.multiplyMatrices(n, s.matrixWorld), t.setFromMatrixPosition(e), a.setXYZ(u, t.x, t.y, t.z), e.multiplyMatrices(n, s.parent.matrixWorld), t.setFromMatrixPosition(e), a.setXYZ(u + 1, t.x, t.y, t.z), u += 2); o.getAttribute("position").needsUpdate = !0, M.prototype.updateMatrixWorld.call(this, i) } }(), Ir.prototype = Object.create($.prototype), Ir.prototype.constructor = Ir, Ir.prototype.dispose = function () { this.geometry.dispose(), this.material.dispose() }, Ir.prototype.update = function () { void 0 === this.color ? this.material.color.copy(this.light.color) : this.material.color.set(this.color) }, Dr.prototype = Object.create(Te.prototype), Dr.prototype.constructor = Dr, Dr.prototype.update = function () { if (this.scale.set(.5 * this.light.width, .5 * this.light.height, 1), void 0 !== this.color) this.material.color.set(this.color), this.children[0].material.color.set(this.color); else { this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity); var t = this.material.color, e = No(t.r, t.g, t.b); 1 < e && t.multiplyScalar(1 / e), this.children[0].material.color.copy(this.material.color) } }, Dr.prototype.dispose = function () { this.geometry.dispose(), this.material.dispose(), this.children[0].geometry.dispose(), this.children[0].material.dispose() }, Gr.prototype = Object.create(M.prototype), Gr.prototype.constructor = Gr, Gr.prototype.dispose = function () { this.children[0].geometry.dispose(), this.children[0].material.dispose() }, Gr.prototype.update = function () { var t = new s, e = new _, n = new _; return function () { var i = this.children[0]; if (void 0 !== this.color) this.material.color.set(this.color); else { var r = i.geometry.getAttribute("color"); e.copy(this.light.color), n.copy(this.light.groundColor); for (var o, a = 0, s = r.count; a < s; a++)o = a < s / 2 ? e : n, r.setXYZ(a, o.r, o.g, o.b); r.needsUpdate = !0 } i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()) } }(), Br.prototype = Object.create(Se.prototype), Br.prototype.constructor = Br, kr.prototype = Object.create(Se.prototype), kr.prototype.constructor = kr, Nr.prototype = Object.create(Se.prototype), Nr.prototype.constructor = Nr, Nr.prototype.update = function () { var t = new s, e = new s, n = new c; return function () { this.object.updateMatrixWorld(!0), n.getNormalMatrix(this.object.matrixWorld); for (var i = this.object.matrixWorld, r = this.geometry.attributes.position, o = this.object.geometry, a = o.vertices, s = o.faces, c = 0, u = 0, l = s.length; u < l; u++) { var h = s[u], f = h.normal; t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i), e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t), r.setXYZ(c, t.x, t.y, t.z), ++c, r.setXYZ(c, e.x, e.y, e.z), ++c } r.needsUpdate = !0 } }(), Hr.prototype = Object.create(M.prototype), Hr.prototype.constructor = Hr, Hr.prototype.dispose = function () { this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose() }, Hr.prototype.update = function () { var t = new s, e = new s, n = new s; return function () { t.setFromMatrixPosition(this.light.matrixWorld), e.setFromMatrixPosition(this.light.target.matrixWorld), n.subVectors(e, t), this.lightPlane.lookAt(e), void 0 === this.color ? (this.lightPlane.material.color.copy(this.light.color), this.targetLine.material.color.copy(this.light.color)) : (this.lightPlane.material.color.set(this.color), this.targetLine.material.color.set(this.color)), this.targetLine.lookAt(e), this.targetLine.scale.z = n.length() } }(), Fr.prototype = Object.create(Se.prototype), Fr.prototype.constructor = Fr, Fr.prototype.update = function () { function t(t, o, a, s) { i.set(o, a, s).unproject(r); var c = n[t]; if (void 0 !== c) for (var u = e.getAttribute("position"), l = 0, h = c.length; l < h; l++)u.setXYZ(c[l], i.x, i.y, i.z) } var e, n, i = new s, r = new oe; return function () { e = this.geometry, n = this.pointMap; r.projectionMatrix.copy(this.camera.projectionMatrix), t("c", 0, 0, -1), t("t", 0, 0, 1), t("n1", -1, -1, -1), t("n2", 1, -1, -1), t("n3", -1, 1, -1), t("n4", 1, 1, -1), t("f1", -1, -1, 1), t("f2", 1, -1, 1), t("f3", -1, 1, 1), t("f4", 1, 1, 1), t("u1", .7, 1.1, -1), t("u2", -.7, 1.1, -1), t("u3", 0, 2, -1), t("cf1", -1, 0, 1), t("cf2", 1, 0, 1), t("cf3", 0, -1, 1), t("cf4", 0, 1, 1), t("cn1", -1, 0, -1), t("cn2", 1, 0, -1), t("cn3", 0, -1, -1), t("cn4", 0, 1, -1), e.getAttribute("position").needsUpdate = !0 } }(), Ur.prototype = Object.create(Se.prototype), Ur.prototype.constructor = Ur, Ur.prototype.update = function () { var t = new d; return function (e) { if (void 0 !== e && console.warn("THREE.BoxHelper: .update() has no longer arguments."), void 0 !== this.object && t.setFromObject(this.object), !t.isEmpty()) { var n = t.min, i = t.max, r = this.geometry.attributes.position, o = r.array; o[0] = i.x, o[1] = i.y, o[2] = i.z, o[3] = n.x, o[4] = i.y, o[5] = i.z, o[6] = n.x, o[7] = n.y, o[8] = i.z, o[9] = i.x, o[10] = n.y, o[11] = i.z, o[12] = i.x, o[13] = i.y, o[14] = n.z, o[15] = n.x, o[16] = i.y, o[17] = n.z, o[18] = n.x, o[19] = n.y, o[20] = n.z, o[21] = i.x, o[22] = n.y, o[23] = n.z, r.needsUpdate = !0, this.geometry.computeBoundingSphere() } } }(), Ur.prototype.setFromObject = function (t) { return this.object = t, this.update(), this }, Ur.prototype.copy = function (t) { return Se.prototype.copy.call(this, t), this.object = t.object, this }, Ur.prototype.clone = function () { return (new this.constructor).copy(this) }, zr.prototype = Object.create(Se.prototype), zr.prototype.constructor = zr, zr.prototype.updateMatrixWorld = function (t) { var e = this.box; e.isEmpty() || (e.getCenter(this.position), e.getSize(this.scale), this.scale.multiplyScalar(.5), M.prototype.updateMatrixWorld.call(this, t)) }, jr.prototype = Object.create(Te.prototype), jr.prototype.constructor = jr, jr.prototype.updateMatrixWorld = function (t) { var e = -this.plane.constant; 1e-8 > Wo(e) && (e = 1e-8), this.scale.set(.5 * this.size, .5 * this.size, e), this.children[0].material.side = 0 > e ? oa : ra, this.lookAt(this.plane.normal), M.prototype.updateMatrixWorld.call(this, t) }, Vr.prototype = Object.create(M.prototype), Vr.prototype.constructor = Vr, Vr.prototype.setDirection = function () { var t, e = new s; return function (n) { .99999 < n.y ? this.quaternion.set(0, 0, 0, 1) : -.99999 > n.y ? this.quaternion.set(1, 0, 0, 0) : (e.set(n.z, 0, -n.x).normalize(), t = Co(n.y), this.quaternion.setFromAxisAngle(e, t)) } }(), Vr.prototype.setLength = function (t, e, n) { void 0 === e && (e = .2 * t), void 0 === n && (n = .2 * e), this.line.scale.set(1, No(0, t - e), 1), this.line.updateMatrix(), this.cone.scale.set(n, e, n), this.cone.position.y = t, this.cone.updateMatrix() }, Vr.prototype.setColor = function (t) { this.line.material.color.copy(t), this.cone.material.color.copy(t) }, Vr.prototype.copy = function (t) { return M.prototype.copy.call(this, t, !1), this.line.copy(t.line), this.cone.copy(t.cone), this }, Vr.prototype.clone = function () { return (new this.constructor).copy(this) }, Wr.prototype = Object.create(Se.prototype), Wr.prototype.constructor = Wr; var Mu = 0, Pu = 1; _i.create = function (t, e) { return console.log("THREE.Curve.create() has been deprecated"), t.prototype = Object.create(_i.prototype), t.prototype.constructor = t, t.prototype.getPoint = e, t }, Object.assign(Gi.prototype, { createPointsGeometry: function (t) { console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); var e = this.getPoints(t); return this.createGeometry(e) }, createSpacedPointsGeometry: function (t) { console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); var e = this.getSpacedPoints(t); return this.createGeometry(e) }, createGeometry: function (t) { console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); for (var e, n = new P, i = 0, r = t.length; i < r; i++)e = t[i], n.vertices.push(new s(e.x, e.y, e.z || 0)); return n } }), Object.assign(Bi.prototype, { fromPoints: function (t) { console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."), this.setFromPoints(t) } }), fo.prototype = Object.create(Si.prototype), po.prototype = Object.create(Si.prototype), mo.prototype = Object.create(Si.prototype), Object.assign(mo.prototype, { initFromArray: function () { console.error("THREE.Spline: .initFromArray() has been removed.") }, getControlPointsArray: function () { console.error("THREE.Spline: .getControlPointsArray() has been removed.") }, reparametrizeByArcLength: function () { console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.") } }), Br.prototype.setColors = function () { console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.") }, Or.prototype.update = function () { console.error("THREE.SkeletonHelper: update() no longer needs to be called.") }, Object.assign(ir.prototype, { extractUrlBase: function (t) { return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."), mu.extractUrlBase(t) } }), Object.assign(Ki.prototype, { setTexturePath: function (t) { return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."), this.setResourcePath(t) } }), Object.assign(Er.prototype, { center: function (t) { return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."), this.getCenter(t) }, empty: function () { return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."), this.isEmpty() }, isIntersectionBox: function (t) { return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(t) }, size: function (t) { return console.warn("THREE.Box2: .size() has been renamed to .getSize()."), this.getSize(t) } }), Object.assign(d.prototype, { center: function (t) { return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."), this.getCenter(t) }, empty: function () { return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."), this.isEmpty() }, isIntersectionBox: function (t) { return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(t) }, isIntersectionSphere: function (t) { return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(t) }, size: function (t) { return console.warn("THREE.Box3: .size() has been renamed to .getSize()."), this.getSize(t) } }), Ar.prototype.center = function (t) { return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."), this.getCenter(t) }, Object.assign(Ac, { random16: function () { return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."), Math.random() }, nearestPowerOfTwo: function (t) { return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."), Ac.floorPowerOfTwo(t) }, nextPowerOfTwo: function (t) { return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."), Ac.ceilPowerOfTwo(t) } }), Object.assign(c.prototype, { flattenToArrayOffset: function (t, e) { return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(t, e) }, multiplyVector3: function (t) { return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), t.applyMatrix3(this) }, multiplyVector3Array: function () { console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.") }, applyToBuffer: function (t) { return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."), this.applyToBufferAttribute(t) }, applyToVector3Array: function () { console.error("THREE.Matrix3: .applyToVector3Array() has been removed.") } }), Object.assign(o.prototype, { extractPosition: function (t) { return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(t) }, flattenToArrayOffset: function (t, e) { return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(t, e) }, getPosition: function () { var t; return function () { return void 0 == t && (t = new s), console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."), t.setFromMatrixColumn(this, 3) } }(), setRotationFromQuaternion: function (t) { return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(t) }, multiplyToArray: function () { console.warn("THREE.Matrix4: .multiplyToArray() has been removed.") }, multiplyVector3: function (t) { return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."), t.applyMatrix4(this) }, multiplyVector4: function (t) { return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), t.applyMatrix4(this) }, multiplyVector3Array: function () { console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.") }, rotateAxis: function (t) { console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), t.transformDirection(this) }, crossVector: function (t) { return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), t.applyMatrix4(this) }, translate: function () { console.error("THREE.Matrix4: .translate() has been removed.") }, rotateX: function () { console.error("THREE.Matrix4: .rotateX() has been removed.") }, rotateY: function () { console.error("THREE.Matrix4: .rotateY() has been removed.") }, rotateZ: function () { console.error("THREE.Matrix4: .rotateZ() has been removed.") }, rotateByAxis: function () { console.error("THREE.Matrix4: .rotateByAxis() has been removed.") }, applyToBuffer: function (t) { return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."), this.applyToBufferAttribute(t) }, applyToVector3Array: function () { console.error("THREE.Matrix4: .applyToVector3Array() has been removed.") }, makeFrustum: function (t, e, n, i, r, o) { return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."), this.makePerspective(t, e, i, n, r, o) } }), v.prototype.isIntersectionLine = function (t) { return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."), this.intersectsLine(t) }, a.prototype.multiplyVector3 = function (t) { return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), t.applyQuaternion(this) }, Object.assign(X.prototype, { isIntersectionBox: function (t) { return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(t) }, isIntersectionPlane: function (t) { return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."), this.intersectsPlane(t) }, isIntersectionSphere: function (t) { return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(t) } }), Object.assign(q.prototype, { area: function () { return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."), this.getArea() }, barycoordFromPoint: function (t, e) { return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), this.getBarycoord(t, e) }, midpoint: function (t) { return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."), this.getMidpoint(t) }, normal: function (t) { return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), this.getNormal(t) }, plane: function (t) { return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."), this.getPlane(t) } }), Object.assign(q, { barycoordFromPoint: function (t, e, n, i, r) { return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), q.getBarycoord(t, e, n, i, r) }, normal: function (t, e, n, i) { return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), q.getNormal(t, e, n, i) } }), Object.assign(ki.prototype, { extractAllPoints: function (t) { return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."), this.extractPoints(t) }, extrude: function (t) { return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."), new xn(this, t) }, makeGeometry: function (t) { return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."), new On(this, t) } }), Object.assign(r.prototype, { fromAttribute: function (t, e, n) { return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(t, e, n) }, distanceToManhattan: function (t) { return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(t) }, lengthManhattan: function () { return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength() } }), Object.assign(s.prototype, { setEulerFromRotationMatrix: function () { console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.") }, setEulerFromQuaternion: function () { console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.") }, getPositionFromMatrix: function (t) { return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(t) }, getScaleFromMatrix: function (t) { return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(t) }, getColumnFromMatrix: function (t, e) { return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(e, t) }, applyProjection: function (t) { return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."), this.applyMatrix4(t) }, fromAttribute: function (t, e, n) { return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(t, e, n) }, distanceToManhattan: function (t) { return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(t) }, lengthManhattan: function () { return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength() } }), Object.assign(l.prototype, { fromAttribute: function (t, e, n) { return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(t, e, n) }, lengthManhattan: function () { return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength() } }), Object.assign(P.prototype, { computeTangents: function () { console.error("THREE.Geometry: .computeTangents() has been removed.") }, computeLineDistances: function () { console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.") } }), Object.assign(M.prototype, { getChildByName: function (t) { return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(t) }, renderDepth: function () { console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.") }, translate: function (t, e) { return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(e, t) }, getWorldRotation: function () { console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.") } }), Object.defineProperties(M.prototype, { eulerOrder: { get: function () { return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order }, set: function (t) { console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = t } }, useQuaternion: { get: function () { console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.") }, set: function () { console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.") } } }), Object.defineProperties(ye.prototype, { objects: { get: function () { return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels } } }), Object.defineProperty(_e.prototype, "useVertexTexture", { get: function () { console.warn("THREE.Skeleton: useVertexTexture has been removed.") }, set: function () { console.warn("THREE.Skeleton: useVertexTexture has been removed.") } }), be.prototype.initBones = function () { console.error("THREE.SkinnedMesh: initBones() has been removed.") }, Object.defineProperty(_i.prototype, "__arcLengthDivisions", { get: function () { return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions }, set: function (t) { console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions = t } }), ae.prototype.setLens = function (t, e) { console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."), void 0 !== e && (this.filmGauge = e), this.setFocalLength(t) }, Object.defineProperties(Ni.prototype, { onlyShadow: { set: function () { console.warn("THREE.Light: .onlyShadow has been removed.") } }, shadowCameraFov: { set: function (t) { console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."), this.shadow.camera.fov = t } }, shadowCameraLeft: { set: function (t) { console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."), this.shadow.camera.left = t } }, shadowCameraRight: { set: function (t) { console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."), this.shadow.camera.right = t } }, shadowCameraTop: { set: function (t) { console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."), this.shadow.camera.top = t } }, shadowCameraBottom: { set: function (t) { console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."), this.shadow.camera.bottom = t } }, shadowCameraNear: { set: function (t) { console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."), this.shadow.camera.near = t } }, shadowCameraFar: { set: function (t) { console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."), this.shadow.camera.far = t } }, shadowCameraVisible: { set: function () { console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.") } }, shadowBias: { set: function (t) { console.warn("THREE.Light: .shadowBias is now .shadow.bias."), this.shadow.bias = t } }, shadowDarkness: { set: function () { console.warn("THREE.Light: .shadowDarkness has been removed.") } }, shadowMapWidth: { set: function (t) { console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."), this.shadow.mapSize.width = t } }, shadowMapHeight: { set: function (t) { console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."), this.shadow.mapSize.height = t } } }), Object.defineProperties(E.prototype, { length: { get: function () { return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."), this.array.length } }, copyIndicesArray: function () { console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.") } }), Object.assign(H.prototype, { addIndex: function (t) { console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), this.setIndex(t) }, addDrawCall: function (t, e, n) { void 0 !== n && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(t, e) }, clearDrawCalls: function () { console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), this.clearGroups() }, computeTangents: function () { console.warn("THREE.BufferGeometry: .computeTangents() has been removed.") }, computeOffsets: function () { console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.") } }), Object.defineProperties(H.prototype, { drawcalls: { get: function () { return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), this.groups } }, offsets: { get: function () { return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), this.groups } } }), Object.assign(wn.prototype, { getArrays: function () { console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.") }, addShapeList: function () { console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.") }, addShape: function () { console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.") } }), Object.defineProperties(yr.prototype, { dynamic: { set: function () { console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.") } }, onUpdate: { value: function () { return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."), this } } }), Object.defineProperties(V.prototype, { wrapAround: { get: function () { console.warn("THREE.Material: .wrapAround has been removed.") }, set: function () { console.warn("THREE.Material: .wrapAround has been removed.") } }, overdraw: { get: function () { console.warn("THREE.Material: .overdraw has been removed.") }, set: function () { console.warn("THREE.Material: .overdraw has been removed.") } }, wrapRGB: { get: function () { return console.warn("THREE.Material: .wrapRGB has been removed."), new _ } }, shading: { get: function () { console.error("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead.") }, set: function (t) { console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = t === sa } } }), Object.defineProperties(Xn.prototype, { metal: { get: function () { return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."), !1 }, set: function () { console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead") } } }), Object.defineProperties(W.prototype, { derivatives: { get: function () { return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives }, set: function (t) { console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives = t } } }), Object.assign(le.prototype, { clearTarget: function (t, e, n, i) { console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."), this.setRenderTarget(t), this.clear(e, n, i) }, animate: function (t) { console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."), this.setAnimationLoop(t) }, getCurrentRenderTarget: function () { return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."), this.getRenderTarget() }, getMaxAnisotropy: function () { return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."), this.capabilities.getMaxAnisotropy() }, getPrecision: function () { return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."), this.capabilities.precision }, resetGLState: function () { return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."), this.state.reset() }, supportsFloatTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), this.extensions.get("OES_texture_float") }, supportsHalfFloatTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), this.extensions.get("OES_texture_half_float") }, supportsStandardDerivatives: function () { return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), this.extensions.get("OES_standard_derivatives") }, supportsCompressedTextureS3TC: function () { return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), this.extensions.get("WEBGL_compressed_texture_s3tc") }, supportsCompressedTexturePVRTC: function () { return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."), this.extensions.get("WEBGL_compressed_texture_pvrtc") }, supportsBlendMinMax: function () { return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), this.extensions.get("EXT_blend_minmax") }, supportsVertexTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."), this.capabilities.vertexTextures }, supportsInstancedArrays: function () { return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), this.extensions.get("ANGLE_instanced_arrays") }, enableScissorTest: function (t) { console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."), this.setScissorTest(t) }, initMaterial: function () { console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.") }, addPrePlugin: function () { console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.") }, addPostPlugin: function () { console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.") }, updateShadowMap: function () { console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.") }, setFaceCulling: function () { console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.") } }), Object.defineProperties(le.prototype, { shadowMapEnabled: { get: function () { return this.shadowMap.enabled }, set: function (t) { console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), this.shadowMap.enabled = t } }, shadowMapType: { get: function () { return this.shadowMap.type }, set: function (t) { console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), this.shadowMap.type = t } }, shadowMapCullFace: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.") }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.") } } }), Object.defineProperties(ee.prototype, { cullFace: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.") }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.") } }, renderReverseSided: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.") }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.") } }, renderSingleSided: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.") }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.") } } }), Object.defineProperties(h.prototype, { wrapS: { get: function () { return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = t } }, wrapT: { get: function () { return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = t } }, magFilter: { get: function () { return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter = t } }, minFilter: { get: function () { return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter = t } }, anisotropy: { get: function () { return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy = t } }, offset: { get: function () { return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = t } }, repeat: { get: function () { return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = t } }, format: { get: function () { return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = t } }, type: { get: function () { return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = t } }, generateMipmaps: { get: function () { return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps }, set: function (t) { console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps = t } } }), Object.defineProperties(ue.prototype, { standing: { set: function () { console.warn("THREE.WebVRManager: .standing has been removed.") } }, userHeight: { set: function () { console.warn("THREE.WebVRManager: .userHeight has been removed.") } } }), ur.prototype.load = function (t) { console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead."); var e = this; return (new rr).load(t, function (t) { e.setBuffer(t) }), this }, hr.prototype.getData = function () { return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."), this.getFrequencyData() }, ar.prototype.updateCubeMap = function (t, e) { return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."), this.update(t, e) }; var Eu = { merge: function (t, e, n) { var i; console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."), e.isMesh && (e.matrixAutoUpdate && e.updateMatrix(), i = e.matrix, e = e.geometry), t.merge(e, i, n) }, center: function (t) { return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), t.center() } }; Lc.crossOrigin = void 0, Lc.loadTexture = function (t, e, n, i) { console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead."); var r = new bi; r.setCrossOrigin(this.crossOrigin); var o = r.load(t, n, void 0, i); return e && (o.mapping = e), o }, Lc.loadTextureCube = function (t, e, n, i) { console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead."); var r = new yi; r.setCrossOrigin(this.crossOrigin); var o = r.load(t, n, void 0, i); return e && (o.mapping = e), o }, Lc.loadCompressedTexture = function () { console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.") }, Lc.loadCompressedTextureCube = function () { console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.") }; var Au = { createMultiMaterialObject: function () { console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js") }, detach: function () { console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js") }, attach: function () { console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js") } } }, function (t, e, n) { var i = n(15).f, r = n(23), o = n(14)("toStringTag"); t.exports = function (t, e, n) { t && !r(t = n ? t : t.prototype, o) && i(t, o, { configurable: !0, value: e }) } }, function (t) { t.exports = {} }, function (t, e, n) { var i = n(14)("unscopables"), r = Array.prototype; void 0 == r[i] && n(24)(r, i, {}), t.exports = function (t) { r[i][t] = !0 } }, function (t, e, n) { "use strict"; var i = n(9), r = n(15), o = n(16), a = n(14)("species"); t.exports = function (t) { var e = i[t]; o && e && !e[a] && r.f(e, a, { configurable: !0, get: function () { return this } }) } }, function (t) { t.exports = function (t, e, n, i) { if (!(t instanceof e) || void 0 !== i && i in t) throw TypeError(n + ": incorrect invocation!"); return t } }, function (t, e, n) { var i = n(21); t.exports = function (t, e, n) { for (var r in e) i(t, r, e[r], n); return t } }, function (t, e, n) { var i = n(10); t.exports = function (t, e) { if (!i(t) || t._t !== e) throw TypeError("Incompatible receiver, " + e + " required!"); return t } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return f }); var u = n(11), l = n(6), h = n(32), f = function (t) { function e(t, n) { var i; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (i = o(this, s(e).call(this))).webGLScene = t, i.id = n, i.gltf = null, i.tx = null, i.isObjLoaded = !1, i.objLoader = null, i.deferred = null, i.time = 0, i } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { return this.deferred = h.a(), a(s(e.prototype), "init", this).call(this), this.objLoader.startLoad(), this.deferred.promise } }, { key: "bindEvents", value: function () { a(s(e.prototype), "bindEvents", this).call(this), this.objLoader.on(this.objLoader.E.COMPLETE, this._onLoadingComplete, this), l.a.on(l.a.E.RAF, this.raf, this) } }, { key: "unbindEvents", value: function () { a(s(e.prototype), "unbindEvents", this).call(this), this.objLoader.off(this.objLoader.E.COMPLETE, this._onLoadingComplete, this), l.a.off(l.a.E.RAF, this.raf, this) } }, { key: "raf", value: function () { this.time++ } }, { key: "destroy", value: function () { for (var t in a(s(e.prototype), "destroy", this).call(this), this.webGLScene.remove(this.gltf), this.tx) this.webGLScene.disposeTexture(this.tx[t]); this.objLoader.destroy(), this.gltf = null, this.tx = null, this.objLoader = null } }, { key: "_onLoadingComplete", value: function (t) { this.gltf = t[0], this.tx = t[1], this.setUniforms(), this.setMaterials(), this._initObject(), this.isObjLoaded = !0, this.resize(), this.deferred.resolve() } }, { key: "setUniforms", value: function () { } }, { key: "setMaterials", value: function () { } }, { key: "_initObject", value: function () { this.initMaterials(), this.display(!1), this.webGLScene.add(this.gltf.scene), this.launchScene() } }, { key: "launchScene", value: function () { } }, { key: "display", value: function (t) { this.gltf.scene.position.z = t ? 0 : -1e3 } }]), e }() }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t) { return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function s(t, e) { return (s = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return h }); var c = n(133), u = n.n(c), l = n(27), h = (n(32), function (t) { function e(t, n) { var i; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (i = o(this, a(e).call(this))).E = { PROGRESS: "progress", COMPLETE: "complete" }, i.objUrl = t, i.txUrl = n, i.loadingManager = null, i.gltfLoader = null, i.txLoader = null, i.gltf = null, i.tx = null, i.init(), i } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && s(t, e) }(e, l.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { this.loadingManager = new THREE.LoadingManager(this._onManagerComplete.bind(this)), this.gltfLoader = new u.a(this.loadingManager), this.txLoader = new THREE.TextureLoader(this.loadingManager) } }, { key: "startLoad", value: function () { this._loadObj.call(this), this._loadTx.call(this) } }, { key: "destroy", value: function () { this.loadingManager = null, this.gltfLoader = null, this.txLoader = null, this.gltf = null, this.tx = null } }, { key: "_loadObj", value: function () { this.gltfLoader.load("assets/3d/models/".concat(this.objUrl), this._onObjComplete.bind(this), this._onObjProgress.bind(this), this._onObjError.bind(this)) } }, { key: "_onObjComplete", value: function (t) { this.gltf = t } }, { key: "_onObjProgress", value: function () { } }, { key: "_onObjError", value: function (t) { console.error("An error occurred while loading the following file: " + t.target.responseURL) } }, { key: "_loadTx", value: function () { for (var t in this.tx = {}, this.txUrl) this.txLoader.load("assets/3d/textures/".concat(this.txUrl[t]), this._onTextureComplete.bind(this, t), null, this._onTextureError.bind(this)) } }, { key: "_onTextureComplete", value: function (t, e) { this.tx[t] = e } }, { key: "_onTextureProgress", value: function () { } }, { key: "_onTextureError", value: function (t) { console.error("An error occurred while loading the following file: " + t.path[0].currentSrc) } }, { key: "_onManagerProgress", value: function (t, e, n) { console.log("Loading file: " + t + ".\nLoaded " + e + " of " + n + " files.") } }, { key: "_onManagerComplete", value: function () { this.emit(this.E.COMPLETE, [this.gltf, this.tx]) } }]), e }()) }, function (t, e, n) { var i = n(36); t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) { return "String" == i(t) ? t.split("") : Object(t) } }, function (t, e) { e.f = {}.propertyIsEnumerable }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return p }); var u = n(11), l = n(6), h = n(3), f = (n(7), n(0)), p = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, s(e).call(this))).SVG_SIZE = { w: 1500, h: 800 }, t.svgPos = {}, t.needDrawIntro = !0, t.needDrawOutro = !1, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function () { a(s(e.prototype), "init", this).call(this) } }, { key: "initDOM", value: function () { this.$intro = $(document.getElementById("intro")), this.introT2 = this.$intro.find(".intro-title-2"), this.$introM1 = $(document.getElementById("intro-svg-mask-1")), this.$introP1 = this.$introM1.find("polygon"), this.$introM2 = $(document.getElementById("intro-svg-mask-2")), this.$introP2 = this.$introM2.find("polygon"), this.$introM3 = $(document.getElementById("intro-svg-mask-3")), this.$introP3 = this.$introM3.find("polygon"), this.$introM4 = $(document.getElementById("intro-svg-mask-4")), this.$introP4 = this.$introM4.find("polygon"), this.$outroM1 = $(document.getElementById("outro-svg-mask-1")), this.$outroP1 = this.$outroM1.find("polygon"), this.$outroM2 = $(document.getElementById("outro-svg-mask-2")), this.$outroP2 = this.$outroM2.find("polygon"), this.$outroM3 = $(document.getElementById("outro-svg-mask-3")), this.$outroP3 = this.$outroM3.find("polygon"), this.$outroM4 = $(document.getElementById("outro-svg-mask-4")), this.$outroP4 = this.$outroM4.find("polygon") } }, { key: "initEl", value: function () { } }, { key: "bindEvents", value: function () { a(s(e.prototype), "bindEvents", this).call(this), l.a.on(l.a.E.RAF, this.raf, this), h.a.on(h.a.E.RESIZE, this.resize, this) } }, { key: "resize", value: function () { this.svgPos.x = .5 * (h.a.bW - this.SVG_SIZE.w), this.svgPos.y = .5 * (h.a.wH - this.SVG_SIZE.h) } }, { key: "raf", value: function () { this.needDrawIntro && this._drawIntroMasks(), this.needDrawOutro && this._drawOutroMasks() } }, { key: "_drawIntroMasks", value: function () { this.$introP1[0].setAttribute("points", "".concat(f.a.anchorPts.x1 - this.svgPos.x, ", ").concat(f.a.anchorPts.y1 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x1ms - this.svgPos.x, ", ").concat(f.a.persPts.y1ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x1 - this.svgPos.x, ", ").concat(f.a.squarePts.y1 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x1me - this.svgPos.x, ", ").concat(f.a.persPts.y1me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x1 - this.svgPos.x, ", ").concat(f.a.anchorPts.y1 - this.svgPos.y)), this.$introP2[0].setAttribute("points", "".concat(f.a.anchorPts.x2 - this.svgPos.x, ", ").concat(f.a.anchorPts.y2 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x2ms - this.svgPos.x, ", ").concat(f.a.persPts.y2ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x2 - this.svgPos.x, ", ").concat(f.a.squarePts.y2 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x2me - this.svgPos.x, ", ").concat(f.a.persPts.y2me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x2 - this.svgPos.x, ", ").concat(f.a.anchorPts.y2 - this.svgPos.y)), this.$introP3[0].setAttribute("points", "".concat(f.a.anchorPts.x3 - this.svgPos.x, ", ").concat(f.a.anchorPts.y3 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x3ms - this.svgPos.x, ", ").concat(f.a.persPts.y3ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x3 - this.svgPos.x, ", ").concat(f.a.squarePts.y3 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x3me - this.svgPos.x, ", ").concat(f.a.persPts.y3me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x3 - this.svgPos.x, ", ").concat(f.a.anchorPts.y3 - this.svgPos.y)), this.$introP4[0].setAttribute("points", "".concat(f.a.anchorPts.x4 - this.svgPos.x, ", ").concat(f.a.anchorPts.y4 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x4ms - this.svgPos.x, ", ").concat(f.a.persPts.y4ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x4 - this.svgPos.x, ", ").concat(f.a.squarePts.y4 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x4me - this.svgPos.x, ", ").concat(f.a.persPts.y4me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x4 - this.svgPos.x, ", ").concat(f.a.anchorPts.y4 - this.svgPos.y)) } }, { key: "_drawOutroMasks", value: function () { this.$outroP1[0].setAttribute("points", "".concat(f.a.anchorPts.x1 - this.svgPos.x, ", ").concat(f.a.anchorPts.y1 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x1ms - this.svgPos.x, ", ").concat(f.a.persPts.y1ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x1 - this.svgPos.x, ", ").concat(f.a.squarePts.y1 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x1me - this.svgPos.x, ", ").concat(f.a.persPts.y1me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x1 - this.svgPos.x, ", ").concat(f.a.anchorPts.y1 - this.svgPos.y)), this.$outroP2[0].setAttribute("points", "".concat(f.a.anchorPts.x2 - this.svgPos.x, ", ").concat(f.a.anchorPts.y2 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x2ms - this.svgPos.x, ", ").concat(f.a.persPts.y2ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x2 - this.svgPos.x, ", ").concat(f.a.squarePts.y2 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x2me - this.svgPos.x, ", ").concat(f.a.persPts.y2me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x2 - this.svgPos.x, ", ").concat(f.a.anchorPts.y2 - this.svgPos.y)), this.$outroP3[0].setAttribute("points", "".concat(f.a.anchorPts.x3 - this.svgPos.x, ", ").concat(f.a.anchorPts.y3 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x3ms - this.svgPos.x, ", ").concat(f.a.persPts.y3ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x3 - this.svgPos.x, ", ").concat(f.a.squarePts.y3 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x3me - this.svgPos.x, ", ").concat(f.a.persPts.y3me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x3 - this.svgPos.x, ", ").concat(f.a.anchorPts.y3 - this.svgPos.y)), this.$outroP4[0].setAttribute("points", "".concat(f.a.anchorPts.x4 - this.svgPos.x, ", ").concat(f.a.anchorPts.y4 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x4ms - this.svgPos.x, ", ").concat(f.a.persPts.y4ms - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.squarePts.x4 - this.svgPos.x, ", ").concat(f.a.squarePts.y4 - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.persPts.x4me - this.svgPos.x, ", ").concat(f.a.persPts.y4me - this.svgPos.y, "\n\t\t\t\t\t\t\t\t\t\t").concat(f.a.anchorPts.x4 - this.svgPos.x, ", ").concat(f.a.anchorPts.y4 - this.svgPos.y)) } }, { key: "needDrawIntro", set: function (t) { this._needDrawIntro = t }, get: function () { return this._needDrawIntro } }, { key: "needDrawOutro", set: function (t) { this._needDrawOutro = t }, get: function () { return this._needDrawOutro } }]), e }()) }, function (t) { var e = function () { return this }(); try { e = e || Function("return this")() || (0, eval)("this") } catch (t) { "object" == typeof window && (e = window) } t.exports = e }, function (t, e, n) { var i = n(25), r = n(18), o = n(46); t.exports = function (t) { return function (e, n, a) { var s, c = i(e), u = r(c.length), l = o(a, u); if (t && n != n) { for (; u > l;)if ((s = c[l++]) != s) return !0 } else for (; u > l; l++)if ((t || l in c) && c[l] === n) return t || l || 0; return !t && -1 } } }, function (t, e) { e.f = Object.getOwnPropertySymbols }, function (t, e, n) { var i = n(36), r = n(14)("toStringTag"), o = "Arguments" == i(function () { return arguments }()); t.exports = function (t) { var e, n, a; return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof (n = function (t, e) { try { return t[e] } catch (e) { } }(e = Object(t), r)) ? n : o ? i(e) : "Object" == (a = i(e)) && "function" == typeof e.callee ? "Arguments" : a } }, function (t, e, n) { var i = n(2), r = n(37), o = n(8), a = n(84), s = "[" + a + "]", c = RegExp("^" + s + s + "*"), u = RegExp(s + s + "*$"), l = function (t, e, n) { var r = {}, s = o(function () { return !!a[t]() || "​" != "​"[t]() }), c = r[t] = s ? e(h) : a[t]; n && (r[n] = c), i(i.P + i.F * s, "String", r) }, h = l.trim = function (t, e) { return t = r(t) + "", 1 & e && (t = t.replace(c, "")), 2 & e && (t = t.replace(u, "")), t }; t.exports = l }, function (t, e, n) { var i = n(14)("iterator"), r = !1; try { var o = [7][i](); o.return = function () { r = !0 }, Array.from(o, function () { throw 2 }) } catch (e) { } t.exports = function (t, e) { if (!e && !r) return !1; var n = !1; try { var o = [7], a = o[i](); a.next = function () { return { done: n = !0 } }, o[i] = function () { return a }, t(o) } catch (e) { } return n } }, function (t, e, n) { "use strict"; var i = n(24), r = n(21), o = n(8), a = n(37), s = n(14); t.exports = function (t, e, n) { var c = s(t), u = n(a, c, ""[t]), l = u[0], h = u[1]; o(function () { var e = {}; return e[c] = function () { return 7 }, 7 != ""[t](e) }) && (r(String.prototype, t, l), i(RegExp.prototype, c, 2 == e ? function (t, e) { return h.call(t, this, e) } : function (t) { return h.call(t, this) })) } }, function (t, e, n) { var i = n(34), r = n(118), o = n(93), a = n(12), s = n(18), c = n(95), u = {}, l = {}; (e = t.exports = function (t, e, n, h, f) { var p, d, m, v, g = f ? function () { return t } : c(t), y = i(n, h, e ? 2 : 1), b = 0; if ("function" != typeof g) throw TypeError(t + " is not iterable!"); if (o(g)) { for (p = s(t.length); p > b; b++)if ((v = e ? y(a(d = t[b])[0], d[1]) : y(t[b])) === u || v === l) return v } else for (m = g.call(t); !(d = m.next()).done;)if ((v = r(m, y, d.value, e)) === u || v === l) return v }).BREAK = u, e.RETURN = l }, function (t, e, n) { var i = n(12), r = n(35), o = n(14)("species"); t.exports = function (t, e) { var n, a = i(t).constructor; return void 0 === a || void 0 == (n = i(a)[o]) ? e : r(n) } }, function (t, e, n) { var i = n(9).navigator; t.exports = i && i.userAgent || "" }, function (t, e, n) { "use strict"; var i = n(9), r = n(2), o = n(21), a = n(57), s = n(41), c = n(71), u = n(56), l = n(10), h = n(8), f = n(69), p = n(52), d = n(85); t.exports = function (t, e, n, m, v, g) { var y = i[t], b = y, _ = v ? "set" : "add", x = b && b.prototype, w = {}, T = function (t) { var e = x[t]; o(x, t, "delete" == t ? function (t) { return (!g || l(t)) && e.call(this, 0 === t ? 0 : t) } : "has" == t ? function (t) { return (!g || l(t)) && e.call(this, 0 === t ? 0 : t) } : "get" == t ? function (t) { return g && !l(t) ? void 0 : e.call(this, 0 === t ? 0 : t) } : "add" == t ? function (t) { return e.call(this, 0 === t ? 0 : t), this } : function (t, n) { return e.call(this, 0 === t ? 0 : t, n), this }) }; if ("function" == typeof b && (g || x.forEach && !h(function () { (new b).entries().next() }))) { var S = new b, M = S[_](g ? {} : -0, 1) != S, P = h(function () { S.has(1) }), E = f(function (t) { new b(t) }), A = !g && h(function () { for (var t = new b, e = 5; e--;)t[_](e, e); return !t.has(-0) }); E || ((b = e(function (e, n) { u(e, b, t); var i = d(new y, e, b); return void 0 != n && c(n, v, i[_], i), i })).prototype = x, x.constructor = b), (P || A) && (T("delete"), T("has"), v && T("get")), (A || M) && T(_), g && x.clear && delete x.clear } else b = m.getConstructor(e, t, v, _), a(b.prototype, n), s.NEED = !0; return p(b, t), w[t] = b, r(r.G + r.W + r.F * (b != y), w), g || m.setStrong(b, t, v), b } }, function (t, e, n) { for (var i, r = n(9), o = n(24), a = n(43), s = a("typed_array"), c = a("view"), u = !(!r.ArrayBuffer || !r.DataView), l = u, h = 0, f = ["Int8Array", "Uint8Array", "Uint8ClampedArray", "Int16Array", "Uint16Array", "Int32Array", "Uint32Array", "Float32Array", "Float64Array"]; h < 9;)(i = r[f[h++]]) ? (o(i.prototype, s, !0), o(i.prototype, c, !0)) : l = !1; t.exports = { ABV: u, CONSTR: l, TYPED: s, VIEW: c } }, function (t, e, n) { var i = n(10), r = n(9).document, o = i(r) && i(r.createElement); t.exports = function (t) { return o ? r.createElement(t) : {} } }, function (t, e, n) { var i = n(17), r = n(9), o = "__core-js_shared__", a = r[o] || (r[o] = {}); (t.exports = function (t, e) { return a[t] || (a[t] = void 0 === e ? {} : e) })("versions", []).push({ version: i.version, mode: n(44) ? "pure" : "global", copyright: "© 2018 Denis Pushkarev (zloirock.ru)" }) }, function (t, e, n) { e.f = n(14) }, function (t, e, n) { var i = n(77)("keys"), r = n(43); t.exports = function (t) { return i[t] || (i[t] = r(t)) } }, function (t) { t.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"] }, function (t, e, n) { var i = n(36); t.exports = Array.isArray || function (t) { return "Array" == i(t) } }, function (t, e, n) { var i = n(9).document; t.exports = i && i.documentElement }, function (t, e, n) { var i = n(10), r = n(12), o = function (t, e) { if (r(t), !i(e) && null !== e) throw TypeError(e + ": can't set as prototype!") }; t.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function (t, e, i) { try { (i = n(34)(Function.call, n(29).f(Object.prototype, "__proto__").set, 2))(t, []), e = !(t instanceof Array) } catch (t) { e = !0 } return function (t, n) { return o(t, n), e ? t.__proto__ = n : i(t, n), t } }({}, !1) : void 0), check: o } }, function (t) { t.exports = "\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff" }, function (t, e, n) { var i = n(10), r = n(83).set; t.exports = function (t, e, n) { var o, a = e.constructor; return a !== n && "function" == typeof a && (o = a.prototype) !== n.prototype && i(o) && r && r(t, o), t } }, function (t, e, n) { "use strict"; var i = n(38), r = n(37); t.exports = function (t) { var e = r(this) + "", n = "", o = i(t); if (0 > o || o == 1 / 0) throw RangeError("Count can't be negative"); for (; 0 < o; (o >>>= 1) && (e += e))1 & o && (n += e); return n } }, function (t) { t.exports = Math.sign || function (t) { return 0 == (t = +t) || t != t ? t : 0 > t ? -1 : 1 } }, function (t) { var e = Math.expm1; t.exports = !e || 22025.465794806718 < e(10) || 22025.465794806718 > e(10) || -2e-17 != e(-2e-17) ? function (t) { return 0 == (t = +t) ? t : -1e-6 < t && 1e-6 > t ? t + t * t / 2 : Math.exp(t) - 1 } : e }, function (t, e, n) { "use strict"; var i = n(44), r = n(2), o = n(21), a = n(24), s = n(53), c = n(117), u = n(52), l = n(49), h = n(14)("iterator"), f = !([].keys && "next" in [].keys()), p = "keys", d = "values", m = function () { return this }; t.exports = function (t, e, n, v, g, y, b) { c(n, e, v); var _, x, w, T = function (t) { return !f && t in E ? E[t] : function () { return new n(this, t) } }, S = e + " Iterator", M = g == d, P = !1, E = t.prototype, A = E[h] || E["@@iterator"] || g && E[g], C = A || T(g), L = g ? M ? T("entries") : C : void 0, R = "Array" == e && E.entries || A; if (R && ((w = l(R.call(new t))) !== Object.prototype && w.next && (u(w, S, !0), !i && "function" != typeof w[h] && a(w, h, m))), M && A && A.name !== d && (P = !0, C = function () { return A.call(this) }), (!i || b) && (f || P || !E[h]) && a(E, h, C), s[e] = C, s[S] = m, g) if (_ = { values: M ? C : T(d), keys: y ? C : T(p), entries: L }, b) for (x in _) x in E || o(E, x, _[x]); else r(r.P + r.F * (f || P), e, _); return _ } }, function (t, e, n) { var i = n(91), r = n(37); t.exports = function (t, e, n) { if (i(e)) throw TypeError("String#" + n + " doesn't accept regex!"); return r(t) + "" } }, function (t, e, n) { var i = n(10), r = n(36), o = n(14)("match"); t.exports = function (t) { var e; return i(t) && (void 0 === (e = t[o]) ? "RegExp" == r(t) : !!e) } }, function (t, e, n) { var i = n(14)("match"); t.exports = function (t) { var e = /./; try { "/./"[t](e) } catch (n) { try { return e[i] = !1, !"/./"[t](e) } catch (t) { } } return !0 } }, function (t, e, n) { var i = n(53), r = n(14)("iterator"), o = Array.prototype; t.exports = function (t) { return void 0 !== t && (i.Array === t || o[r] === t) } }, function (t, e, n) { "use strict"; var i = n(15), r = n(42); t.exports = function (t, e, n) { e in t ? i.f(t, e, r(0, n)) : t[e] = n } }, function (t, e, n) { var i = n(67), r = n(14)("iterator"), o = n(53); t.exports = n(17).getIteratorMethod = function (t) { if (void 0 != t) return t[r] || t["@@iterator"] || o[i(t)] } }, function (t, e, n) { "use strict"; var i = n(26), r = n(46), o = n(18); t.exports = function (t) { for (var e = i(this), n = o(e.length), a = arguments.length, s = r(1 < a ? arguments[1] : void 0, n), c = 2 < a ? arguments[2] : void 0, u = void 0 === c ? n : r(c, n); u > s;)e[s++] = t; return e } }, function (t, e, n) { "use strict"; var i = n(54), r = n(121), o = n(53), a = n(25); t.exports = n(89)(Array, "Array", function (t, e) { this._t = a(t), this._i = 0, this._k = e }, function () { var t = this._t, e = this._k, n = this._i++; return !t || n >= t.length ? (this._t = void 0, r(1)) : r(0, "keys" == e ? n : "values" == e ? t[n] : [n, t[n]]) }, "values"), o.Arguments = o.Array, i("keys"), i("values"), i("entries") }, function (t, e, n) { "use strict"; var i = n(12); t.exports = function () { var t = i(this), e = ""; return t.global && (e += "g"), t.ignoreCase && (e += "i"), t.multiline && (e += "m"), t.unicode && (e += "u"), t.sticky && (e += "y"), e } }, function (t, e, n) { var i, r, o, a = n(34), s = n(110), c = n(82), u = n(76), l = n(9), h = l.process, f = l.setImmediate, p = l.clearImmediate, d = l.MessageChannel, m = l.Dispatch, v = 0, g = {}, y = "onreadystatechange", b = function () { var t = +this; if (g.hasOwnProperty(t)) { var e = g[t]; delete g[t], e() } }, _ = function (t) { b.call(t.data) }; f && p || (f = function (t) { for (var e = [], n = 1; arguments.length > n;)e.push(arguments[n++]); return g[++v] = function () { s("function" == typeof t ? t : Function(t), e) }, i(v), v }, p = function (t) { delete g[t] }, "process" == n(36)(h) ? i = function (t) { h.nextTick(a(b, t, 1)) } : m && m.now ? i = function (t) { m.now(a(b, t, 1)) } : d ? (o = (r = new d).port2, r.port1.onmessage = _, i = a(o.postMessage, o, 1)) : l.addEventListener && "function" == typeof postMessage && !l.importScripts ? (i = function (t) { l.postMessage(t + "", "*") }, l.addEventListener("message", _, !1)) : i = y in u("script") ? function (t) { c.appendChild(u("script"))[y] = function () { c.removeChild(this), b.call(t) } } : function (t) { setTimeout(a(b, t, 1), 0) }), t.exports = { set: f, clear: p } }, function (t, e, n) { "use strict"; function i(t, e, n) { var i, r, o, a = Array(n), s = 8 * n - e - 1, c = (1 << s) - 1, u = c >> 1, l = 23 === e ? F(2, -24) - F(2, -77) : 0, h = 0, f = 0 > t || 0 === t && 0 > 1 / t ? 1 : 0; for ((t = H(t)) != t || t === k ? (r = t == t ? 0 : 1, i = c) : (i = U(z(t) / j), 1 > t * (o = F(2, -i)) && (i--, o *= 2), 2 <= (t += 1 <= i + u ? l / o : l * F(2, 1 - u)) * o && (i++, o /= 2), i + u >= c ? (r = 0, i = c) : 1 <= i + u ? (r = (t * o - 1) * F(2, e), i += u) : (r = t * F(2, u - 1) * F(2, e), i = 0)); 8 <= e; a[h++] = 255 & r, r /= 256, e -= 8); for (i = i << e | r, s += e; 0 < s; a[h++] = 255 & i, i /= 256, s -= 8); return a[--h] |= 128 * f, a } function r(t, e, n) { var i, r = 8 * n - e - 1, o = (1 << r) - 1, a = o >> 1, s = r - 7, c = n - 1, u = t[c--], l = 127 & u; for (u >>= 7; 0 < s; l = 256 * l + t[c], c--, s -= 8); for (i = l & (1 << -s) - 1, l >>= -s, s += e; 0 < s; i = 256 * i + t[c], c--, s -= 8); if (0 === l) l = 1 - a; else { if (l === o) return i ? NaN : u ? -k : k; i += F(2, e), l -= a } return (u ? -1 : 1) * i * F(2, l - e) } function o(t) { return t[3] << 24 | t[2] << 16 | t[1] << 8 | t[0] } function a(t) { return [255 & t] } function s(t) { return [255 & t, 255 & t >> 8] } function c(t) { return [255 & t, 255 & t >> 8, 255 & t >> 16, 255 & t >> 24] } function u(t) { return i(t, 52, 8) } function l(t) { return i(t, 23, 4) } function h(t, e, n) { P(t[R], e, { get: function () { return this[n] } }) } function f(t, e, n, i) { var r = S(+n); if (r + e > t[Y]) throw B(O); var o = t[q]._b, a = r + t[$], s = o.slice(a, a + e); return i ? s : s.reverse() } function p(t, e, n, i, r, o) { var a = S(+n); if (a + e > t[Y]) throw B(O); for (var s = t[q]._b, c = a + t[$], u = i(+r), l = 0; l < e; l++)s[c + l] = u[o ? l : e - l - 1] } var d = n(9), m = n(16), v = n(44), g = n(75), y = n(24), b = n(57), _ = n(8), x = n(56), w = n(38), T = n(18), S = n(128), M = n(48).f, P = n(15).f, E = n(96), A = n(52), C = "ArrayBuffer", L = "DataView", R = "prototype", O = "Wrong index!", I = d[C], D = d[L], G = d.Math, B = d.RangeError, k = d.Infinity, N = I, H = G.abs, F = G.pow, U = G.floor, z = G.log, j = G.LN2, V = "buffer", W = "byteLength", X = "byteOffset", q = m ? "_b" : V, Y = m ? "_l" : W, $ = m ? "_o" : X; if (g.ABV) { if (!_(function () { I(1) }) || !_(function () { new I(-1) }) || _(function () { return new I, new I(1.5), new I(NaN), I.name != C })) { for (var Z, K = (I = function (t) { return x(this, I), new N(S(t)) })[R] = N[R], J = M(N), Q = 0; J.length > Q;)(Z = J[Q++]) in I || y(I, Z, N[Z]); v || (K.constructor = I) } var tt = new D(new I(2)), et = D[R].setInt8; tt.setInt8(0, 2147483648), tt.setInt8(1, 2147483649), (tt.getInt8(0) || !tt.getInt8(1)) && b(D[R], { setInt8: function (t, e) { et.call(this, t, e << 24 >> 24) }, setUint8: function (t, e) { et.call(this, t, e << 24 >> 24) } }, !0) } else I = function (t) { x(this, I, C); var e = S(t); this._b = E.call(Array(e), 0), this[Y] = e }, D = function (t, e, n) { x(this, D, L), x(t, I, L); var i = t[Y], r = w(e); if (0 > r || r > i) throw B("Wrong offset!"); if (r + (n = void 0 === n ? i - r : T(n)) > i) throw B("Wrong length!"); this[q] = t, this[$] = r, this[Y] = n }, m && (h(I, W, "_l"), h(D, V, "_b"), h(D, W, "_l"), h(D, X, "_o")), b(D[R], { getInt8: function (t) { return f(this, 1, t)[0] << 24 >> 24 }, getUint8: function (t) { return f(this, 1, t)[0] }, getInt16: function (t) { var e = f(this, 2, t, arguments[1]); return (e[1] << 8 | e[0]) << 16 >> 16 }, getUint16: function (t) { var e = f(this, 2, t, arguments[1]); return e[1] << 8 | e[0] }, getInt32: function (t) { return o(f(this, 4, t, arguments[1])) }, getUint32: function (t) { return o(f(this, 4, t, arguments[1])) >>> 0 }, getFloat32: function (t) { return r(f(this, 4, t, arguments[1]), 23, 4) }, getFloat64: function (t) { return r(f(this, 8, t, arguments[1]), 52, 8) }, setInt8: function (t, e) { p(this, 1, t, a, e) }, setUint8: function (t, e) { p(this, 1, t, a, e) }, setInt16: function (t, e) { p(this, 2, t, s, e, arguments[2]) }, setUint16: function (t, e) { p(this, 2, t, s, e, arguments[2]) }, setInt32: function (t, e) { p(this, 4, t, c, e, arguments[2]) }, setUint32: function (t, e) { p(this, 4, t, c, e, arguments[2]) }, setFloat32: function (t, e) { p(this, 4, t, l, e, arguments[2]) }, setFloat64: function (t, e) { p(this, 8, t, u, e, arguments[2]) } }); A(I, C), A(D, L), y(D[R], g.VIEW, !0), e[C] = I, e[L] = D }, function (t) { t.exports = function (t) { "string" == typeof t && (t = [t]); for (var e = [].slice.call(arguments, 1), n = [], i = 0; i < t.length - 1; i++)n.push(t[i], e[i] || ""); return n.push(t[i]), n.join("") } }, function (t, e) { "use strict"; function n(t, e) { return void 0 === e && (e = L), U.test(t) ? e.getElementsByClassName(t.slice(1)) : j.test(t) ? e.getElementsByTagName(t) : e.querySelectorAll(t) } function i(t, e) { if (void 0 === e && (e = L), t) { if (t.__cash) return t; var i = t; if (u(t)) { if (e.__cash && (e = e[0]), !(i = F.test(t) ? e.getElementById(t.slice(1)) : z.test(t) ? p(t) : n(t, e))) return } else if (c(t)) return this.ready(t); (i.nodeType || i === R) && (i = [i]), this.length = i.length; for (var r = 0, o = this.length; r < o; r++)this[r] = i[r] } } function r(t, e) { return new i(t, e) } function o(t) { return t.replace(W, function (t, e) { return t[e ? "toUpperCase" : "toLowerCase"]() }).replace(X, "") } function a(t, e) { for (var n = 0, i = t.length; n < i && !1 !== e.call(t[n], t[n], n, t); n++); } function s(t, e) { var n = t && (t.matches || t.webkitMatchesSelector || t.mozMatchesSelector || t.msMatchesSelector || t.oMatchesSelector); return !!n && n.call(t, e) } function c(t) { return "function" == typeof t } function u(t) { return "string" == typeof t } function l(t) { return !isNaN(parseFloat(t)) && isFinite(t) } function h(t) { return u(t) ? function (e, n) { return s(n, t) } : t.__cash ? function (e, n) { return t.is(n) } : function (t, e, n) { return e === n } } function f(t) { return u(t) && t.match(Z) || [] } function p(t) { return function () { if (!$) { var t = ($ = L.implementation.createHTMLDocument("")).createElement("base"); t.href = L.location.href, $.head.appendChild(t) } }(), u(t) || (t = ""), $.body.innerHTML = t, N.call($.body.childNodes) } function d(t) { return t.filter(function (t, e, n) { return n.indexOf(t) === e }) } function m(t, e, n) { if (1 === t.nodeType) { var i = R.getComputedStyle(t, null); return e ? n ? i.getPropertyValue(e) : i[e] : i } } function v(t, e) { return parseInt(m(t, e), 10) || 0 } function g(t) { return K.test(t) } function y(t, e) { if (void 0 === e && (e = g(t)), e) return t; if (!J[t]) { var n = o(t), i = "" + n.charAt(0).toUpperCase() + n.slice(1); a((n + " " + tt.join(i + " ") + i).split(" "), function (e) { if (e in Q) return J[t] = e, !1 }) } return J[t] } function b(t, e, n) { return void 0 === n && (n = g(t)), n || et[t] || !l(e) ? e : e + "px" } function _(t) { return t[nt] = t[nt] || {} } function x(t, e) { var n = _(t); if (e) { if (!(e in n)) { var i = t.dataset ? t.dataset[e] || t.dataset[o(e)] : r(t).attr("data-" + e); if (void 0 !== i) { try { i = JSON.parse(i) } catch (e) { } n[e] = i } } return n[e] } return n } function w(t, e) { return v(t, "border" + (e ? "Left" : "Top") + "Width") + v(t, "padding" + (e ? "Left" : "Top")) + v(t, "padding" + (e ? "Right" : "Bottom")) + v(t, "border" + (e ? "Right" : "Bottom") + "Width") } function T(t, e) { for (var n = 0, i = e.length; n < i; n++)if (0 > t.indexOf(e[n])) return !1; return !0 } function S(t, e, n) { a(t[n], function (t) { t[0]; var i = t[1]; e.removeEventListener(n, i) }), delete t[n] } function M(t) { return t[rt] = t[rt] || {} } function P(t) { var e = t.split(ot); return [e[0], e.slice(1).sort()] } function E(t, e, n, i) { var r = M(t); if (e) { var o = r[e]; if (!o) return; i && (i.guid = i.guid || q++), r[e] = o.filter(function (r) { var o = r[0], a = r[1]; return !((!i || a.guid === i.guid) && T(o, n)) || void t.removeEventListener(e, a) }) } else if (n && n.length) for (e in r) E(t, e, n, i); else for (e in r) S(r, t, e) } function A(t) { var e = t.type; return at.test(e) ? function (t) { return 0 > t.selectedIndex ? null : t.options[t.selectedIndex].value }(t) : st.test(e) ? function (t) { var e = []; return a(t.options, function (t) { !t.selected || t.disabled || t.parentNode.disabled || e.push(t.value) }), e }(t) : t.value } function C(t, e, n) { var i = u(e); !i && e.length ? a(e, function (e) { return C(t, e, n) }) : a(t, i ? function (t) { t.insertAdjacentHTML(n ? "afterbegin" : "beforeend", e) } : function (t, i) { return function (t, e, n) { n ? t.insertBefore(e, t.childNodes[0]) : t.appendChild(e) }(t, i ? e.cloneNode(!0) : e, n) }) } var L = document, R = window, O = Array.prototype, I = O.filter, D = O.indexOf, G = O.map, B = O.push, k = O.reverse, N = O.slice, H = O.splice, F = /^#[\w-]*$/, U = /^\.[\w-]*$/, z = /<.+>/, j = /^\w+$/, V = r.fn = r.prototype = i.prototype = { constructor: r, __cash: !0, length: 0, splice: H }; V.get = function (t) { return void 0 === t ? N.call(this) : this[0 > t ? t + this.length : t] }, V.eq = function (t) { return r(this.get(t)) }, V.first = function () { return this.eq(0) }, V.last = function () { return this.eq(-1) }, V.map = function (t) { return r(G.call(this, function (e, n) { return t.call(e, n, e) })) }, V.slice = function () { return r(N.apply(this, arguments)) }; var W = /(?:^\w|[A-Z]|\b\w)/g, X = /[\s-_]+/g; r.camelCase = o, r.each = a, V.each = function (t) { return a(this, function (e, n) { return t.call(e, n, e) }), this }, V.removeProp = function (t) { return this.each(function (e, n) { delete n[t] }) }, r.extend = V.extend = function (t) { void 0 === t && (t = this); for (var e = arguments, n = e.length, i = 2 > n ? 0 : 1; i < n; i++)for (var r in e[i]) t[r] = e[i][r]; return t }; var q = 1; r.guid = q, r.matches = s, r.isFunction = c, r.isString = u, r.isNumeric = l; var Y = Array.isArray; r.isArray = Y, V.prop = function (t, e) { if (t) { if (u(t)) return 2 > arguments.length ? this[0] && this[0][t] : this.each(function (n, i) { i[t] = e }); for (var n in t) this.prop(n, t[n]); return this } }, V.filter = function (t) { if (!t) return r(); var e = c(t) ? t : h(t); return r(I.call(this, function (n, i) { return e.call(n, i, n, t) })) }; var $, Z = /\S+/g; V.hasClass = function (t) { var e = f(t), n = !1; return e.length && this.each(function (t, i) { return !(n = i.classList.contains(e[0])) }), n }, V.removeAttr = function (t) { var e = f(t); return e.length ? this.each(function (t, n) { a(e, function (t) { n.removeAttribute(t) }) }) : this }, V.attr = function (t, e) { if (t) { if (u(t)) { if (2 > arguments.length) { if (!this[0]) return; var n = this[0].getAttribute(t); return null === n ? void 0 : n } return null === e ? this.removeAttr(t) : this.each(function (n, i) { i.setAttribute(t, e) }) } for (var i in t) this.attr(i, t[i]); return this } }, V.toggleClass = function (t, e) { var n = f(t); return n.length ? this.each(function (t, i) { a(n, function (t) { void 0 !== e ? e ? i.classList.add(t) : i.classList.remove(t) : i.classList.toggle(t) }) }) : this }, V.addClass = function (t) { return this.toggleClass(t, !0) }, V.removeClass = function (t) { return arguments.length ? this.toggleClass(t, !1) : this.attr("class", "") }, r.parseHTML = p, r.unique = d, V.add = function (t, e) { return r(d(this.get().concat(r(t, e).get()))) }; var K = /^--/, J = {}, Q = L.createElement("div").style, tt = ["webkit", "moz", "ms", "o"]; r.prefixedProp = y; var et = { animationIterationCount: !0, columnCount: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0 }; V.css = function (t, e) { if (u(t)) { var n = g(t); return t = y(t, n), 2 > arguments.length ? this[0] && m(this[0], t, n) : t ? (e = b(t, e, n), this.each(function (i, r) { 1 !== r.nodeType || (n ? r.style.setProperty(t, e) : r.style[t] = e) })) : this } for (var i in t) this.css(i, t[i]); return this }; var nt = "__cashData", it = /^data-(.*)/; r.hasData = function (t) { return nt in t }, V.data = function (t, e) { var n = this; if (!t) return this[0] ? (a(this[0].attributes, function (t) { var e = t.name.match(it); e && n.data(e[1]) }), x(this[0])) : void 0; if (u(t)) return void 0 === e ? this[0] && x(this[0], t) : this.each(function (n, i) { return function (t, e, n) { _(t)[e] = n }(i, t, e) }); for (var i in t) this.data(i, t[i]); return this }, V.removeData = function (t) { return this.each(function (e, n) { return function (t, e) { void 0 === e ? delete t[nt] : delete _(t)[e] }(n, t) }) }, a(["Width", "Height"], function (t) { V["inner" + t] = function () { return this[0] ? this[0] === R ? R["inner" + t] : this[0]["client" + t] : void 0 } }), a(["width", "height"], function (t, e) { V[t] = function (n) { return this[0] ? arguments.length ? (n = parseInt(n, 10), this.each(function (i, r) { if (1 === r.nodeType) { var o = m(r, "boxSizing"); r.style[t] = b(t, n + ("border-box" === o ? w(r, !e) : 0)) } })) : this[0] === R ? this[0][o("outer-" + t)] : this[0].getBoundingClientRect()[t] - w(this[0], !e) : void 0 === n ? void 0 : this } }), a(["Width", "Height"], function (t, e) { V["outer" + t] = function (n) { return this[0] ? this[0] === R ? R["outer" + t] : this[0]["offset" + t] + (n ? v(this[0], "margin" + (e ? "Top" : "Left")) + v(this[0], "margin" + (e ? "Bottom" : "Right")) : 0) : void 0 } }); var rt = "__cashEvents", ot = "."; V.off = function (t, e) { var n = this; return void 0 === t ? this.each(function (t, e) { return E(e) }) : a(f(t), function (t) { var i = P(t), r = i[0], o = i[1]; n.each(function (t, n) { return E(n, r, o, e) }) }), this }, V.on = function (t, e, n, i) { var r = this; if (!u(t)) { for (var o in t) this.on(o, e, t[o]); return this } return c(e) && (n = e, e = !1), a(f(t), function (t) { var o = P(t), a = o[0], c = o[1]; r.each(function (t, r) { var o = function t(o) { if (!o.namespace || T(c, o.namespace.split(ot))) { var u = r; if (e) { for (var l = o.target; !s(l, e);) { if (l === r) return; if (!(l = l.parentNode)) return } u = l } o.namespace = o.namespace || ""; var h = n.call(u, o, o.data); i && E(r, a, c, t), !1 === h && (o.preventDefault(), o.stopPropagation()) } }; o.guid = n.guid = n.guid || q++, function (t, e, n, i) { i.guid = i.guid || q++; var r = M(t); r[e] = r[e] || [], r[e].push([n, i]), t.addEventListener(e, i) }(r, a, c, o) }) }), this }, V.one = function (t, e, n) { return this.on(t, e, n, !0) }, V.ready = function (t) { var e = function () { return t(r) }; return "loading" === L.readyState ? L.addEventListener("DOMContentLoaded", e) : setTimeout(e), this }, V.trigger = function (t, e) { var n = t; if (u(t)) { var i = P(t), r = i[0], o = i[1]; (n = L.createEvent("HTMLEvents")).initEvent(r, !0, !0), n.namespace = o.join(ot) } return n.data = e, this.each(function (t, e) { e.dispatchEvent(n) }) }; var at = /select-one/i, st = /select-multiple/i, ct = /%20/g, ut = /file|reset|submit|button|image/i, lt = /radio|checkbox/i; V.serialize = function () { var t = ""; return this.each(function (e, n) { a(n.elements || [n], function (e) { if (!e.disabled && e.name && "FIELDSET" !== e.tagName && !ut.test(e.type) && (!lt.test(e.type) || e.checked)) { var n = A(e); if (void 0 !== n) a(Y(n) ? n : [n], function (n) { t += function (t, e) { return "&" + encodeURIComponent(t) + "=" + encodeURIComponent(e).replace(ct, "+") }(e.name, n) }) } }) }), t.substr(1) }, V.val = function (t) { return void 0 === t ? this[0] && A(this[0]) : this.each(function (e, n) { st.test(n.type) && Y(t) ? a(n.options, function (e) { e.selected = 0 <= t.indexOf(e.value) }) : n.value = t }) }, V.clone = function () { return this.map(function (t, e) { return e.cloneNode(!0) }) }, V.detach = function () { return this.each(function (t, e) { e.parentNode && e.parentNode.removeChild(e) }) }, V.append = function () { var t = this; return a(arguments, function (e) { C(t, e) }), this }, V.appendTo = function (t) { return C(r(t), this), this }, V.html = function (t) { if (void 0 === t) return this[0] && this[0].innerHTML; var e = t.nodeType ? t[0].outerHTML : t; return this.each(function (t, n) { n.innerHTML = e }) }, V.empty = function () { return this.html("") }, V.insertAfter = function (t) { var e = this; return r(t).each(function (t, n) { var i = n.parentNode; e.each(function (e, r) { i.insertBefore(t ? r.cloneNode(!0) : r, n.nextSibling) }) }), this }, V.after = function () { var t = this; return a(k.apply(arguments), function (e) { k.apply(r(e).slice()).insertAfter(t) }), this }, V.insertBefore = function (t) { var e = this; return r(t).each(function (t, n) { var i = n.parentNode; e.each(function (e, r) { i.insertBefore(t ? r.cloneNode(!0) : r, n) }) }), this }, V.before = function () { var t = this; return a(arguments, function (e) { r(e).insertBefore(t) }), this }, V.prepend = function () { var t = this; return a(arguments, function (e) { C(t, e, !0) }), this }, V.prependTo = function (t) { return C(r(t), k.apply(this.slice()), !0), this }, V.remove = function () { return this.detach().off() }, V.replaceWith = function (t) { var e = this; return this.each(function (n, i) { var o = i.parentNode; if (o) { var a = n ? r(t).clone() : r(t); return a[0] ? (o.replaceChild(a[0], i), void r(a[0]).after(a.slice(1))) : (e.remove(), !1) } }) }, V.replaceAll = function (t) { return r(t).replaceWith(this), this }, V.text = function (t) { return void 0 === t ? this[0] ? this[0].textContent : "" : this.each(function (e, n) { n.textContent = t }) }; var ht = L.documentElement; V.offset = function () { var t = this[0]; if (t) { var e = t.getBoundingClientRect(); return { top: e.top + R.pageYOffset - ht.clientTop, left: e.left + R.pageXOffset - ht.clientLeft } } }, V.offsetParent = function () { return r(this[0] && this[0].offsetParent) }, V.position = function () { var t = this[0]; return t ? { left: t.offsetLeft, top: t.offsetTop } : void 0 }, V.children = function (t) { var e = []; return this.each(function (t, n) { B.apply(e, n.children) }), e = r(d(e)), t ? e.filter(function (e, n) { return s(n, t) }) : e }, V.contents = function () { var t = []; return this.each(function (e, n) { B.apply(t, "IFRAME" === n.tagName ? [n.contentDocument] : n.childNodes) }), r(t.length && d(t)) }, V.find = function (t) { for (var e, i = [], o = 0, a = this.length; o < a; o++)(e = n(t, this[o])).length && B.apply(i, e); return r(i.length && d(i)) }, V.has = function (t) { var e = u(t) ? function (e, i) { return !!n(t, i).length } : function (e, n) { return n.contains(t) }; return this.filter(e) }, V.is = function (t) { if (!t || !this[0]) return !1; var e = h(t), n = !1; return this.each(function (i, r) { return !(n = e(i, r, t)) }), n }, V.next = function () { return r(this[0] && this[0].nextElementSibling) }, V.not = function (t) { if (!t || !this[0]) return this; var e = h(t); return this.filter(function (n, i) { return !e(n, i, t) }) }, V.parent = function () { var t = []; return this.each(function (e, n) { n && n.parentNode && t.push(n.parentNode) }), r(d(t)) }, V.index = function (t) { var e = t ? r(t)[0] : this[0], n = t ? this : r(e).parent().children(); return D.call(n, e) }, V.closest = function (t) { return t && this[0] ? this.is(t) ? this.filter(t) : this.parent().closest(t) : r() }, V.parents = function (t) { var e, n = []; return this.each(function (i, r) { for (e = r; e && e.parentNode && e !== L.body.parentNode;)e = e.parentNode, (!t || t && s(e, t)) && n.push(e) }), r(d(n)) }, V.prev = function () { return r(this[0] && this[0].previousElementSibling) }, V.siblings = function () { var t = this[0]; return this.parent().children().filter(function (e, n) { return n !== t }) }, e.a = r }, function (t, e, n) { t.exports = !n(16) && !n(8)(function () { return 7 != Object.defineProperty(n(76)("div"), "a", { get: function () { return 7 } }).a }) }, function (t, e, n) { var i = n(9), r = n(17), o = n(44), a = n(78), s = n(15).f; t.exports = function (t) { var e = r.Symbol || (r.Symbol = o ? {} : i.Symbol || {}); "_" == t.charAt(0) || t in e || s(e, t, { value: a.f(t) }) } }, function (t, e, n) { var i = n(23), r = n(25), o = n(65)(!1), a = n(79)("IE_PROTO"); t.exports = function (t, e) { var n, s = r(t), c = 0, u = []; for (n in s) n != a && i(s, n) && u.push(n); for (; e.length > c;)i(s, n = e[c++]) && (~o(u, n) || u.push(n)); return u } }, function (t, e, n) { var i = n(15), r = n(12), o = n(45); t.exports = n(16) ? Object.defineProperties : function (t, e) { r(t); for (var n, a = o(e), s = a.length, c = 0; s > c;)i.f(t, n = a[c++], e[n]); return t } }, function (t, e, n) { var i = n(25), r = n(48).f, o = {}.toString, a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []; t.exports.f = function (t) { return a && "[object Window]" == o.call(t) ? function (t) { try { return r(t) } catch (t) { return a.slice() } }(t) : r(i(t)) } }, function (t, e, n) { "use strict"; var i = n(45), r = n(66), o = n(62), a = n(26), s = n(61), c = Object.assign; t.exports = !c || n(8)(function () { var t = {}, e = {}, n = Symbol(), i = "abcdefghijklmnopqrst"; return t[n] = 7, i.split("").forEach(function (t) { e[t] = t }), 7 != c({}, t)[n] || Object.keys(c({}, e)).join("") != i }) ? function (t) { for (var e = a(t), n = arguments.length, c = 1, u = r.f, l = o.f; n > c;)for (var h, f = s(arguments[c++]), p = u ? i(f).concat(u(f)) : i(f), d = p.length, m = 0; d > m;)l.call(f, h = p[m++]) && (e[h] = f[h]); return e } : c }, function (t, e, n) { "use strict"; var i = n(35), r = n(10), o = n(110), a = [].slice, s = {}, c = function (t, e, n) { if (!(e in s)) { for (var i = [], r = 0; r < e; r++)i[r] = "a[" + r + "]"; s[e] = Function("F,a", "return new F(" + i.join(",") + ")") } return s[e](t, n) }; t.exports = Function.bind || function (t) { var e = i(this), n = a.call(arguments, 1), s = function () { var i = n.concat(a.call(arguments)); return this instanceof s ? c(e, i.length, i) : o(e, i, t) }; return r(e.prototype) && (s.prototype = e.prototype), s } }, function (t) { t.exports = function (t, e, n) { var i = void 0 === n; switch (e.length) { case 0: return i ? t() : t.call(n); case 1: return i ? t(e[0]) : t.call(n, e[0]); case 2: return i ? t(e[0], e[1]) : t.call(n, e[0], e[1]); case 3: return i ? t(e[0], e[1], e[2]) : t.call(n, e[0], e[1], e[2]); case 4: return i ? t(e[0], e[1], e[2], e[3]) : t.call(n, e[0], e[1], e[2], e[3]) }return t.apply(n, e) } }, function (t, e, n) { var i = n(9).parseInt, r = n(68).trim, o = n(84), a = /^[-+]?0[xX]/; t.exports = 8 !== i(o + "08") || 22 !== i(o + "0x16") ? function (t, e) { var n = r(t + "", 3); return i(n, e >>> 0 || (a.test(n) ? 16 : 10)) } : i }, function (t, e, n) { var i = n(9).parseFloat, r = n(68).trim; t.exports = 1 / i(n(84) + "-0") == -1 / 0 ? i : function (t) { var e = r(t + "", 3), n = i(e); return 0 === n && "-" == e.charAt(0) ? -0 : n } }, function (t, e, n) { var i = n(36); t.exports = function (t, e) { if ("number" != typeof t && "Number" != i(t)) throw TypeError(e); return +t } }, function (t, e, n) { var i = n(10), r = Math.floor; t.exports = function (t) { return !i(t) && isFinite(t) && r(t) === t } }, function (t) { t.exports = Math.log1p || function (t) { return -1e-8 < (t = +t) && 1e-8 > t ? t - t * t / 2 : Math.log(1 + t) } }, function (t, e, n) { var i = n(38), r = n(37); t.exports = function (t) { return function (e, n) { var o, a, s = r(e) + "", c = i(n), u = s.length; return 0 > c || c >= u ? t ? "" : void 0 : 55296 > (o = s.charCodeAt(c)) || 56319 < o || c + 1 === u || 56320 > (a = s.charCodeAt(c + 1)) || 57343 < a ? t ? s.charAt(c) : o : t ? s.slice(c, c + 2) : a - 56320 + (o - 55296 << 10) + 65536 } } }, function (t, e, n) { "use strict"; var i = n(47), r = n(42), o = n(52), a = {}; n(24)(a, n(14)("iterator"), function () { return this }), t.exports = function (t, e, n) { t.prototype = i(a, { next: r(1, n) }), o(t, e + " Iterator") } }, function (t, e, n) { var i = n(12); t.exports = function (t, e, n, r) { try { return r ? e(i(n)[0], n[1]) : e(n) } catch (n) { var o = t.return; throw void 0 !== o && i(o.call(t)), n } } }, function (t, e, n) { var i = n(35), r = n(26), o = n(61), a = n(18); t.exports = function (t, e, n, s, c) { i(e); var u = r(t), l = o(u), h = a(u.length), f = c ? h - 1 : 0, p = c ? -1 : 1; if (2 > n) for (; ;) { if (f in l) { s = l[f], f += p; break } if (f += p, c ? 0 > f : h <= f) throw TypeError("Reduce of empty array with no initial value") } for (; c ? 0 <= f : h > f; f += p)f in l && (s = e(s, l[f], f, u)); return s } }, function (t, e, n) { "use strict"; var i = n(26), r = n(46), o = n(18); t.exports = [].copyWithin || function (t, e) { var n = i(this), a = o(n.length), s = r(t, a), c = r(e, a), u = 2 < arguments.length ? arguments[2] : void 0, l = Math.min((void 0 === u ? a : r(u, a)) - c, a - s), h = 1; for (c < s && s < c + l && (h = -1, c += l - 1, s += l - 1); 0 < l--;)c in n ? n[s] = n[c] : delete n[s], s += h, c += h; return n } }, function (t) { t.exports = function (t, e) { return { value: e, done: !!t } } }, function (t, e, n) { n(16) && "g" != /./g.flags && n(15).f(RegExp.prototype, "flags", { configurable: !0, get: n(98) }) }, function (t, e, n) { "use strict"; var i, r, o, a, s = n(44), c = n(9), u = n(34), l = n(67), h = n(2), f = n(10), p = n(35), d = n(56), m = n(71), v = n(72), g = n(99).set, y = n(255)(), b = n(124), _ = n(256), x = n(73), w = n(125), T = "Promise", S = c.TypeError, M = c.process, P = M && M.versions, E = P && P.v8 || "", A = c[T], C = "process" == l(M), L = function () { }, R = r = b.f, O = !!function () { try { var t = A.resolve(1), e = (t.constructor = {})[n(14)("species")] = function (t) { t(L, L) }; return (C || "function" == typeof PromiseRejectionEvent) && t.then(L) instanceof e && 0 !== E.indexOf("6.6") && -1 === x.indexOf("Chrome/66") } catch (e) { } }(), I = function (t) { var e; return !(!f(t) || "function" != typeof (e = t.then)) && e }, D = function (t, e) { if (!t._n) { t._n = !0; var n = t._c; y(function () { for (var i = t._v, r = 1 == t._s, o = 0, a = function (e) { var n, o, a, s = r ? e.ok : e.fail, c = e.resolve, u = e.reject, l = e.domain; try { s ? (!r && (2 == t._h && k(t), t._h = 1), !0 === s ? n = i : (l && l.enter(), n = s(i), l && (l.exit(), a = !0)), n === e.promise ? u(S("Promise-chain cycle")) : (o = I(n)) ? o.call(n, c, u) : c(n)) : u(i) } catch (e) { l && !a && l.exit(), u(e) } }; n.length > o;)a(n[o++]); t._c = [], t._n = !1, e && !t._h && G(t) }) } }, G = function (t) { g.call(c, function () { var e, n, i, r = t._v, o = B(t); if (o && (e = _(function () { C ? M.emit("unhandledRejection", r, t) : (n = c.onunhandledrejection) ? n({ promise: t, reason: r }) : (i = c.console) && i.error && i.error("Unhandled promise rejection", r) }), t._h = C || B(t) ? 2 : 1), t._a = void 0, o && e.e) throw e.v }) }, B = function (t) { return 1 !== t._h && 0 === (t._a || t._c).length }, k = function (t) { g.call(c, function () { var e; C ? M.emit("rejectionHandled", t) : (e = c.onrejectionhandled) && e({ promise: t, reason: t._v }) }) }, N = function (t) { var e = this; e._d || (e._d = !0, (e = e._w || e)._v = t, e._s = 2, !e._a && (e._a = e._c.slice()), D(e, !0)) }, H = function (t) { var e, n = this; if (!n._d) { n._d = !0, n = n._w || n; try { if (n === t) throw S("Promise can't be resolved itself"); (e = I(t)) ? y(function () { var i = { _w: n, _d: !1 }; try { e.call(t, u(H, i, 1), u(N, i, 1)) } catch (t) { N.call(i, t) } }) : (n._v = t, n._s = 1, D(n, !1)) } catch (e) { N.call({ _w: n, _d: !1 }, e) } } }; O || (A = function (t) { d(this, A, T, "_h"), p(t), i.call(this); try { t(u(H, this, 1), u(N, this, 1)) } catch (t) { N.call(this, t) } }, (i = function () { this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1 }).prototype = n(57)(A.prototype, { then: function (t, e) { var n = R(v(this, A)); return n.ok = "function" != typeof t || t, n.fail = "function" == typeof e && e, n.domain = C ? M.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && D(this, !1), n.promise }, catch: function (t) { return this.then(void 0, t) } }), o = function () { var t = new i; this.promise = t, this.resolve = u(H, t, 1), this.reject = u(N, t, 1) }, b.f = R = function (t) { return t === A || t === a ? new o(t) : r(t) }), h(h.G + h.W + h.F * !O, { Promise: A }), n(52)(A, T), n(55)(T), a = n(17)[T], h(h.S + h.F * !O, T, { reject: function (t) { var e = R(this); return (0, e.reject)(t), e.promise } }), h(h.S + h.F * (s || !O), T, { resolve: function (t) { return w(s && this === a ? A : this, t) } }), h(h.S + h.F * !(O && n(69)(function (t) { A.all(t).catch(L) })), T, { all: function (t) { var e = this, n = R(e), i = n.resolve, r = n.reject, o = _(function () { var n = [], o = 0, a = 1; m(t, !1, function (t) { var s = o++, c = !1; n.push(void 0), a++, e.resolve(t).then(function (t) { c || (c = !0, n[s] = t, --a || i(n)) }, r) }), --a || i(n) }); return o.e && r(o.v), n.promise }, race: function (t) { var e = this, n = R(e), i = n.reject, r = _(function () { m(t, !1, function (t) { e.resolve(t).then(n.resolve, i) }) }); return r.e && i(r.v), n.promise } }) }, function (t, e, n) { "use strict"; var i = n(35); t.exports.f = function (t) { return new function (t) { var e, n; this.promise = new t(function (t, i) { if (void 0 !== e || void 0 !== n) throw TypeError("Bad Promise constructor"); e = t, n = i }), this.resolve = i(e), this.reject = i(n) }(t) } }, function (t, e, n) { var i = n(12), r = n(10), o = n(124); t.exports = function (t, e) { if (i(t), r(e) && e.constructor === t) return e; var n = o.f(t); return (0, n.resolve)(e), n.promise } }, function (t, e, n) { "use strict"; var i = n(15).f, r = n(47), o = n(57), a = n(34), s = n(56), c = n(71), u = n(89), l = n(121), h = n(55), f = n(16), p = n(41).fastKey, d = n(58), m = f ? "_s" : "size", v = function (t, e) { var n, i = p(e); if ("F" !== i) return t._i[i]; for (n = t._f; n; n = n.n)if (n.k == e) return n }; t.exports = { getConstructor: function (t, e, n, u) { var l = t(function (t, i) { s(t, l, e, "_i"), t._t = e, t._i = r(null), t._f = void 0, t._l = void 0, t[m] = 0, void 0 != i && c(i, n, t[u], t) }); return o(l.prototype, { clear: function () { for (var t = d(this, e), n = t._i, i = t._f; i; i = i.n)i.r = !0, i.p && (i.p = i.p.n = void 0), delete n[i.i]; t._f = t._l = void 0, t[m] = 0 }, delete: function (t) { var n = d(this, e), i = v(n, t); if (i) { var r = i.n, o = i.p; delete n._i[i.i], i.r = !0, o && (o.n = r), r && (r.p = o), n._f == i && (n._f = r), n._l == i && (n._l = o), n[m]-- } return !!i }, forEach: function (t) { d(this, e); for (var n, i = a(t, 1 < arguments.length ? arguments[1] : void 0, 3); n = n ? n.n : this._f;)for (i(n.v, n.k, this); n && n.r;)n = n.p }, has: function (t) { return !!v(d(this, e), t) } }), f && i(l.prototype, "size", { get: function () { return d(this, e)[m] } }), l }, def: function (t, e, n) { var i, r, o = v(t, e); return o ? o.v = n : (t._l = o = { i: r = p(e, !0), k: e, v: n, p: i = t._l, n: void 0, r: !1 }, !t._f && (t._f = o), i && (i.n = o), t[m]++, "F" !== r && (t._i[r] = o)), t }, getEntry: v, setStrong: function (t, e, n) { u(t, e, function (t, n) { this._t = d(t, e), this._k = n, this._l = void 0 }, function () { for (var t = this, e = t._k, n = t._l; n && n.r;)n = n.p; return t._t && (t._l = n = n ? n.n : t._t._f) ? l(0, "keys" == e ? n.k : "values" == e ? n.v : [n.k, n.v]) : (t._t = void 0, l(1)) }, n ? "entries" : "values", !n, !0), h(e) } } }, function (t, e, n) { "use strict"; var i = n(57), r = n(41).getWeak, o = n(12), a = n(10), s = n(56), c = n(71), u = n(31), l = n(23), h = n(58), f = u(5), p = u(6), d = 0, m = function (t) { return t._l || (t._l = new v) }, v = function () { this.a = [] }, g = function (t, e) { return f(t.a, function (t) { return t[0] === e }) }; v.prototype = { get: function (t) { var e = g(this, t); if (e) return e[1] }, has: function (t) { return !!g(this, t) }, set: function (t, e) { var n = g(this, t); n ? n[1] = e : this.a.push([t, e]) }, delete: function (t) { var e = p(this.a, function (e) { return e[0] === t }); return ~e && this.a.splice(e, 1), !!~e } }, t.exports = { getConstructor: function (t, e, n, o) { var u = t(function (t, i) { s(t, u, e, "_i"), t._t = e, t._i = d++, t._l = void 0, void 0 != i && c(i, n, t[o], t) }); return i(u.prototype, { delete: function (t) { if (!a(t)) return !1; var n = r(t); return !0 === n ? m(h(this, e)).delete(t) : n && l(n, this._i) && delete n[this._i] }, has: function (t) { if (!a(t)) return !1; var n = r(t); return !0 === n ? m(h(this, e)).has(t) : n && l(n, this._i) } }), u }, def: function (t, e, n) { var i = r(o(e), !0); return !0 === i ? m(t).set(e, n) : i[t._i] = n, t }, ufstore: m } }, function (t, e, n) { var i = n(38), r = n(18); t.exports = function (t) { if (void 0 === t) return 0; var e = i(t), n = r(e); if (e !== n) throw RangeError("Wrong length!"); return n } }, function (t, e, n) { var i = n(48), r = n(66), o = n(12), a = n(9).Reflect; t.exports = a && a.ownKeys || function (t) { var e = i.f(o(t)), n = r.f; return n ? e.concat(n(t)) : e } }, function (t, e, n) { var i = n(18), r = n(86), o = n(37); t.exports = function (t, e, n, a) { var s = o(t) + "", c = s.length, u = void 0 === n ? " " : n + "", l = i(e); if (l <= c || "" == u) return s; var h = l - c, f = r.call(u, Math.ceil(h / u.length)); return f.length > h && (f = f.slice(0, h)), a ? f + s : s + f } }, function (t, e, n) { var i = n(45), r = n(25), o = n(62).f; t.exports = function (t) { return function (e) { for (var n, a = r(e), s = i(a), c = s.length, u = 0, l = []; c > u;)o.call(a, n = s[u++]) && l.push(t ? [n, a[n]] : a[n]); return l } } }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return f }); var u = n(59), l = n(60), h = n(101), f = function (t) { function e(t, n) { var i; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (i = o(this, s(e).call(this, t, n))).bushesUniforms = null, i.plantsUniforms = null, i.bushesMat = null, i.plantsMat = null, i.obeySign = null, i.obeySignOp = .5, i.windows = [], i } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initEl", value: function () { this.objLoader = new l.a("".concat(this.id, ".glb"), { background: "".concat(this.id, "/background.jpg"), buildings: "".concat(this.id, "/buildings.jpg"), bushes: "".concat(this.id, "/bushes.png"), ground: "".concat(this.id, "/ground.jpg"), mushrooms: "".concat(this.id, "/mushrooms.png"), plants: "".concat(this.id, "/plants.png"), sign1: "".concat(this.id, "/sign1.jpg"), sign2: "".concat(this.id, "/sign2.jpg"), sign3: "".concat(this.id, "/sign3.png"), sign4: "".concat(this.id, "/sign4.png"), sign5: "".concat(this.id, "/sign5.png"), sign6: "".concat(this.id, "/sign6.png") }) } }, { key: "initTl", value: function () { this.tl.obeySign = new TimelineMax({ paused: !0, repeat: -1 }), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 1), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 1.05), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 1.5), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 1.55), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 1.7), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 1.75), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 1.8), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 1.85), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 2.5), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 2.55), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 2.6), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 2.65), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 3.2), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 3.25), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 3.3), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 3.35), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 3.55), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 3.6), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 3.7), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 3.75), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 3.8), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 3.85), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 4.8), this.tl.obeySign.to(this, .1, { obeySignOp: .5, ease: Power1.easeIn }, 4.85), this.tl.obeySign.to(this, .05, { obeySignOp: 1, ease: Power3.easeOut }, 4.95), this.tl.obeySign.to(this, .3, { obeySignOp: .5, ease: Power1.easeIn }, 5) } }, { key: "raf", value: function () { this.isObjLoaded && (a(s(e.prototype), "raf", this).call(this), this.bushesUniforms.time.value = .01 * this.time, this.plantsUniforms.time.value = .01 * this.time, this.obeySign.material.opacity = this.obeySignOp) } }, { key: "destroy", value: function () { this.bushesMat.dispose(), this.plantsMat.dispose(), a(s(e.prototype), "destroy", this).call(this), this.bushesMat = null, this.plantsMat = null } }, { key: "setUniforms", value: function () { this.bushesUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("bushes") } }, this.plantsUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("plants") } } } }, { key: "setMaterials", value: function () { this.bushesMat = new THREE.RawShaderMaterial({ uniforms: this.bushesUniforms, vertexShader: h(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 customUv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define X_DISP .5\n#define Z_DISP .5\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise\t= noise( uv * 3. + time * -.5 );\n\tfloat zNoise\t= noise( uv + time * .5 );\n\tfloat dispCoeff\t= customUv.y * customUv.y;\n\t\n\tvec4 pos\t= position;\n\tpos.x\t\t+= ( -X_DISP + X_DISP * 2. * xNoise ) * dispCoeff; // x displacement\n\tpos.y\t\t+= ( -Z_DISP + Z_DISP * 2. * zNoise ) * dispCoeff; // z displacement\n\t\n\t\n\t// gl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n\t\n\t// vDebug = dispCoeff;\n\t\n}\n\n"]), fragmentShader: h(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvec4 tx\t= texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vDebug, 0., 0., 1. );\n\t\n\t\n}\n"]), transparent: !0 }), this.plantsMat = new THREE.RawShaderMaterial({ uniforms: this.plantsUniforms, vertexShader: h(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 customUv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define X_DISP .5\n#define Z_DISP .5\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise\t= noise( uv * 3. + time * -.5 );\n\tfloat zNoise\t= noise( uv + time * .5 );\n\tfloat dispCoeff\t= customUv.y * customUv.y;\n\t\n\tvec4 pos\t= position;\n\tpos.x\t\t+= ( -X_DISP + X_DISP * 2. * xNoise ) * dispCoeff; // x displacement\n\tpos.y\t\t+= ( -Z_DISP + Z_DISP * 2. * zNoise ) * dispCoeff; // z displacement\n\t\n\t\n\t// gl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n\t\n\t// vDebug = dispCoeff;\n\t\n}\n\n"]), fragmentShader: h(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvec4 tx\t= texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vDebug, 0., 0., 1. );\n\t\n\t\n}\n"]), transparent: !0 }) } }, { key: "initMaterials", value: function () { var t = this; this.gltf.scene.traverse(function (e) { if ("Mesh" == e.type) if (0 <= e.name.indexOf("bush")) t._setNewUv(e.geometry), e.material = t.bushesMat, e.renderOrder = 2; else if (0 <= e.name.indexOf("plant")) t._setNewUv(e.geometry), e.material = t.plantsMat, e.renderOrder = 2; else { var n = new THREE.MeshBasicMaterial({ transparent: !0 }), i = t.getTexture(e.name); i && (n.map = i), "background" == e.name ? e.renderOrder = -1 : 0 <= e.name.indexOf("mushroom") ? e.renderOrder = 1 : "sign3" == e.name ? t.obeySign = e : 0 <= e.name.indexOf("window") && (n.color = new THREE.Color(16775815), n.opacity = .8 > Math.random() ? 1 : 0, e.renderOrder = 1, t.windows.push(e)), e.material = n } }) } }, { key: "getTexture", value: function (t) { var e = "background" == t ? this.tx.background : "buildings" == t ? this.tx.buildings : "bushes" == t ? this.tx.bushes : "ground" == t ? this.tx.ground : 0 <= t.indexOf("mushroom") ? this.tx.mushrooms : "plants" == t ? this.tx.plants : "sign1" == t ? this.tx.sign1 : "sign2" == t ? this.tx.sign2 : "sign3" == t ? this.tx.sign3 : "sign4" == t ? this.tx.sign4 : "sign5" == t ? this.tx.sign5 : "sign6" == t ? this.tx.sign6 : null; return e && (e.flipY = !1), e } }, { key: "_setNewUv", value: function (t) { for (var e = t.attributes.position.count, n = new Float32Array(2 * e), i = [{ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 0, y: 1 }, { x: 1, y: 0 }], r = 0; r < 2 * e; r += 2)n[r] = i[r / 2].x, n[r + 1] = i[r / 2].y; t.addAttribute("customUv", new THREE.BufferAttribute(n, 2)) } }, { key: "launchScene", value: function () { this.tl.obeySign.play(), this._manageWindows() } }, { key: "_manageWindows", value: function () { var t = this, e = Math.round(Math.random() * (this.windows.length - 1)), n = this.windows[e], i = .5 < n.material.opacity ? 0 : 1; this.tw.window = TweenLite.to(n.material, .2, { opacity: i, ease: Power1.easeOut }); var r = 800 * Math.random() + 200; this.sto.window = setTimeout(function () { t._manageWindows() }, r) } }]), e }() }, function (t, e, n) { var i = n(51), r = function () { function t(t) { this.manager = void 0 === t ? i.DefaultLoadingManager : t, this.dracoLoader = null } function e() { if (!i.DDSLoader) throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader"); this.name = _.MSFT_TEXTURE_DDS, this.ddsLoader = new i.DDSLoader } function n(t) { this.name = _.KHR_LIGHTS_PUNCTUAL; var e = t.extensions && t.extensions[_.KHR_LIGHTS_PUNCTUAL] || {}; this.lightDefs = e.lights || [] } function r() { this.name = _.KHR_MATERIALS_UNLIT } function o(t, e) { if (!e) throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided."); this.name = _.KHR_DRACO_MESH_COMPRESSION, this.json = t, this.dracoLoader = e, i.DRACOLoader.getDecoderModule() } function a() { this.name = _.KHR_TEXTURE_TRANSFORM } function s() { return { name: _.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS, specularGlossinessParams: ["color", "map", "lightMap", "lightMapIntensity", "aoMap", "aoMapIntensity", "emissive", "emissiveIntensity", "emissiveMap", "bumpMap", "bumpScale", "normalMap", "displacementMap", "displacementScale", "displacementBias", "specularMap", "specular", "glossinessMap", "glossiness", "alphaMap", "envMap", "envMapIntensity", "refractionRatio"], getMaterialType: function () { return i.ShaderMaterial }, extendParams: function (t, e, n) { var r = e.extensions[this.name], o = i.ShaderLib.standard, a = i.UniformsUtils.clone(o.uniforms), s = o.fragmentShader.replace("uniform float roughness;", "uniform vec3 specular;").replace("uniform float metalness;", "uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>", "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>", "#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>", "vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\ttexelSpecular = sRGBToLinear( texelSpecular );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>", "float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>", "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor = specularFactor.rgb;"); delete a.roughness, delete a.metalness, delete a.roughnessMap, delete a.metalnessMap, a.specular = { value: (new i.Color).setHex(1118481) }, a.glossiness = { value: .5 }, a.specularMap = { value: null }, a.glossinessMap = { value: null }, t.vertexShader = o.vertexShader, t.fragmentShader = s, t.uniforms = a, t.defines = { STANDARD: "" }, t.color = new i.Color(1, 1, 1), t.opacity = 1; var c = []; if (Array.isArray(r.diffuseFactor)) { var u = r.diffuseFactor; t.color.fromArray(u), t.opacity = u[3] } if (void 0 !== r.diffuseTexture && c.push(n.assignTexture(t, "map", r.diffuseTexture)), t.emissive = new i.Color(0, 0, 0), t.glossiness = void 0 === r.glossinessFactor ? 1 : r.glossinessFactor, t.specular = new i.Color(1, 1, 1), Array.isArray(r.specularFactor) && t.specular.fromArray(r.specularFactor), void 0 !== r.specularGlossinessTexture) { var l = r.specularGlossinessTexture; c.push(n.assignTexture(t, "glossinessMap", l)), c.push(n.assignTexture(t, "specularMap", l)) } return Promise.all(c) }, createMaterial: function (t) { var e = new i.ShaderMaterial({ defines: t.defines, vertexShader: t.vertexShader, fragmentShader: t.fragmentShader, uniforms: t.uniforms, fog: !0, lights: !0, opacity: t.opacity, transparent: t.transparent }); return e.isGLTFSpecularGlossinessMaterial = !0, e.color = t.color, e.map = void 0 === t.map ? null : t.map, e.lightMap = null, e.lightMapIntensity = 1, e.aoMap = void 0 === t.aoMap ? null : t.aoMap, e.aoMapIntensity = 1, e.emissive = t.emissive, e.emissiveIntensity = 1, e.emissiveMap = void 0 === t.emissiveMap ? null : t.emissiveMap, e.bumpMap = void 0 === t.bumpMap ? null : t.bumpMap, e.bumpScale = 1, e.normalMap = void 0 === t.normalMap ? null : t.normalMap, t.normalScale && (e.normalScale = t.normalScale), e.displacementMap = null, e.displacementScale = 1, e.displacementBias = 0, e.specularMap = void 0 === t.specularMap ? null : t.specularMap, e.specular = t.specular, e.glossinessMap = void 0 === t.glossinessMap ? null : t.glossinessMap, e.glossiness = t.glossiness, e.alphaMap = null, e.envMap = void 0 === t.envMap ? null : t.envMap, e.envMapIntensity = 1, e.refractionRatio = .98, e.extensions.derivatives = !0, e }, cloneMaterial: function (t) { var e = t.clone(); e.isGLTFSpecularGlossinessMaterial = !0; for (var n = this.specularGlossinessParams, i = 0, r = n.length; i < r; i++)e[n[i]] = t[n[i]]; return e }, refreshUniforms: function (t, e, n, i, r) { if (!0 === r.isGLTFSpecularGlossinessMaterial) { var o, a = r.uniforms, s = r.defines; a.opacity.value = r.opacity, a.diffuse.value.copy(r.color), a.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity), a.map.value = r.map, a.specularMap.value = r.specularMap, a.alphaMap.value = r.alphaMap, a.lightMap.value = r.lightMap, a.lightMapIntensity.value = r.lightMapIntensity, a.aoMap.value = r.aoMap, a.aoMapIntensity.value = r.aoMapIntensity, r.map ? o = r.map : r.specularMap ? o = r.specularMap : r.displacementMap ? o = r.displacementMap : r.normalMap ? o = r.normalMap : r.bumpMap ? o = r.bumpMap : r.glossinessMap ? o = r.glossinessMap : r.alphaMap ? o = r.alphaMap : r.emissiveMap && (o = r.emissiveMap), void 0 !== o && (o.isWebGLRenderTarget && (o = o.texture), !0 === o.matrixAutoUpdate && o.updateMatrix(), a.uvTransform.value.copy(o.matrix)), r.envMap && (a.envMap.value = r.envMap, a.envMapIntensity.value = r.envMapIntensity, a.flipEnvMap.value = r.envMap.isCubeTexture ? -1 : 1, a.reflectivity.value = r.reflectivity, a.refractionRatio.value = r.refractionRatio, a.maxMipLevel.value = t.properties.get(r.envMap).__maxMipLevel), a.specular.value.copy(r.specular), a.glossiness.value = r.glossiness, a.glossinessMap.value = r.glossinessMap, a.emissiveMap.value = r.emissiveMap, a.bumpMap.value = r.bumpMap, a.normalMap.value = r.normalMap, a.displacementMap.value = r.displacementMap, a.displacementScale.value = r.displacementScale, a.displacementBias.value = r.displacementBias, null !== a.glossinessMap.value && void 0 === s.USE_GLOSSINESSMAP && (s.USE_GLOSSINESSMAP = "", s.USE_ROUGHNESSMAP = ""), null === a.glossinessMap.value && void 0 !== s.USE_GLOSSINESSMAP && (delete s.USE_GLOSSINESSMAP, delete s.USE_ROUGHNESSMAP) } } } } function c(t, e, n, r) { i.Interpolant.call(this, t, e, n, r) } function u(t, e) { return "string" != typeof t || "" === t ? "" : /^(https?:)?\/\//i.test(t) ? t : /^data:.*,.*$/i.test(t) ? t : /^blob:.*$/i.test(t) ? t : e + t } function l(t, e, n) { for (var i in n.extensions) void 0 === t[i] && (e.userData.gltfExtensions = e.userData.gltfExtensions || {}, e.userData.gltfExtensions[i] = n.extensions[i]) } function h(t, e) { void 0 !== e.extras && ("object" == typeof e.extras ? t.userData = e.extras : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e.extras)) } function f(t, e) { if (t.updateMorphTargets(), void 0 !== e.weights) for (var n = 0, i = e.weights.length; n < i; n++)t.morphTargetInfluences[n] = e.weights[n]; if (e.extras && Array.isArray(e.extras.targetNames)) { var r = e.extras.targetNames; if (t.morphTargetInfluences.length === r.length) { t.morphTargetDictionary = {}; for (n = 0, i = r.length; n < i; n++)t.morphTargetDictionary[r[n]] = n } else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.") } } function p(t, e) { var n = t.extensions ? t.extensions[_.KHR_DRACO_MESH_COMPRESSION] : void 0, i = e.extensions ? e.extensions[_.KHR_DRACO_MESH_COMPRESSION] : void 0; return n && i ? n.bufferView === i.bufferView && d(n.attributes, i.attributes) : t.indices === e.indices && d(t.attributes, e.attributes) } function d(t, e) { if (Object.keys(t).length !== Object.keys(e).length) return !1; for (var n in t) if (t[n] !== e[n]) return !1; return !0 } function m(t, e) { if (t.length !== e.length) return !1; for (var n = 0, i = t.length; n < i; n++)if (t[n] !== e[n]) return !1; return !0 } function v(t, e) { for (var n, i = 0, r = t.length; i < r; i++)if (p((n = t[i]).primitive, e)) return n.promise; return null } function g(t) { if (t.isInterleavedBufferAttribute) { for (var e = t.count, n = t.itemSize, r = t.array.slice(0, e * n), o = 0, a = 0; o < e; ++o)r[a++] = t.getX(o), 2 <= n && (r[a++] = t.getY(o)), 3 <= n && (r[a++] = t.getZ(o)), 4 <= n && (r[a++] = t.getW(o)); return new i.BufferAttribute(r, n, t.normalized) } return t.clone() } function y(t, e, n) { this.json = t || {}, this.extensions = e || {}, this.options = n || {}, this.cache = new function () { var t = {}; return { get: function (e) { return t[e] }, add: function (e, n) { t[e] = n }, remove: function (e) { delete t[e] }, removeAll: function () { t = {} } } }, this.primitiveCache = [], this.multiplePrimitivesCache = [], this.multiPassGeometryCache = [], this.textureLoader = new i.TextureLoader(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.fileLoader = new i.FileLoader(this.options.manager), this.fileLoader.setResponseType("arraybuffer") } function b(t, e, n) { function i(e, i) { return n.getDependency("accessor", e).then(function (e) { t.addAttribute(i, e) }) } var r = e.attributes, o = []; for (var a in r) { var s = G[a]; s && !(s in t.attributes) && o.push(i(r[a], s)) } if (void 0 !== e.indices && !t.index) { var c = n.getDependency("accessor", e.indices).then(function (e) { t.setIndex(e) }); o.push(c) } return h(t, e), Promise.all(o).then(function () { return void 0 === e.targets ? t : function (t, e, n) { for (var i = !1, r = !1, o = 0, a = e.length; o < a && (void 0 !== (s = e[o]).POSITION && (i = !0), void 0 !== s.NORMAL && (r = !0), !i || !r); o++); if (!i && !r) return Promise.resolve(t); var s, c = [], u = []; for (o = 0, a = e.length; o < a; o++) { if (s = e[o], i) { var l = void 0 === s.POSITION ? t.attributes.position : n.getDependency("accessor", s.POSITION).then(function (t) { return g(t) }); c.push(l) } r && (l = void 0 === s.NORMAL ? t.attributes.normal : n.getDependency("accessor", s.NORMAL).then(function (t) { return g(t) }), u.push(l)) } return Promise.all([Promise.all(c), Promise.all(u)]).then(function (n) { for (var o = n[0], a = n[1], s = 0, c = e.length; s < c; s++) { var u = e[s], l = "morphTarget" + s; if (i && void 0 !== u.POSITION) { var h = o[s]; h.name = l; for (var f = t.attributes.position, p = 0, d = h.count; p < d; p++)h.setXYZ(p, h.getX(p) + f.getX(p), h.getY(p) + f.getY(p), h.getZ(p) + f.getZ(p)) } if (r && void 0 !== u.NORMAL) { var m = a[s]; m.name = l; var v = t.attributes.normal; for (p = 0, d = m.count; p < d; p++)m.setXYZ(p, m.getX(p) + v.getX(p), m.getY(p) + v.getY(p), m.getZ(p) + v.getZ(p)) } } return i && (t.morphAttributes.position = o), r && (t.morphAttributes.normal = a), t }) }(t, e.targets, n) }) } t.prototype = { constructor: t, crossOrigin: "anonymous", load: function (t, e, n, r) { var o, a = this; o = void 0 === this.resourcePath ? void 0 === this.path ? i.LoaderUtils.extractUrlBase(t) : this.path : this.resourcePath, a.manager.itemStart(t); var s = function (e) { r ? r(e) : console.error(e), a.manager.itemError(t), a.manager.itemEnd(t) }, c = new i.FileLoader(a.manager); c.setPath(this.path), c.setResponseType("arraybuffer"), c.load(t, function (n) { try { a.parse(n, o, function (n) { e(n), a.manager.itemEnd(t) }, s) } catch (t) { s(t) } }, n, s) }, setCrossOrigin: function (t) { return this.crossOrigin = t, this }, setPath: function (t) { return this.path = t, this }, setResourcePath: function (t) { return this.resourcePath = t, this }, setDRACOLoader: function (t) { return this.dracoLoader = t, this }, parse: function (t, c, u, h) { var f, p = {}; if ("string" == typeof t) f = t; else if (i.LoaderUtils.decodeText(new Uint8Array(t, 0, 4)) === x) { try { p[_.KHR_BINARY_GLTF] = new function (t) { this.name = _.KHR_BINARY_GLTF, this.content = null, this.body = null; var e = new DataView(t, 0, w); if (this.header = { magic: i.LoaderUtils.decodeText(new Uint8Array(t.slice(0, 4))), version: e.getUint32(4, !0), length: e.getUint32(8, !0) }, this.header.magic !== x) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header."); if (2 > this.header.version) throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead."); for (var n, r = new DataView(t, w), o = 0; o < r.byteLength;) { n = r.getUint32(o, !0), o += 4; var a = r.getUint32(o, !0); if (o += 4, a === T.JSON) { var s = new Uint8Array(t, w + o, n); this.content = i.LoaderUtils.decodeText(s) } else if (a === T.BIN) { var c = w + o; this.body = t.slice(c, c + n) } o += n } if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.") }(t) } catch (t) { return void (h && h(t)) } f = p[_.KHR_BINARY_GLTF].content } else f = i.LoaderUtils.decodeText(new Uint8Array(t)); var d = JSON.parse(f); if (void 0 === d.asset || 2 > d.asset.version[0]) h && h(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")); else { if (d.extensionsUsed) for (var m = 0; m < d.extensionsUsed.length; ++m) { var v = d.extensionsUsed[m], g = d.extensionsRequired || []; v === _.KHR_LIGHTS_PUNCTUAL ? p[v] = new n(d) : v === _.KHR_MATERIALS_UNLIT ? p[v] = new r(d) : v === _.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ? p[v] = new s(d) : v === _.KHR_DRACO_MESH_COMPRESSION ? p[v] = new o(d, this.dracoLoader) : v === _.MSFT_TEXTURE_DDS ? p[_.MSFT_TEXTURE_DDS] = new e(d) : v === _.KHR_TEXTURE_TRANSFORM ? p[_.KHR_TEXTURE_TRANSFORM] = new a(d) : 0 <= g.indexOf(v) && console.warn('THREE.GLTFLoader: Unknown extension "' + v + '".') } var b = new y(d, p, { path: c || this.resourcePath || "", crossOrigin: this.crossOrigin, manager: this.manager }); b.parse(function (t, e, n, i, r) { var o = { scene: t, scenes: e, cameras: n, animations: i, asset: r.asset, parser: b, userData: {} }; l(p, o, r), u(o) }, h) } } }; var _ = { KHR_BINARY_GLTF: "KHR_binary_glTF", KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression", KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual", KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: "KHR_materials_pbrSpecularGlossiness", KHR_MATERIALS_UNLIT: "KHR_materials_unlit", KHR_TEXTURE_TRANSFORM: "KHR_texture_transform", MSFT_TEXTURE_DDS: "MSFT_texture_dds" }; n.prototype.loadLight = function (t) { var e, n = this.lightDefs[t], r = new i.Color(16777215); void 0 !== n.color && r.fromArray(n.color); var o = void 0 === n.range ? 0 : n.range; switch (n.type) { case "directional": (e = new i.DirectionalLight(r)).target.position.set(0, 0, -1), e.add(e.target); break; case "point": (e = new i.PointLight(r)).distance = o; break; case "spot": (e = new i.SpotLight(r)).distance = o, n.spot = n.spot || {}, n.spot.innerConeAngle = void 0 === n.spot.innerConeAngle ? 0 : n.spot.innerConeAngle, n.spot.outerConeAngle = void 0 === n.spot.outerConeAngle ? Math.PI / 4 : n.spot.outerConeAngle, e.angle = n.spot.outerConeAngle, e.penumbra = 1 - n.spot.innerConeAngle / n.spot.outerConeAngle, e.target.position.set(0, 0, -1), e.add(e.target); break; default: throw new Error('THREE.GLTFLoader: Unexpected light type, "' + n.type + '".') }return e.decay = 2, void 0 !== n.intensity && (e.intensity = n.intensity), e.name = n.name || "light_" + t, Promise.resolve(e) }, r.prototype.getMaterialType = function () { return i.MeshBasicMaterial }, r.prototype.extendParams = function (t, e, n) { var r = []; t.color = new i.Color(1, 1, 1), t.opacity = 1; var o = e.pbrMetallicRoughness; if (o) { if (Array.isArray(o.baseColorFactor)) { var a = o.baseColorFactor; t.color.fromArray(a), t.opacity = a[3] } void 0 !== o.baseColorTexture && r.push(n.assignTexture(t, "map", o.baseColorTexture)) } return Promise.all(r) }; var x = "glTF", w = 12, T = { JSON: 1313821514, BIN: 5130562 }; o.prototype.decodePrimitive = function (t, e) { var n = this.json, i = this.dracoLoader, r = t.extensions[this.name].bufferView, o = t.extensions[this.name].attributes, a = {}, s = {}, c = {}; for (var u in o) u in G && (a[G[u]] = o[u]); for (u in t.attributes) if (void 0 !== G[u] && void 0 !== o[u]) { var l = n.accessors[t.attributes[u]], h = R[l.componentType]; c[G[u]] = h, s[G[u]] = !0 === l.normalized } return e.getDependency("bufferView", r).then(function (t) { return new Promise(function (e) { i.decodeDracoFile(t, function (t) { for (var n in t.attributes) { var i = t.attributes[n], r = s[n]; void 0 !== r && (i.normalized = r) } e(t) }, a, c) }) }) }, a.prototype.extendTexture = function (t, e) { return t = t.clone(), void 0 !== e.offset && t.offset.fromArray(e.offset), void 0 !== e.rotation && (t.rotation = e.rotation), void 0 !== e.scale && t.repeat.fromArray(e.scale), void 0 !== e.texCoord && console.warn('THREE.GLTFLoader: Custom UV sets in "' + this.name + '" extension not yet supported.'), t.needsUpdate = !0, t }, c.prototype = Object.create(i.Interpolant.prototype), c.prototype.constructor = c, c.prototype.copySampleValue_ = function (t) { for (var e = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = 0; r !== i; r++)e[r] = n[t * i * 3 + i + r]; return e }, c.prototype.beforeStart_ = c.prototype.copySampleValue_, c.prototype.afterEnd_ = c.prototype.copySampleValue_, c.prototype.interpolate_ = function (t, e, n, i) { for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = 3 * a, c = i - e, u = (n - e) / c, l = u * u, h = l * u, f = t * s, p = f - s, d = -2 * h + 3 * l, m = h - l, v = 0; v !== a; v++) { var g = o[p + v + a], y = o[p + v + 2 * a] * c, b = o[f + v + a], _ = o[f + v] * c; r[v] = (1 - d) * g + (m - l + u) * y + d * b + m * _ } return r }; var S = 0, M = 1, P = 2, E = 3, A = 4, C = 5, L = 6, R = (Number, i.Matrix3, i.Matrix4, i.Vector2, i.Vector3, i.Vector4, i.Texture, { 5120: Int8Array, 5121: Uint8Array, 5122: Int16Array, 5123: Uint16Array, 5125: Uint32Array, 5126: Float32Array }), O = { 9728: i.NearestFilter, 9729: i.LinearFilter, 9984: i.NearestMipMapNearestFilter, 9985: i.LinearMipMapNearestFilter, 9986: i.NearestMipMapLinearFilter, 9987: i.LinearMipMapLinearFilter }, I = { 33071: i.ClampToEdgeWrapping, 33648: i.MirroredRepeatWrapping, 10497: i.RepeatWrapping }, D = (i.BackSide, i.FrontSide, i.NeverDepth, i.LessDepth, i.EqualDepth, i.LessEqualDepth, i.GreaterEqualDepth, i.NotEqualDepth, i.GreaterEqualDepth, i.AlwaysDepth, i.AddEquation, i.SubtractEquation, i.ReverseSubtractEquation, i.ZeroFactor, i.OneFactor, i.SrcColorFactor, i.OneMinusSrcColorFactor, i.SrcAlphaFactor, i.OneMinusSrcAlphaFactor, i.DstAlphaFactor, i.OneMinusDstAlphaFactor, i.DstColorFactor, i.OneMinusDstColorFactor, i.SrcAlphaSaturateFactor, { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 }), G = { POSITION: "position", NORMAL: "normal", TEXCOORD_0: "uv", TEXCOORD_1: "uv2", COLOR_0: "color", WEIGHTS_0: "skinWeight", JOINTS_0: "skinIndex" }, B = { scale: "scale", translation: "position", rotation: "quaternion", weights: "morphTargetInfluences" }, k = { CUBICSPLINE: i.InterpolateSmooth, LINEAR: i.InterpolateLinear, STEP: i.InterpolateDiscrete }, N = "OPAQUE", H = "MASK", F = "BLEND", U = { "image/png": i.RGBAFormat, "image/jpeg": i.RGBFormat }; return y.prototype.parse = function (t, e) { var n = this.json; this.cache.removeAll(), this.markDefs(), this.getMultiDependencies(["scene", "animation", "camera"]).then(function (e) { var i = e.scenes || [], r = i[n.scene || 0], o = e.animations || [], a = e.cameras || []; t(r, i, a, o, n) }).catch(e) }, y.prototype.markDefs = function () { for (var t, e = this.json.nodes || [], n = this.json.skins || [], i = this.json.meshes || [], r = {}, o = {}, a = 0, s = n.length; a < s; a++)for (var c = 0, u = (t = n[a].joints).length; c < u; c++)e[t[c]].isBone = !0; for (var l, h = 0, f = e.length; h < f; h++)void 0 !== (l = e[h]).mesh && (void 0 === r[l.mesh] && (r[l.mesh] = o[l.mesh] = 0), r[l.mesh]++, void 0 !== l.skin && (i[l.mesh].isSkinnedMesh = !0)); this.json.meshReferences = r, this.json.meshUses = o }, y.prototype.getDependency = function (t, e) { var n = t + ":" + e, i = this.cache.get(n); if (!i) { switch (t) { case "scene": i = this.loadScene(e); break; case "node": i = this.loadNode(e); break; case "mesh": i = this.loadMesh(e); break; case "accessor": i = this.loadAccessor(e); break; case "bufferView": i = this.loadBufferView(e); break; case "buffer": i = this.loadBuffer(e); break; case "material": i = this.loadMaterial(e); break; case "texture": i = this.loadTexture(e); break; case "skin": i = this.loadSkin(e); break; case "animation": i = this.loadAnimation(e); break; case "camera": i = this.loadCamera(e); break; case "light": i = this.extensions[_.KHR_LIGHTS_PUNCTUAL].loadLight(e); break; default: throw new Error("Unknown type: " + t) }this.cache.add(n, i) } return i }, y.prototype.getDependencies = function (t) { var e = this.cache.get(t); if (!e) { var n = this, i = this.json[t + ("mesh" === t ? "es" : "s")] || []; e = Promise.all(i.map(function (e, i) { return n.getDependency(t, i) })), this.cache.add(t, e) } return e }, y.prototype.getMultiDependencies = function (t) { for (var e = {}, n = [], i = 0, r = t.length; i < r; i++) { var o = t[i], a = this.getDependencies(o); a = a.then(function (t, n) { e[t] = n }.bind(this, o + ("mesh" === o ? "es" : "s"))), n.push(a) } return Promise.all(n).then(function () { return e }) }, y.prototype.loadBuffer = function (t) { var e = this.json.buffers[t], n = this.fileLoader; if (e.type && "arraybuffer" !== e.type) throw new Error("THREE.GLTFLoader: " + e.type + " buffer type is not supported."); if (void 0 === e.uri && 0 === t) return Promise.resolve(this.extensions[_.KHR_BINARY_GLTF].body); var i = this.options; return new Promise(function (t, r) { n.load(u(e.uri, i.path), t, void 0, function () { r(new Error('THREE.GLTFLoader: Failed to load buffer "' + e.uri + '".')) }) }) }, y.prototype.loadBufferView = function (t) { var e = this.json.bufferViews[t]; return this.getDependency("buffer", e.buffer).then(function (t) { var n = e.byteLength || 0, i = e.byteOffset || 0; return t.slice(i, i + n) }) }, y.prototype.loadAccessor = function (t) { var e = this, n = this.json, r = this.json.accessors[t]; if (void 0 === r.bufferView && void 0 === r.sparse) return Promise.resolve(null); var o = []; return void 0 === r.bufferView ? o.push(null) : o.push(this.getDependency("bufferView", r.bufferView)), void 0 !== r.sparse && (o.push(this.getDependency("bufferView", r.sparse.indices.bufferView)), o.push(this.getDependency("bufferView", r.sparse.values.bufferView))), Promise.all(o).then(function (t) { var o, a, s = t[0], c = D[r.type], u = R[r.componentType], l = u.BYTES_PER_ELEMENT, h = r.byteOffset || 0, f = void 0 === r.bufferView ? void 0 : n.bufferViews[r.bufferView].byteStride, p = !0 === r.normalized; if (f && f !== l * c) { var d = "InterleavedBuffer:" + r.bufferView + ":" + r.componentType, m = e.cache.get(d); m || (o = new u(s), m = new i.InterleavedBuffer(o, f / l), e.cache.add(d, m)), a = new i.InterleavedBufferAttribute(m, c, h / l, p) } else o = null === s ? new u(r.count * c) : new u(s, h, r.count * c), a = new i.BufferAttribute(o, c, p); if (void 0 !== r.sparse) { var v = D.SCALAR, g = R[r.sparse.indices.componentType], y = r.sparse.indices.byteOffset || 0, b = r.sparse.values.byteOffset || 0, _ = new g(t[1], y, r.sparse.count * v), x = new u(t[2], b, r.sparse.count * c); null !== s && a.setArray(a.array.slice()); for (var w, T = 0, S = _.length; T < S; T++)if (w = _[T], a.setX(w, x[T * c]), 2 <= c && a.setY(w, x[T * c + 1]), 3 <= c && a.setZ(w, x[T * c + 2]), 4 <= c && a.setW(w, x[T * c + 3]), 5 <= c) throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.") } return a }) }, y.prototype.loadTexture = function (t) { var e, n = this, r = this.json, o = this.options, a = this.textureLoader, s = window.URL || window.webkitURL, c = r.textures[t], l = c.extensions || {}, h = (e = l[_.MSFT_TEXTURE_DDS] ? r.images[l[_.MSFT_TEXTURE_DDS].source] : r.images[c.source]).uri, f = !1; return void 0 !== e.bufferView && (h = n.getDependency("bufferView", e.bufferView).then(function (t) { f = !0; var n = new Blob([t], { type: e.mimeType }); return h = s.createObjectURL(n) })), Promise.resolve(h).then(function (t) { var e = i.Loader.Handlers.get(t); return e || (e = l[_.MSFT_TEXTURE_DDS] ? n.extensions[_.MSFT_TEXTURE_DDS].ddsLoader : a), new Promise(function (n, i) { e.load(u(t, o.path), n, void 0, i) }) }).then(function (t) { 1 == f && s.revokeObjectURL(h), t.flipY = !1, void 0 !== c.name && (t.name = c.name), e.mimeType in U && (t.format = U[e.mimeType]); var n = (r.samplers || {})[c.sampler] || {}; return t.magFilter = O[n.magFilter] || i.LinearFilter, t.minFilter = O[n.minFilter] || i.LinearMipMapLinearFilter, t.wrapS = I[n.wrapS] || i.RepeatWrapping, t.wrapT = I[n.wrapT] || i.RepeatWrapping, t }) }, y.prototype.assignTexture = function (t, e, n) { var i = this; return this.getDependency("texture", n.index).then(function (r) { if (i.extensions[_.KHR_TEXTURE_TRANSFORM]) { var o = void 0 === n.extensions ? void 0 : n.extensions[_.KHR_TEXTURE_TRANSFORM]; o && (r = i.extensions[_.KHR_TEXTURE_TRANSFORM].extendTexture(r, o)) } t[e] = r }) }, y.prototype.loadMaterial = function (t) { var e, n = this, r = this.json, o = this.extensions, a = r.materials[t], s = {}, c = a.extensions || {}, u = []; if (c[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) { var f = o[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]; e = f.getMaterialType(a), u.push(f.extendParams(s, a, n)) } else if (c[_.KHR_MATERIALS_UNLIT]) { var p = o[_.KHR_MATERIALS_UNLIT]; e = p.getMaterialType(a), u.push(p.extendParams(s, a, n)) } else { e = i.MeshStandardMaterial; var d = a.pbrMetallicRoughness || {}; if (s.color = new i.Color(1, 1, 1), s.opacity = 1, Array.isArray(d.baseColorFactor)) { var m = d.baseColorFactor; s.color.fromArray(m), s.opacity = m[3] } void 0 !== d.baseColorTexture && u.push(n.assignTexture(s, "map", d.baseColorTexture)), s.metalness = void 0 === d.metallicFactor ? 1 : d.metallicFactor, s.roughness = void 0 === d.roughnessFactor ? 1 : d.roughnessFactor, void 0 !== d.metallicRoughnessTexture && (u.push(n.assignTexture(s, "metalnessMap", d.metallicRoughnessTexture)), u.push(n.assignTexture(s, "roughnessMap", d.metallicRoughnessTexture))) } !0 === a.doubleSided && (s.side = i.DoubleSide); var v = a.alphaMode || N; return v === F ? s.transparent = !0 : (s.transparent = !1, v === H && (s.alphaTest = void 0 === a.alphaCutoff ? .5 : a.alphaCutoff)), void 0 !== a.normalTexture && e !== i.MeshBasicMaterial && (u.push(n.assignTexture(s, "normalMap", a.normalTexture)), s.normalScale = new i.Vector2(1, 1), void 0 !== a.normalTexture.scale && s.normalScale.set(a.normalTexture.scale, a.normalTexture.scale)), void 0 !== a.occlusionTexture && e !== i.MeshBasicMaterial && (u.push(n.assignTexture(s, "aoMap", a.occlusionTexture)), void 0 !== a.occlusionTexture.strength && (s.aoMapIntensity = a.occlusionTexture.strength)), void 0 !== a.emissiveFactor && e !== i.MeshBasicMaterial && (s.emissive = (new i.Color).fromArray(a.emissiveFactor)), void 0 !== a.emissiveTexture && e !== i.MeshBasicMaterial && u.push(n.assignTexture(s, "emissiveMap", a.emissiveTexture)), Promise.all(u).then(function () { var t; return t = e === i.ShaderMaterial ? o[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s) : new e(s), void 0 !== a.name && (t.name = a.name), t.normalScale && (t.normalScale.y = -t.normalScale.y), t.map && (t.map.encoding = i.sRGBEncoding), t.emissiveMap && (t.emissiveMap.encoding = i.sRGBEncoding), t.specularMap && (t.specularMap.encoding = i.sRGBEncoding), h(t, a), a.extensions && l(o, t, a), t }) }, y.prototype.loadGeometries = function (t) { function e(t) { return o[_.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t, r).then(function (e) { return b(e, t, r) }) } var n, r = this, o = this.extensions, a = this.primitiveCache, s = function (t) { if (2 > t.length) return !1; var e = t[0], n = e.targets || []; if (void 0 === e.indices) return !1; for (var i, r = 1, o = t.length; r < o; r++) { if (i = t[r], e.mode !== i.mode) return !1; if (void 0 === i.indices) return !1; if (i.extensions && i.extensions[_.KHR_DRACO_MESH_COMPRESSION]) return !1; if (!d(e.attributes, i.attributes)) return !1; var a = i.targets || []; if (n.length !== a.length) return !1; for (var s = 0, c = n.length; s < c; s++)if (!d(n[s], a[s])) return !1 } return !0 }(t); s && (n = t, t = [t[0]]); for (var c = [], u = 0, l = t.length; u < l; u++) { var h, f = t[u], p = v(a, f); if (p) c.push(p); else h = f.extensions && f.extensions[_.KHR_DRACO_MESH_COMPRESSION] ? e(f) : b(new i.BufferGeometry, f, r), a.push({ primitive: f, promise: h }), c.push(h) } return Promise.all(c).then(function (e) { if (s) { var o = e[0]; if (null !== (p = function (t, e, n) { for (var i, r = 0, o = t.length; r < o; r++)if (e === (i = t[r]).baseGeometry && m(n, i.primitives)) return i.geometry; return null }(f = r.multiPassGeometryCache, o, n))) return [p.geometry]; var a = new i.BufferGeometry; for (var c in a.name = o.name, a.userData = o.userData, o.attributes) a.addAttribute(c, o.attributes[c]); for (var c in o.morphAttributes) a.morphAttributes[c] = o.morphAttributes[c]; for (var u = [], l = 0, h = n.length; l < h; l++)u.push(r.getDependency("accessor", n[l].indices)); return Promise.all(u).then(function (t) { for (var e, i = [], r = 0, s = 0, c = n.length; s < c; s++) { for (var u = 0, l = (e = t[s]).count; u < l; u++)i.push(e.array[u]); a.addGroup(r, e.count, s), r += e.count } return a.setIndex(i), f.push({ geometry: a, baseGeometry: o, primitives: n }), [a] }) } if (1 < e.length && void 0 !== i.BufferGeometryUtils) { for (l = 1, h = t.length; l < h; l++)if (t[0].mode !== t[l].mode) return e; var f, p; if (p = function (t, e) { for (var n, i = 0, r = t.length; i < r; i++)if (m(e, (n = t[i]).baseGeometries)) return n.geometry; return null }(f = r.multiplePrimitivesCache, e)) { if (null !== p.geometry) return [p.geometry] } else { a = i.BufferGeometryUtils.mergeBufferGeometries(e, !0); if (f.push({ geometry: a, baseGeometries: e }), null !== a) return [a] } } return e }) }, y.prototype.loadMesh = function (t) { for (var e, n = this, r = this.json, o = this.extensions, a = r.meshes[t], s = a.primitives, c = [], u = 0, l = s.length; u < l; u++)e = void 0 === s[u].material ? new i.MeshStandardMaterial({ color: 16777215, emissive: 0, metalness: 1, roughness: 1, transparent: !1, depthTest: !0, side: i.FrontSide }) : this.getDependency("material", s[u].material), c.push(e); return Promise.all(c).then(function (e) { return n.loadGeometries(s).then(function (r) { for (var c = 1 === r.length && 0 < r[0].groups.length, u = [], l = 0, p = r.length; l < p; l++) { var d, m = r[l], v = s[l], g = c ? e : e[l]; if (v.mode === A || v.mode === C || v.mode === L || void 0 === v.mode) !0 === (d = !0 === a.isSkinnedMesh ? new i.SkinnedMesh(m, g) : new i.Mesh(m, g)).isSkinnedMesh && d.normalizeSkinWeights(), v.mode === C ? d.drawMode = i.TriangleStripDrawMode : v.mode === L && (d.drawMode = i.TriangleFanDrawMode); else if (v.mode === M) d = new i.LineSegments(m, g); else if (v.mode === E) d = new i.Line(m, g); else if (v.mode === P) d = new i.LineLoop(m, g); else { if (v.mode !== S) throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + v.mode); d = new i.Points(m, g) } 0 < Object.keys(d.geometry.morphAttributes).length && f(d, a), d.name = a.name || "mesh_" + t, 1 < r.length && (d.name += "_" + l), h(d, a), u.push(d); for (var y = c ? d.material : [d.material], b = void 0 !== m.attributes.color, x = void 0 === m.attributes.normal, w = !0 === d.isSkinnedMesh, T = 0 < Object.keys(m.morphAttributes).length, R = T && void 0 !== m.morphAttributes.normal, O = 0, I = y.length; O < I; O++) { if (g = y[O], d.isPoints) { var D = "PointsMaterial:" + g.uuid, G = n.cache.get(D); G || (G = new i.PointsMaterial, i.Material.prototype.copy.call(G, g), G.color.copy(g.color), G.map = g.map, G.lights = !1, n.cache.add(D, G)), g = G } else if (d.isLine) { D = "LineBasicMaterial:" + g.uuid; var B = n.cache.get(D); B || (B = new i.LineBasicMaterial, i.Material.prototype.copy.call(B, g), B.color.copy(g.color), B.lights = !1, n.cache.add(D, B)), g = B } if (b || x || w || T) { D = "ClonedMaterial:" + g.uuid + ":"; g.isGLTFSpecularGlossinessMaterial && (D += "specular-glossiness:"), w && (D += "skinning:"), b && (D += "vertex-colors:"), x && (D += "flat-shading:"), T && (D += "morph-targets:"), R && (D += "morph-normals:"); var k = n.cache.get(D); k || (k = g.isGLTFSpecularGlossinessMaterial ? o[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(g) : g.clone(), w && (k.skinning = !0), b && (k.vertexColors = i.VertexColors), x && (k.flatShading = !0), T && (k.morphTargets = !0), R && (k.morphNormals = !0), n.cache.add(D, k)), g = k } y[O] = g, g.aoMap && void 0 === m.attributes.uv2 && void 0 !== m.attributes.uv && (console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."), m.addAttribute("uv2", new i.BufferAttribute(m.attributes.uv.array, 2))), g.isGLTFSpecularGlossinessMaterial && (d.onBeforeRender = o[_.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms) } d.material = c ? y : y[0] } if (1 === u.length) return u[0]; var N = new i.Group; for (l = 0, p = u.length; l < p; l++)N.add(u[l]); return N }) }) }, y.prototype.loadCamera = function (t) { var e, n = this.json.cameras[t], r = n[n.type]; return r ? ("perspective" === n.type ? e = new i.PerspectiveCamera(i.Math.radToDeg(r.yfov), r.aspectRatio || 1, r.znear || 1, r.zfar || 2e6) : "orthographic" === n.type && (e = new i.OrthographicCamera(r.xmag / -2, r.xmag / 2, r.ymag / 2, r.ymag / -2, r.znear, r.zfar)), void 0 !== n.name && (e.name = n.name), h(e, n), Promise.resolve(e)) : void console.warn("THREE.GLTFLoader: Missing camera parameters.") }, y.prototype.loadSkin = function (t) { var e = this.json.skins[t], n = { joints: e.joints }; return void 0 === e.inverseBindMatrices ? Promise.resolve(n) : this.getDependency("accessor", e.inverseBindMatrices).then(function (t) { return n.inverseBindMatrices = t, n }) }, y.prototype.loadAnimation = function (t) { for (var e = this.json.animations[t], n = [], r = [], o = [], a = [], s = [], u = 0, l = e.channels.length; u < l; u++) { var h = e.channels[u], f = e.samplers[h.sampler], p = h.target, d = void 0 === p.node ? p.id : p.node, m = void 0 === e.parameters ? f.input : e.parameters[f.input], v = void 0 === e.parameters ? f.output : e.parameters[f.output]; n.push(this.getDependency("node", d)), r.push(this.getDependency("accessor", m)), o.push(this.getDependency("accessor", v)), a.push(f), s.push(p) } return Promise.all([Promise.all(n), Promise.all(r), Promise.all(o), Promise.all(a), Promise.all(s)]).then(function (n) { for (var r = n[0], o = n[1], a = n[2], s = n[3], u = n[4], l = [], h = 0, f = r.length; h < f; h++) { var p = r[h], d = o[h], m = a[h], v = s[h], g = u[h]; if (void 0 !== p) { var y; switch (p.updateMatrix(), p.matrixAutoUpdate = !0, B[g.path]) { case B.weights: y = i.NumberKeyframeTrack; break; case B.rotation: y = i.QuaternionKeyframeTrack; break; case B.position: case B.scale: default: y = i.VectorKeyframeTrack }var b = p.name ? p.name : p.uuid, _ = void 0 === v.interpolation ? i.InterpolateLinear : k[v.interpolation], x = []; B[g.path] === B.weights ? p.traverse(function (t) { !0 === t.isMesh && t.morphTargetInfluences && x.push(t.name ? t.name : t.uuid) }) : x.push(b); for (var w, T = 0, S = x.length; T < S; T++)w = new y(x[T] + "." + B[g.path], i.AnimationUtils.arraySlice(d.array, 0), i.AnimationUtils.arraySlice(m.array, 0), _), "CUBICSPLINE" === v.interpolation && (w.createInterpolant = function (t) { return new c(this.times, this.values, this.getValueSize() / 3, t) }, w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), l.push(w) } } var M = void 0 === e.name ? "animation_" + t : e.name; return new i.AnimationClip(M, void 0, l) }) }, y.prototype.loadNode = function (t) { var e = this.json, n = this.extensions, r = this, o = e.meshReferences, a = e.meshUses, s = e.nodes[t]; return (!0 === s.isBone ? Promise.resolve(new i.Bone) : void 0 === s.mesh ? void 0 === s.camera ? s.extensions && s.extensions[_.KHR_LIGHTS_PUNCTUAL] && void 0 !== s.extensions[_.KHR_LIGHTS_PUNCTUAL].light ? r.getDependency("light", s.extensions[_.KHR_LIGHTS_PUNCTUAL].light) : Promise.resolve(new i.Object3D) : r.getDependency("camera", s.camera) : r.getDependency("mesh", s.mesh).then(function (t) { var e; if (1 < o[s.mesh]) { var n = a[s.mesh]++; (e = t.clone()).name += "_instance_" + n, e.onBeforeRender = t.onBeforeRender; for (var i = 0, r = e.children.length; i < r; i++)e.children[i].name += "_instance_" + n, e.children[i].onBeforeRender = t.children[i].onBeforeRender } else e = t; return void 0 !== s.weights && e.traverse(function (t) { if (t.isMesh) for (var e = 0, n = s.weights.length; e < n; e++)t.morphTargetInfluences[e] = s.weights[e] }), e })).then(function (t) { if (void 0 !== s.name && (t.name = i.PropertyBinding.sanitizeNodeName(s.name)), h(t, s), s.extensions && l(n, t, s), void 0 !== s.matrix) { var e = new i.Matrix4; e.fromArray(s.matrix), t.applyMatrix(e) } else void 0 !== s.translation && t.position.fromArray(s.translation), void 0 !== s.rotation && t.quaternion.fromArray(s.rotation), void 0 !== s.scale && t.scale.fromArray(s.scale); return t }) }, y.prototype.loadScene = function () { function t(e, n, r, o) { var a = r.nodes[e]; return o.getDependency("node", e).then(function (t) { return void 0 === a.skin ? t : o.getDependency("skin", a.skin).then(function (t) { for (var n = [], i = 0, r = (e = t).joints.length; i < r; i++)n.push(o.getDependency("node", e.joints[i])); return Promise.all(n) }).then(function (n) { for (var r = !0 === t.isGroup ? t.children : [t], o = 0, a = r.length; o < a; o++) { for (var s, c = r[o], u = [], l = [], h = 0, f = n.length; h < f; h++)if (s = n[h]) { u.push(s); var p = new i.Matrix4; void 0 !== e.inverseBindMatrices && p.fromArray(e.inverseBindMatrices.array, 16 * h), l.push(p) } else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', e.joints[h]); c.bind(new i.Skeleton(u, l), c.matrixWorld) } return t }); var e }).then(function (e) { n.add(e); var i = []; if (a.children) for (var s, c = a.children, u = 0, l = c.length; u < l; u++)s = c[u], i.push(t(s, e, r, o)); return Promise.all(i) }) } return function (e) { var n = this.json, r = this.extensions, o = this.json.scenes[e], a = new i.Scene; void 0 !== o.name && (a.name = o.name), h(a, o), o.extensions && l(r, a, o); for (var s = o.nodes || [], c = [], u = 0, f = s.length; u < f; u++)c.push(t(s[u], a, n, this)); return Promise.all(c).then(function () { return a }) } }(), t }(); t.exports = r }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return m }); var u = n(3), l = n(59), h = n(60), f = n(5), p = n(4), d = n(101), m = function (t) { function e(t, n) { var i; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (i = o(this, s(e).call(this, t, n))).starsUniforms = null, i.starsMat = null, i.trailUniforms = null, i.trailMat = null, i.tubesUniforms = null, i.tubesMat = null, i.spaceScene = null, i.deskScene = null, i.diamond = null, i.bigPlanet = null, i } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, l.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initEl", value: function () { this.objLoader = new h.a("".concat(this.id, ".glb"), { astronaut: "".concat(this.id, "/astronaut.jpg"), background: "".concat(this.id, "/background.jpg"), diamond: "".concat(this.id, "/diamond.jpg"), ground1: "".concat(this.id, "/ground1.jpg"), ground2: "".concat(this.id, "/ground2.jpg"), ipad: "".concat(this.id, "/ipad.jpg"), lamp: "".concat(this.id, "/lamp.jpg"), mug: "".concat(this.id, "/mug.jpg"), pencil: "".concat(this.id, "/pencil.jpg"), planet1: "".concat(this.id, "/planet1.png"), planet2: "".concat(this.id, "/planet2.jpg"), shuttle: "".concat(this.id, "/shuttle.jpg"), stars: "".concat(this.id, "/stars.png"), table: "".concat(this.id, "/table.jpg"), trail: "".concat(this.id, "/trail.png"), water: "".concat(this.id, "/water.jpg") }) } }, { key: "raf", value: function () { this.isObjLoaded && (a(s(e.prototype), "raf", this).call(this), this.starsUniforms.time.value = .01 * this.time, this.trailUniforms.time.value = .01 * this.time, this.tubesUniforms.time.value = .01 * this.time, this._moveDeskScene(), this._moveSpaceScene(), this._moveElements()) } }, { key: "_moveDeskScene", value: function () { var t = f.a.mapRange(u.a.vR, 2.32, 1, .03, -.03), e = f.a.clamp(f.a.mapRange(p.a.posCoeff.x, .5, .75, 2 * -t, .28 + t), 2 * -t, .28 + t), n = f.a.clamp(f.a.mapRange(p.a.posCoeff.x, .75, .85, 0, .013), 0, 1) * u.a.vR, i = .2 * p.a.xNorm - .16 + e + n; this.deskScene.position.x = i; var r = -.3 * p.a.yNorm * 1 / u.a.vR; this.deskScene.position.y = r; var o = Math.max(f.a.mapRange(p.a.posCoeff.x, .65, .75, 0, -.5), -.5); this.deskScene.position.z = o; for (var a = f.a.clamp(f.a.mapRange(o, -.1, -.11, 0, 1), 0, 1), s = 0; s < this.deskScene.children.length; s++)this.deskScene.children[s].material.opacity = a } }, { key: "_moveSpaceScene", value: function () { var t = f.a.clamp(f.a.mapRange(p.a.posCoeff.x, .65, .75, 0, 1.3), 0, 1.3); this.spaceScene.position.x = t; var e = f.a.clamp(f.a.mapRange(p.a.posCoeff.x, .65, .75, 0, -.2), -.2, 0); this.spaceScene.position.y = e; var n = f.a.clamp(f.a.mapRange(p.a.posCoeff.x, .65, .75, 0, -8), -8, 0); this.spaceScene.position.z = n } }, { key: "_moveElements", value: function () { this.diamond.rotation.y += .005, this.diamond.position.y = .24386417865753174 + .008 * Math.sin(.035 * this.time), this.bigPlanet.rotation.y -= 2e-4 } }, { key: "destroy", value: function () { this.starsMat.dispose(), this.trailMat.dispose(), this.tubesMat.dispose(), a(s(e.prototype), "destroy", this).call(this), this.starsMat = null, this.trailMat = null, this.tubesMat = null } }, { key: "setUniforms", value: function () { this.starsUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("stars") } }, this.trailUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("trail") } }, this.tubesUniforms = { time: { type: "f", value: 0 }, color1: { type: "v3", value: new THREE.Color("#ff0000") }, color2: { type: "v3", value: new THREE.Color("#480000") } } } }, { key: "setMaterials", value: function () { this.starsMat = new THREE.RawShaderMaterial({ uniforms: this.starsUniforms, vertexShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 noiseStep;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\nvarying float vSparkle;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvUv\t\t\t= uv;\n\tvSparkle\t= noise( noiseStep * .1 + time * 3. ) * .6 + .6;\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\n\t\n\t\n\t// vDebug = dispCoeff;\n\t\n}\n\n"]), fragmentShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\nvarying float vSparkle;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvec4 tx\t= texture2D( texture, vUv );\n\ttx\t\t*= vec4( 1., 1., 1., vSparkle );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vec3( vSparkle ), 1. );\n\t\n}\n"]), transparent: !0 }), this.trailMat = new THREE.RawShaderMaterial({ uniforms: this.trailUniforms, vertexShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define Z_DISP 1.5\n#define X_DISP .3\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise\t= noise( uv * 3. + time * 1. );\n\tfloat yNoise\t= noise( uv + time * -.6 );\n\tfloat dispCoeff\t= uv.x * step( -.95, position.x );\n\t\n\tvec3 newPos\t= position.xyz;\n\tnewPos.z\t+= Z_DISP * xNoise * dispCoeff; // ≈x displacement\n\tnewPos.x\t+= ( -X_DISP + X_DISP * 2. * yNoise ) * dispCoeff; // ≈y displacement\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( newPos, 1. );\n\t\n\t\n\t// vDebug = dispCoeff;\n\t\n}\n\n"]), fragmentShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvec4 tx\t= texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vDebug, 0., 0., 1. );\n\t\n}\n"]), transparent: !0 }), this.tubesMat = new THREE.RawShaderMaterial({ uniforms: this.tubesUniforms, vertexShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 noiseStep;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying float vColorCoeff;\n\nvoid main() {\n\t\n\tvColorCoeff\t= noise( noiseStep * 20. + time * .8 ) * 1.6 - 0.3;\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\n\t\n}\n\n"]), fragmentShader: d(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 color1;\nuniform vec3 color2;\n\nvarying float vColorCoeff;\n\nvoid main() {\n\t\n\tfloat colorCoeff\t= clamp( vColorCoeff, .0, 1. );\n\tvec3 color\t\t\t= mix( color1, color2, colorCoeff );\n\t\n\t\n\tgl_FragColor = vec4( color, 1. );\n\t\n}\n"]), transparent: !0 }) } }, { key: "initMaterials", value: function () { var t = this; this.gltf.scene.traverse(function (e) { if ("Object3D" == e.type && "scene_space" == e.name) t.spaceScene = e; else if ("Object3D" == e.type && "scene_ipad" == e.name) e.scale.set(.003, .003, .003), t.deskScene = e; else if ("Mesh" == e.type) if (0 <= e.name.indexOf("star")) t._setNoiseStep(e.geometry), e.material = t.starsMat; else if ("trail" == e.name) e.material = t.trailMat; else if (0 <= e.name.indexOf("tube")) t._setNoiseStep(e.geometry), e.material = t.tubesMat; else { var n = new THREE.MeshBasicMaterial({ transparent: !0 }), i = t.getTexture(e.name); i && (n.map = i), "diamond" == e.name ? t.diamond = e : "planet2" == e.name && (t.bigPlanet = e), e.material = n } }) } }, { key: "getTexture", value: function (t) { var e = "astronaut" == t ? this.tx.astronaut : "background" == t ? this.tx.background : "diamond" == t ? this.tx.diamond : "ground1a" == t ? this.tx.ground1 : "ground1b" == t || "ground1c" == t || "ground2" == t ? this.tx.ground2 : "ipad" == t ? this.tx.ipad : "lamp" == t ? this.tx.lamp : "mug" == t ? this.tx.mug : "pencil" == t ? this.tx.pencil : 0 <= t.indexOf("planet1") ? this.tx.planet1 : "planet2" == t ? this.tx.planet2 : "shuttle" == t ? this.tx.shuttle : "stars" == t ? this.tx.stars : "table" == t ? this.tx.table : "trail" == t ? this.tx.trail : "water" == t ? this.tx.water : null; return e && (e.flipY = !1), e } }, { key: "_setNoiseStep", value: function (t) { for (var e = t.attributes.position.count, n = new Float32Array(2 * e), i = 10 * Math.random() - 5, r = 0; r < 2 * e; r += 2)n[r] = i, n[r + 1] = i; t.addAttribute("noiseStep", new THREE.BufferAttribute(n, 2)) } }]), e }() }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } n.d(e, "a", function () { return p }); var u = n(59), l = n(60), h = n(3), f = n(101), p = function (t) { function e(t, n) { var i; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (i = o(this, s(e).call(this, t, n))).branchesUniforms = null, i.bottlesUniforms = null, i.computersUniforms = null, i.leavesUniforms = null, i.waterUniforms = null, i.branchesMat = null, i.bottlesMat = null, i.computersMat = null, i.leavesMat = null, i.waterMat = null, i.branches = [], i } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, u.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "initEl", value: function () { this.objLoader = new l.a("".concat(this.id, ".glb"), { bird: "".concat(this.id, "/bird.jpg"), boat: "".concat(this.id, "/boat.jpg"), branches: "".concat(this.id, "/branches.png"), bottles: "".concat(this.id, "/bottles.jpg"), computers: "".concat(this.id, "/computers.jpg"), fishes: "".concat(this.id, "/fishes.jpg"), frog: "".concat(this.id, "/frog.jpg"), leaves: "".concat(this.id, "/leaves.png"), lillypads: "".concat(this.id, "/lillypads.jpg"), line: "".concat(this.id, "/line.png"), lotus: "".concat(this.id, "/lotus.jpg"), reeds: "".concat(this.id, "/reeds.jpg"), rocks: "".concat(this.id, "/rocks.jpg"), shadows: "".concat(this.id, "/shadows.jpg"), umbrella: "".concat(this.id, "/umbrella.jpg"), water: "".concat(this.id, "/water.jpg") }) } }, { key: "bindEvents", value: function () { a(s(e.prototype), "bindEvents", this).call(this), h.a.on(h.a.E.RESIZE, this.resize, this) } }, { key: "unbindEvents", value: function () { a(s(e.prototype), "unbindEvents", this).call(this), h.a.off(h.a.E.RESIZE, this.resize, this) } }, { key: "resize", value: function () { if (this.isObjLoaded) for (var t = h.a.wH / h.a.bW, e = 0; e < this.branches.length; e++) { this.branches[e].mesh; var n = this.branches[e].y; this.branches[e].mesh.position.x = n - .6 * t } } }, { key: "raf", value: function () { this.isObjLoaded && (a(s(e.prototype), "raf", this).call(this), this.branchesUniforms.time.value = .01 * this.time, this.bottlesUniforms.time.value = .01 * this.time, this.computersUniforms.time.value = .01 * this.time, this.leavesUniforms.time.value = .01 * this.time, this.waterUniforms.time.value = .01 * this.time) } }, { key: "destroy", value: function () { this.branchesMat.dispose(), this.bottlesMat.dispose(), this.computersMat.dispose(), this.leavesMat.dispose(), this.waterMat.dispose(), a(s(e.prototype), "destroy", this).call(this), this.branchesMat = null, this.bottlesMat = null, this.computersMat = null, this.leavesMat = null, this.waterMat = null } }, { key: "setUniforms", value: function () { this.branchesUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("branches") } }, this.bottlesUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("bottles") } }, this.computersUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("computers") } }, this.leavesUniforms = { time: { type: "f", value: 0 }, texture: { type: "t", value: this.getTexture("leaves") } }, this.waterUniforms = { time: { type: "f", value: 0 }, shadowsTx: { type: "t", value: this.getTexture("shadows") }, waterTx: { type: "t", value: this.getTexture("water") } } } }, { key: "setMaterials", value: function () { this.branchesMat = new THREE.RawShaderMaterial({ uniforms: this.branchesUniforms, vertexShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\n#define X_DISP .03\n#define Y_DISP .03\n#define Z_DISP .5\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise\t= noise( uv * 3. + time * -.5 );\n\tfloat yNoise\t= noise( uv + time * .3 );\n\tfloat zNoise\t= noise( uv + time * .5 );\n\t\n\tvec4 pos\t= position;\n\tpos.x\t\t+= ( -X_DISP + X_DISP * 2. * xNoise ); // fake x\n\tpos.y\t\t+= ( -Z_DISP + Z_DISP * 2. * zNoise ); // z displacement\n\tpos.z\t\t+= ( -Y_DISP + Y_DISP * 2. * yNoise ); // fake y\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n}\n\n"]), fragmentShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n\nvoid main() {\n\t\n\tvec4 tx\t= texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n}\n"]), transparent: !0 }), this.bottlesMat = new THREE.RawShaderMaterial({ uniforms: this.bottlesUniforms, vertexShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 noiseStep;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\n#define X_DISP .03\n#define Y_DISP .03\n#define Z_DISP .03\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise = noise( noiseStep + time * .5 );\n\tfloat yNoise = noise( noiseStep + time * -.8 );\n\tfloat zNoise = noise( noiseStep + time * 1. );\n\t\n\tvec4 pos\t= position;\n\tpos.x\t\t+= -X_DISP + X_DISP * 2. * xNoise;\n\tpos.y\t\t+= -Y_DISP + Y_DISP * 2. * yNoise;\n\tpos.z\t\t+= Z_DISP * zNoise;\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n}\n\n"]), fragmentShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n\nvoid main() {\n\t\n\tvec4 tx = texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n}\n"]), transparent: !0 }), this.computersMat = new THREE.RawShaderMaterial({ uniforms: this.computersUniforms, vertexShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 noiseStep;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\n#define X_DISP .03\n#define Y_DISP .03\n#define Z_DISP .03\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat xNoise = noise( noiseStep + time * .5 );\n\tfloat yNoise = noise( noiseStep + time * -.8 );\n\tfloat zNoise = noise( noiseStep + time * 1. );\n\t\n\tvec4 pos\t= position;\n\tpos.x\t\t+= -X_DISP + X_DISP * 2. * xNoise;\n\tpos.y\t\t+= -Y_DISP + Y_DISP * 2. * yNoise;\n\tpos.z\t\t+= Z_DISP * zNoise;\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n}\n\n"]), fragmentShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n\nvoid main() {\n\t\n\tvec4 tx = texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n}\n"]), transparent: !0 }), this.leavesMat = new THREE.RawShaderMaterial({ uniforms: this.leavesUniforms, vertexShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\nattribute vec2 noiseStep;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define X_DISP .5\n#define Y_DISP .5\n#define Z_DISP 2.\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat zNoise = noise( uv + time * .5 );\n\t\n\tvec4 pos\t= position;\n\tpos.y\t\t+= -Z_DISP + Z_DISP * 2. * zNoise; // z displacement\n\t\n\tfloat xNoise = noise( noiseStep + time * .5 );\n\tfloat yNoise = noise( noiseStep + time * -.3 );\n\tpos.z\t\t+= -X_DISP + X_DISP * 2. * xNoise; // x displacement\n\tpos.x\t\t+= -Y_DISP + Y_DISP * 2. * yNoise; // y displacement\n\t\n\t// pos.x += 1.; // y\n\t// pos.y += 1.; // z\n\t// pos.z += 1.; // x\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * pos;\n\t\n\t\n\t// vDebug = xNoise;\n\t\n}\n\n"]), fragmentShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\nvoid main() {\n\t\n\tvec4 tx = texture2D( texture, vUv );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vUv.x, .0, .0, 1. );\n\t// gl_FragColor = vec4( .0, .0, vUv.y, 1. );\n\t// gl_FragColor = vec4( vUv.x, .0, vUv.y, 1. );\n\t\n}\n"]), transparent: !0 }), this.waterMat = new THREE.RawShaderMaterial({ uniforms: this.waterUniforms, vertexShader: f(["\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nattribute vec4 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define Z_DISP .01\n\nvoid main() {\n\t\n\tvUv = uv;\n\t\n\tfloat zNoise = noise( uv + time * 1.5 );\n\t\n\tvec3 pos\t= position.xyz;\n\tpos.y\t\t+= -Z_DISP * zNoise; // z displacement\n\t\n\t\n\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( pos, 1. );\n\t\n\t\n\t// vDebug = xNoise;\n\t\n}\n\n"]), fragmentShader: f(["\n\nprecision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat rand( vec2 n ) {\n\treturn fract( cos( dot( n, vec2( 12.9898, 4.1414 ) ) ) * 43758.5453 );\n}\n\nfloat noise( vec2 n ) {\n\tconst vec2 d = vec2( 0.0, 1.0 );\n\tvec2 b = floor( n ), f = smoothstep( vec2( 0.0 ), vec2( 1.0 ), fract( n ) );\n\t\n\treturn mix( mix( rand( b ), rand( b + d.yx ), f.x ), mix( rand( b + d.xy ), rand( b + d.yy ), f.x ), f.y );\n}\n\nuniform sampler2D shadowsTx;\nuniform sampler2D waterTx;\n\nuniform float time;\n\nvarying vec2 vUv;\n// varying float vDebug;\n\n#define X_DISP .01\n#define Y_DISP .02\n\nvoid main() {\n\t\n\tfloat xNoise = noise( vUv * 120. + time * 3.5 );\n\tfloat yNoise = noise( vUv * 80. + time * -2. );\n\t\n\tvec2 newUv\t= vUv;\n\tnewUv.y\t\t+= -X_DISP + X_DISP * 2. * xNoise; // x displacement\n\tnewUv.x\t\t+= -Y_DISP + Y_DISP * 2. * yNoise; // y displacement\n\t\n\tvec4 tx\t= texture2D( waterTx, newUv ) * texture2D( shadowsTx, vUv );\n\ttx\t\t*= vec4( 1., 1., 1., .75 );\n\t\n\t\n\tgl_FragColor = tx;\n\t\n\t\n\t// gl_FragColor = vec4( vUv.y, .0, .0, 1. );\n\t\n}\n"]), transparent: !0 }) } }, { key: "initMaterials", value: function () { var t = this; this.gltf.scene.traverse(function (e) { if ("Mesh" == e.type) if ("water_simple" == e.name) e.material = t.waterMat, e.renderOrder = 1; else if (0 <= e.name.indexOf("leaf")) t._setNoiseStep(e.geometry), e.material = t.leavesMat, e.renderOrder = 3; else if (0 <= e.name.indexOf("branch")) e.material = t.branchesMat, e.renderOrder = 3, t.branches.push({ mesh: e, y: e.position.x }); else if (0 <= e.name.indexOf("bottle")) t._setNoiseStep(e.geometry), e.material = t.bottlesMat; else if (0 <= e.name.indexOf("computer")) t._setNoiseStep(e.geometry), e.material = t.computersMat; else { var n = new THREE.MeshBasicMaterial({ transparent: !0 }), i = t.getTexture(e.name); i && (n.map = i), "line" == e.name ? e.renderOrder = 2 : "reeds" == e.name && (n.side = THREE.DoubleSide), e.material = n } }) } }, { key: "getTexture", value: function (t) { var e = "bird" == t ? this.tx.bird : "boat" == t ? this.tx.boat : "bottles" == t ? this.tx.bottles : 0 <= t.indexOf("branch") ? this.tx.branches : "computers" == t ? this.tx.computers : "fishes" == t ? this.tx.fishes : "frog" == t ? this.tx.frog : "leaves" == t ? this.tx.leaves : "lillypads" == t ? this.tx.lillypads : "line" == t ? this.tx.line : "lotus" == t ? this.tx.lotus : "reeds" == t ? this.tx.reeds : "rocks" == t ? this.tx.rocks : "shadows" == t ? this.tx.shadows : "umbrella" == t ? this.tx.umbrella : 0 <= t.indexOf("water") ? this.tx.water : null; return e && (e.flipY = !1), e } }, { key: "_setNoiseStep", value: function (t) { for (var e = t.attributes.position.count, n = new Float32Array(2 * e), i = 10 * Math.random() - 5, r = 0; r < 2 * e; r += 2)n[r] = i, n[r + 1] = i; t.addAttribute("noiseStep", new THREE.BufferAttribute(n, 2)) } }]), e }() }, function (t, e, n) { "use strict"; function i(t) { return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function r(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function o(t, e) { return !e || "object" !== i(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function a(t, e, n) { return (a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = s(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function s(t) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function c(t, e) { return (c = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function u(t) { return (u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function l(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function h(t, e) { return !e || "object" !== u(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function f(t) { return (f = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function p(t, e) { return (p = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function d(t) { return (d = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function m(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function v(t, e) { return !e || "object" !== d(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function g(t, e, n) { return (g = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (t, e, n) { var i = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = y(t));); return t }(t, e); if (i) { var r = Object.getOwnPropertyDescriptor(i, e); return r.get ? r.get.call(n) : r.value } })(t, e, n || t) } function y(t) { return (y = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function b(t, e) { return (b = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function _(t) { return (_ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function x(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function w(t, e) { return !e || "object" !== _(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function T(t) { return (T = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function S(t, e) { return (S = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function M(t) { return (M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function P(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function E(t, e) { return !e || "object" !== M(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function A(t) { return (A = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function C(t, e) { return (C = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function L(t) { return (L = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function R(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } function O(t, e) { return !e || "object" !== L(e) && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function I(t) { return (I = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function D(t, e) { return (D = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } var G = n(27), B = n(6), k = n(20), N = n(19), H = n(11), F = n(310), U = function (t) { function e() { var t, n = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0], i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = o(this, s(e).call(this))).isOnFileLoad = n, t.E = { FILE_LOAD: "fileLoad", COMPLETE: "complete" }, t.preloader = null, t.data = [], t.init(i), t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && c(t, e) }(e, H.a), function (t, e, n) { e && r(t.prototype, e), n && r(t, n) }(e, [{ key: "init", value: function (t) { this._setOptions(t), a(s(e.prototype), "init", this).call(this) } }, { key: "_setOptions", value: function (t) { this.options = { parallel: 88, headreq: !0 }, Object.assign(this.options, this.options, t) } }, { key: "initEl", value: function () { this.preloader = new F } }, { key: "bindEvents", value: function () { this.isOnFileLoad && this.preloader.on("file", this._onFileLoad.bind(this)), this.preloader.on("complete", this._onComplete.bind(this)) } }, { key: "unbindEvents", value: function () { this.isOnFileLoad && this.preloader.off("file", this._onFileLoad.bind(this)), this.preloader.off("complete", this._onComplete.bind(this)) } }, { key: "destroy", value: function () { a(s(e.prototype), "destroy", this).call(this), this.preloader.reset() } }, { key: "load", value: function (t) { 0 === t.length ? this._onComplete(null) : this.preloader.load(t, this.options) } }, { key: "_onFileLoad", value: function (t) { this.emit(this.E.FILE_LOAD, t) } }, { key: "_onComplete", value: function (t) { this.emit(this.E.COMPLETE, t) } }]), e }(), z = n(32), j = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = h(this, f(e).call(this))).E = { FILE_LOAD: "fileLoad", PROGRESS: "progress", COMPLETE: "complete", PROGRESSS_COMPLETE: "progresscomplete" }, t.fakePercentage = 0, t.percentage = 0, t.updatePercentage = !0, t.$imgsToLoad = [], t.assetsToLoad = { scene1: [{ name: "noise", url: "assets/img/noise.png" }, { name: "sc1-tx-background", url: "assets/3d/textures/scene-1/background.jpg" }, { name: "sc1-tx-buildings", url: "assets/3d/textures/scene-1/buildings.jpg" }, { name: "sc1-tx-bushes", url: "assets/3d/textures/scene-1/bushes.png" }, { name: "sc1-tx-ground", url: "assets/3d/textures/scene-1/ground.jpg" }, { name: "sc1-tx-mushrooms", url: "assets/3d/textures/scene-1/mushrooms.png" }, { name: "sc1-tx-plants", url: "assets/3d/textures/scene-1/plants.png" }, { name: "sc1-tx-sign1", url: "assets/3d/textures/scene-1/sign1.jpg" }, { name: "sc1-tx-sign2", url: "assets/3d/textures/scene-1/sign2.jpg" }, { name: "sc1-tx-sign3", url: "assets/3d/textures/scene-1/sign3.png" }, { name: "sc1-tx-sign4", url: "assets/3d/textures/scene-1/sign4.png" }, { name: "sc1-tx-sign5", url: "assets/3d/textures/scene-1/sign5.png" }, { name: "sc1-tx-sign6", url: "assets/3d/textures/scene-1/sign6.png" }, { name: "sc1-m", url: "assets/3d/models/scene-1.glb" }], scene2: [{ name: "sc2-tx-astronaut", url: "assets/3d/textures/scene-2/astronaut.jpg" }, { name: "sc2-tx-background", url: "assets/3d/textures/scene-2/background.jpg" }, { name: "sc2-tx-ground1", url: "assets/3d/textures/scene-2/ground1.jpg" }, { name: "sc2-tx-ipad", url: "assets/3d/textures/scene-2/ipad.jpg" }, { name: "sc2-tx-lamp", url: "assets/3d/textures/scene-2/lamp.jpg" }, { name: "sc2-tx-mug", url: "assets/3d/textures/scene-2/mug.jpg" }, { name: "sc2-tx-pencil", url: "assets/3d/textures/scene-2/pencil.jpg" }, { name: "sc2-tx-planet1", url: "assets/3d/textures/scene-2/planet1.png" }, { name: "sc2-tx-planet2", url: "assets/3d/textures/scene-2/planet2.jpg" }, { name: "sc2-tx-shuttle", url: "assets/3d/textures/scene-2/shuttle.jpg" }, { name: "sc2-tx-stars", url: "assets/3d/textures/scene-2/stars.png" }, { name: "sc2-tx-table", url: "assets/3d/textures/scene-2/table.jpg" }, { name: "sc2-tx-trail", url: "assets/3d/textures/scene-2/trail.png" }, { name: "sc2-tx-water", url: "assets/3d/textures/scene-2/water.jpg" }, { name: "sc2-m", url: "assets/3d/models/scene-2.glb" }], scene3: [{ name: "sc3-tx-bird", url: "assets/3d/textures/scene-3/bird.jpg" }, { name: "sc3-tx-boat", url: "assets/3d/textures/scene-3/boat.jpg" }, { name: "sc3-tx-bottles", url: "assets/3d/textures/scene-3/bottles.jpg" }, { name: "sc3-tx-branches", url: "assets/3d/textures/scene-3/branches.png" }, { name: "sc3-tx-computers", url: "assets/3d/textures/scene-3/computers.jpg" }, { name: "sc3-tx-fishes", url: "assets/3d/textures/scene-3/fishes.jpg" }, { name: "sc3-tx-frog", url: "assets/3d/textures/scene-3/frog.jpg" }, { name: "sc3-tx-leaves", url: "assets/3d/textures/scene-3/leaves.png" }, { name: "sc3-tx-lillypads", url: "assets/3d/textures/scene-3/lillypads.jpg" }, { name: "sc3-tx-line", url: "assets/3d/textures/scene-3/line.png" }, { name: "sc3-tx-lotus", url: "assets/3d/textures/scene-3/lotus.jpg" }, { name: "sc3-tx-reeds", url: "assets/3d/textures/scene-3/reeds.jpg" }, { name: "sc3-tx-rocks", url: "assets/3d/textures/scene-3/rocks.jpg" }, { name: "sc3-tx-shadows", url: "assets/3d/textures/scene-3/shadows.jpg" }, { name: "sc3-tx-umbrella", url: "assets/3d/textures/scene-3/umbrella.jpg" }, { name: "sc3-tx-water", url: "assets/3d/textures/scene-3/water.jpg" }, { name: "sc3-m", url: "assets/3d/models/scene-3.glb" }] }, t.sceneToLoad = 1, t.deferred = {}, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && p(t, e) }(e, H.a), function (t, e, n) { e && l(t.prototype, e), n && l(t, n) }(e, [{ key: "initDOM", value: function () { this.$loader = $(document.getElementById("main-loader")), this.$progress = this.$loader.find(".loader-progress") } }, { key: "initEl", value: function () { this.assetsLoader = new U(!0, { parallel: 1, headreq: !1 }), this.deferred = { scene1: z.a(), scene2: z.a(), scene3: z.a() } } }, { key: "bindEvents", value: function () { B.a.on(B.a.E.RAF, this.raf, this), this.assetsLoader.on(this.assetsLoader.E.FILE_LOAD, this._onFileLoad, this), this.assetsLoader.on(this.assetsLoader.E.COMPLETE, this._onComplete, this) } }, { key: "raf", value: function () { this._setPercentage(null) } }, { key: "loadAssets", value: function () { 1 == this.sceneToLoad && this._progressFakePercentage(0), this.assetsLoader.load(this.assetsToLoad["scene".concat(this.sceneToLoad)]) } }, { key: "_onFileLoad", value: function (t) { var e = Math.round(100 * t.progression); this._setPercentage(e) } }, { key: "_onComplete", value: function (t) { this.deferred["scene".concat(this.sceneToLoad)].resolve(), this.sceneToLoad++, 3 >= this.sceneToLoad && this.loadAssets(), this.emit(this.E.COMPLETE, t) } }, { key: "isAssetsLoaded", value: function (t) { return this.deferred[t].promise } }, { key: "_progressFakePercentage", value: function (t) { if (this.killTimeline("perc"), 100 <= t) return this.updatePercentage = !1, void this.emit(this.E.PROGRESSS_COMPLETE); this.fakePercentage = t; var e = 85 < t ? 1 : 1 + 3 * Math.random(), n = 99 > t + e ? t + e : 99; this.tl.perc = new TimelineLite({ onComplete: this._progressFakePercentage, onCompleteParams: [n], callbackScope: this }), this.tl.perc.to(this, 1, { fakePercentage: n, ease: Power2.easeOut }) } }, { key: "_progressPercentage", value: function (t) { this.killTimeline("perc"), this.tl.perc = new TimelineLite({ onComplete: this._progressFakePercentage, onCompleteParams: [t], callbackScope: this }), this.tl.perc.to(this, 1, { percentage: t, ease: Power2.easeOut }) } }, { key: "_setPercentage", value: function (t) { if (this.updatePercentage) { var e = null === t ? this.percentage : t; this.fakePercentage > this.percentage || this.fakePercentage > e ? this.percentage = this.fakePercentage : null !== t && t > this.percentage && this._progressPercentage(t) } } }]), e }()), V = n(33), W = n(0), X = n(13), q = n(3), Y = (n(7), n(5)), Z = n(4), K = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = v(this, y(e).call(this))).needDrawMask = !0, t.canUpdateColors = !1, t.GRDT_COLORS = [{ startL: "#181818", endL: "#484848" }, { startL: "#020a1e", endL: "#1a6460", startR: "#170117", endR: "#282649" }, { startL: "#070e20", endL: "#7b072d", startR: "#041216", endR: "#294040" }, { startL: "#020719", endL: "#103951", startR: "#140700", endR: "#4c210e" }], t.grdtStartColor = null, t.grdtEndColor = null, t.noiseImg = null, t.noiseLoaded = !1, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && b(t, e) }(e, H.a), function (t, e, n) { e && m(t.prototype, e), n && m(t, n) }(e, [{ key: "initDOM", value: function () { this.$canvas = $(document.getElementById("canvas-2d")) } }, { key: "initEl", value: function () { this.grdtStartColor = this.GRDT_COLORS[0].startL, this.grdtEndColor = this.GRDT_COLORS[0].endL, this.ctx = this.$canvas[0].getContext("2d"), this._loadNoise() } }, { key: "bindEvents", value: function () { g(y(e.prototype), "bindEvents", this).call(this), B.a.on(B.a.E.RAF, this.raf, this), q.a.on(q.a.E.RESIZE, this.resize, this) } }, { key: "_loadNoise", value: function () { var t = this; this.noiseImg = new Image, this.noiseImg.onload = function () { j.$loader[0].classList.add("hide-noise"), t.noiseLoaded = !0 }, this.noiseImg.src = "assets/img/noise.png" } }, { key: "resize", value: function () { this.$canvas[0].width = q.a.bW, this.$canvas[0].height = q.a.wH } }, { key: "raf", value: function () { this.canUpdateColors && this._updateLeftRightColors(), this.ctx.clearRect(0, 0, q.a.bW, q.a.wH), this.ctx.save(), this._drawShapes(this.ctx), this._drawLines(this.ctx), this._drawNoise(this.ctx), this.ctx.restore() } }, { key: "_drawShapes", value: function (t) { this._drawGradient(t, { x1: W.a.squarePts.x1, y1: W.a.squarePts.y1, x2: W.a.squarePts.x2, y2: W.a.squarePts.y2 }, { x1: W.a.persPts.x1ms, y1: W.a.persPts.y1ms, x2: W.a.persPts.x2, y2: W.a.persPts.y2 }, { x1: W.a.anchorPts.x1, y1: W.a.anchorPts.y1, x2: W.a.anchorPts.x2, y2: W.a.anchorPts.y2 }, { x1s: W.a.grdtPts.x1s, y1s: W.a.grdtPts.y1s, x1e: W.a.grdtPts.x1e, y1e: W.a.grdtPts.y1e }), this._drawGradient(t, { x1: W.a.squarePts.x2, y1: W.a.squarePts.y2, x2: W.a.squarePts.x3, y2: W.a.squarePts.y3 }, { x1: W.a.persPts.x2ms, y1: W.a.persPts.y2ms, x2: W.a.persPts.x3, y2: W.a.persPts.y3 }, { x1: W.a.anchorPts.x2, y1: W.a.anchorPts.y2, x2: W.a.anchorPts.x3, y2: W.a.anchorPts.y3 }, { x1s: W.a.grdtPts.x2s, y1s: W.a.grdtPts.y2s, x1e: W.a.grdtPts.x2e, y1e: W.a.grdtPts.y2e }), this._drawGradient(t, { x1: W.a.squarePts.x3, y1: W.a.squarePts.y3, x2: W.a.squarePts.x4, y2: W.a.squarePts.y4 }, { x1: W.a.persPts.x3ms, y1: W.a.persPts.y3ms, x2: W.a.persPts.x4, y2: W.a.persPts.y4 }, { x1: W.a.anchorPts.x3, y1: W.a.anchorPts.y3, x2: W.a.anchorPts.x4, y2: W.a.anchorPts.y4 }, { x1s: W.a.grdtPts.x3s, y1s: W.a.grdtPts.y3s, x1e: W.a.grdtPts.x3e, y1e: W.a.grdtPts.y3e }), this._drawGradient(t, { x1: W.a.squarePts.x4, y1: W.a.squarePts.y4, x2: W.a.squarePts.x1, y2: W.a.squarePts.y1 }, { x1: W.a.persPts.x4ms, y1: W.a.persPts.y4ms, x2: W.a.persPts.x1, y2: W.a.persPts.y1 }, { x1: W.a.anchorPts.x4, y1: W.a.anchorPts.y4, x2: W.a.anchorPts.x1, y2: W.a.anchorPts.y1 }, { x1s: W.a.grdtPts.x4s, y1s: W.a.grdtPts.y4s, x1e: W.a.grdtPts.x4e, y1e: W.a.grdtPts.y4e }) } }, { key: "_drawGradient", value: function (t, e, n, i, r) { t.beginPath(), t.moveTo(i.x1, i.y1), t.lineTo(n.x1, n.y1), t.lineTo(e.x1, e.y1), t.lineTo(e.x2, e.y2), t.lineTo(n.x2, n.y2), t.lineTo(i.x2, i.y2); for (var o = t.createLinearGradient(r.x1s, r.y1s, r.x1e, r.y1e), a = this._getColor(this.grdtStartColor), s = this._getColor(this.grdtEndColor), c = 0; 1 >= c; c += .1) { var u = z.b.OutQuad(c), l = z.c(u, a, s); o.addColorStop(c, l) } t.fillStyle = o, t.strokeStyle = o, t.fill(), t.stroke(), t.closePath() } }, { key: "_getColor", value: function (t) { return 0 <= t.indexOf("rgba") && (t = (t = (t = t.replace(/\s/g, "")).replace("rgba", "rgb")).replace(",1)", ")")), t } }, { key: "_drawGradientDebug", value: function (t, e, n, i, r) { t.beginPath(), t.rect(e - 5, n - 5, 10, 10), t.rect(i - 5, r - 5, 10, 10), t.fillStyle = "red", t.fill(), t.closePath() } }, { key: "_drawLines", value: function (t) { t.save(), t.globalAlpha = .1, t.beginPath(), t.strokeStyle = "#fff", t.lineWidth = 1, t.moveTo(W.a.squarePts.x1, W.a.squarePts.y1), t.lineTo(W.a.squarePts.x2, W.a.squarePts.y2), t.lineTo(W.a.squarePts.x3, W.a.squarePts.y3), t.lineTo(W.a.squarePts.x4, W.a.squarePts.y4), t.lineTo(W.a.squarePts.x1, W.a.squarePts.y1), t.moveTo(W.a.squarePts.x1, W.a.squarePts.y1), t.lineTo(W.a.persPts.x1, W.a.persPts.y1), t.moveTo(W.a.squarePts.x2, W.a.squarePts.y2), t.lineTo(W.a.persPts.x2, W.a.persPts.y2), t.moveTo(W.a.squarePts.x3, W.a.squarePts.y3), t.lineTo(W.a.persPts.x3, W.a.persPts.y3), t.moveTo(W.a.squarePts.x4, W.a.squarePts.y4), t.lineTo(W.a.persPts.x4, W.a.persPts.y4), t.moveTo(W.a.squarePts.x1, W.a.squarePts.y1), t.lineTo(W.a.persPts.x1ms, W.a.persPts.y1ms), t.moveTo(W.a.squarePts.x2, W.a.squarePts.y2), t.lineTo(W.a.persPts.x2ms, W.a.persPts.y2ms), t.moveTo(W.a.squarePts.x3, W.a.squarePts.y3), t.lineTo(W.a.persPts.x3ms, W.a.persPts.y3ms), t.moveTo(W.a.squarePts.x4, W.a.squarePts.y4), t.lineTo(W.a.persPts.x4ms, W.a.persPts.y4ms), t.moveTo(W.a.squarePts.x1, W.a.squarePts.y1), t.lineTo(W.a.persPts.x1me, W.a.persPts.y1me), t.moveTo(W.a.squarePts.x2, W.a.squarePts.y2), t.lineTo(W.a.persPts.x2me, W.a.persPts.y2me), t.moveTo(W.a.squarePts.x3, W.a.squarePts.y3), t.lineTo(W.a.persPts.x3me, W.a.persPts.y3me), t.moveTo(W.a.squarePts.x4, W.a.squarePts.y4), t.lineTo(W.a.persPts.x4me, W.a.persPts.y4me), t.stroke(), t.closePath(), this._drawLineMask(t), t.restore() } }, { key: "_drawLineMask", value: function (t) { t.globalCompositeOperation = "destination-in", t.save(), t.globalAlpha = 1, t.beginPath(), t.fillStyle = "#fff"; var e = q.a.wH - q.a.wH * j.percentage * .01; t.rect(0, e, q.a.bW, q.a.wH - e), t.fill(), t.closePath(), t.restore() } }, { key: "_drawNoise", value: function (t) { if (this.noiseLoaded) { var e = new Path2D; e.rect(0, 0, q.a.bW, q.a.wH), e.moveTo(W.a.squarePts.x1, W.a.squarePts.y1), e.lineTo(W.a.squarePts.x2, W.a.squarePts.y2), e.lineTo(W.a.squarePts.x3, W.a.squarePts.y3), e.lineTo(W.a.squarePts.x4, W.a.squarePts.y4), e.lineTo(W.a.squarePts.x1, W.a.squarePts.y1), t.clip(e, "evenodd"), t.save(), t.globalAlpha = .07, t.translate(Z.a.x - 100, Z.a.y - 100), t.rotate(Y.a.degToRad(this.angle)); var n = t.createPattern(this.noiseImg, "repeat"); t.fillStyle = n, t.fillRect(100 - q.a.bW, 100 - q.a.bW, 2 * q.a.bW, 2 * q.a.bW), t.restore() } } }, { key: "changeScene", value: function (t) { this.canUpdateColors = !1; var e = t == this.GRDT_COLORS.length ? 0 : t, n = this.GRDT_COLORS[e].startL, i = this.GRDT_COLORS[e].endL; this.tl.change = new TimelineLite({ onComplete: this._onChangeSceneComplete, onCompleteParams: [t, this.GRDT_COLORS[e].startR, this.GRDT_COLORS[e].endR], callbackScope: this }), this.tl.change.to(this, 3, { grdtStartColor: n, grdtEndColor: i, ease: Power2.easeInOut }, 0) } }, { key: "_onChangeSceneComplete", value: function (t, e, n) { this.tl.switch = new TimelineLite({ paused: !0 }), this.tl.switch.to(this, 1, { grdtStartColor: e, grdtEndColor: n, ease: Linear.easeOut }), 4 > t && (this.canUpdateColors = !0) } }, { key: "_updateLeftRightColors", value: function () { var t = Y.a.clamp(Y.a.mapRange(Z.a.pcX, .4, .6, 0, 1), 0, 1); this.tl.switch.progress(t) } }, { key: "drawMask", set: function (t) { this.needDrawMask = t } }]), e }()), J = n(63), Q = function (t) { function e() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), w(this, T(e).call(this)) } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && S(t, e) }(e, H.a), function (t, e, n) { e && x(t.prototype, e), n && x(t, n) }(e, [{ key: "initDOM", value: function () { this.$intro = $(document.getElementById("intro")), this.$title1 = this.$intro.find(".intro-title-1") } }, { key: "initEl", value: function () { } }, { key: "initTl", value: function () { var t = new SplitText(this.$title1, { type: "chars" }).chars; this.tl.show = new TimelineLite({ paused: !0 }), this.tl.show.set(this.$intro, { display: "block" }, 0), this.tl.show.staggerFrom(t, .8, { opacity: 0, x: 15, y: 8, scale: 0, rotation: 10, ease: Back.easeOut }, .015, 2.5), this.tl.hide = new TimelineLite({ paused: !0 }), this.tl.hide.staggerTo(t, .8, { opacity: 0, x: -15, y: -8, scale: 0, rotation: 10, ease: Back.easeIn }, .015, 0), this.tl.hide.set(this.$intro, { display: "none" }, 3.5) } }, { key: "show", value: function () { this.tl.show.play(0) } }, { key: "hide", value: function () { this.tl.hide.play(0) } }]), e }(), tt = function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = E(this, A(e).call(this))).canRaf = !1, t.forceCenterPt = !0, t.lCpX = .25, t.rCpX = .75, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && C(t, e) }(e, H.a), function (t, e, n) { e && P(t.prototype, e), n && P(t, n) }(e, [{ key: "initEl", value: function () { this.lCoeffX = 0, this.rCoeffX = 0, this.coeffY = 0 } }, { key: "bindEvents", value: function () { B.a.on(B.a.E.RAF, this.raf, this) } }, { key: "unbindEvents", value: function () { } }, { key: "show", value: function (t) { var e = this; this.$scene = $(document.getElementById("scene-".concat(t))), this.$lTxt = this.$scene.find(".sc-txt-left"), this.$lTxtWrap = this.$lTxt.find(".sc-txt-wrapper"), this.$lTxtLine = this.$lTxtWrap.find(".sc-txt-line"), this.$rTxt = this.$scene.find(".sc-txt-right"), this.$rTxtWrap = this.$rTxt.find(".sc-txt-wrapper"), this.$rTxtLine = this.$rTxtWrap.find(".sc-txt-line"), this.canRaf = !0; var n = 1 == t ? 1.5 : 0; this.tl.show = new TimelineLite({ onComplete: function () { e.forceCenterPt = !1 } }), this.tl.show.set(this.$scene, { display: "block" }, 0), this.tl.show.set([this.$lTxt, this.$rTxt], { opacity: 0 }, 0), this.tl.show.fromTo(this, 1.5, { rCpX: .75 }, { rCpX: .25, ease: Power2.easeInOut }, n) } }, { key: "hide", value: function (t) { this.lCpX = Z.a.pcX, this.rCpX = Z.a.pcX, this.forceCenterPt = !0, this.tl.hide = new TimelineLite({ onComplete: this.show, onCompleteParams: [t], callbackScope: this }), this.tl.hide.to(this, 1.5, { lCpX: .25, rCpX: .75, ease: Power2.easeIn }, 0), this.tl.hide.set(this.$scene, { display: "none" }, 1.5) } }, { key: "hideFinal", value: function () { this.lCpX = Z.a.pcX, this.rCpX = Z.a.pcX, this.forceCenterPt = !0, this.tl.hide = new TimelineLite, this.tl.hide.to(this, 1.5, { lCpX: .25, rCpX: .75, ease: Power2.easeIn }, 0), this.tl.hide.set(this.$scene, { display: "none" }, 1.5) } }, { key: "raf", value: function () { if (this.canRaf) { var t = this.forceCenterPt ? this.lCpX : Z.a.pcX, e = this.forceCenterPt ? -this.rCpX : -Z.a.pcX, n = this.getCoeffX(t, .5, "lCoeffX"), i = 1 - n, r = this.getCoeffX(e, -.5, "rCoeffX"), o = 1 - r, a = this.getCoeffY(Z.a.pcY); this.tw.lTxt = TweenLite.set(this.$lTxt, { x: -250 * i, y: 50 * a, opacity: n }), this.tw.lTxt = TweenLite.set(this.$lTxtWrap, { rotationY: 35 * i, skewY: 3 * a }), this.tw.rTxt = TweenLite.set(this.$lTxtLine[0], { x: 20 * i }), this.tw.rTxt = TweenLite.set(this.$lTxtLine[1], { x: -60 * i }), this.tw.rTxt = TweenLite.set(this.$lTxtLine[2], { x: -20 * i }), this.tw.rTxt = TweenLite.set(this.$rTxt, { x: 250 * o, y: 50 * a, opacity: r }), this.tw.rTxt = TweenLite.set(this.$rTxtWrap, { rotationY: -35 * o, skewY: -3 * a }), this.tw.rTxt = TweenLite.set(this.$rTxtLine[0], { x: -20 * o }), this.tw.rTxt = TweenLite.set(this.$rTxtLine[1], { x: 60 * o }), this.tw.rTxt = TweenLite.set(this.$rTxtLine[2], { x: 20 * o }) } } }, { key: "getCoeffX", value: function (t, e, n) { var i = 10 * (t - e); return 1 < i && (i = 1), this[n] = Y.a.getInertia(i, this[n], .13, !0, 1e-5), 0 > this[n] && (this[n] = 0), this[n] } }, { key: "getCoeffY", value: function (t) { return this.coeffY = Y.a.getInertia(2 * t - 1, this.coeffY, .11, !0, 1e-5), this.coeffY } }]), e }(); n.d(e, "a", function () { return et }); var et = new (function (t) { function e() { var t; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), (t = O(this, I(e).call(this))).isFirstTrans = !0, t } return function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && D(t, e) }(e, G.a), function (t, e, n) { e && R(t.prototype, e), n && R(t, n) }(e, [{ key: "init", value: function () { this._initEl(), this._bindEvents(), j.loadAssets() } }, { key: "_initEl", value: function () { K.init(), J.a.init(), this.intro = new Q, this.intro.init(), this.scenes = new tt, this.scenes.init(), j.init(), N.a.init(), N.a.HAS_WEBGL && k.a.init() } }, { key: "_bindEvents", value: function () { j.on(j.E.PROGRESSS_COMPLETE, this._onProgressComplete, this), W.a.on(W.a.E.INTRO_COMPLETE, this._onIntroComplete, this), W.a.on(W.a.E.UPDATE_SCENE, this._onUpdateScene, this), W.a.on(W.a.E.TRANSITION_COMPLETE, this._onTransitionComplete, this), W.a.on(W.a.E.REMOVE_WEBGL_RAF, this._onOutroComplete, this), k.a.on(k.a.E.GO_TO_NEXT_SCREEN, this._goToNextScreen, this) } }, { key: "_onProgressComplete", value: function () { j.off(j.E.PROGRESSS_COMPLETE, this._onProgressComplete, this), W.a.playIntro(), this.intro.show(), V.a.show(), N.a.HAS_WEBGL ? k.a.show(3.5) : V.a.showLinks() } }, { key: "_onIntroComplete", value: function () { W.a.off(W.a.E.INTRO_COMPLETE, this._onIntroComplete, this), B.a.$body[0].classList.add("show-webgl-scene"), N.a.canRaf = !0, k.a.isScreenTrans = !1 } }, { key: "_goToNextScreen", value: function (t) { var e = this; X.a.canRaf = !1, X.a.state = "default", X.a.screenId = t; var n = 1 == t ? N.a.scene1 : 2 == t ? N.a.scene2 : N.a.scene3; 3 >= t ? (X.a.displayLoader(!0), W.a.leaveSquare(), Promise.all([j.isAssetsLoaded("scene".concat(t)), n.init()]).then(function () { 1 == t ? (N.a.scene1.display(!0), e.intro.hide(), e.scenes.show(t), W.a.skipIntro(), V.a.updateProgression(t, 2.5)) : (e.scenes.hide(t), W.a.changeScene(), V.a.updateProgression(t, 2)), X.a.displayLoader(!1), K.changeScene(t), k.a.show(3) })) : 4 == t && (this.scenes.hideFinal(), W.a.showOutro(), K.changeScene(t), V.a.showLinks(), V.a.updateProgression(t, 2)) } }, { key: "_onUpdateScene", value: function () { var t = k.a.screenId, e = 2 == t ? N.a.scene1 : 3 == t ? N.a.scene2 : N.a.scene3, n = 2 == t ? N.a.scene2 : 3 == t ? N.a.scene3 : null; e.display(!1), e.destroy(), n && n.display(!0), 4 > t && N.a.updateCameraCoeff(t) } }, { key: "_onTransitionComplete", value: function () { X.a.canRaf = !0, k.a.isScreenTrans = !1 } }, { key: "_onOutroComplete", value: function () { W.a.off(W.a.E.REMOVE_WEBGL_RAF, this._onOutroComplete, this), N.a.canRaf = !1 } }]), e }()) }, function (t, e, n) { "use strict"; n.r(e), function (t) { function i(t, e) { for (var n, i = 0; i < e.length; i++)(n = e[i]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } n.d(e, "App", function () { return s }); var r = n(102), o = (n(139), n(140), n(6)), a = n(136); t.$ = r.a, n(312), n(141); var s = new (function () { function t() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t) } return function (t, e, n) { e && i(t.prototype, e), n && i(t, n) }(t, [{ key: "init", value: function () { o.a.init(), a.a.init() } }]), t }()); Object(r.a)(s.init()), console.log("%c\nwww.atuamae.com\n%cStudio de créations digitales\n\n", "padding: 0px; color:#000000; line-height:30px; font-size: 18px; font-family: georgia, serif; font-style: italic;", "padding: 0px; color:#000000; line-height:20px; font-size: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen-Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;") }.call(this, n(64)) }, function (t) { t.exports = function (t) { if (!t.webpackPolyfill) { var e = Object.create(t); e.children || (e.children = []), Object.defineProperty(e, "loaded", { enumerable: !0, get: function () { return e.l } }), Object.defineProperty(e, "id", { enumerable: !0, get: function () { return e.i } }), Object.defineProperty(e, "exports", { enumerable: !0 }), e.webpackPolyfill = 1 } return e } }, function (t, e, n) { "use strict"; var i = Math.max, r = Math.abs, o = n(1); o.k._gsDefine("easing.CustomEase", ["easing.Ease"], function () { var t = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, e = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, n = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi, a = /[cLlsS]/g, s = "CustomEase only accepts Cubic Bezier data.", c = function t(e, n, i, o, a, s, c, u, l, h, f) { var p, d = (e + i) / 2, m = (n + o) / 2, v = (i + a) / 2, g = (o + s) / 2, y = (a + c) / 2, b = (s + u) / 2, _ = (d + v) / 2, x = (m + g) / 2, w = (v + y) / 2, T = (g + b) / 2, S = (_ + w) / 2, M = (x + T) / 2, P = c - e, E = u - n, A = r((i - c) * E - (o - u) * P), C = r((a - c) * E - (s - u) * P); return h || (h = [{ x: e, y: n }, { x: c, y: u }], f = 1), h.splice(f || h.length - 1, 0, { x: S, y: M }), (A + C) * (A + C) > l * (P * P + E * E) && (p = h.length, t(e, n, d, m, _, x, S, M, l, h, f), t(S, M, w, T, y, b, c, u, l, h, f + 1 + (h.length - p))), h }, u = function (t) { var i, o, a, c, u, l, h, f, p, d, m, v = (t + "").replace(n, function (t) { var e = +t; return 1e-4 > e && -1e-4 < e ? 0 : e }).match(e) || [], g = [], y = 0, b = 0, _ = v.length, x = 2; for (i = 0; i < _; i++)if (p = c, isNaN(v[i]) ? u = (c = v[i].toUpperCase()) !== v[i] : i--, o = +v[i + 1], a = +v[i + 2], u && (o += y, a += b), i || (h = o, f = a), "M" === c) l && 8 > l.length && (g.length -= 1, x = 0), y = h = o, b = f = a, l = [o, a], x = 2, g.push(l), i += 2, c = "L"; else if ("C" === c) l || (l = [0, 0]), l[x++] = o, l[x++] = a, u || (y = b = 0), l[x++] = y + 1 * v[i + 3], l[x++] = b + 1 * v[i + 4], l[x++] = y += 1 * v[i + 5], l[x++] = b += 1 * v[i + 6], i += 6; else if ("S" === c) "C" === p || "S" === p ? (d = y - l[x - 4], m = b - l[x - 3], l[x++] = y + d, l[x++] = b + m) : (l[x++] = y, l[x++] = b), l[x++] = o, l[x++] = a, u || (y = b = 0), l[x++] = y += 1 * v[i + 3], l[x++] = b += 1 * v[i + 4], i += 4; else { if ("L" !== c && "Z" !== c) throw s; "Z" === c && (o = h, a = f, l.closed = !0), ("L" === c || .5 < r(y - o) || .5 < r(b - a)) && (l[x++] = y + (o - y) / 3, l[x++] = b + (a - b) / 3, l[x++] = y + 2 * (o - y) / 3, l[x++] = b + 2 * (a - b) / 3, l[x++] = o, l[x++] = a, "L" === c && (i += 2)), y = o, b = a } return g[0] }, l = function (t, e, n) { n || 0 === n || (n = i(+t[t.length - 1], +t[1])); var o, a = -1 * +t[0], s = -n, c = t.length, u = 1 / (+t[c - 2] + a), l = -e || (r(+t[c - 1] - +t[1]) < .01 * (+t[c - 2] - +t[0]) ? function (t) { var e, n = t.length, i = 999999999999; for (e = 1; e < n; e += 6)+t[e] < i && (i = +t[e]); return i }(t) + s : +t[c - 1] + s); for (l = l ? 1 / l : -u, o = 0; o < c; o += 2)t[o] = (+t[o] + a) * u, t[o + 1] = (+t[o + 1] + s) * l }, h = function (t) { var e = this.lookup[0 | t * this.l] || this.lookup[this.l - 1]; return e.nx < t && (e = e.n), e.y + (t - e.x) / e.cx * e.cy }, f = function (t, e, n) { this._calcEnd = !0, this.id = t, t && (o.b.map[t] = this), this.getRatio = h, this.setData(e, n) }, p = f.prototype = new o.b; return p.constructor = f, p.setData = function (e, n) { var i, o, h, f, p, d, m, v, g, y, b = (e = e || "0,0,1,1").match(t), _ = 1, x = []; if (y = (n = n || {}).precision || 1, this.data = e, this.lookup = [], this.points = x, this.fast = 1 >= y, (a.test(e) || -1 !== e.indexOf("M") && -1 === e.indexOf("C")) && (b = u(e)), 4 === (i = b.length)) b.unshift(0, 0), b.push(1, 1), i = 8; else if ((i - 2) % 6) throw s; for ((0 != +b[0] || 1 != +b[i - 2]) && l(b, n.height, n.originY), this.rawBezier = b, f = 2; f < i; f += 6)o = { x: +b[f - 2], y: +b[f - 1] }, h = { x: +b[f + 4], y: +b[f + 5] }, x.push(o, h), c(o.x, o.y, +b[f], +b[f + 1], +b[f + 2], +b[f + 3], h.x, h.y, 1 / (2e5 * y), x, x.length - 1); for (i = x.length, f = 0; f < i; f++)m = x[f], v = x[f - 1] || m, m.x > v.x || v.y !== m.y && v.x === m.x || m === v ? (v.cx = m.x - v.x, v.cy = m.y - v.y, v.n = m, v.nx = m.x, this.fast && 1 < f && 2 < r(v.cy / v.cx - x[f - 2].cy / x[f - 2].cx) && (this.fast = !1), v.cx < _ && (v.cx ? _ = v.cx : (v.cx = .001, f === i - 1 && (v.x -= .001, _ = Math.min(_, .001), this.fast = !1)))) : (x.splice(f--, 1), i--); if (i = 0 | 1 / _ + 1, this.l = i, p = 1 / i, d = 0, m = x[0], this.fast) { for (f = 0; f < i; f++)g = f * p, m.nx < g && (m = x[++d]), o = m.y + (g - m.x) / m.cx * m.cy, this.lookup[f] = { x: g, cx: p, y: o, cy: 0, nx: 9 }, f && (this.lookup[f - 1].cy = o - this.lookup[f - 1].y); this.lookup[i - 1].cy = x[x.length - 1].y - o } else { for (f = 0; f < i; f++)m.nx < f * p && (m = x[++d]), this.lookup[f] = m; d < x.length - 1 && (this.lookup[f - 1] = x[x.length - 2]) } return this._calcEnd = 1 !== x[x.length - 1].y || 0 !== x[0].y, this }, p.getRatio = h, p.getSVGData = function (t) { return f.getSVGData(this, t) }, f.create = function (t, e, n) { return new f(t, e, n) }, f.version = "0.2.2", f.bezierToPoints = c, f.get = function (t) { return o.b.map[t] }, f.getSVGData = function (t, e) { var n, a, s, c, u, l, h, f, p, d, m = 1e3, v = (e = e || {}).width || 100, g = e.height || 100, y = e.x || 0, b = (e.y || 0) + g, _ = e.path; if (e.invert && (g = -g, b = 0), (t = t.getRatio ? t : o.b.map[t] || console.log("No ease found: ", t)).rawBezier) { for (n = [], h = t.rawBezier.length, s = 0; s < h; s += 2)n.push((0 | (y + t.rawBezier[s] * v) * m) / m + "," + (0 | (b + t.rawBezier[s + 1] * -g) * m) / m); n[0] = "M" + n[0], n[1] = "C" + n[1] } else for (n = ["M" + y + "," + b], c = 1 / (h = i(5, 200 * (e.precision || 1))), f = 5 / (h += 2), p = (0 | (y + c * v) * m) / m, a = ((d = (0 | (b + t.getRatio(c) * -g) * m) / m) - b) / (p - y), s = 2; s < h; s++)u = (0 | (y + s * c * v) * m) / m, l = (0 | (b + t.getRatio(s * c) * -g) * m) / m, (r((l - d) / (u - p) - a) > f || s === h - 1) && (n.push(p + "," + d), a = (l - d) / (u - p)), p = u, d = l; return _ && ("string" == typeof _ ? document.querySelector(_) : _).setAttribute("d", n.join(" ")), n.join(" ") }, f }, !0), o.k.CustomEase }, function (t, e, n) { "use strict"; var i = n(1); !function (t) { var e = t.GreenSockGlobals || t, n = function (t) { var n, i = "com.greensock.utils".split("."), r = e; for (n = 0; n < i.length; n++)r[i[n]] = r = r[i[n]] || {}; return r }(), i = document, r = i.defaultView ? i.defaultView.getComputedStyle : function () { }, o = /([A-Z])/g, a = function (t, e, n, i) { var a; return (n = n || r(t, null)) ? a = (t = n.getPropertyValue(e.replace(o, "-$1").toLowerCase())) || n.length ? t : n[e] : t.currentStyle && (a = (n = t.currentStyle)[e]), i ? a : parseInt(a, 10) || 0 }, s = function (t) { return !!(t.length && t[0] && (t[0].nodeType && t[0].style && !t.nodeType || t[0].length && t[0][0])) }, c = function (t, e) { for (var n, i = e.length; -1 < --i;)if (n = e[i], t.substr(0, n.length) === n) return n.length }, u = /(?:\r|\n|\t\t)/g, l = /(?:\s\s+)/g, h = 127462, f = 127487, p = function (t) { return (t.charCodeAt(0) - 55296 << 10) + (t.charCodeAt(1) - 56320) + 65536 }, d = " style='position:relative;display:inline-block;" + (i.all && !i.addEventListener ? "*display:inline;*zoom:1;'" : "'"), m = function (t, e) { var n = -1 !== (t = t || "").indexOf("++"), i = 1; return n && (t = t.split("++").join("")), function () { return "<" + e + d + (t ? " class='" + t + (n ? i++ : "") + "'>" : ">") } }, v = n.SplitText = e.SplitText = function (t, e) { if ("string" == typeof t && (t = v.selector(t)), !t) throw "cannot split a null element."; this.elements = s(t) ? function (t) { var e, n, i, r = [], o = t.length; for (e = 0; e < o; e++)if (n = t[e], s(n)) for (i = n.length, i = 0; i < n.length; i++)r.push(n[i]); else r.push(n); return r }(t) : [t], this.chars = [], this.words = [], this.lines = [], this._originals = [], this.vars = e || {}, this.split(e) }, g = function t(e, n, i) { var r = e.nodeType; if (1 === r || 9 === r || 11 === r) for (e = e.firstChild; e; e = e.nextSibling)t(e, n, i); else (3 === r || 4 === r) && (e.nodeValue = e.nodeValue.split(n).join(i)) }, y = function (t, e) { for (var n = e.length; -1 < --n;)t.push(e[n]) }, b = function (t) { var e, n = [], i = t.length; for (e = 0; e !== i; n.push(t[e++])); return n }, _ = function (t, e, n) { for (var i; t && t !== e;) { if (i = t._next || t.nextSibling) return i.textContent.charAt(0) === n; t = t.parentNode || t._parent } return !1 }, x = function t(e) { var n, i, r = b(e.childNodes), o = r.length; for (n = 0; n < o; n++)(i = r[n])._isSplit ? t(i) : (n && 3 === i.previousSibling.nodeType ? i.previousSibling.nodeValue += 3 === i.nodeType ? i.nodeValue : i.firstChild.nodeValue : 3 !== i.nodeType && e.insertBefore(i.firstChild, i), e.removeChild(i)) }, w = function (t, e, n, o, s, c, u) { var l, h, f, p, d, m, v, b, w, T, S, M, P = r(t), E = a(t, "paddingLeft", P), A = -999, C = a(t, "borderBottomWidth", P) + a(t, "borderTopWidth", P), L = a(t, "borderLeftWidth", P) + a(t, "borderRightWidth", P), R = a(t, "paddingTop", P) + a(t, "paddingBottom", P), O = a(t, "paddingLeft", P) + a(t, "paddingRight", P), I = .2 * a(t, "fontSize"), D = a(t, "textAlign", P, !0), G = [], B = [], k = [], N = e.wordDelimiter || " ", H = e.span ? "span" : "div", F = e.type || e.split || "chars,words,lines", U = s && -1 !== F.indexOf("lines") ? [] : null, z = -1 !== F.indexOf("words"), j = -1 !== F.indexOf("chars"), V = "absolute" === e.position || !0 === e.absolute, W = e.linesClass, X = -1 !== (W || "").indexOf("++"), q = []; for (U && 1 === t.children.length && t.children[0]._isSplit && (t = t.children[0]), X && (W = W.split("++").join("")), f = (h = t.getElementsByTagName("*")).length, d = [], l = 0; l < f; l++)d[l] = h[l]; if (U || V) for (l = 0; l < f; l++)((m = (p = d[l]).parentNode === t) || V || j && !z) && (M = p.offsetTop, U && m && Math.abs(M - A) > I && ("BR" !== p.nodeName || 0 === l) && (v = [], U.push(v), A = M), V && (p._x = p.offsetLeft, p._y = M, p._w = p.offsetWidth, p._h = p.offsetHeight), U && ((p._isSplit && m || !j && m || z && m || !z && p.parentNode.parentNode === t && !p.parentNode._isSplit) && (v.push(p), p._x -= E, _(p, t, N) && (p._wordEnd = !0)), "BR" === p.nodeName && (p.nextSibling && "BR" === p.nextSibling.nodeName || 0 === l) && U.push([]))); for (l = 0; l < f; l++)m = (p = d[l]).parentNode === t, "BR" !== p.nodeName ? (V && (w = p.style, !z && !m && (p._x += p.parentNode._x, p._y += p.parentNode._y), w.left = p._x + "px", w.top = p._y + "px", w.position = "absolute", w.display = "block", w.width = p._w + 1 + "px", w.height = p._h + "px"), !z && j ? p._isSplit ? (p._next = p.nextSibling, p.parentNode.appendChild(p)) : p.parentNode._isSplit ? (p._parent = p.parentNode, !p.previousSibling && p.firstChild && (p.firstChild._isFirst = !0), p.nextSibling && " " === p.nextSibling.textContent && !p.nextSibling.nextSibling && q.push(p.nextSibling), p._next = p.nextSibling && p.nextSibling._isFirst ? null : p.nextSibling, p.parentNode.removeChild(p), d.splice(l--, 1), f--) : !m && (M = !p.nextSibling && _(p.parentNode, t, N), p.parentNode._parent && p.parentNode._parent.appendChild(p), M && p.parentNode.appendChild(i.createTextNode(" ")), e.span && (p.style.display = "inline"), G.push(p)) : p.parentNode._isSplit && !p._isSplit && "" !== p.innerHTML ? B.push(p) : j && !p._isSplit && (e.span && (p.style.display = "inline"), G.push(p))) : U || V ? (p.parentNode && p.parentNode.removeChild(p), d.splice(l--, 1), f--) : !z && t.appendChild(p); for (l = q.length; -1 < --l;)q[l].parentNode.removeChild(q[l]); if (U) { for (V && (T = i.createElement(H), t.appendChild(T), S = T.offsetWidth + "px", M = T.offsetParent === t ? 0 : t.offsetLeft, t.removeChild(T)), w = t.style.cssText, t.style.cssText = "display:none;"; t.firstChild;)t.removeChild(t.firstChild); for (b = " " === N && (!V || !z && !j), l = 0; l < U.length; l++) { for (v = U[l], (T = i.createElement(H)).style.cssText = "display:block;text-align:" + D + ";position:" + (V ? "absolute;" : "relative;"), W && (T.className = W + (X ? l + 1 : "")), k.push(T), f = v.length, h = 0; h < f; h++)"BR" !== v[h].nodeName && (p = v[h], T.appendChild(p), b && p._wordEnd && T.appendChild(i.createTextNode(" ")), V && (0 === h && (T.style.top = p._y + "px", T.style.left = E + M + "px"), p.style.top = "0px", M && (p.style.left = p._x - M + "px"))); 0 === f ? T.innerHTML = "&nbsp;" : !z && !j && (x(T), g(T, " ", " ")), V && (T.style.width = S, T.style.height = p._h + "px"), t.appendChild(T) } t.style.cssText = w } V && (u > t.clientHeight && (t.style.height = u - R + "px", t.clientHeight < u && (t.style.height = u + C + "px")), c > t.clientWidth && (t.style.width = c - O + "px", t.clientWidth < c && (t.style.width = c + L + "px"))), y(n, G), y(o, B), y(s, k) }, T = function (t, e, n, r) { var o, a, s, d, m, v, y, b, _, x, w = e.span ? "span" : "div", T = -1 !== (e.type || e.split || "chars,words,lines").indexOf("chars"), S = "absolute" === e.position || !0 === e.absolute, M = e.wordDelimiter || " ", P = " " === M ? S ? "&#173; " : " " : "", E = e.span ? "</span>" : "</div>", A = !0, C = e.specialChars ? "function" == typeof e.specialChars ? e.specialChars : c : null, L = i.createElement("div"), R = t.parentNode; for (R.insertBefore(L, t), L.textContent = t.nodeValue, R.removeChild(t), y = -1 !== (o = function t(e) { var n = e.nodeType, i = ""; if (1 === n || 9 === n || 11 === n) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)i += t(e) } else if (3 === n || 4 === n) return e.nodeValue; return i }(t = L)).indexOf("<"), !1 !== e.reduceWhiteSpace && (o = o.replace(l, " ").replace(u, "")), y && (o = o.split("<").join("{{LT}}")), m = o.length, a = (" " === o.charAt(0) ? P : "") + n(), s = 0; s < m; s++)if (v = o.charAt(s), C && (x = C(o.substr(s), e.specialChars))) v = o.substr(s, x || 1), a += T && " " !== v ? r() + v + "</" + w + ">" : v, s += x - 1; else if (v === M && o.charAt(s - 1) !== M && s) { for (a += A ? E : "", A = !1; o.charAt(s + 1) === M;)a += P, s++; s === m - 1 ? a += P : ")" !== o.charAt(s + 1) && (a += P + n(), A = !0) } else "{" === v && "{{LT}}" === o.substr(s, 6) ? (a += T ? r() + "{{LT}}</" + w + ">" : "{{LT}}", s += 5) : v.charCodeAt(0) >= 55296 && v.charCodeAt(0) <= 56319 || 65024 <= o.charCodeAt(s + 1) && 65039 >= o.charCodeAt(s + 1) ? (b = p(o.substr(s, 2)), _ = p(o.substr(s + 2, 2)), d = b >= h && b <= f && _ >= h && _ <= f || _ >= 127995 && _ <= 127999 ? 4 : 2, a += T && " " !== v ? r() + o.substr(s, d) + "</" + w + ">" : o.substr(s, d), s += d - 1) : a += T && " " !== v ? r() + v + "</" + w + ">" : v; t.outerHTML = a + (A ? E : ""), y && g(R, "{{LT}}", "<") }, S = function t(e, n, i, r) { var o, s, c = b(e.childNodes), u = c.length, l = "absolute" === n.position || !0 === n.absolute; if (3 !== e.nodeType || 1 < u) { for (n.absolute = !1, o = 0; o < u; o++)(3 !== (s = c[o]).nodeType || /\S+/.test(s.nodeValue)) && (l && 3 !== s.nodeType && "inline" === a(s, "display", null, !0) && (s.style.display = "inline-block", s.style.position = "relative"), s._isSplit = !0, t(s, n, i, r)); return n.absolute = l, void (e._isSplit = !0) } T(e, n, i, r) }, M = v.prototype; M.split = function (t) { this.isSplit && this.revert(), this.vars = t = t || this.vars, this._originals.length = this.chars.length = this.words.length = this.lines.length = 0; for (var e, n, i, r = this.elements.length, o = t.span ? "span" : "div", a = m(t.wordsClass, o), s = m(t.charsClass, o); -1 < --r;)i = this.elements[r], this._originals[r] = i.innerHTML, e = i.clientHeight, n = i.clientWidth, S(i, t, a, s), w(i, t, this.chars, this.words, this.lines, n, e); return this.chars.reverse(), this.words.reverse(), this.lines.reverse(), this.isSplit = !0, this }, M.revert = function () { if (!this._originals) throw "revert() call wasn't scoped properly."; for (var t = this._originals.length; -1 < --t;)this.elements[t].innerHTML = this._originals[t]; return this.chars = [], this.words = [], this.lines = [], this.isSplit = !1, this }, v.selector = t.$ || t.jQuery || function (e) { var n = t.$ || t.jQuery; return n ? (v.selector = n, n(e)) : "undefined" == typeof document ? e : document.querySelectorAll ? document.querySelectorAll(e) : document.getElementById("#" === e.charAt(0) ? e.substr(1) : e) }, v.version = "0.6.0" }(i.k), i.k.SplitText }, function (t, e, n) { "use strict"; (function (t) { n(142), n(286), n(288), n(290), n(292), n(294), n(296), n(298), n(300), n(302), n(306), t._babelPolyfill && "undefined" != typeof console && console.warn && console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."), t._babelPolyfill = !0 }).call(this, n(64)) }, function (t, e, n) { n(143), n(145), n(146), n(147), n(148), n(149), n(150), n(151), n(152), n(153), n(154), n(155), n(156), n(157), n(158), n(159), n(161), n(162), n(163), n(164), n(165), n(166), n(167), n(168), n(169), n(170), n(171), n(172), n(173), n(174), n(175), n(176), n(177), n(178), n(179), n(180), n(181), n(182), n(183), n(184), n(185), n(186), n(187), n(189), n(190), n(191), n(192), n(193), n(194), n(195), n(196), n(197), n(198), n(199), n(200), n(201), n(202), n(203), n(204), n(205), n(206), n(207), n(208), n(209), n(210), n(211), n(212), n(213), n(214), n(215), n(216), n(217), n(218), n(219), n(220), n(221), n(222), n(224), n(225), n(227), n(228), n(229), n(230), n(231), n(232), n(233), n(236), n(237), n(238), n(239), n(240), n(241), n(242), n(243), n(244), n(245), n(246), n(247), n(248), n(97), n(249), n(250), n(122), n(251), n(252), n(253), n(254), n(123), n(257), n(258), n(259), n(260), n(261), n(262), n(263), n(264), n(265), n(266), n(267), n(268), n(269), n(270), n(271), n(272), n(273), n(274), n(275), n(276), n(277), n(278), n(279), n(280), n(281), n(282), n(283), n(284), n(285), t.exports = n(17) }, function (t, e, n) { "use strict"; var i = n(9), r = n(23), o = n(16), a = n(2), s = n(21), c = n(41).KEY, u = n(8), l = n(77), h = n(52), f = n(43), p = n(14), d = n(78), m = n(104), v = n(144), g = n(81), y = n(12), b = n(10), _ = n(25), x = n(40), w = n(42), T = n(47), S = n(107), M = n(29), P = n(15), E = n(45), A = M.f, C = P.f, L = S.f, R = i.Symbol, O = i.JSON, I = O && O.stringify, D = "prototype", G = p("_hidden"), B = p("toPrimitive"), k = {}.propertyIsEnumerable, N = l("symbol-registry"), H = l("symbols"), F = l("op-symbols"), U = Object[D], z = "function" == typeof R, j = i.QObject, V = !j || !j[D] || !j[D].findChild, W = o && u(function () { return 7 != T(C({}, "a", { get: function () { return C(this, "a", { value: 7 }).a } })).a }) ? function (t, e, n) { var i = A(U, e); i && delete U[e], C(t, e, n), i && t !== U && C(U, e, i) } : C, X = function (t) { var e = H[t] = T(R[D]); return e._k = t, e }, q = z && "symbol" == typeof R.iterator ? function (t) { return "symbol" == typeof t } : function (t) { return t instanceof R }, Y = function (t, e, n) { return t === U && Y(F, e, n), y(t), e = x(e, !0), y(n), r(H, e) ? (n.enumerable ? (r(t, G) && t[G][e] && (t[G][e] = !1), n = T(n, { enumerable: w(0, !1) })) : (!r(t, G) && C(t, G, w(1, {})), t[G][e] = !0), W(t, e, n)) : C(t, e, n) }, $ = function (t, e) { y(t); for (var n, i = v(e = _(e)), r = 0, o = i.length; o > r;)Y(t, n = i[r++], e[n]); return t }, Z = function (t) { var e = k.call(this, t = x(t, !0)); return (this !== U || !r(H, t) || r(F, t)) && (!(e || !r(this, t) || !r(H, t) || r(this, G) && this[G][t]) || e) }, K = function (t, e) { if (t = _(t), e = x(e, !0), t !== U || !r(H, e) || r(F, e)) { var n = A(t, e); return n && r(H, e) && !(r(t, G) && t[G][e]) && (n.enumerable = !0), n } }, J = function (t) { for (var e, n = L(_(t)), i = [], o = 0; n.length > o;)r(H, e = n[o++]) || e == G || e == c || i.push(e); return i }, Q = function (t) { for (var e, n = t === U, i = L(n ? F : _(t)), o = [], a = 0; i.length > a;)r(H, e = i[a++]) && (!n || r(U, e)) && o.push(H[e]); return o }; z || (s((R = function () { if (this instanceof R) throw TypeError("Symbol is not a constructor!"); var t = f(0 < arguments.length ? arguments[0] : void 0), e = function (n) { this === U && e.call(F, n), r(this, G) && r(this[G], t) && (this[G][t] = !1), W(this, t, w(1, n)) }; return o && V && W(U, t, { configurable: !0, set: e }), X(t) })[D], "toString", function () { return this._k }), M.f = K, P.f = Y, n(48).f = S.f = J, n(62).f = Z, n(66).f = Q, o && !n(44) && s(U, "propertyIsEnumerable", Z, !0), d.f = function (t) { return X(p(t)) }), a(a.G + a.W + a.F * !z, { Symbol: R }); for (var tt = ["hasInstance", "isConcatSpreadable", "iterator", "match", "replace", "search", "species", "split", "toPrimitive", "toStringTag", "unscopables"], et = 0; tt.length > et;)p(tt[et++]); for (var nt = E(p.store), it = 0; nt.length > it;)m(nt[it++]); a(a.S + a.F * !z, "Symbol", { for: function (t) { return r(N, t += "") ? N[t] : N[t] = R(t) }, keyFor: function (t) { if (!q(t)) throw TypeError(t + " is not a symbol!"); for (var e in N) if (N[e] === t) return e }, useSetter: function () { V = !0 }, useSimple: function () { V = !1 } }), a(a.S + a.F * !z, "Object", { create: function (t, e) { return void 0 === e ? T(t) : $(T(t), e) }, defineProperty: Y, defineProperties: $, getOwnPropertyDescriptor: K, getOwnPropertyNames: J, getOwnPropertySymbols: Q }), O && a(a.S + a.F * (!z || u(function () { var t = R(); return "[null]" != I([t]) || "{}" != I({ a: t }) || "{}" != I(Object(t)) })), "JSON", { stringify: function (t) { for (var e, n, i = [t], r = 1; arguments.length > r;)i.push(arguments[r++]); if (n = e = i[1], (b(e) || void 0 !== t) && !q(t)) return g(e) || (e = function (t, e) { if ("function" == typeof n && (e = n.call(this, t, e)), !q(e)) return e }), i[1] = e, I.apply(O, i) } }), R[D][B] || n(24)(R[D], B, R[D].valueOf), h(R, "Symbol"), h(Math, "Math", !0), h(i.JSON, "JSON", !0) }, function (t, e, n) { var i = n(45), r = n(66), o = n(62); t.exports = function (t) { var e = i(t), n = r.f; if (n) for (var a, s = n(t), c = o.f, u = 0; s.length > u;)c.call(t, a = s[u++]) && e.push(a); return e } }, function (t, e, n) { var i = n(2); i(i.S, "Object", { create: n(47) }) }, function (t, e, n) { var i = n(2); i(i.S + i.F * !n(16), "Object", { defineProperty: n(15).f }) }, function (t, e, n) { var i = n(2); i(i.S + i.F * !n(16), "Object", { defineProperties: n(106) }) }, function (t, e, n) { var i = n(25), r = n(29).f; n(30)("getOwnPropertyDescriptor", function () { return function (t, e) { return r(i(t), e) } }) }, function (t, e, n) { var i = n(26), r = n(49); n(30)("getPrototypeOf", function () { return function (t) { return r(i(t)) } }) }, function (t, e, n) { var i = n(26), r = n(45); n(30)("keys", function () { return function (t) { return r(i(t)) } }) }, function (t, e, n) { n(30)("getOwnPropertyNames", function () { return n(107).f }) }, function (t, e, n) { var i = n(10), r = n(41).onFreeze; n(30)("freeze", function (t) { return function (e) { return t && i(e) ? t(r(e)) : e } }) }, function (t, e, n) { var i = n(10), r = n(41).onFreeze; n(30)("seal", function (t) { return function (e) { return t && i(e) ? t(r(e)) : e } }) }, function (t, e, n) { var i = n(10), r = n(41).onFreeze; n(30)("preventExtensions", function (t) { return function (e) { return t && i(e) ? t(r(e)) : e } }) }, function (t, e, n) { var i = n(10); n(30)("isFrozen", function (t) { return function (e) { return !i(e) || !!t && t(e) } }) }, function (t, e, n) { var i = n(10); n(30)("isSealed", function (t) { return function (e) { return !i(e) || !!t && t(e) } }) }, function (t, e, n) { var i = n(10); n(30)("isExtensible", function (t) { return function (e) { return !!i(e) && (!t || t(e)) } }) }, function (t, e, n) { var i = n(2); i(i.S + i.F, "Object", { assign: n(108) }) }, function (t, e, n) { var i = n(2); i(i.S, "Object", { is: n(160) }) }, function (t) { t.exports = Object.is || function (t, e) { return t === e ? 0 !== t || 1 / t == 1 / e : t != t && e != e } }, function (t, e, n) { var i = n(2); i(i.S, "Object", { setPrototypeOf: n(83).set }) }, function (t, e, n) { "use strict"; var i = n(67); ({})[n(14)("toStringTag")] = "z", n(21)(Object.prototype, "toString", function () { return "[object " + i(this) + "]" }, !0) }, function (t, e, n) { var i = n(2); i(i.P, "Function", { bind: n(109) }) }, function (t, e, n) { var i = n(15).f, r = Function.prototype, o = /^\s*function ([^ (]*)/, a = "name"; a in r || n(16) && i(r, a, { configurable: !0, get: function () { try { return ("" + this).match(o)[1] } catch (t) { return "" } } }) }, function (t, e, n) { "use strict"; var i = n(10), r = n(49), o = n(14)("hasInstance"), a = Function.prototype; o in a || n(15).f(a, o, { value: function (t) { if ("function" != typeof this || !i(t)) return !1; if (!i(this.prototype)) return t instanceof this; for (; t = r(t);)if (this.prototype === t) return !0; return !1 } }) }, function (t, e, n) { var i = n(2), r = n(111); i(i.G + i.F * (parseInt != r), { parseInt: r }) }, function (t, e, n) { var i = n(2), r = n(112); i(i.G + i.F * (parseFloat != r), { parseFloat: r }) }, function (t, e, n) { "use strict"; var i = n(9), r = n(23), o = n(36), a = n(85), s = n(40), c = n(8), u = n(48).f, l = n(29).f, h = n(15).f, f = n(68).trim, p = "Number", d = i[p], m = d, v = d.prototype, g = o(n(47)(v)) == p, y = "trim" in String.prototype, b = function (t) { var e = s(t, !1); if ("string" == typeof e && 2 < e.length) { var n, i, r, o = (e = y ? e.trim() : f(e, 3)).charCodeAt(0); if (43 === o || 45 === o) { if (88 === (n = e.charCodeAt(2)) || 120 === n) return NaN } else if (48 === o) { switch (e.charCodeAt(1)) { case 66: case 98: i = 2, r = 49; break; case 79: case 111: i = 8, r = 55; break; default: return +e }for (var a, c = e.slice(2), u = 0, l = c.length; u < l; u++)if (48 > (a = c.charCodeAt(u)) || a > r) return NaN; return parseInt(c, i) } } return +e }; if (!d(" 0o1") || !d("0b1") || d("+0x1")) { d = function (t) { var e = 1 > arguments.length ? 0 : t, n = this; return n instanceof d && (g ? c(function () { v.valueOf.call(n) }) : o(n) != p) ? a(new m(b(e)), n, d) : b(e) }; for (var _, x = n(16) ? u(m) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), w = 0; x.length > w; w++)r(m, _ = x[w]) && !r(d, _) && h(d, _, l(m, _)); d.prototype = v, v.constructor = d, n(21)(i, p, d) } }, function (t, e, n) { "use strict"; var i = n(2), r = n(38), o = n(113), a = n(86), s = 1..toFixed, c = Math.floor, u = [0, 0, 0, 0, 0, 0], l = "Number.toFixed: incorrect invocation!", h = "0", f = function (t, e) { for (var n = -1, i = e; 6 > ++n;)i += t * u[n], u[n] = i % 1e7, i = c(i / 1e7) }, p = function (t) { for (var e = 6, n = 0; 0 <= --e;)n += u[e], u[e] = c(n / t), n = n % t * 1e7 }, d = function () { for (var t = 6, e = ""; 0 <= --t;)if ("" !== e || 0 == t || 0 !== u[t]) { var n = u[t] + ""; e = "" === e ? n : e + a.call(h, 7 - n.length) + n } return e }, m = function (t, e, n) { return 0 === e ? n : 1 == e % 2 ? m(t, e - 1, n * t) : m(t * t, e / 2, n) }; i(i.P + i.F * ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0) || !n(8)(function () { s.call({}) })), "Number", { toFixed: function (t) { var e, n, i, s, c = o(this, l), u = r(t), v = "", g = h; if (0 > u || 20 < u) throw RangeError(l); if (c != c) return "NaN"; if (-1e21 >= c || 1e21 <= c) return c + ""; if (0 > c && (v = "-", c = -c), 1e-21 < c) if (n = 0 > (e = function (t) { for (var e = 0, n = t; 4096 <= n;)e += 12, n /= 4096; for (; 2 <= n;)e += 1, n /= 2; return e }(c * m(2, 69, 1)) - 69) ? c * m(2, -e, 1) : c / m(2, e, 1), n *= 4503599627370496, 0 < (e = 52 - e)) { for (f(0, n), i = u; 7 <= i;)f(1e7, 0), i -= 7; for (f(m(10, i, 1), 0), i = e - 1; 23 <= i;)p(8388608), i -= 23; p(1 << i), f(1, 1), p(2), g = d() } else f(0, n), f(1 << -e, 0), g = d() + a.call(h, u); return 0 < u ? g = v + ((s = g.length) <= u ? "0." + a.call(h, u - s) + g : g.slice(0, s - u) + "." + g.slice(s - u)) : g = v + g, g } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(8), o = n(113), a = 1..toPrecision; i(i.P + i.F * (r(function () { return "1" !== a.call(1, void 0) }) || !r(function () { a.call({}) })), "Number", { toPrecision: function (t) { var e = o(this, "Number#toPrecision: incorrect invocation!"); return void 0 === t ? a.call(e) : a.call(e, t) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Number", { EPSILON: 2.220446049250313e-16 }) }, function (t, e, n) { var i = n(2), r = n(9).isFinite; i(i.S, "Number", { isFinite: function (t) { return "number" == typeof t && r(t) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Number", { isInteger: n(114) }) }, function (t, e, n) { var i = n(2); i(i.S, "Number", { isNaN: function (t) { return t != t } }) }, function (t, e, n) { var i = n(2), r = n(114), o = Math.abs; i(i.S, "Number", { isSafeInteger: function (t) { return r(t) && 9007199254740991 >= o(t) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 }) }, function (t, e, n) { var i = n(2); i(i.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 }) }, function (t, e, n) { var i = n(2), r = n(112); i(i.S + i.F * (Number.parseFloat != r), "Number", { parseFloat: r }) }, function (t, e, n) { var i = n(2), r = n(111); i(i.S + i.F * (Number.parseInt != r), "Number", { parseInt: r }) }, function (t, e, n) { var i = n(2), r = n(115), o = Math.sqrt, a = Math.acosh; i(i.S + i.F * !(a && 710 == Math.floor(a(Number.MAX_VALUE)) && a(1 / 0) == 1 / 0), "Math", { acosh: function (t) { return 1 > (t = +t) ? NaN : 94906265.62425156 < t ? Math.log(t) + Math.LN2 : r(t - 1 + o(t - 1) * o(t + 1)) } }) }, function (t, e, n) { var i = n(2), r = Math.asinh; i(i.S + i.F * !(r && 0 < 1 / r(0)), "Math", { asinh: function t(e) { return isFinite(e = +e) && 0 != e ? 0 > e ? -t(-e) : Math.log(e + Math.sqrt(e * e + 1)) : e } }) }, function (t, e, n) { var i = n(2), r = Math.atanh; i(i.S + i.F * !(r && 0 > 1 / r(-0)), "Math", { atanh: function (t) { return 0 == (t = +t) ? t : Math.log((1 + t) / (1 - t)) / 2 } }) }, function (t, e, n) { var i = n(2), r = n(87); i(i.S, "Math", { cbrt: function (t) { return r(t = +t) * Math.pow(Math.abs(t), 1 / 3) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { clz32: function (t) { return (t >>>= 0) ? 31 - Math.floor(Math.log(t + .5) * Math.LOG2E) : 32 } }) }, function (t, e, n) { var i = n(2), r = Math.exp; i(i.S, "Math", { cosh: function (t) { return (r(t = +t) + r(-t)) / 2 } }) }, function (t, e, n) { var i = n(2), r = n(88); i(i.S + i.F * (r != Math.expm1), "Math", { expm1: r }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { fround: n(188) }) }, function (t, e, n) { var i = n(87), r = Math.pow, o = r(2, -52), a = r(2, -23), s = r(2, 127) * (2 - a), c = r(2, -126); t.exports = Math.fround || function (t) { var e, n, r = Math.abs(t), u = i(t); return r < c ? u * function (t) { return t + 1 / o - 1 / o }(r / c / a) * c * a : (n = (e = (1 + a / o) * r) - (e - r)) > s || n != n ? u * (1 / 0) : u * n } }, function (t, e, n) { var i = n(2), r = Math.abs; i(i.S, "Math", { hypot: function () { for (var t, e, n = 0, i = 0, o = arguments.length, a = 0; i < o;)a < (t = r(arguments[i++])) ? (n = n * (e = a / t) * e + 1, a = t) : 0 < t ? n += (e = t / a) * e : n += t; return a == 1 / 0 ? 1 / 0 : a * Math.sqrt(n) } }) }, function (t, e, n) { var i = n(2), r = Math.imul; i(i.S + i.F * n(8)(function () { return -5 != r(4294967295, 5) || 2 != r.length }), "Math", { imul: function (t, e) { var n = 65535, i = +t, r = +e, o = n & i, a = n & r; return 0 | o * a + ((n & i >>> 16) * a + o * (n & r >>> 16) << 16 >>> 0) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { log10: function (t) { return Math.log(t) * Math.LOG10E } }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { log1p: n(115) }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { log2: function (t) { return Math.log(t) / Math.LN2 } }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { sign: n(87) }) }, function (t, e, n) { var i = n(2), r = n(88), o = Math.exp; i(i.S + i.F * n(8)(function () { return !0 }), "Math", { sinh: function (t) { return 1 > Math.abs(t = +t) ? (r(t) - r(-t)) / 2 : (o(t - 1) - o(-t - 1)) * (Math.E / 2) } }) }, function (t, e, n) { var i = n(2), r = n(88), o = Math.exp; i(i.S, "Math", { tanh: function (t) { var e = r(t = +t), n = r(-t); return e == 1 / 0 ? 1 : n == 1 / 0 ? -1 : (e - n) / (o(t) + o(-t)) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Math", { trunc: function (t) { return (0 < t ? Math.floor : Math.ceil)(t) } }) }, function (t, e, n) { var i = n(2), r = n(46), o = String.fromCharCode, a = String.fromCodePoint; i(i.S + i.F * (!!a && 1 != a.length), "String", { fromCodePoint: function () { for (var t, e = [], n = arguments.length, i = 0; n > i;) { if (t = +arguments[i++], r(t, 1114111) !== t) throw RangeError(t + " is not a valid code point"); e.push(65536 > t ? o(t) : o(55296 + ((t -= 65536) >> 10), t % 1024 + 56320)) } return e.join("") } }) }, function (t, e, n) { var i = n(2), r = n(25), o = n(18); i(i.S, "String", { raw: function (t) { for (var e = r(t.raw), n = o(e.length), i = arguments.length, a = [], s = 0; n > s;)a.push(e[s++] + ""), s < i && a.push(arguments[s] + ""); return a.join("") } }) }, function (t, e, n) { "use strict"; n(68)("trim", function (t) { return function () { return t(this, 3) } }) }, function (t, e, n) { "use strict"; var i = n(116)(!0); n(89)(String, "String", function (t) { this._t = t + "", this._i = 0 }, function () { var t, e = this._t, n = this._i; return n >= e.length ? { value: void 0, done: !0 } : (t = i(e, n), this._i += t.length, { value: t, done: !1 }) }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(116)(!1); i(i.P, "String", { codePointAt: function (t) { return r(this, t) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(18), o = n(90), a = "endsWith"; i(i.P + i.F * n(92)(a), "String", { endsWith: function (t) { var e = o(this, t, a), n = 1 < arguments.length ? arguments[1] : void 0, i = r(e.length), s = void 0 === n ? i : Math.min(r(n), i), c = t + ""; return e.slice(s - c.length, s) === c } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(90), o = "includes"; i(i.P + i.F * n(92)(o), "String", { includes: function (t) { return !!~r(this, t, o).indexOf(t, 1 < arguments.length ? arguments[1] : void 0) } }) }, function (t, e, n) { var i = n(2); i(i.P, "String", { repeat: n(86) }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(18), o = n(90), a = "startsWith"; i(i.P + i.F * n(92)(a), "String", { startsWith: function (t) { var e = o(this, t, a), n = r(Math.min(1 < arguments.length ? arguments[1] : void 0, e.length)), i = t + ""; return e.slice(n, n + i.length) === i } }) }, function (t, e, n) { "use strict"; n(22)("anchor", function (t) { return function (e) { return t(this, "a", "name", e) } }) }, function (t, e, n) { "use strict"; n(22)("big", function (t) { return function () { return t(this, "big", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("blink", function (t) { return function () { return t(this, "blink", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("bold", function (t) { return function () { return t(this, "b", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("fixed", function (t) { return function () { return t(this, "tt", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("fontcolor", function (t) { return function (e) { return t(this, "font", "color", e) } }) }, function (t, e, n) { "use strict"; n(22)("fontsize", function (t) { return function (e) { return t(this, "font", "size", e) } }) }, function (t, e, n) { "use strict"; n(22)("italics", function (t) { return function () { return t(this, "i", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("link", function (t) { return function (e) { return t(this, "a", "href", e) } }) }, function (t, e, n) { "use strict"; n(22)("small", function (t) { return function () { return t(this, "small", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("strike", function (t) { return function () { return t(this, "strike", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("sub", function (t) { return function () { return t(this, "sub", "", "") } }) }, function (t, e, n) { "use strict"; n(22)("sup", function (t) { return function () { return t(this, "sup", "", "") } }) }, function (t, e, n) { var i = n(2); i(i.S, "Date", { now: function () { return (new Date).getTime() } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(26), o = n(40); i(i.P + i.F * n(8)(function () { return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({ toISOString: function () { return 1 } }) }), "Date", { toJSON: function () { var t = r(this), e = o(t); return "number" != typeof e || isFinite(e) ? t.toISOString() : null } }) }, function (t, e, n) { var i = n(2), r = n(223); i(i.P + i.F * (Date.prototype.toISOString !== r), "Date", { toISOString: r }) }, function (t, e, n) { "use strict"; var i = n(8), r = Date.prototype.getTime, o = Date.prototype.toISOString, a = function (t) { return 9 < t ? t : "0" + t }; t.exports = i(function () { return "0385-07-25T07:06:39.999Z" != o.call(new Date(-50000000000001)) }) || !i(function () { o.call(new Date(NaN)) }) ? function () { if (!isFinite(r.call(this))) throw RangeError("Invalid time value"); var t = this, e = t.getUTCFullYear(), n = t.getUTCMilliseconds(), i = 0 > e ? "-" : 9999 < e ? "+" : ""; return i + ("00000" + Math.abs(e)).slice(i ? -6 : -4) + "-" + a(t.getUTCMonth() + 1) + "-" + a(t.getUTCDate()) + "T" + a(t.getUTCHours()) + ":" + a(t.getUTCMinutes()) + ":" + a(t.getUTCSeconds()) + "." + (99 < n ? n : "0" + a(n)) + "Z" } : o }, function (t, e, n) { var i = Date.prototype, r = "Invalid Date", o = "toString", a = i[o], s = i.getTime; new Date(NaN) + "" != r && n(21)(i, o, function () { var t = s.call(this); return t == t ? a.call(this) : r }) }, function (t, e, n) { var i = n(14)("toPrimitive"), r = Date.prototype; i in r || n(24)(r, i, n(226)) }, function (t, e, n) { "use strict"; var i = n(12), r = n(40), o = "number"; t.exports = function (t) { if ("string" !== t && t !== o && "default" !== t) throw TypeError("Incorrect hint"); return r(i(this), t != o) } }, function (t, e, n) { var i = n(2); i(i.S, "Array", { isArray: n(81) }) }, function (t, e, n) { "use strict"; var i = n(34), r = n(2), o = n(26), a = n(118), s = n(93), c = n(18), u = n(94), l = n(95); r(r.S + r.F * !n(69)(function (t) { Array.from(t) }), "Array", { from: function (t) { var e, n, r, h, f = o(t), p = "function" == typeof this ? this : Array, d = arguments.length, m = 1 < d ? arguments[1] : void 0, v = void 0 !== m, g = 0, y = l(f); if (v && (m = i(m, 2 < d ? arguments[2] : void 0, 2)), void 0 == y || p == Array && s(y)) for (n = new p(e = c(f.length)); e > g; g++)u(n, g, v ? m(f[g], g) : f[g]); else for (h = y.call(f), n = new p; !(r = h.next()).done; g++)u(n, g, v ? a(h, m, [r.value, g], !0) : r.value); return n.length = g, n } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(94); i(i.S + i.F * n(8)(function () { function t() { } return !(Array.of.call(t) instanceof t) }), "Array", { of: function () { for (var t = 0, e = arguments.length, n = new ("function" == typeof this ? this : Array)(e); e > t;)r(n, t, arguments[t++]); return n.length = e, n } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(25), o = [].join; i(i.P + i.F * (n(61) != Object || !n(28)(o)), "Array", { join: function (t) { return o.call(r(this), void 0 === t ? "," : t) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(82), o = n(36), a = n(46), s = n(18), c = [].slice; i(i.P + i.F * n(8)(function () { r && c.call(r) }), "Array", { slice: function (t, e) { var n = s(this.length), i = o(this); if (e = void 0 === e ? n : e, "Array" == i) return c.call(this, t, e); for (var r = a(t, n), u = a(e, n), l = s(u - r), h = Array(l), f = 0; f < l; f++)h[f] = "String" == i ? this.charAt(r + f) : this[r + f]; return h } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(35), o = n(26), a = n(8), s = [].sort, c = [1, 2, 3]; i(i.P + i.F * (a(function () { c.sort(void 0) }) || !a(function () { c.sort(null) }) || !n(28)(s)), "Array", { sort: function (t) { return void 0 === t ? s.call(o(this)) : s.call(o(this), r(t)) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(0), o = n(28)([].forEach, !0); i(i.P + i.F * !o, "Array", { forEach: function (t) { return r(this, t, arguments[1]) } }) }, function (t, e, n) { var i = n(235); t.exports = function (t, e) { return new (i(t))(e) } }, function (t, e, n) { var i = n(10), r = n(81), o = n(14)("species"); t.exports = function (t) { var e; return r(t) && ("function" == typeof (e = t.constructor) && (e === Array || r(e.prototype)) && (e = void 0), i(e) && (null === (e = e[o]) && (e = void 0))), void 0 === e ? Array : e } }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(1); i(i.P + i.F * !n(28)([].map, !0), "Array", { map: function (t) { return r(this, t, arguments[1]) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(2); i(i.P + i.F * !n(28)([].filter, !0), "Array", { filter: function (t) { return r(this, t, arguments[1]) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(3); i(i.P + i.F * !n(28)([].some, !0), "Array", { some: function (t) { return r(this, t, arguments[1]) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(4); i(i.P + i.F * !n(28)([].every, !0), "Array", { every: function (t) { return r(this, t, arguments[1]) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(119); i(i.P + i.F * !n(28)([].reduce, !0), "Array", { reduce: function (t) { return r(this, t, arguments.length, arguments[1], !1) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(119); i(i.P + i.F * !n(28)([].reduceRight, !0), "Array", { reduceRight: function (t) { return r(this, t, arguments.length, arguments[1], !0) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(65)(!1), o = [].indexOf, a = !!o && 0 > 1 / [1].indexOf(1, -0); i(i.P + i.F * (a || !n(28)(o)), "Array", { indexOf: function (t) { return a ? o.apply(this, arguments) || 0 : r(this, t, arguments[1]) } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(25), o = n(38), a = n(18), s = [].lastIndexOf, c = !!s && 0 > 1 / [1].lastIndexOf(1, -0); i(i.P + i.F * (c || !n(28)(s)), "Array", { lastIndexOf: function (t) { if (c) return s.apply(this, arguments) || 0; var e = r(this), n = a(e.length), i = n - 1; for (1 < arguments.length && (i = Math.min(i, o(arguments[1]))), 0 > i && (i = n + i); 0 <= i; i--)if (i in e && e[i] === t) return i || 0; return -1 } }) }, function (t, e, n) { var i = n(2); i(i.P, "Array", { copyWithin: n(120) }), n(54)("copyWithin") }, function (t, e, n) { var i = n(2); i(i.P, "Array", { fill: n(96) }), n(54)("fill") }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(5), o = "find", a = !0; o in [] && [,][o](function () { a = !1 }), i(i.P + i.F * a, "Array", { find: function (t) { return r(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), n(54)(o) }, function (t, e, n) { "use strict"; var i = n(2), r = n(31)(6), o = "findIndex", a = !0; o in [] && [,][o](function () { a = !1 }), i(i.P + i.F * a, "Array", { findIndex: function (t) { return r(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), n(54)(o) }, function (t, e, n) { n(55)("Array") }, function (t, e, n) { var i = n(9), r = n(85), o = n(15).f, a = n(48).f, s = n(91), c = n(98), u = i.RegExp, l = u, h = u.prototype, f = /a/g, p = /a/g, d = new u(f) !== f; if (n(16) && (!d || n(8)(function () { return p[n(14)("match")] = !1, u(f) != f || u(p) == p || "/a/i" != u(f, "i") }))) { u = function (t, e) { var n = this instanceof u, i = s(t), o = void 0 === e; return !n && i && t.constructor === u && o ? t : r(d ? new l(i && !o ? t.source : t, e) : l((i = t instanceof u) ? t.source : t, i && o ? c.call(t) : e), n ? this : h, u) }; for (var m = function (t) { t in u || o(u, t, { configurable: !0, get: function () { return l[t] }, set: function (e) { l[t] = e } }) }, v = a(l), g = 0; v.length > g;)m(v[g++]); h.constructor = u, u.prototype = h, n(21)(i, "RegExp", u) } n(55)("RegExp") }, function (t, e, n) { "use strict"; n(122); var i = n(12), r = n(98), o = n(16), a = "toString", s = /./[a], c = function (t) { n(21)(RegExp.prototype, a, t, !0) }; n(8)(function () { return "/a/b" != s.call({ source: "a", flags: "b" }) }) ? c(function () { var t = i(this); return "/".concat(t.source, "/", "flags" in t ? t.flags : !o && t instanceof RegExp ? r.call(t) : void 0) }) : s.name != a && c(function () { return s.call(this) }) }, function (t, e, n) { n(70)("match", 1, function (t, e, n) { return [function (n) { "use strict"; var i = t(this), r = void 0 == n ? void 0 : n[e]; return void 0 === r ? new RegExp(n)[e](i + "") : r.call(n, i) }, n] }) }, function (t, e, n) { n(70)("replace", 2, function (t, e, n) { return [function (i, r) { "use strict"; var o = t(this), a = void 0 == i ? void 0 : i[e]; return void 0 === a ? n.call(o + "", i, r) : a.call(i, o, r) }, n] }) }, function (t, e, n) { n(70)("search", 1, function (t, e, n) { return [function (n) { "use strict"; var i = t(this), r = void 0 == n ? void 0 : n[e]; return void 0 === r ? new RegExp(n)[e](i + "") : r.call(n, i) }, n] }) }, function (t, e, n) { n(70)("split", 2, function (t, e, i) { "use strict"; var r = n(91), o = i, a = [].push, s = "split", c = "length", u = "lastIndex"; if ("c" == "abbc"[s](/(b)*/)[1] || 4 != "test"[s](/(?:)/, -1)[c] || 2 != "ab"[s](/(?:ab)*/)[c] || 4 != "."[s](/(.?)(.?)/)[c] || 1 < "."[s](/()()/)[c] || ""[s](/.?/)[c]) { var l = void 0 === /()??/.exec("")[1]; i = function (t, e) { var n = this + ""; if (void 0 === t && 0 === e) return []; if (!r(t)) return o.call(n, t, e); var i, s, h, f, p, d = [], m = (t.ignoreCase ? "i" : "") + (t.multiline ? "m" : "") + (t.unicode ? "u" : "") + (t.sticky ? "y" : ""), v = 0, g = void 0 === e ? 4294967295 : e >>> 0, y = new RegExp(t.source, m + "g"); for (l || (i = new RegExp("^" + y.source + "$(?!\\s)", m)); (s = y.exec(n)) && !((h = s.index + s[0][c]) > v && (d.push(n.slice(v, s.index)), !l && 1 < s[c] && s[0].replace(i, function () { for (p = 1; p < arguments[c] - 2; p++)void 0 === arguments[p] && (s[p] = void 0) }), 1 < s[c] && s.index < n[c] && a.apply(d, s.slice(1)), f = s[0][c], v = h, d[c] >= g));)y[u] === s.index && y[u]++; return v === n[c] ? (f || !y.test("")) && d.push("") : d.push(n.slice(v)), d[c] > g ? d.slice(0, g) : d } } else "0"[s](void 0, 0)[c] && (i = function (t, e) { return void 0 === t && 0 === e ? [] : o.call(this, t, e) }); return [function (n, r) { var o = t(this), a = void 0 == n ? void 0 : n[e]; return void 0 === a ? i.call(o + "", n, r) : a.call(n, o, r) }, i] }) }, function (t, e, n) { var i = n(9), r = n(99).set, o = i.MutationObserver || i.WebKitMutationObserver, a = i.process, s = i.Promise, c = "process" == n(36)(a); t.exports = function () { var t, e, n, u = function () { var i, r; for (c && (i = a.domain) && i.exit(); t;) { r = t.fn, t = t.next; try { r() } catch (r) { throw t ? n() : e = void 0, r } } e = void 0, i && i.enter() }; if (c) n = function () { a.nextTick(u) }; else if (!o || i.navigator && i.navigator.standalone) if (s && s.resolve) { var l = s.resolve(void 0); n = function () { l.then(u) } } else n = function () { r.call(i, u) }; else { var h = !0, f = document.createTextNode(""); new o(u).observe(f, { characterData: !0 }), n = function () { f.data = h = !h } } return function (i) { var r = { fn: i, next: void 0 }; e && (e.next = r), t || (t = r, n()), e = r } } }, function (t) { t.exports = function (t) { try { return { e: !1, v: t() } } catch (t) { return { e: !0, v: t } } } }, function (t, e, n) { "use strict"; var i = n(126), r = n(58), o = "Map"; t.exports = n(74)(o, function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { get: function (t) { var e = i.getEntry(r(this, o), t); return e && e.v }, set: function (t, e) { return i.def(r(this, o), 0 === t ? 0 : t, e) } }, i, !0) }, function (t, e, n) { "use strict"; var i = n(126), r = n(58); t.exports = n(74)("Set", function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { add: function (t) { return i.def(r(this, "Set"), t = 0 === t ? 0 : t, t) } }, i) }, function (t, e, n) { "use strict"; var i, r = n(31)(0), o = n(21), a = n(41), s = n(108), c = n(127), u = n(10), l = n(8), h = n(58), f = "WeakMap", p = a.getWeak, d = Object.isExtensible, m = c.ufstore, v = {}, g = function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, y = { get: function (t) { if (u(t)) { var e = p(t); return !0 === e ? m(h(this, f)).get(t) : e ? e[this._i] : void 0 } }, set: function (t, e) { return c.def(h(this, f), t, e) } }, b = t.exports = n(74)(f, g, y, c, !0, !0); l(function () { return 7 != (new b).set((Object.freeze || Object)(v), 7).get(v) }) && (s((i = c.getConstructor(g, f)).prototype, y), a.NEED = !0, r(["delete", "has", "get", "set"], function (t) { var e = b.prototype, n = e[t]; o(e, t, function (e, r) { if (u(e) && !d(e)) { this._f || (this._f = new i); var o = this._f[t](e, r); return "set" == t ? this : o } return n.call(this, e, r) }) })) }, function (t, e, n) { "use strict"; var i = n(127), r = n(58), o = "WeakSet"; n(74)(o, function (t) { return function () { return t(this, 0 < arguments.length ? arguments[0] : void 0) } }, { add: function (t) { return i.def(r(this, o), t, !0) } }, i, !1, !0) }, function (t, e, n) { "use strict"; var i = n(2), r = n(75), o = n(100), a = n(12), s = n(46), c = n(18), u = n(10), l = n(9).ArrayBuffer, h = n(72), f = o.ArrayBuffer, p = o.DataView, d = r.ABV && l.isView, m = f.prototype.slice, v = r.VIEW, g = "ArrayBuffer"; i(i.G + i.W + i.F * (l !== f), { ArrayBuffer: f }), i(i.S + i.F * !r.CONSTR, g, { isView: function (t) { return d && d(t) || u(t) && v in t } }), i(i.P + i.U + i.F * n(8)(function () { return !new f(2).slice(1, void 0).byteLength }), g, { slice: function (t, e) { if (void 0 !== m && void 0 === e) return m.call(a(this), t); for (var n = a(this).byteLength, i = s(t, n), r = s(void 0 === e ? n : e, n), o = new (h(this, f))(c(r - i)), u = new p(this), l = new p(o), d = 0; i < r;)l.setUint8(d++, u.getUint8(i++)); return o } }), n(55)(g) }, function (t, e, n) { var i = n(2); i(i.G + i.W + i.F * !n(75).ABV, { DataView: n(100).DataView }) }, function (t, e, n) { n(39)("Int8", 1, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Uint8", 1, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Uint8", 1, function (t) { return function (e, n, i) { return t(this, e, n, i) } }, !0) }, function (t, e, n) { n(39)("Int16", 2, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Uint16", 2, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Int32", 4, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Uint32", 4, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Float32", 4, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { n(39)("Float64", 8, function (t) { return function (e, n, i) { return t(this, e, n, i) } }) }, function (t, e, n) { var i = n(2), r = n(35), o = n(12), a = (n(9).Reflect || {}).apply, s = Function.apply; i(i.S + i.F * !n(8)(function () { a(function () { }) }), "Reflect", { apply: function (t, e, n) { var i = r(t), c = o(n); return a ? a(i, e, c) : s.call(i, e, c) } }) }, function (t, e, n) { var i = n(2), r = n(47), o = n(35), a = n(12), s = n(10), c = n(8), u = n(109), l = (n(9).Reflect || {}).construct, h = c(function () { function t() { } return !(l(function () { }, [], t) instanceof t) }), f = !c(function () { l(function () { }) }); i(i.S + i.F * (h || f), "Reflect", { construct: function (t, e) { o(t), a(e); var n = 3 > arguments.length ? t : o(arguments[2]); if (f && !h) return l(t, e, n); if (t == n) { switch (e.length) { case 0: return new t; case 1: return new t(e[0]); case 2: return new t(e[0], e[1]); case 3: return new t(e[0], e[1], e[2]); case 4: return new t(e[0], e[1], e[2], e[3]) }var i = [null]; return i.push.apply(i, e), new (u.apply(t, i)) } var c = n.prototype, p = r(s(c) ? c : Object.prototype), d = Function.apply.call(t, p, e); return s(d) ? d : p } }) }, function (t, e, n) { var i = n(15), r = n(2), o = n(12), a = n(40); r(r.S + r.F * n(8)(function () { Reflect.defineProperty(i.f({}, 1, { value: 1 }), 1, { value: 2 }) }), "Reflect", { defineProperty: function (t, e, n) { o(t), e = a(e, !0), o(n); try { return i.f(t, e, n), !0 } catch (e) { return !1 } } }) }, function (t, e, n) { var i = n(2), r = n(29).f, o = n(12); i(i.S, "Reflect", { deleteProperty: function (t, e) { var n = r(o(t), e); return (!n || n.configurable) && delete t[e] } }) }, function (t, e, n) { "use strict"; var i = n(2), r = n(12), o = function (t) { this._t = r(t), this._i = 0; var e, n = this._k = []; for (e in t) n.push(e) }; n(117)(o, "Object", function () { var t, e = this, n = e._k; do { if (e._i >= n.length) return { value: void 0, done: !0 } } while (!((t = n[e._i++]) in e._t)); return { value: t, done: !1 } }), i(i.S, "Reflect", { enumerate: function (t) { return new o(t) } }) }, function (t, e, n) { var i = n(29), r = n(49), o = n(23), a = n(2), s = n(10), c = n(12); a(a.S, "Reflect", { get: function t(e, n) { var a, u, l = 3 > arguments.length ? e : arguments[2]; return c(e) === l ? e[n] : (a = i.f(e, n)) ? o(a, "value") ? a.value : void 0 === a.get ? void 0 : a.get.call(l) : s(u = r(e)) ? t(u, n, l) : void 0 } }) }, function (t, e, n) { var i = n(29), r = n(2), o = n(12); r(r.S, "Reflect", { getOwnPropertyDescriptor: function (t, e) { return i.f(o(t), e) } }) }, function (t, e, n) { var i = n(2), r = n(49), o = n(12); i(i.S, "Reflect", { getPrototypeOf: function (t) { return r(o(t)) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Reflect", { has: function (t, e) { return e in t } }) }, function (t, e, n) { var i = n(2), r = n(12), o = Object.isExtensible; i(i.S, "Reflect", { isExtensible: function (t) { return r(t), !o || o(t) } }) }, function (t, e, n) { var i = n(2); i(i.S, "Reflect", { ownKeys: n(129) }) }, function (t, e, n) { var i = n(2), r = n(12), o = Object.preventExtensions; i(i.S, "Reflect", { preventExtensions: function (t) { r(t); try { return o && o(t), !0 } catch (t) { return !1 } } }) }, function (t, e, n) { var i = n(15), r = n(29), o = n(49), a = n(23), s = n(2), c = n(42), u = n(12), l = n(10); s(s.S, "Reflect", { set: function t(e, n, s) { var h, f, p = 4 > arguments.length ? e : arguments[3], d = r.f(u(e), n); if (!d) { if (l(f = o(e))) return t(f, n, s, p); d = c(0) } if (a(d, "value")) { if (!1 === d.writable || !l(p)) return !1; if (h = r.f(p, n)) { if (h.get || h.set || !1 === h.writable) return !1; h.value = s, i.f(p, n, h) } else i.f(p, n, c(0, s)); return !0 } return void 0 !== d.set && (d.set.call(p, s), !0) } }) }, function (t, e, n) { var i = n(2), r = n(83); r && i(i.S, "Reflect", { setPrototypeOf: function (t, e) { r.check(t, e); try { return r.set(t, e), !0 } catch (e) { return !1 } } }) }, function (t, e, n) { n(287), t.exports = n(17).Array.includes }, function (t, e, n) { "use strict"; var i = n(2), r = n(65)(!0); i(i.P, "Array", { includes: function (t) { return r(this, t, 1 < arguments.length ? arguments[1] : void 0) } }), n(54)("includes") }, function (t, e, n) { n(289), t.exports = n(17).String.padStart }, function (t, e, n) { "use strict"; var i = n(2), r = n(130), o = n(73); i(i.P + i.F * /Version\/10\.\d+(\.\d+)? Safari\//.test(o), "String", { padStart: function (t) { return r(this, t, 1 < arguments.length ? arguments[1] : void 0, !0) } }) }, function (t, e, n) { n(291), t.exports = n(17).String.padEnd }, function (t, e, n) { "use strict"; var i = n(2), r = n(130), o = n(73); i(i.P + i.F * /Version\/10\.\d+(\.\d+)? Safari\//.test(o), "String", { padEnd: function (t) { return r(this, t, 1 < arguments.length ? arguments[1] : void 0, !1) } }) }, function (t, e, n) { n(293), t.exports = n(78).f("asyncIterator") }, function (t, e, n) { n(104)("asyncIterator") }, function (t, e, n) { n(295), t.exports = n(17).Object.getOwnPropertyDescriptors }, function (t, e, n) { var i = n(2), r = n(129), o = n(25), a = n(29), s = n(94); i(i.S, "Object", { getOwnPropertyDescriptors: function (t) { for (var e, n, i = o(t), c = a.f, u = r(i), l = {}, h = 0; u.length > h;)void 0 !== (n = c(i, e = u[h++])) && s(l, e, n); return l } }) }, function (t, e, n) { n(297), t.exports = n(17).Object.values }, function (t, e, n) { var i = n(2), r = n(131)(!1); i(i.S, "Object", { values: function (t) { return r(t) } }) }, function (t, e, n) { n(299), t.exports = n(17).Object.entries }, function (t, e, n) { var i = n(2), r = n(131)(!0); i(i.S, "Object", { entries: function (t) { return r(t) } }) }, function (t, e, n) { "use strict"; n(123), n(301), t.exports = n(17).Promise.finally }, function (t, e, n) { "use strict"; var i = n(2), r = n(17), o = n(9), a = n(72), s = n(125); i(i.P + i.R, "Promise", { finally: function (t) { var e = a(this, r.Promise || o.Promise), n = "function" == typeof t; return this.then(n ? function (n) { return s(e, t()).then(function () { return n }) } : t, n ? function (n) { return s(e, t()).then(function () { throw n }) } : t) } }) }, function (t, e, n) { n(303), n(304), n(305), t.exports = n(17) }, function (t, e, n) { var i = n(9), r = n(2), o = n(73), a = [].slice, s = /MSIE .\./.test(o), c = function (t) { return function (e, n) { var i = 2 < arguments.length, r = !!i && a.call(arguments, 2); return t(i ? function () { ("function" == typeof e ? e : Function(e)).apply(this, r) } : e, n) } }; r(r.G + r.B + r.F * s, { setTimeout: c(i.setTimeout), setInterval: c(i.setInterval) }) }, function (t, e, n) { var i = n(2), r = n(99); i(i.G + i.B, { setImmediate: r.set, clearImmediate: r.clear }) }, function (t, e, n) { for (var i = n(97), r = n(45), o = n(21), a = n(9), s = n(24), c = n(53), u = n(14), l = u("iterator"), h = u("toStringTag"), f = c.Array, p = { CSSRuleList: !0, CSSStyleDeclaration: !1, CSSValueList: !1, ClientRectList: !1, DOMRectList: !1, DOMStringList: !1, DOMTokenList: !0, DataTransferItemList: !1, FileList: !1, HTMLAllCollection: !1, HTMLCollection: !1, HTMLFormElement: !1, HTMLSelectElement: !1, MediaList: !0, MimeTypeArray: !1, NamedNodeMap: !1, NodeList: !0, PaintRequestList: !1, Plugin: !1, PluginArray: !1, SVGLengthList: !1, SVGNumberList: !1, SVGPathSegList: !1, SVGPointList: !1, SVGStringList: !1, SVGTransformList: !1, SourceBufferList: !1, StyleSheetList: !0, TextTrackCueList: !1, TextTrackList: !1, TouchList: !1 }, d = r(p), m = 0; m < d.length; m++) { var v, g = d[m], y = p[g], b = a[g], _ = b && b.prototype; if (_ && (_[l] || s(_, l, f), _[h] || s(_, h, g), c[g] = f, y)) for (v in i) _[v] || o(_, v, i[v], !0) } }, function (t) { !function (e) { "use strict"; function n(t, e, n, i) { var o = e && e.prototype instanceof r ? e : r, a = Object.create(o.prototype), s = new p(i || []); return a._invoke = u(t, n, s), a } function i(t, e, n) { try { return { type: "normal", arg: t.call(e, n) } } catch (t) { return { type: "throw", arg: t } } } function r() { } function o() { } function a() { } function s(t) { ["next", "throw", "return"].forEach(function (e) { t[e] = function (t) { return this._invoke(e, t) } }) } function c(t) { function e(n, r, o, a) { var s = i(t[n], t, r); if ("throw" !== s.type) { var c = s.arg, u = c.value; return u && "object" == typeof u && g.call(u, "__await") ? Promise.resolve(u.__await).then(function (t) { e("next", t, o, a) }, function (t) { e("throw", t, o, a) }) : Promise.resolve(u).then(function (t) { c.value = t, o(c) }, a) } a(s.arg) } var n; this._invoke = function (t, i) { function r() { return new Promise(function (n, r) { e(t, i, n, r) }) } return n = n ? n.then(r, r) : r() } } function u(t, e, n) { var r = S; return function (o, a) { if (r === P) throw new Error("Generator is already running"); if (r === E) { if ("throw" === o) throw a; return { value: void 0, done: !0 } } for (n.method = o, n.arg = a; ;) { var s = n.delegate; if (s) { var c = l(s, n); if (c) { if (c === A) continue; return c } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if (r === S) throw r = E, n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); r = P; var u = i(t, e, n); if ("normal" === u.type) { if (r = n.done ? E : M, u.arg === A) continue; return { value: u.arg, done: n.done } } "throw" === u.type && (r = E, n.method = "throw", n.arg = u.arg) } } } function l(t, e) { var n = t.iterator[e.method]; if (void 0 === n) { if (e.delegate = null, "throw" === e.method) { if (t.iterator.return && (e.method = "return", e.arg = void 0, l(t, e), "throw" === e.method)) return A; e.method = "throw", e.arg = new TypeError("The iterator does not provide a 'throw' method") } return A } var r = i(n, t.iterator, e.arg); if ("throw" === r.type) return e.method = "throw", e.arg = r.arg, e.delegate = null, A; var o = r.arg; return o ? o.done ? (e[t.resultName] = o.value, e.next = t.nextLoc, "return" !== e.method && (e.method = "next", e.arg = void 0), e.delegate = null, A) : o : (e.method = "throw", e.arg = new TypeError("iterator result is not an object"), e.delegate = null, A) } function h(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e) } function f(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e } function p(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(h, this), this.reset(!0) } function d(t) { if (t) { var e = t[b]; if (e) return e.call(t); if ("function" == typeof t.next) return t; if (!isNaN(t.length)) { var n = -1, i = function e() { for (; ++n < t.length;)if (g.call(t, n)) return e.value = t[n], e.done = !1, e; return e.value = void 0, e.done = !0, e }; return i.next = i } } return { next: m } } function m() { return { value: void 0, done: !0 } } var v = Object.prototype, g = v.hasOwnProperty, y = "function" == typeof Symbol ? Symbol : {}, b = y.iterator || "@@iterator", _ = y.asyncIterator || "@@asyncIterator", x = y.toStringTag || "@@toStringTag", w = "object" == typeof t, T = e.regeneratorRuntime; if (T) w && (t.exports = T); else { (T = e.regeneratorRuntime = w ? t.exports : {}).wrap = n; var S = "suspendedStart", M = "suspendedYield", P = "executing", E = "completed", A = {}, C = {}; C[b] = function () { return this }; var L = Object.getPrototypeOf, R = L && L(L(d([]))); R && R !== v && g.call(R, b) && (C = R); var O = a.prototype = r.prototype = Object.create(C); o.prototype = O.constructor = a, a.constructor = o, a[x] = o.displayName = "GeneratorFunction", T.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === o || "GeneratorFunction" === (e.displayName || e.name)) }, T.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, a) : (t.__proto__ = a, !(x in t) && (t[x] = "GeneratorFunction")), t.prototype = Object.create(O), t }, T.awrap = function (t) { return { __await: t } }, s(c.prototype), c.prototype[_] = function () { return this }, T.AsyncIterator = c, T.async = function (t, e, i, r) { var o = new c(n(t, e, i, r)); return T.isGeneratorFunction(e) ? o : o.next().then(function (t) { return t.done ? t.value : o.next() }) }, s(O), O[x] = "Generator", O[b] = function () { return this }, O.toString = function () { return "[object Generator]" }, T.keys = function (t) { var e = []; for (var n in t) e.push(n); return e.reverse(), function n() { for (; e.length;) { var i = e.pop(); if (i in t) return n.value = i, n.done = !1, n } return n.done = !0, n } }, T.values = d, p.prototype = { constructor: p, reset: function (t) { if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(f), !t) for (var e in this) "t" === e.charAt(0) && g.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = void 0) }, stop: function () { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval }, dispatchException: function (t) { function e(e, i) { return o.type = "throw", o.arg = t, n.next = e, i && (n.method = "next", n.arg = void 0), !!i } if (this.done) throw t; for (var n = this, i = this.tryEntries.length - 1; 0 <= i; --i) { var r = this.tryEntries[i], o = r.completion; if ("root" === r.tryLoc) return e("end"); if (r.tryLoc <= this.prev) { var a = g.call(r, "catchLoc"), s = g.call(r, "finallyLoc"); if (a && s) { if (this.prev < r.catchLoc) return e(r.catchLoc, !0); if (this.prev < r.finallyLoc) return e(r.finallyLoc) } else if (a) { if (this.prev < r.catchLoc) return e(r.catchLoc, !0) } else { if (!s) throw new Error("try statement without catch or finally"); if (this.prev < r.finallyLoc) return e(r.finallyLoc) } } } }, abrupt: function (t, e) { for (var n, i = this.tryEntries.length - 1; 0 <= i; --i)if ((n = this.tryEntries[i]).tryLoc <= this.prev && g.call(n, "finallyLoc") && this.prev < n.finallyLoc) { var r = n; break } r && ("break" === t || "continue" === t) && r.tryLoc <= e && e <= r.finallyLoc && (r = null); var o = r ? r.completion : {}; return o.type = t, o.arg = e, r ? (this.method = "next", this.next = r.finallyLoc, A) : this.complete(o) }, complete: function (t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), A }, finish: function (t) { for (var e, n = this.tryEntries.length - 1; 0 <= n; --n)if ((e = this.tryEntries[n]).finallyLoc === t) return this.complete(e.completion, e.afterLoc), f(e), A }, catch: function (t) { for (var e, n = this.tryEntries.length - 1; 0 <= n; --n)if ((e = this.tryEntries[n]).tryLoc === t) { var i = e.completion; if ("throw" === i.type) { var r = i.arg; f(e) } return r } throw new Error("illegal catch attempt") }, delegateYield: function (t, e, n) { return this.delegate = { iterator: d(t), resultName: e, nextLoc: n }, "next" === this.method && (this.arg = void 0), A } } } }(function () { return this }() || Function("return this")()) }, function (t) { "use strict"; function e() { } function n(t, e, n, i, r) { if ("function" != typeof n) throw new TypeError("The listener must be a function"); var o = new function (t, e, n) { this.fn = t, this.context = e, this.once = n || !1 }(n, i || t, r), s = a ? a + e : e; return t._events[s] ? t._events[s].fn ? t._events[s] = [t._events[s], o] : t._events[s].push(o) : (t._events[s] = o, t._eventsCount++), t } function i(t, n) { 0 == --t._eventsCount ? t._events = new e : delete t._events[n] } function r() { this._events = new e, this._eventsCount = 0 } var o = Object.prototype.hasOwnProperty, a = "~"; Object.create && (e.prototype = Object.create(null), !(new e).__proto__ && (a = !1)), r.prototype.eventNames = function () { var t, e, n = []; if (0 === this._eventsCount) return n; for (e in t = this._events) o.call(t, e) && n.push(a ? e.slice(1) : e); return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n }, r.prototype.listeners = function (t) { var e = a ? a + t : t, n = this._events[e]; if (!n) return []; if (n.fn) return [n.fn]; for (var i = 0, r = n.length, o = Array(r); i < r; i++)o[i] = n[i].fn; return o }, r.prototype.listenerCount = function (t) { var e = a ? a + t : t, n = this._events[e]; return n ? n.fn ? 1 : n.length : 0 }, r.prototype.emit = function (t, e, n, i, r, o) { var s = a ? a + t : t; if (!this._events[s]) return !1; var c, u, l = this._events[s], h = arguments.length; if (l.fn) { switch (l.once && this.removeListener(t, l.fn, void 0, !0), h) { case 1: return l.fn.call(l.context), !0; case 2: return l.fn.call(l.context, e), !0; case 3: return l.fn.call(l.context, e, n), !0; case 4: return l.fn.call(l.context, e, n, i), !0; case 5: return l.fn.call(l.context, e, n, i, r), !0; case 6: return l.fn.call(l.context, e, n, i, r, o), !0 }for (u = 1, c = Array(h - 1); u < h; u++)c[u - 1] = arguments[u]; l.fn.apply(l.context, c) } else { var f, p = l.length; for (u = 0; u < p; u++)switch (l[u].once && this.removeListener(t, l[u].fn, void 0, !0), h) { case 1: l[u].fn.call(l[u].context); break; case 2: l[u].fn.call(l[u].context, e); break; case 3: l[u].fn.call(l[u].context, e, n); break; case 4: l[u].fn.call(l[u].context, e, n, i); break; default: if (!c) for (f = 1, c = Array(h - 1); f < h; f++)c[f - 1] = arguments[f]; l[u].fn.apply(l[u].context, c) } } return !0 }, r.prototype.on = function (t, e, i) { return n(this, t, e, i, !1) }, r.prototype.once = function (t, e, i) { return n(this, t, e, i, !0) }, r.prototype.removeListener = function (t, e, n, r) { var o = a ? a + t : t; if (!this._events[o]) return this; if (!e) return i(this, o), this; var s = this._events[o]; if (s.fn) s.fn !== e || r && !s.once || n && s.context !== n || i(this, o); else { for (var c = 0, u = [], l = s.length; c < l; c++)(s[c].fn !== e || r && !s[c].once || n && s[c].context !== n) && u.push(s[c]); u.length ? this._events[o] = 1 === u.length ? u[0] : u : i(this, o) } return this }, r.prototype.removeAllListeners = function (t) { var n; return t ? (n = a ? a + t : t, this._events[n] && i(this, n)) : (this._events = new e, this._eventsCount = 0), this }, r.prototype.off = r.prototype.removeListener, r.prototype.addListener = r.prototype.on, r.prefixed = a, r.EventEmitter = r, t.exports = r }, function (t, e, n) { !function (t) { t(function () { "use strict"; function t(t, e) { return null != t && null != e && t.toLowerCase() === e.toLowerCase() } function e(t, e) { var n, i, r = t.length; if (!r || !e) return !1; for (n = e.toLowerCase(), i = 0; i < r; ++i)if (n === t[i].toLowerCase()) return !0; return !1 } function n(t) { for (var e in t) a.call(t, e) && (t[e] = new RegExp(t[e], "i")) } function i(t, e) { this.ua = function (t) { return (t || "").substr(0, 500) }(t), this._cache = {}, this.maxPhoneWidth = e || 600 } var r, o = { mobileDetectRules: { phones: { iPhone: "\\biPhone\\b|\\biPod\\b", BlackBerry: "BlackBerry|\\bBB10\\b|rim[0-9]+", HTC: "HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel", Nexus: "Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6", Dell: "Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b", Motorola: "Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052", Samsung: "\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F", LG: "\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)", Sony: "SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533", Asus: "Asus.*Galaxy|PadFone.*Mobile", NokiaLumia: "Lumia [0-9]{3,4}", Micromax: "Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b", Palm: "PalmSource|Palm", Vertu: "Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature", Pantech: "PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790", Fly: "IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250", Wiko: "KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM", iMobile: "i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)", SimValley: "\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b", Wolfgang: "AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q", Alcatel: "Alcatel", Nintendo: "Nintendo (3DS|Switch)", Amoi: "Amoi", INQ: "INQ", GenericPhone: "Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser" }, tablets: { iPad: "iPad|iPad.*Mobile", NexusTablet: "Android.*Nexus[\\s]+(7|9|10)", GoogleTablet: "Android.*Pixel C", SamsungTablet: "SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708", Kindle: "Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)", SurfaceTablet: "Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)", HPTablet: "HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10", AsusTablet: "^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b", BlackBerryTablet: "PlayBook|RIM Tablet", HTCtablet: "HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410", MotorolaTablet: "xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617", NookTablet: "Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2", AcerTablet: "Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30", ToshibaTablet: "Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO", LGTablet: "\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b", FujitsuTablet: "Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b", PrestigioTablet: "PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002", LenovoTablet: "Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304F|TB-X304L|TB-8703F|Tab2A7-10F", DellTablet: "Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7", YarvikTablet: "Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b", MedionTablet: "Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB", ArnovaTablet: "97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2", IntensoTablet: "INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004", IRUTablet: "M702pro", MegafonTablet: "MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b", EbodaTablet: "E-Boda (Supreme|Impresspeed|Izzycomm|Essential)", AllViewTablet: "Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)", ArchosTablet: "\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b", AinolTablet: "NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark", NokiaLumiaTablet: "Lumia 2520", SonyTablet: "Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31", PhilipsTablet: "\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b", CubeTablet: "Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT", CobyTablet: "MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010", MIDTablet: "M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10", MSITablet: "MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b", SMiTTablet: "Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)", RockChipTablet: "Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A", FlyTablet: "IQ310|Fly Vision", bqTablet: "Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus", HuaweiTablet: "MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09", NecTablet: "\\bN-06D|\\bN-08D", PantechTablet: "Pantech.*P4100", BronchoTablet: "Broncho.*(N701|N708|N802|a710)", VersusTablet: "TOUCHPAD.*[78910]|\\bTOUCHTAB\\b", ZyncTablet: "z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900", PositivoTablet: "TB07STA|TB10STA|TB07FTA|TB10FTA", NabiTablet: "Android.*\\bNabi", KoboTablet: "Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build", DanewTablet: "DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b", TexetTablet: "NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE", PlaystationTablet: "Playstation.*(Portable|Vita)", TrekstorTablet: "ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab", PyleAudioTablet: "\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b", AdvanTablet: "Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ", DanyTechTablet: "Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1", GalapadTablet: "Android.*\\bG1\\b", MicromaxTablet: "Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b", KarbonnTablet: "Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b", AllFineTablet: "Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide", PROSCANTablet: "\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b", YONESTablet: "BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026", ChangJiaTablet: "TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503", GUTablet: "TX-A1301|TX-M9002|Q702|kf026", PointOfViewTablet: "TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10", OvermaxTablet: "OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027", HCLTablet: "HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync", DPSTablet: "DPS Dream 9|DPS Dual 7", VistureTablet: "V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10", CrestaTablet: "CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989", MediatekTablet: "\\bMT8125|MT8389|MT8135|MT8377\\b", ConcordeTablet: "Concorde([ ]+)?Tab|ConCorde ReadMan", GoCleverTablet: "GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042", ModecomTablet: "FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003", VoninoTablet: "\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b", ECSTablet: "V07OT2|TM105A|S10OT1|TR10CS1", StorexTablet: "eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab", VodafoneTablet: "SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497", EssentielBTablet: "Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2", RossMoorTablet: "RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711", iMobileTablet: "i-mobile i-note", TolinoTablet: "tolino tab [0-9.]+|tolino shine", AudioSonicTablet: "\\bC-22Q|T7-QC|T-17B|T-17P\\b", AMPETablet: "Android.* A78 ", SkkTablet: "Android.* (SKYPAD|PHOENIX|CYCLOPS)", TecnoTablet: "TECNO P9|TECNO DP8D", JXDTablet: "Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b", iJoyTablet: "Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)", FX2Tablet: "FX2 PAD7|FX2 PAD10", XoroTablet: "KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151", ViewsonicTablet: "ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a", VerizonTablet: "QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1", OdysTablet: "LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10", CaptivaTablet: "CAPTIVA PAD", IconbitTablet: "NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S", TeclastTablet: "T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi", OndaTablet: "\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+", JaytechTablet: "TPC-PA762", BlaupunktTablet: "Endeavour 800NG|Endeavour 1010", DigmaTablet: "\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b", EvolioTablet: "ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b", LavaTablet: "QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b", AocTablet: "MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712", MpmanTablet: "MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010", CelkonTablet: "CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b", WolderTablet: "miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b", MediacomTablet: "M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA", MiTablet: "\\bMI PAD\\b|\\bHM NOTE 1W\\b", NibiruTablet: "Nibiru M1|Nibiru Jupiter One", NexoTablet: "NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI", LeaderTablet: "TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100", UbislateTablet: "UbiSlate[\\s]?7C", PocketBookTablet: "Pocketbook", KocasoTablet: "\\b(TB-1207)\\b", HisenseTablet: "\\b(F5281|E2371)\\b", Hudl: "Hudl HT7S3|Hudl 2", TelstraTablet: "T-Hub2", GenericTablet: "Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107" }, oss: { AndroidOS: "Android", BlackBerryOS: "blackberry|\\bBB10\\b|rim tablet os", PalmOS: "PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino", SymbianOS: "Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b", WindowsMobileOS: "Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;", WindowsPhoneOS: "Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;", iOS: "\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia", MeeGoOS: "MeeGo", MaemoOS: "Maemo", JavaOS: "J2ME/|\\bMIDP\\b|\\bCLDC\\b", webOS: "webOS|hpwOS", badaOS: "\\bBada\\b", BREWOS: "BREW" }, uas: { Chrome: "\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?", Dolfin: "\\bDolfin\\b", Opera: "Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+", Skyfire: "Skyfire", Edge: "Mobile Safari/[.0-9]* Edge", IE: "IEMobile|MSIEMobile", Firefox: "fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS", Bolt: "bolt", TeaShark: "teashark", Blazer: "Blazer", Safari: "Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari", UCBrowser: "UC.*Browser|UCWEB", baiduboxapp: "baiduboxapp", baidubrowser: "baidubrowser", DiigoBrowser: "DiigoBrowser", Puffin: "Puffin", Mercury: "\\bMercury\\b", ObigoBrowser: "Obigo", NetFront: "NF-Browser", GenericBrowser: "NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger", PaleMoon: "Android.*PaleMoon|Mobile.*PaleMoon" }, props: { Mobile: "Mobile/[VER]", Build: "Build/[VER]", Version: "Version/[VER]", VendorID: "VendorID/[VER]", iPad: "iPad.*CPU[a-z ]+[VER]", iPhone: "iPhone.*CPU[a-z ]+[VER]", iPod: "iPod.*CPU[a-z ]+[VER]", Kindle: "Kindle/[VER]", Chrome: ["Chrome/[VER]", "CriOS/[VER]", "CrMo/[VER]"], Coast: ["Coast/[VER]"], Dolfin: "Dolfin/[VER]", Firefox: ["Firefox/[VER]", "FxiOS/[VER]"], Fennec: "Fennec/[VER]", Edge: "Edge/[VER]", IE: ["IEMobile/[VER];", "IEMobile [VER]", "MSIE [VER];", "Trident/[0-9.]+;.*rv:[VER]"], NetFront: "NetFront/[VER]", NokiaBrowser: "NokiaBrowser/[VER]", Opera: [" OPR/[VER]", "Opera Mini/[VER]", "Version/[VER]"], "Opera Mini": "Opera Mini/[VER]", "Opera Mobi": "Version/[VER]", UCBrowser: ["UCWEB[VER]", "UC.*Browser/[VER]"], MQQBrowser: "MQQBrowser/[VER]", MicroMessenger: "MicroMessenger/[VER]", baiduboxapp: "baiduboxapp/[VER]", baidubrowser: "baidubrowser/[VER]", SamsungBrowser: "SamsungBrowser/[VER]", Iron: "Iron/[VER]", Safari: ["Version/[VER]", "Safari/[VER]"], Skyfire: "Skyfire/[VER]", Tizen: "Tizen/[VER]", Webkit: "webkit[ /][VER]", PaleMoon: "PaleMoon/[VER]", Gecko: "Gecko/[VER]", Trident: "Trident/[VER]", Presto: "Presto/[VER]", Goanna: "Goanna/[VER]", iOS: " \\bi?OS\\b [VER][ ;]{1}", Android: "Android [VER]", BlackBerry: ["BlackBerry[\\w]+/[VER]", "BlackBerry.*Version/[VER]", "Version/[VER]"], BREW: "BREW [VER]", Java: "Java/[VER]", "Windows Phone OS": ["Windows Phone OS [VER]", "Windows Phone [VER]"], "Windows Phone": "Windows Phone [VER]", "Windows CE": "Windows CE/[VER]", "Windows NT": "Windows NT [VER]", Symbian: ["SymbianOS/[VER]", "Symbian/[VER]"], webOS: ["webOS/[VER]", "hpwOS/[VER];"] }, utils: { Bot: "Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom", MobileBot: "Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2", DesktopMode: "WPDesktop", TV: "SonyDTV|HbbTV", WebKit: "(webkit)[ /]([\\w.]+)", Console: "\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b", Watch: "SM-V700" } }, detectMobileBrowsers: { fullPattern: /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i, shortPattern: /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i, tabletPattern: /android|ipad|playbook|silk/i } }, a = Object.prototype.hasOwnProperty; return o.FALLBACK_PHONE = "UnknownPhone", o.FALLBACK_TABLET = "UnknownTablet", o.FALLBACK_MOBILE = "UnknownMobile", r = "isArray" in Array ? Array.isArray : function (t) { return "[object Array]" === Object.prototype.toString.call(t) }, function () { var t, e, i, s, c, u, l = o.mobileDetectRules; for (t in l.props) if (a.call(l.props, t)) { for (e = l.props[t], r(e) || (e = [e]), c = e.length, s = 0; s < c; ++s)0 <= (u = (i = e[s]).indexOf("[VER]")) && (i = i.substring(0, u) + "([\\w._\\+]+)" + i.substring(u + 5)), e[s] = new RegExp(i, "i"); l.props[t] = e } n(l.oss), n(l.phones), n(l.tablets), n(l.uas), n(l.utils), l.oss0 = { WindowsPhoneOS: l.oss.WindowsPhoneOS, WindowsMobileOS: l.oss.WindowsMobileOS } }(), o.findMatch = function (t, e) { for (var n in t) if (a.call(t, n) && t[n].test(e)) return n; return null }, o.findMatches = function (t, e) { var n = []; for (var i in t) a.call(t, i) && t[i].test(e) && n.push(i); return n }, o.getVersionStr = function (t, e) { var n, i, r, s, c = o.mobileDetectRules.props; if (a.call(c, t)) for (r = (n = c[t]).length, i = 0; i < r; ++i)if (null !== (s = n[i].exec(e))) return s[1]; return null }, o.getVersion = function (t, e) { var n = o.getVersionStr(t, e); return n ? o.prepareVersionNo(n) : NaN }, o.prepareVersionNo = function (t) { var e; return 1 === (e = t.split(/[a-z._ \/\-]/i)).length && (t = e[0]), 1 < e.length && (t = e[0] + ".", e.shift(), t += e.join("")), +t }, o.isMobileFallback = function (t) { return o.detectMobileBrowsers.fullPattern.test(t) || o.detectMobileBrowsers.shortPattern.test(t.substr(0, 4)) }, o.isTabletFallback = function (t) { return o.detectMobileBrowsers.tabletPattern.test(t) }, o.prepareDetectionCache = function (t, e, n) { var r, a, s; if (void 0 === t.mobile) return (a = o.findMatch(o.mobileDetectRules.tablets, e)) ? (t.mobile = t.tablet = a, void (t.phone = null)) : (r = o.findMatch(o.mobileDetectRules.phones, e)) ? (t.mobile = t.phone = r, void (t.tablet = null)) : void (o.isMobileFallback(e) ? (s = i.isPhoneSized(n), void 0 === s ? (t.mobile = o.FALLBACK_MOBILE, t.tablet = t.phone = null) : s ? (t.mobile = t.phone = o.FALLBACK_PHONE, t.tablet = null) : (t.mobile = t.tablet = o.FALLBACK_TABLET, t.phone = null)) : o.isTabletFallback(e) ? (t.mobile = t.tablet = o.FALLBACK_TABLET, t.phone = null) : t.mobile = t.tablet = t.phone = null) }, o.mobileGrade = function (t) { var e = null !== t.mobile(); return t.os("iOS") && 4.3 <= t.version("iPad") || t.os("iOS") && 3.1 <= t.version("iPhone") || t.os("iOS") && 3.1 <= t.version("iPod") || 2.1 < t.version("Android") && t.is("Webkit") || 7 <= t.version("Windows Phone OS") || t.is("BlackBerry") && 6 <= t.version("BlackBerry") || t.match("Playbook.*Tablet") || 1.4 <= t.version("webOS") && t.match("Palm|Pre|Pixi") || t.match("hp.*TouchPad") || t.is("Firefox") && 12 <= t.version("Firefox") || t.is("Chrome") && t.is("AndroidOS") && 4 <= t.version("Android") || t.is("Skyfire") && 4.1 <= t.version("Skyfire") && t.is("AndroidOS") && 2.3 <= t.version("Android") || t.is("Opera") && 11 < t.version("Opera Mobi") && t.is("AndroidOS") || t.is("MeeGoOS") || t.is("Tizen") || t.is("Dolfin") && 2 <= t.version("Bada") || (t.is("UC Browser") || t.is("Dolfin")) && 2.3 <= t.version("Android") || t.match("Kindle Fire") || t.is("Kindle") && 3 <= t.version("Kindle") || t.is("AndroidOS") && t.is("NookTablet") || 11 <= t.version("Chrome") && !e || 5 <= t.version("Safari") && !e || 4 <= t.version("Firefox") && !e || 7 <= t.version("MSIE") && !e || 10 <= t.version("Opera") && !e ? "A" : t.os("iOS") && 4.3 > t.version("iPad") || t.os("iOS") && 3.1 > t.version("iPhone") || t.os("iOS") && 3.1 > t.version("iPod") || t.is("Blackberry") && 5 <= t.version("BlackBerry") && 6 > t.version("BlackBerry") || 5 <= t.version("Opera Mini") && 6.5 >= t.version("Opera Mini") && (2.3 <= t.version("Android") || t.is("iOS")) || t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3") || 11 <= t.version("Opera Mobi") && t.is("SymbianOS") ? "B" : (5 > t.version("BlackBerry") || t.match("MSIEMobile|Windows CE.*Mobile") || t.version("Windows Mobile"), "C") }, o.detectOS = function (t) { return o.findMatch(o.mobileDetectRules.oss0, t) || o.findMatch(o.mobileDetectRules.oss, t) }, o.getDeviceSmallerSide = function () { return window.screen.width < window.screen.height ? window.screen.width : window.screen.height }, i.prototype = { constructor: i, mobile: function () { return o.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.mobile }, phone: function () { return o.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.phone }, tablet: function () { return o.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.tablet }, userAgent: function () { return void 0 === this._cache.userAgent && (this._cache.userAgent = o.findMatch(o.mobileDetectRules.uas, this.ua)), this._cache.userAgent }, userAgents: function () { return void 0 === this._cache.userAgents && (this._cache.userAgents = o.findMatches(o.mobileDetectRules.uas, this.ua)), this._cache.userAgents }, os: function () { return void 0 === this._cache.os && (this._cache.os = o.detectOS(this.ua)), this._cache.os }, version: function (t) { return o.getVersion(t, this.ua) }, versionStr: function (t) { return o.getVersionStr(t, this.ua) }, is: function (n) { return e(this.userAgents(), n) || t(n, this.os()) || t(n, this.phone()) || t(n, this.tablet()) || e(o.findMatches(o.mobileDetectRules.utils, this.ua), n) }, match: function (t) { return t instanceof RegExp || (t = new RegExp(t, "i")), t.test(this.ua) }, isPhoneSized: function (t) { return i.isPhoneSized(t || this.maxPhoneWidth) }, mobileGrade: function () { return void 0 === this._cache.grade && (this._cache.grade = o.mobileGrade(this)), this._cache.grade } }, i.isPhoneSized = "undefined" != typeof window && window.screen ? function (t) { return 0 > t ? void 0 : o.getDeviceSmallerSide() <= t } : function () { }, i._impl = o, i.version = "1.4.2 2018-06-10", i }) }(void 0 !== t && t.exports ? function (e) { t.exports = e() } : n(309)) }, function (t) { t.exports = function () { throw new Error("define cannot be used indirect") } }, function (t, e, n) { n(311), t.exports = function () { this.mapEvent = {}, this.mapDatas = {}, this.load = function (t, e) { this.files = t, this.opts = e || {}, this.parallel = this.opts.parallel || 5, this.headreq = this.opts.headreq || !1, this.accept = this.opts.accept, this.headers = this.opts.headers, this.credentials = this.opts.credentials, this.totalFiles = this.files.length, this.reset(), this.handleFetchMode() }, this.reset = function () { this.totalWeight = 0, this.loadedWeight = 0, this.loadedMetadata = 0, this.loadedFiles = 0, this.currentLoadingIndex = 0, this.currentLoadingFile = 0, this.buffer = [], this.res = {} }, this.handleFetchMode = function () { if (this.headreq) this.getHeaders(0); else { for (var t = 0; t < this.totalFiles;)this.prepareFile(this.files[t]), t++; this.nextIndexQueue() } }, this.getHeaders = function (t) { var e = { method: "HEAD" }; this.headers && (e.headers = this.headers), this.credentials && (e.credentials = this.credentials); var n = fetch(this.files[t].url, e), i = this.files[t]; n.then(function (t) { return this.onLoadedMetaData(t, i) }.bind(this), function (t) { return this.onError(t) }.bind(this)), t++ }, this.loadQueue = function () { var t = { method: "GET" }; this.headers && (t.headers = this.headers), this.credentials && (t.credentials = this.credentials); var e = this.buffer[this.currentLoadingIndex], n = null; fetch(this.buffer[this.currentLoadingIndex].url, t).then(function (t) { if (404 == t.status) throw t; return n = t.headers.get("Content-Type"), "application/json" == t.headers.get("Content-Type") || /json/.test(n) ? t.json() : "application/octet-stream" == t.headers.get("Content-Type") || "binary/octet-stream" == t.headers.get("Content-Type") || "model/gltf-binary" == t.headers.get("Content-Type") ? t.arrayBuffer() : t.blob() }.bind(this)).then(function (t) { this.onLoadedFile(t, n, e) }.bind(this)).catch(function (t) { this.onError(t.statusText) }) }, this.onLoadedFile = function (t, e, n) { try { var i = t.type.slice(0, t.type.indexOf("/")) || e.slice(0, e.indexOf("/")) } catch (e) { } "video" == i || "image" == i || "audio" == i || "image/png" == i || "image/jpg" == i ? ("video" == i && (this.file = document.createElement("video")), "audio" == i && (this.file = new Audio), "image" == i && (this.file = new Image, this.file.onload = function () { this.emit("file", { progression: this.loadedWeight / this.totalWeight, file: r }), this.onLoadFile(n) }.bind(this)), this.file.src = window.URL.createObjectURL(t)) : t instanceof ArrayBuffer ? this.file = t : "application/octet-stream" == t.type ? this.file = t : (i = "json", this.file = t), this.loadedWeight += n.weight; var r = { name: n.name, type: i, content: this.file, data: n.data, source: this.file.src }; this.res[r.name] = r, "image" != i && (this.emit("file", { progression: this.loadedWeight / this.totalWeight, file: r }), this.onLoadFile()) }, this.onLoadFile = function () { this.currentLoadingFile--, this.loadedFiles++, this.loadedFiles == this.totalFiles ? this.emit("complete", this.res) : this.nextIndexQueue() }, this.prepareFile = function (t) { t.weight = 1e5 * Math.random(), this.totalWeight += t.weight, this.buffer.push(t), this.loadedMetadata++ }, this.onLoadedMetaData = function (t, e) { var n = 0; t && t.headers && (n = parseInt(t.headers.get("Content-Length"))), e.weight = 0 < n ? n : 1e5 * Math.random(), this.totalWeight += e.weight, this.buffer.push(e), this.loadedMetadata++, this.totalFiles === this.loadedMetadata ? this.nextIndexQueue() : this.getHeaders(this.loadedMetadata) }, this.nextIndexQueue = function () { this.currentLoadingFile <= this.parallel && this.currentLoadingIndex < this.totalFiles && (this.currentLoadingFile++, this.loadQueue(), this.currentLoadingIndex++, this.nextIndexQueue()) }, this.onError = function (t) { this.onLoadFile(), this.emit("error", t) }, this.onErrorFile = function (t) { console.log(t) }, this.on = function (t, e) { this.mapEvent[t] = e }, this.off = function (t) { delete this.mapEvent[t] }, this.emit = function (t, e) { if (this.mapEvent[t]) { var n = this.mapEvent[t]; setTimeout(function () { n(e) }, 0) } }, this.blobToString = function (t) { var e, n; return e = URL.createObjectURL(t), (n = new XMLHttpRequest).open("GET", e, !1), n.send(), URL.revokeObjectURL(e), n.responseText } } }, function () { !function (t) { "use strict"; function e(t) { if ("string" != typeof t && (t += ""), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)) throw new TypeError("Invalid character in header field name"); return t.toLowerCase() } function n(t) { return "string" != typeof t && (t += ""), t } function i(t) { var e = { next: function () { var e = t.shift(); return { done: void 0 === e, value: e } } }; return d.iterable && (e[Symbol.iterator] = function () { return e }), e } function r(t) { this.map = {}, t instanceof r ? t.forEach(function (t, e) { this.append(e, t) }, this) : Array.isArray(t) ? t.forEach(function (t) { this.append(t[0], t[1]) }, this) : t && Object.getOwnPropertyNames(t).forEach(function (e) { this.append(e, t[e]) }, this) } function o(t) { return t.bodyUsed ? Promise.reject(new TypeError("Already read")) : void (t.bodyUsed = !0) } function a(t) { return new Promise(function (e, n) { t.onload = function () { e(t.result) }, t.onerror = function () { n(t.error) } }) } function s(t) { var e = new FileReader, n = a(e); return e.readAsArrayBuffer(t), n } function c(t) { if (t.slice) return t.slice(0); var e = new Uint8Array(t.byteLength); return e.set(new Uint8Array(t)), e.buffer } function u() { return this.bodyUsed = !1, this._initBody = function (t) { if (this._bodyInit = t, t) if ("string" == typeof t) this._bodyText = t; else if (d.blob && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t; else if (d.formData && FormData.prototype.isPrototypeOf(t)) this._bodyFormData = t; else if (d.searchParams && URLSearchParams.prototype.isPrototypeOf(t)) this._bodyText = t.toString(); else if (d.arrayBuffer && d.blob && v(t)) this._bodyArrayBuffer = c(t.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]); else { if (!d.arrayBuffer || !ArrayBuffer.prototype.isPrototypeOf(t) && !g(t)) throw new Error("unsupported BodyInit type"); this._bodyArrayBuffer = c(t) } else this._bodyText = ""; this.headers.get("content-type") || ("string" == typeof t ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : d.searchParams && URLSearchParams.prototype.isPrototypeOf(t) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8")) }, d.blob && (this.blob = function () { var t = o(this); if (t) return t; if (this._bodyBlob) return Promise.resolve(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer])); if (this._bodyFormData) throw new Error("could not read FormData body as blob"); return Promise.resolve(new Blob([this._bodyText])) }, this.arrayBuffer = function () { return this._bodyArrayBuffer ? o(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(s) }), this.text = function () { var t = o(this); if (t) return t; if (this._bodyBlob) return function (t) { var e = new FileReader, n = a(e); return e.readAsText(t), n }(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(function (t) { for (var e = new Uint8Array(t), n = Array(e.length), i = 0; i < e.length; i++)n[i] = String.fromCharCode(e[i]); return n.join("") }(this._bodyArrayBuffer)); if (this._bodyFormData) throw new Error("could not read FormData body as text"); return Promise.resolve(this._bodyText) }, d.formData && (this.formData = function () { return this.text().then(h) }), this.json = function () { return this.text().then(JSON.parse) }, this } function l(t, e) { var n = (e = e || {}).body; if (t instanceof l) { if (t.bodyUsed) throw new TypeError("Already read"); this.url = t.url, this.credentials = t.credentials, e.headers || (this.headers = new r(t.headers)), this.method = t.method, this.mode = t.mode, n || null == t._bodyInit || (n = t._bodyInit, t.bodyUsed = !0) } else this.url = t + ""; if (this.credentials = e.credentials || this.credentials || "omit", (e.headers || !this.headers) && (this.headers = new r(e.headers)), this.method = function (t) { var e = t.toUpperCase(); return -1 < y.indexOf(e) ? e : t }(e.method || this.method || "GET"), this.mode = e.mode || this.mode || null, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && n) throw new TypeError("Body not allowed for GET or HEAD requests"); this._initBody(n) } function h(t) { var e = new FormData; return t.trim().split("&").forEach(function (t) { if (t) { var n = t.split("="), i = n.shift().replace(/\+/g, " "), r = n.join("=").replace(/\+/g, " "); e.append(decodeURIComponent(i), decodeURIComponent(r)) } }), e } function f(t) { var e = new r; return t.replace(/\r?\n[\t ]+/g, " ").split(/\r?\n/).forEach(function (t) { var n = t.split(":"), i = n.shift().trim(); if (i) { var r = n.join(":").trim(); e.append(i, r) } }), e } function p(t, e) { e || (e = {}), this.type = "default", this.status = void 0 === e.status ? 200 : e.status, this.ok = 200 <= this.status && 300 > this.status, this.statusText = "statusText" in e ? e.statusText : "OK", this.headers = new r(e.headers), this.url = e.url || "", this._initBody(t) } if (!t.fetch) { var d = { searchParams: "URLSearchParams" in t, iterable: "Symbol" in t && "iterator" in Symbol, blob: "FileReader" in t && "Blob" in t && function () { try { return new Blob, !0 } catch (t) { return !1 } }(), formData: "FormData" in t, arrayBuffer: "ArrayBuffer" in t }; if (d.arrayBuffer) var m = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"], v = function (t) { return t && DataView.prototype.isPrototypeOf(t) }, g = ArrayBuffer.isView || function (t) { return t && -1 < m.indexOf(Object.prototype.toString.call(t)) }; r.prototype.append = function (t, i) { t = e(t), i = n(i); var r = this.map[t]; this.map[t] = r ? r + "," + i : i }, r.prototype.delete = function (t) { delete this.map[e(t)] }, r.prototype.get = function (t) { return t = e(t), this.has(t) ? this.map[t] : null }, r.prototype.has = function (t) { return this.map.hasOwnProperty(e(t)) }, r.prototype.set = function (t, i) { this.map[e(t)] = n(i) }, r.prototype.forEach = function (t, e) { for (var n in this.map) this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this) }, r.prototype.keys = function () { var t = []; return this.forEach(function (e, n) { t.push(n) }), i(t) }, r.prototype.values = function () { var t = []; return this.forEach(function (e) { t.push(e) }), i(t) }, r.prototype.entries = function () { var t = []; return this.forEach(function (e, n) { t.push([n, e]) }), i(t) }, d.iterable && (r.prototype[Symbol.iterator] = r.prototype.entries); var y = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"]; l.prototype.clone = function () { return new l(this, { body: this._bodyInit }) }, u.call(l.prototype), u.call(p.prototype), p.prototype.clone = function () { return new p(this._bodyInit, { status: this.status, statusText: this.statusText, headers: new r(this.headers), url: this.url }) }, p.error = function () { var t = new p(null, { status: 0, statusText: "" }); return t.type = "error", t }; var b = [301, 302, 303, 307, 308]; p.redirect = function (t, e) { if (-1 === b.indexOf(e)) throw new RangeError("Invalid status code"); return new p(null, { status: e, headers: { location: t } }) }, t.Headers = r, t.Request = l, t.Response = p, t.fetch = function (t, e) { return new Promise(function (n, i) { var r = new l(t, e), o = new XMLHttpRequest; o.onload = function () { var t = { status: o.status, statusText: o.statusText, headers: f(o.getAllResponseHeaders() || "") }; t.url = "responseURL" in o ? o.responseURL : t.headers.get("X-Request-URL"); var e = "response" in o ? o.response : o.responseText; n(new p(e, t)) }, o.onerror = function () { i(new TypeError("Network request failed")) }, o.ontimeout = function () { i(new TypeError("Network request failed")) }, o.open(r.method, r.url, !0), "include" === r.credentials ? o.withCredentials = !0 : "omit" === r.credentials && (o.withCredentials = !1), "responseType" in o && d.blob && (o.responseType = "blob"), r.headers.forEach(function (t, e) { o.setRequestHeader(e, t) }), o.send(void 0 === r._bodyInit ? null : r._bodyInit) }) }, t.fetch.polyfill = !0 } }("undefined" == typeof self ? this : self) }, function (t, e, n) { "use strict"; var i = Math.tan, r = Math.pow, o = Math.sqrt, a = Math.PI, s = Math.sin, c = Math.cos, u = Math.atan2, l = Math.abs, h = Math.round; n.r(e); var f = n(1); f.k._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function () { var t = function (t) { var e, n = [], i = t.length; for (e = 0; e !== i; n.push(t[e++])); return n }, e = function (t, e, n) { var i, r, o = t.cycle; for (i in o) r = o[i], t[i] = "function" == typeof r ? r(n, e[n]) : r[n % r.length]; delete t.cycle }, n = function (t, e, i) { f.l.call(this, t, e, i), this._cycle = 0, this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._repeat && this._uncache(!0), this.render = n.prototype.render }, i = 1e-10, r = f.l._internals, o = r.isSelector, a = r.isArray, s = n.prototype = f.l.to({}, .1, {}), c = []; n.version = "2.0.1", s.constructor = n, s.kill()._gc = !1, n.killTweensOf = n.killDelayedCallsTo = f.l.killTweensOf, n.getTweensOf = f.l.getTweensOf, n.lagSmoothing = f.l.lagSmoothing, n.ticker = f.l.ticker, n.render = f.l.render, s.invalidate = function () { return this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._yoyoEase = null, this._uncache(!0), f.l.prototype.invalidate.call(this) }, s.updateTo = function (t, e) { var n, i = this.ratio, r = this.vars.immediateRender || t.immediateRender; for (n in e && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay)), t) this.vars[n] = t[n]; if (this._initted || r) if (e) this._initted = !1, r && this.render(0, !0, !0); else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && f.l._onPluginEvent("_onDisable", this), .998 < this._time / this._duration) { var o = this._totalTime; this.render(0, !0, !1), this._initted = !1, this.render(o, !0, !1) } else if (this._initted = !1, this._init(), 0 < this._time || r) for (var a, s = this._firstPT; s;)a = s.s + s.c, s.c *= 1 / (1 - i), s.s = a - s.c, s = s._next; return this }, s.render = function (t, e, n) { !this._initted && 0 === this._duration && this.vars.repeat && this.invalidate(); var o, a, s, c, u, l, h, p, d, m = this._dirty ? this.totalDuration() : this._totalDuration, v = this._time, g = this._totalTime, y = this._cycle, b = this._duration, _ = this._rawPrevTime; if (t >= m - 1e-7 && 0 <= t ? (this._totalTime = m, this._cycle = this._repeat, this._yoyo && 0 != (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = b, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), !this._reversed && (o = !0, a = "onComplete", n = n || this._timeline.autoRemoveChildren), 0 === b && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (t = 0), (0 > _ || 0 >= t && -1e-7 <= t || _ === i && "isPause" !== this.data) && _ !== t && (n = !0, _ > i && (a = "onReverseComplete")), this._rawPrevTime = p = !e || t || _ === t ? t : i)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== g || 0 === b && 0 < _) && (a = "onReverseComplete", o = this._reversed), 0 > t && (this._active = !1, 0 === b && (this._initted || !this.vars.lazy || n) && (0 <= _ && (n = !0), this._rawPrevTime = p = !e || t || _ === t ? t : i)), !this._initted && (n = !0)) : (this._totalTime = this._time = t, 0 !== this._repeat && (c = b + this._repeatDelay, this._cycle = this._totalTime / c >> 0, 0 !== this._cycle && this._cycle === this._totalTime / c && g <= t && this._cycle--, this._time = this._totalTime - this._cycle * c, this._yoyo && 0 != (1 & this._cycle) && (this._time = b - this._time, (d = this._yoyoEase || this.vars.yoyoEase) && (!this._yoyoEase && (!0 !== d || this._initted ? this._yoyoEase = d = !0 === d ? this._ease : d instanceof f.b ? d : f.b.map[d] : (d = this.vars.ease, this._yoyoEase = d = d ? d instanceof f.b ? d : "function" == typeof d ? new f.b(d, this.vars.easeParams) : f.b.map[d] || f.l.defaultEase : f.l.defaultEase)), this.ratio = d ? 1 - d.getRatio((b - this._time) / b) : 0)), this._time > b ? this._time = b : 0 > this._time && (this._time = 0)), this._easeType && !d ? (u = this._time / b, l = this._easeType, h = this._easePower, (1 === l || 3 === l && .5 <= u) && (u = 1 - u), 3 === l && (u *= 2), 1 === h ? u *= u : 2 === h ? u *= u * u : 3 === h ? u *= u * u * u : 4 === h && (u *= u * u * u * u), this.ratio = 1 === l ? 1 - u : 2 === l ? u : .5 > this._time / b ? u / 2 : 1 - u / 2) : !d && (this.ratio = this._ease.getRatio(this._time / b))), v !== this._time || n || y !== this._cycle) { if (!this._initted) { if (this._init(), !this._initted || this._gc) return; if (!n && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = v, this._totalTime = g, this._rawPrevTime = _, this._cycle = y, r.lazyTweens.push(this), void (this._lazy = [t, e]); !this._time || o || d ? o && this._ease._calcEnd && !d && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) : this.ratio = this._ease.getRatio(this._time / b) } for (!1 !== this._lazy && (this._lazy = !1), this._active || this._paused || this._time === v || !(0 <= t) || (this._active = !0), 0 === g && (2 === this._initted && 0 < t && this._init(), this._startAt && (0 <= t ? this._startAt.render(t, !0, n) : !a && (a = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === b) && !e && this._callback("onStart")), s = this._firstPT; s;)s.f ? s.t[s.p](s.c * this.ratio + s.s) : s.t[s.p] = s.c * this.ratio + s.s, s = s._next; this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, !0, n), !e && (this._totalTime !== g || a) && this._callback("onUpdate")), this._cycle === y || e || this._gc || !this.vars.onRepeat || this._callback("onRepeat"), a && (!this._gc || n) && (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, !0, n), o && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[a] && this._callback(a), 0 === b && this._rawPrevTime === i && p !== i && (this._rawPrevTime = 0)) } else g !== this._totalTime && this._onUpdate && !e && this._callback("onUpdate") }, n.to = function (t, e, i) { return new n(t, e, i) }, n.from = function (t, e, i) { return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, new n(t, e, i) }, n.fromTo = function (t, e, i, r) { return r.startAt = i, r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender, new n(t, e, r) }, n.staggerTo = n.allTo = function (i, r, s, u, l, h, p) { u = u || 0; var d, m, v, g, y = 0, b = [], _ = function () { s.onComplete && s.onComplete.apply(s.onCompleteScope || this, arguments), l.apply(p || s.callbackScope || this, h || c) }, x = s.cycle, w = s.startAt && s.startAt.cycle; for (a(i) || ("string" == typeof i && (i = f.l.selector(i) || i), o(i) && (i = t(i))), i = i || [], 0 > u && ((i = t(i)).reverse(), u *= -1), d = i.length - 1, v = 0; v <= d; v++) { for (g in m = {}, s) m[g] = s[g]; if (x && (e(m, i, v), null != m.duration && (r = m.duration, delete m.duration)), w) { for (g in w = m.startAt = {}, s.startAt) w[g] = s.startAt[g]; e(m.startAt, i, v) } m.delay = y + (m.delay || 0), v === d && l && (m.onComplete = _), b[v] = new n(i[v], r, m), y += u } return b }, n.staggerFrom = n.allFrom = function (t, e, i, r, o, a, s) { return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, n.staggerTo(t, e, i, r, o, a, s) }, n.staggerFromTo = n.allFromTo = function (t, e, i, r, o, a, s, c) { return r.startAt = i, r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender, n.staggerTo(t, e, r, o, a, s, c) }, n.delayedCall = function (t, e, i, r, o) { return new n(e, 0, { delay: t, onComplete: e, onCompleteParams: i, callbackScope: r, onReverseComplete: e, onReverseCompleteParams: i, immediateRender: !1, useFrames: o, overwrite: 0 }) }, n.set = function (t, e) { return new n(t, 0, e) }, n.isTweening = function (t) { return 0 < f.l.getTweensOf(t, !0).length }; var u = function (t, e) { for (var n = [], i = 0, r = t._first; r;)r instanceof f.l ? n[i++] = r : (e && (n[i++] = r), i = (n = n.concat(u(r, e))).length), r = r._next; return n }, l = n.getAllTweens = function (t) { return u(f.a._rootTimeline, t).concat(u(f.a._rootFramesTimeline, t)) }; n.killAll = function (t, e, n, i) { null == e && (e = !0), null == n && (n = !0); var r, o, a, s = l(0 != i), c = s.length, u = e && n && i; for (a = 0; a < c; a++)o = s[a], (u || o instanceof f.i || (r = o.target === o.vars.onComplete) && n || e && !r) && (t ? o.totalTime(o._reversed ? 0 : o.totalDuration()) : o._enabled(!1, !1)) }, n.killChildTweensOf = function (e, i) { if (null != e) { var s, c, u, l, h, p = r.tweenLookup; if ("string" == typeof e && (e = f.l.selector(e) || e), o(e) && (e = t(e)), a(e)) { for (l = e.length; -1 < --l;)n.killChildTweensOf(e[l], i); return } for (u in s = [], p) for (c = p[u].target.parentNode; c;)c === e && (s = s.concat(p[u].tweens)), c = c.parentNode; for (h = s.length, l = 0; l < h; l++)i && s[l].totalTime(s[l].totalDuration()), s[l]._enabled(!1, !1) } }; var h = function (t, e, n, i) { e = !1 !== e, n = !1 !== n; for (var r, o, a = l(i = !1 !== i), s = e && n && i, c = a.length; -1 < --c;)o = a[c], (s || o instanceof f.i || (r = o.target === o.vars.onComplete) && n || e && !r) && o.paused(t) }; return n.pauseAll = function (t, e, n) { h(!0, t, e, n) }, n.resumeAll = function (t, e, n) { h(!1, t, e, n) }, n.globalTimeScale = function (t) { var e = f.a._rootTimeline, n = f.l.ticker.time; return arguments.length ? (t = t || i, e._startTime = n - (n - e._startTime) * e._timeScale / t, e = f.a._rootFramesTimeline, n = f.l.ticker.frame, e._startTime = n - (n - e._startTime) * e._timeScale / t, e._timeScale = f.a._rootTimeline._timeScale = t, t) : e._timeScale }, s.progress = function (t, e) { return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() }, s.totalProgress = function (t, e) { return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() }, s.time = function (t, e) { return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time }, s.duration = function (t) { return arguments.length ? f.a.prototype.duration.call(this, t) : this._duration }, s.totalDuration = function (t) { return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration) }, s.repeat = function (t) { return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat }, s.repeatDelay = function (t) { return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay }, s.yoyo = function (t) { return arguments.length ? (this._yoyo = t, this) : this._yoyo }, n }, !0); const p = f.k.TweenMax; f.k._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function () { var t, e, n, r, p = function () { f.j.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = p.prototype.setRatio }, d = f.k._gsDefine.globals, m = {}, v = p.prototype = new f.j("css"); v.constructor = p, p.version = "1.20.5", p.API = 2, p.defaultTransformPerspective = 0, p.defaultSkewType = "compensated", p.defaultSmoothOrigin = !0, v = "px", p.suffixMap = { top: v, right: v, bottom: v, left: v, width: v, height: v, fontSize: v, padding: v, margin: v, perspective: v, lineHeight: "" }; var g, y, b, _, x, w, T, S, M = /(?:\-|\.|\b)(\d|\.|e\-)+/g, P = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g, E = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi, A = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g, C = /(?:\d|\-|\+|=|#|\.)*/g, L = /opacity *= *([^)]*)/i, R = /opacity:([^;]*)/i, O = /alpha\(opacity *=.+?\)/i, I = /^(rgb|hsl)/, D = /([A-Z])/g, G = /-([a-z])/gi, B = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi, k = function (t, e) { return e.toUpperCase() }, N = /(?:Left|Right|Width)/i, H = /(M11|M12|M21|M22)=[\d\-\.e]+/gi, F = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i, U = /,(?=[^\)]*(?:\(|$))/gi, z = /[\s,\(]/i, j = a / 180, V = 180 / a, W = {}, X = { style: {} }, q = f.k.document || { createElement: function () { return X } }, Y = function (t, e) { return q.createElementNS ? q.createElementNS(e || "http://www.w3.org/1999/xhtml", t) : q.createElement(t) }, $ = Y("div"), Z = Y("img"), K = p._internals = { _specialProps: m }, J = (f.k.navigator || {}).userAgent || "", Q = function () { var t = J.indexOf("Android"), e = Y("a"); return b = -1 !== J.indexOf("Safari") && -1 === J.indexOf("Chrome") && (-1 === t || 3 < parseFloat(J.substr(t + 8, 2))), x = b && 6 > parseFloat(J.substr(J.indexOf("Version/") + 8, 2)), _ = -1 !== J.indexOf("Firefox"), (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(J) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(J)) && (w = parseFloat(RegExp.$1)), !!e && (e.style.cssText = "top:1px;opacity:.55;", /^0.55/.test(e.style.opacity)) }(), tt = function (t) { return L.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1 }, et = function (t) { f.k.console && console.log(t) }, nt = "", it = "", rt = function (t, e) { var n, i, r = (e = e || $).style; if (void 0 !== r[t]) return t; for (t = t.charAt(0).toUpperCase() + t.substr(1), n = ["O", "Moz", "ms", "Ms", "Webkit"], i = 5; -1 < --i && void 0 === r[n[i] + t];); return 0 <= i ? (nt = "-" + (it = 3 === i ? "ms" : n[i]).toLowerCase() + "-", it + t) : null }, ot = ("undefined" == typeof window ? q.defaultView || { getComputedStyle: function () { } } : window).getComputedStyle, at = p.getStyle = function (t, e, n, i, r) { var o; return Q || "opacity" !== e ? (!i && t.style[e] ? o = t.style[e] : (n = n || ot(t)) ? o = n[e] || n.getPropertyValue(e) || n.getPropertyValue(e.replace(D, "-$1").toLowerCase()) : t.currentStyle && (o = t.currentStyle[e]), null == r || o && "none" !== o && "auto" !== o && "auto auto" !== o ? o : r) : tt(t) }, st = K.convertToPixels = function (t, e, n, i, r) { if ("px" === i || !i && "lineHeight" !== e) return n; if ("auto" === i || !n) return 0; var o, a, s, c = N.test(e), u = t, l = $.style, h = 0 > n, d = 1 === n; if (h && (n = -n), d && (n *= 100), "lineHeight" !== e || i) if ("%" === i && -1 !== e.indexOf("border")) o = n / 100 * (c ? t.clientWidth : t.clientHeight); else { if (l.cssText = "border:0 solid red;position:" + at(t, "position") + ";line-height:0;", "%" !== i && u.appendChild && "v" !== i.charAt(0) && "rem" !== i) l[c ? "borderLeftWidth" : "borderTopWidth"] = n + i; else { if (u = t.parentNode || q.body, -1 !== at(u, "display").indexOf("flex") && (l.position = "absolute"), a = u._gsCache, s = f.l.ticker.frame, a && c && a.time === s) return a.width * n / 100; l[c ? "width" : "height"] = n + i } u.appendChild($), o = parseFloat($[c ? "offsetWidth" : "offsetHeight"]), u.removeChild($), c && "%" == i && !1 !== p.cacheWidths && ((a = u._gsCache = u._gsCache || {}).time = s, a.width = o / n * 100), 0 !== o || r || (o = st(t, e, n, i, !0)) } else a = ot(t).lineHeight, t.style.lineHeight = n, o = parseFloat(ot(t).lineHeight), t.style.lineHeight = a; return d && (o /= 100), h ? -o : o }, ct = K.calculateOffset = function (t, e, n) { if ("absolute" !== at(t, "position", n)) return 0; var i = "left" === e ? "Left" : "Top", r = at(t, "margin" + i, n); return t["offset" + i] - (st(t, e, parseFloat(r), r.replace(C, "")) || 0) }, ut = function (t, e) { var n, i, r, o = {}; if (e = e || ot(t, null)) if (n = e.length) for (; -1 < --n;)(-1 === (r = e[n]).indexOf("-transform") || Bt === r) && (o[r.replace(G, k)] = e.getPropertyValue(r)); else for (n in e) (-1 === n.indexOf("Transform") || Gt === n) && (o[n] = e[n]); else if (e = t.currentStyle || t.style) for (n in e) "string" == typeof n && void 0 === o[n] && (o[n.replace(G, k)] = e[n]); return Q || (o.opacity = tt(t)), i = $t(t, e, !1), o.rotation = i.rotation, o.skewX = i.skewX, o.scaleX = i.scaleX, o.scaleY = i.scaleY, o.x = i.x, o.y = i.y, Nt && (o.z = i.z, o.rotationX = i.rotationX, o.rotationY = i.rotationY, o.scaleZ = i.scaleZ), o.filters && delete o.filters, o }, lt = function (t, e, n, i, r) { var o, a, s, c = {}, u = t.style; for (a in n) "cssText" !== a && "length" !== a && isNaN(a) && (e[a] !== (o = n[a]) || r && r[a]) && -1 === a.indexOf("Origin") && ("number" == typeof o || "string" == typeof o) && (c[a] = "auto" !== o || "left" !== a && "top" !== a ? "" !== o && "auto" !== o && "none" !== o || "string" != typeof e[a] || "" === e[a].replace(A, "") ? o : 0 : ct(t, a), void 0 !== u[a] && (s = new Mt(u, a, u[a], s))); if (i) for (a in i) "className" !== a && (c[a] = i[a]); return { difs: c, firstMPT: s } }, ht = { width: ["Left", "Right"], height: ["Top", "Bottom"] }, ft = ["marginLeft", "marginRight", "marginTop", "marginBottom"], pt = function (t, e, n) { if ("svg" === (t.nodeName + "").toLowerCase()) return (n || ot(t))[e] || 0; if (t.getCTM && Xt(t)) return t.getBBox()[e] || 0; var i = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight), r = ht[e], o = r.length; for (n = n || ot(t, null); -1 < --o;)i -= parseFloat(at(t, "padding" + r[o], n, !0)) || 0, i -= parseFloat(at(t, "border" + r[o] + "Width", n, !0)) || 0; return i }, dt = function (t, e) { if ("contain" === t || "auto" === t || "auto auto" === t) return t + " "; (null == t || "" === t) && (t = "0 0"); var n, i = t.split(" "), r = -1 === t.indexOf("left") ? -1 === t.indexOf("right") ? i[0] : "100%" : "0%", o = -1 === t.indexOf("top") ? -1 === t.indexOf("bottom") ? i[1] : "100%" : "0%"; if (3 < i.length && !e) { for (i = t.split(", ").join(",").split(","), t = [], n = 0; n < i.length; n++)t.push(dt(i[n])); return t.join(",") } return null == o ? o = "center" === r ? "50%" : "0" : "center" === o && (o = "50%"), ("center" === r || isNaN(parseFloat(r)) && -1 === (r + "").indexOf("=")) && (r = "50%"), t = r + " " + o + (2 < i.length ? " " + i[2] : ""), e && (e.oxp = -1 !== r.indexOf("%"), e.oyp = -1 !== o.indexOf("%"), e.oxr = "=" === r.charAt(1), e.oyr = "=" === o.charAt(1), e.ox = parseFloat(r.replace(A, "")), e.oy = parseFloat(o.replace(A, "")), e.v = t), e || t }, mt = function (t, e) { return "function" == typeof t && (t = t(S, T)), "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e) || 0 }, vt = function (t, e) { return "function" == typeof t && (t = t(S, T)), null == t ? e : "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) + e : parseFloat(t) || 0 }, gt = function (t, e, n, i) { var r, o, a, s, c; return "function" == typeof t && (t = t(S, T)), null == t ? s = e : "number" == typeof t ? s = t : (r = 360, o = t.split("_"), a = ((c = "=" === t.charAt(1)) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(o[0].substr(2)) : parseFloat(o[0])) * (-1 === t.indexOf("rad") ? 1 : V) - (c ? 0 : e), o.length && (i && (i[n] = e + a), -1 !== t.indexOf("short") && ((a %= r) != a % (r / 2) && (a = 0 > a ? a + r : a - r)), -1 !== t.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * r) % r - (0 | a / r) * r : -1 !== t.indexOf("ccw") && 0 < a && (a = (a - 9999999999 * r) % r - (0 | a / r) * r)), s = e + a), s < 1e-6 && s > -1e-6 && (s = 0), s }, yt = { aqua: [0, 255, 255], lime: [0, 255, 0], silver: [192, 192, 192], black: [0, 0, 0], maroon: [128, 0, 0], teal: [0, 128, 128], blue: [0, 0, 255], navy: [0, 0, 128], white: [255, 255, 255], fuchsia: [255, 0, 255], olive: [128, 128, 0], yellow: [255, 255, 0], orange: [255, 165, 0], gray: [128, 128, 128], purple: [128, 0, 128], green: [0, 128, 0], red: [255, 0, 0], pink: [255, 192, 203], cyan: [0, 255, 255], transparent: [255, 255, 255, 0] }, bt = function (t, e, n) { return 0 | 255 * (1 > 6 * (t = 0 > t ? t + 1 : 1 < t ? t - 1 : t) ? e + (n - e) * t * 6 : .5 > t ? n : 2 > 3 * t ? e + (n - e) * (2 / 3 - t) * 6 : e) + .5 }, _t = p.parseColor = function (t, e) { var n, i, r, o, a, s, c, u, l, h, f; if (t) if ("number" == typeof t) n = [t >> 16, 255 & t >> 8, 255 & t]; else { if ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)), yt[t]) n = yt[t]; else if ("#" === t.charAt(0)) 4 === t.length && (t = "#" + (i = t.charAt(1)) + i + (r = t.charAt(2)) + r + (o = t.charAt(3)) + o), n = [(t = parseInt(t.substr(1), 16)) >> 16, 255 & t >> 8, 255 & t]; else if ("hsl" !== t.substr(0, 3)) n = t.match(M) || yt.transparent; else if (n = f = t.match(M), e) { if (-1 !== t.indexOf("=")) return t.match(P) } else a = +n[0] % 360 / 360, s = +n[1] / 100, i = 2 * (c = +n[2] / 100) - (r = .5 >= c ? c * (s + 1) : c + s - c * s), 3 < n.length && (n[3] = +n[3]), n[0] = bt(a + 1 / 3, i, r), n[1] = bt(a, i, r), n[2] = bt(a - 1 / 3, i, r); n[0] = +n[0], n[1] = +n[1], n[2] = +n[2], 3 < n.length && (n[3] = +n[3]) } else n = yt.black; return e && !f && (i = n[0] / 255, r = n[1] / 255, o = n[2] / 255, c = ((u = Math.max(i, r, o)) + (l = Math.min(i, r, o))) / 2, u === l ? a = s = 0 : (h = u - l, s = .5 < c ? h / (2 - u - l) : h / (u + l), a = u === i ? (r - o) / h + (r < o ? 6 : 0) : u === r ? (o - i) / h + 2 : (i - r) / h + 4, a *= 60), n[0] = 0 | a + .5, n[1] = 0 | 100 * s + .5, n[2] = 0 | 100 * c + .5), n }, xt = function (t, e) { var n, i, r, o = t.match(wt) || [], a = 0, s = ""; if (!o.length) return t; for (n = 0; n < o.length; n++)i = o[n], a += (r = t.substr(a, t.indexOf(i, a) - a)).length + i.length, 3 === (i = _t(i, e)).length && i.push(1), s += r + (e ? "hsla(" + i[0] + "," + i[1] + "%," + i[2] + "%," + i[3] : "rgba(" + i.join(",")) + ")"; return s + t.substr(a) }, wt = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b"; for (v in yt) wt += "|" + v + "\\b"; wt = new RegExp(wt + ")", "gi"), p.colorStringFilter = function (t) { var e, n = t[0] + " " + t[1]; wt.test(n) && (e = -1 !== n.indexOf("hsl(") || -1 !== n.indexOf("hsla("), t[0] = xt(t[0], e), t[1] = xt(t[1], e)), wt.lastIndex = 0 }, f.l.defaultStringFilter || (f.l.defaultStringFilter = p.colorStringFilter); var Tt = function (t, e, n, i) { if (null == t) return function (t) { return t }; var r, o = e ? (t.match(wt) || [""])[0] : "", a = t.split(o).join("").match(E) || [], s = t.substr(0, t.indexOf(a[0])), c = ")" === t.charAt(t.length - 1) ? ")" : "", u = -1 === t.indexOf(" ") ? "," : " ", l = a.length, h = 0 < l ? a[0].replace(M, "") : ""; return l ? e ? r = function (t) { var e, f, p, d; if ("number" == typeof t) t += h; else if (i && U.test(t)) { for (d = t.replace(U, "|").split("|"), p = 0; p < d.length; p++)d[p] = r(d[p]); return d.join(",") } if (e = (t.match(wt) || [o])[0], p = (f = t.split(e).join("").match(E) || []).length, l > p--) for (; ++p < l;)f[p] = n ? f[0 | (p - 1) / 2] : a[p]; return s + f.join(u) + u + e + c + (-1 === t.indexOf("inset") ? "" : " inset") } : r = function (t) { var e, o, f; if ("number" == typeof t) t += h; else if (i && U.test(t)) { for (o = t.replace(U, "|").split("|"), f = 0; f < o.length; f++)o[f] = r(o[f]); return o.join(",") } if (f = (e = t.match(E) || []).length, l > f--) for (; ++f < l;)e[f] = n ? e[0 | (f - 1) / 2] : a[f]; return s + e.join(u) + c } : function (t) { return t } }, St = function (t) { return t = t.split(","), function (e, n, i, r, o, a, s) { var c, u = (n + "").split(" "); for (s = {}, c = 0; 4 > c; c++)s[t[c]] = u[c] = u[c] || u[(c - 1) / 2 >> 0]; return r.parse(e, s, o, a) } }, Mt = (K._setPluginRatio = function (t) { this.plugin.setRatio(t); for (var e, n, i, r, o, a = this.data, s = a.proxy, c = a.firstMPT; c;)e = s[c.v], c.r ? e = c.r(e) : e < 1e-6 && e > -1e-6 && (e = 0), c.t[c.p] = e, c = c._next; if (a.autoRotate && (a.autoRotate.rotation = a.mod ? a.mod.call(this._tween, s.rotation, this.t, this._tween) : s.rotation), 1 === t || 0 === t) for (c = a.firstMPT, o = 1 === t ? "e" : "b"; c;) { if ((n = c.t).type) { if (1 === n.type) { for (r = n.xs0 + n.s + n.xs1, i = 1; i < n.l; i++)r += n["xn" + i] + n["xs" + (i + 1)]; n[o] = r } } else n[o] = n.s + n.xs0; c = c._next } }, function (t, e, n, i, r) { this.t = t, this.p = e, this.v = n, this.r = r, i && (i._prev = this, this._next = i) }), Pt = (K._parseToProxy = function (t, e, n, i, r, o) { var a, s, c, u, l, h = i, f = {}, p = {}, d = n._transform, m = W; for (n._transform = null, W = e, i = l = n.parse(t, e, i, r), W = m, o && (n._transform = d, h && (h._prev = null, h._prev && (h._prev._next = null))); i && i !== h;) { if (1 >= i.type && (p[s = i.p] = i.s + i.c, f[s] = i.s, o || (u = new Mt(i, "s", s, u, i.r), i.c = 0), 1 === i.type)) for (a = i.l; 0 < --a;)c = "xn" + a, p[s = i.p + "_" + c] = i.data[c], f[s] = i[c], o || (u = new Mt(i, c, s, u, i.rxp[c])); i = i._next } return { proxy: f, end: p, firstMPT: u, pt: l } }, K.CSSPropTween = function (e, n, i, o, a, s, c, u, l, f, p) { this.t = e, this.p = n, this.s = i, this.c = o, this.n = c || n, e instanceof Pt || r.push(this.n), this.r = u ? "function" == typeof u ? u : h : u, this.type = s || 0, l && (this.pr = l, t = !0), this.b = void 0 === f ? i : f, this.e = void 0 === p ? i + o : p, a && (this._next = a, a._prev = this) }), Et = function (t, e, n, i, r, o) { var a = new Pt(t, e, n, i - n, r, -1, o); return a.b = n, a.e = a.xs0 = i, a }, At = p.parseComplex = function (t, e, n, i, r, o, a, s, c, u) { n = n || o || "", "function" == typeof i && (i = i(S, T)), a = new Pt(t, e, 0, 0, a, u ? 2 : 1, null, !1, s, n, i), i += "", r && wt.test(i + n) && (i = [n, i], p.colorStringFilter(i), n = i[0], i = i[1]); var l, f, d, m, v, y, b, _, x, w, E, A, C, L = n.split(", ").join(",").split(" "), R = i.split(", ").join(",").split(" "), O = L.length, I = !1 !== g; for ((-1 !== i.indexOf(",") || -1 !== n.indexOf(",")) && (-1 !== (i + n).indexOf("rgb") || -1 !== (i + n).indexOf("hsl") ? (L = L.join(" ").replace(U, ", ").split(" "), R = R.join(" ").replace(U, ", ").split(" ")) : (L = L.join(" ").split(",").join(", ").split(" "), R = R.join(" ").split(",").join(", ").split(" ")), O = L.length), O !== R.length && (O = (L = (o || "").split(" ")).length), a.plugin = c, a.setRatio = u, wt.lastIndex = 0, l = 0; l < O; l++)if (m = L[l], v = R[l] + "", (_ = parseFloat(m)) || 0 === _) a.appendXtra("", _, mt(v, _), v.replace(P, ""), !(!I || -1 === v.indexOf("px")) && h, !0); else if (r && wt.test(m)) A = ")" + ((A = v.indexOf(")") + 1) ? v.substr(A) : ""), C = -1 !== v.indexOf("hsl") && Q, w = v, m = _t(m, C), v = _t(v, C), (x = 6 < m.length + v.length) && !Q && 0 === v[3] ? (a["xs" + a.l] += a.l ? " transparent" : "transparent", a.e = a.e.split(R[l]).join("transparent")) : (!Q && (x = !1), C ? a.appendXtra(w.substr(0, w.indexOf("hsl")) + (x ? "hsla(" : "hsl("), m[0], mt(v[0], m[0]), ",", !1, !0).appendXtra("", m[1], mt(v[1], m[1]), "%,", !1).appendXtra("", m[2], mt(v[2], m[2]), x ? "%," : "%" + A, !1) : a.appendXtra(w.substr(0, w.indexOf("rgb")) + (x ? "rgba(" : "rgb("), m[0], v[0] - m[0], ",", Math.round, !0).appendXtra("", m[1], v[1] - m[1], ",", Math.round).appendXtra("", m[2], v[2] - m[2], x ? "," : A, Math.round), x && (m = 4 > m.length ? 1 : m[3], a.appendXtra("", m, (4 > v.length ? 1 : v[3]) - m, A, !1))), wt.lastIndex = 0; else if (y = m.match(M)) { if (!(b = v.match(P)) || b.length !== y.length) return a; for (d = 0, f = 0; f < y.length; f++)E = y[f], w = m.indexOf(E, d), a.appendXtra(m.substr(d, w - d), +E, mt(b[f], E), "", !(!I || "px" !== m.substr(w + E.length, 2)) && h, 0 === f), d = w + E.length; a["xs" + a.l] += m.substr(d) } else a["xs" + a.l] += a.l || a["xs" + a.l] ? " " + v : v; if (-1 !== i.indexOf("=") && a.data) { for (A = a.xs0 + a.data.s, l = 1; l < a.l; l++)A += a["xs" + l] + a.data["xn" + l]; a.e = A + a["xs" + l] } return a.l || (a.type = -1, a.xs0 = a.e), a.xfirst || a }, Ct = 9; for ((v = Pt.prototype).l = v.pr = 0; 0 < --Ct;)v["xn" + Ct] = 0, v["xs" + Ct] = ""; v.xs0 = "", v._next = v._prev = v.xfirst = v.data = v.plugin = v.setRatio = v.rxp = null, v.appendXtra = function (t, e, n, i, r, o) { var a = this, s = a.l; return a["xs" + s] += o && (s || a["xs" + s]) ? " " + t : t || "", n || 0 === s || a.plugin ? (a.l++, a.type = a.setRatio ? 2 : 1, a["xs" + a.l] = i || "", 0 < s ? (a.data["xn" + s] = e + n, a.rxp["xn" + s] = r, a["xn" + s] = e, a.plugin || (a.xfirst = new Pt(a, "xn" + s, e, n, a.xfirst || a, 0, a.n, r, a.pr), a.xfirst.xs0 = 0), a) : (a.data = { s: e + n }, a.rxp = {}, a.s = e, a.c = n, a.r = r, a)) : (a["xs" + s] += e + (i || ""), a) }; var Lt = function (t, e) { e = e || {}, this.p = e.prefix && rt(t) || t, m[t] = m[this.p] = this, this.format = e.formatter || Tt(e.defaultValue, e.color, e.collapsible, e.multi), e.parser && (this.parse = e.parser), this.clrs = e.color, this.multi = e.multi, this.keyword = e.keyword, this.dflt = e.defaultValue, this.pr = e.priority || 0 }, Rt = K._registerComplexSpecialProp = function (t, e, n) { "object" != typeof e && (e = { parser: n }); var i, r = t.split(","), o = e.defaultValue; for (n = n || [o], i = 0; i < r.length; i++)e.prefix = 0 === i && e.prefix, e.defaultValue = n[i] || o, new Lt(r[i], e) }, Ot = K._registerPluginProp = function (t) { if (!m[t]) { var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin"; Rt(t, { parser: function (t, n, i, r, o, a, s) { var c = d.com.greensock.plugins[e]; return c ? (c._cssRegister(), m[i].parse(t, n, i, r, o, a, s)) : (et("Error: " + e + " js file not loaded."), o) } }) } }; (v = Lt.prototype).parseComplex = function (t, e, n, i, r, o) { var a, s, c, u, l, h, f = this.keyword; if (this.multi && (U.test(n) || U.test(e) ? (s = e.replace(U, "|").split("|"), c = n.replace(U, "|").split("|")) : f && (s = [e], c = [n])), c) { for (u = c.length > s.length ? c.length : s.length, a = 0; a < u; a++)e = s[a] = s[a] || this.dflt, n = c[a] = c[a] || this.dflt, f && ((l = e.indexOf(f)) !== (h = n.indexOf(f)) && (-1 === h ? s[a] = s[a].split(f).join("") : -1 === l && (s[a] += " " + f))); e = s.join(", "), n = c.join(", ") } return At(t, this.p, e, n, this.clrs, this.dflt, i, this.pr, r, o) }, v.parse = function (t, e, i, r, o, a) { return this.parseComplex(t.style, this.format(at(t, this.p, n, !1, this.dflt)), this.format(e), o, a) }, p.registerSpecialProp = function (t, e, n) { Rt(t, { parser: function (t, i, r, o, a, s) { var c = new Pt(t, r, 0, 0, a, 2, r, !1, n); return c.plugin = s, c.setRatio = e(t, i, o._tween, r), c }, priority: n }) }, p.useSVGTransformAttr = !0; var It, Dt = ["scaleX", "scaleY", "scaleZ", "x", "y", "z", "skewX", "skewY", "rotation", "rotationX", "rotationY", "perspective", "xPercent", "yPercent"], Gt = rt("transform"), Bt = nt + "transform", kt = rt("transformOrigin"), Nt = null !== rt("perspective"), Ht = K.Transform = function () { this.perspective = parseFloat(p.defaultTransformPerspective) || 0, this.force3D = !(!1 === p.defaultForce3D || !Nt) && (p.defaultForce3D || "auto") }, Ft = f.k.SVGElement, Ut = function (t, e, n) { var i, r = q.createElementNS("http://www.w3.org/2000/svg", t), o = /([a-z])([A-Z])/g; for (i in n) r.setAttributeNS(null, i.replace(o, "$1-$2").toLowerCase(), n[i]); return e.appendChild(r), r }, zt = q.documentElement || {}, jt = function () { var t, e, n, i = w || /Android/i.test(J) && !f.k.chrome; return q.createElementNS && !i && (t = Ut("svg", zt), n = (e = Ut("rect", t, { width: 100, height: 50, x: 100 })).getBoundingClientRect().width, e.style[kt] = "50% 50%", e.style[Gt] = "scaleX(0.5)", i = n === e.getBoundingClientRect().width && !(_ && Nt), zt.removeChild(t)), i }(), Vt = function (t, e, n, i, r, o) { var a, s, c, u, l, h, f, d, m, v, g, y, b, _, x = t._gsTransform, w = Yt(t, !0); x && (b = x.xOrigin, _ = x.yOrigin), (!i || 2 > (a = i.split(" ")).length) && (0 === (f = t.getBBox()).x && 0 === f.y && 0 === f.width + f.height && (f = { x: parseFloat(t.hasAttribute("x") ? t.getAttribute("x") : t.hasAttribute("cx") ? t.getAttribute("cx") : 0) || 0, y: parseFloat(t.hasAttribute("y") ? t.getAttribute("y") : t.hasAttribute("cy") ? t.getAttribute("cy") : 0) || 0, width: 0, height: 0 }), a = [(-1 === (e = dt(e).split(" "))[0].indexOf("%") ? parseFloat(e[0]) : parseFloat(e[0]) / 100 * f.width) + f.x, (-1 === e[1].indexOf("%") ? parseFloat(e[1]) : parseFloat(e[1]) / 100 * f.height) + f.y]), n.xOrigin = u = parseFloat(a[0]), n.yOrigin = l = parseFloat(a[1]), i && w !== qt && (h = w[0], f = w[1], d = w[2], m = w[3], v = w[4], g = w[5], (y = h * m - f * d) && (s = u * (m / y) + l * (-d / y) + (d * g - m * v) / y, c = u * (-f / y) + l * (h / y) - (h * g - f * v) / y, u = n.xOrigin = a[0] = s, l = n.yOrigin = a[1] = c)), x && (o && (n.xOffset = x.xOffset, n.yOffset = x.yOffset, x = n), r || !1 !== r && !1 !== p.defaultSmoothOrigin ? (s = u - b, c = l - _, x.xOffset += s * w[0] + c * w[2] - s, x.yOffset += s * w[1] + c * w[3] - c) : x.xOffset = x.yOffset = 0), o || t.setAttribute("data-svg-origin", a.join(" ")) }, Wt = function (t) { var e, n = Y("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"), i = this.parentNode, r = this.nextSibling, o = this.style.cssText; if (zt.appendChild(n), n.appendChild(this), this.style.display = "block", t) try { e = this.getBBox(), this._originalGetBBox = this.getBBox, this.getBBox = Wt } catch (n) { } else this._originalGetBBox && (e = this._originalGetBBox()); return r ? i.insertBefore(this, r) : i.appendChild(this), zt.removeChild(n), this.style.cssText = o, e }, Xt = function (t) { return !(!Ft || !t.getCTM || t.parentNode && !t.ownerSVGElement || !function (t) { try { return t.getBBox() } catch (e) { return Wt.call(t, !0) } }(t)) }, qt = [1, 0, 0, 1, 0, 0], Yt = function (t, e) { var n, i, r, o, a, s, c = t._gsTransform || new Ht, u = t.style; if (Gt ? i = at(t, Bt, null, !0) : t.currentStyle && (i = (i = t.currentStyle.filter.match(H)) && 4 === i.length ? [i[0].substr(4), +i[2].substr(4), +i[1].substr(4), i[3].substr(4), c.x || 0, c.y || 0].join(",") : ""), n = !i || "none" === i || "matrix(1, 0, 0, 1, 0, 0)" === i, Gt && ((s = !ot(t) || "none" === ot(t).display) || !t.parentNode) && (s && (o = u.display, u.display = "block"), !t.parentNode && (a = 1, zt.appendChild(t)), n = !(i = at(t, Bt, null, !0)) || "none" === i || "matrix(1, 0, 0, 1, 0, 0)" === i, o ? u.display = o : s && Qt(u, "display"), a && zt.removeChild(t)), (c.svg || t.getCTM && Xt(t)) && (n && -1 !== (u[Gt] + "").indexOf("matrix") && (i = u[Gt], n = 0), r = t.getAttribute("transform"), n && r && (i = "matrix(" + (r = t.transform.baseVal.consolidate().matrix).a + "," + r.b + "," + r.c + "," + r.d + "," + r.e + "," + r.f + ")", n = 0)), n) return qt; for (r = (i || "").match(M) || [], Ct = r.length; -1 < --Ct;)o = +r[Ct], r[Ct] = (a = o - (o |= 0)) ? (0 | 1e5 * a + (0 > a ? -.5 : .5)) / 1e5 + o : o; return e && 6 < r.length ? [r[0], r[1], r[4], r[5], r[12], r[13]] : r }, $t = K.getTransform = function (t, e, n, i) { if (t._gsTransform && n && !i) return t._gsTransform; var r, a, h, d, m, v, g = n && t._gsTransform || new Ht, y = 0 > g.scaleX, b = 2e-5, _ = 1e5, x = Nt && (parseFloat(at(t, kt, e, !1, "0 0 0").split(" ")[2]) || g.zOrigin) || 0, w = parseFloat(p.defaultTransformPerspective) || 0; if (g.svg = !(!t.getCTM || !Xt(t)), g.svg && (Vt(t, at(t, kt, e, !1, "50% 50%") + "", g, t.getAttribute("data-svg-origin")), It = p.useSVGTransformAttr || jt), (r = Yt(t)) !== qt) { if (16 === r.length) { var T, S, M, P, E, A = r[0], C = r[1], L = r[2], R = r[3], O = r[4], I = r[5], D = r[6], G = r[7], B = r[8], k = r[9], N = r[10], H = r[12], F = r[13], U = r[14], z = r[11], j = u(D, N); g.zOrigin && (H = B * (U = -g.zOrigin) - r[12], F = k * U - r[13], U = N * U + g.zOrigin - r[14]), g.rotationX = j * V, j && (T = O * (P = c(-j)) + B * (E = s(-j)), S = I * P + k * E, M = D * P + N * E, B = O * -E + B * P, k = I * -E + k * P, N = D * -E + N * P, z = G * -E + z * P, O = T, I = S, D = M), j = u(-L, N), g.rotationY = j * V, j && (S = C * (P = c(-j)) - k * (E = s(-j)), M = L * P - N * E, k = C * E + k * P, N = L * E + N * P, z = R * E + z * P, A = T = A * P - B * E, C = S, L = M), j = u(C, A), g.rotation = j * V, j && (T = A * (P = c(j)) + C * (E = s(j)), S = O * P + I * E, M = B * P + k * E, C = C * P - A * E, I = I * P - O * E, k = k * P - B * E, A = T, O = S, B = M), g.rotationX && 359.9 < l(g.rotationX) + l(g.rotation) && (g.rotationX = g.rotation = 0, g.rotationY = 180 - g.rotationY), j = u(O, I), g.scaleX = (0 | o(A * A + C * C + L * L) * _ + .5) / _, g.scaleY = (0 | o(I * I + D * D) * _ + .5) / _, g.scaleZ = (0 | o(B * B + k * k + N * N) * _ + .5) / _, A /= g.scaleX, O /= g.scaleY, C /= g.scaleX, I /= g.scaleY, l(j) > b ? (g.skewX = j * V, O = 0, "simple" !== g.skewType && (g.scaleY *= 1 / c(j))) : g.skewX = 0, g.perspective = z ? 1 / (0 > z ? -z : z) : 0, g.x = H, g.y = F, g.z = U, g.svg && (g.x -= g.xOrigin - (g.xOrigin * A - g.yOrigin * O), g.y -= g.yOrigin - (g.yOrigin * C - g.xOrigin * I)) } else if (!Nt || i || !r.length || g.x !== r[4] || g.y !== r[5] || !g.rotationX && !g.rotationY) { var W = 6 <= r.length, X = W ? r[0] : 1, q = r[1] || 0, Y = r[2] || 0, $ = W ? r[3] : 1; g.x = r[4] || 0, g.y = r[5] || 0, h = o(X * X + q * q), d = o($ * $ + Y * Y), m = X || q ? u(q, X) * V : g.rotation || 0, v = Y || $ ? u(Y, $) * V + m : g.skewX || 0, g.scaleX = h, g.scaleY = d, g.rotation = m, g.skewX = v, Nt && (g.rotationX = g.rotationY = g.z = 0, g.perspective = w, g.scaleZ = 1), g.svg && (g.x -= g.xOrigin - (g.xOrigin * X + g.yOrigin * Y), g.y -= g.yOrigin - (g.xOrigin * q + g.yOrigin * $)) } for (a in 90 < l(g.skewX) && 270 > l(g.skewX) && (y ? (g.scaleX *= -1, g.skewX += 0 >= g.rotation ? 180 : -180, g.rotation += 0 >= g.rotation ? 180 : -180) : (g.scaleY *= -1, g.skewX += 0 >= g.skewX ? 180 : -180)), g.zOrigin = x, g) g[a] < b && g[a] > -b && (g[a] = 0) } return n && (t._gsTransform = g, g.svg && (It && t.style[Gt] ? f.l.delayedCall(.001, function () { Qt(t.style, Gt) }) : !It && t.getAttribute("transform") && f.l.delayedCall(.001, function () { t.removeAttribute("transform") }))), g }, Zt = function (t) { var e, n, i = this.data, r = -i.rotation * j, o = r + i.skewX * j, a = 1e5, u = (0 | c(r) * i.scaleX * a) / a, l = (0 | s(r) * i.scaleX * a) / a, f = (0 | s(o) * -i.scaleY * a) / a, p = (0 | c(o) * i.scaleY * a) / a, d = this.t.style, m = this.t.currentStyle; if (m) { n = l, l = -f, f = -n, e = m.filter, d.filter = ""; var v, g, y = this.t.offsetWidth, b = this.t.offsetHeight, _ = "absolute" !== m.position, x = "progid:DXImageTransform.Microsoft.Matrix(M11=" + u + ", M12=" + l + ", M21=" + f + ", M22=" + p, T = i.x + y * i.xPercent / 100, S = i.y + b * i.yPercent / 100; if (null != i.ox && (T += (v = (i.oxp ? y * i.ox * .01 : i.ox) - y / 2) - (v * u + (g = (i.oyp ? b * i.oy * .01 : i.oy) - b / 2) * l), S += g - (v * f + g * p)), _ ? x += ", Dx=" + ((v = y / 2) - (v * u + (g = b / 2) * l) + T) + ", Dy=" + (g - (v * f + g * p) + S) + ")" : x += ", sizingMethod='auto expand')", d.filter = -1 === e.indexOf("DXImageTransform.Microsoft.Matrix(") ? x + " " + e : e.replace(F, x), 0 !== t && 1 !== t || 1 != u || 0 != l || 0 != f || 1 != p || _ && -1 === x.indexOf("Dx=0, Dy=0") || L.test(e) && 100 !== parseFloat(RegExp.$1) || -1 !== e.indexOf(e.indexOf("Alpha")) || d.removeAttribute("filter"), !_) { var M, P, E, A = 8 > w ? 1 : -1; for (v = i.ieOffsetX || 0, g = i.ieOffsetY || 0, i.ieOffsetX = h((y - ((0 > u ? -u : u) * y + (0 > l ? -l : l) * b)) / 2 + T), i.ieOffsetY = h((b - ((0 > p ? -p : p) * b + (0 > f ? -f : f) * y)) / 2 + S), Ct = 0; 4 > Ct; Ct++)E = (n = -1 === (M = m[P = ft[Ct]]).indexOf("px") ? st(this.t, P, parseFloat(M), M.replace(C, "")) || 0 : parseFloat(M)) === i[P] ? 2 > Ct ? v - i.ieOffsetX : g - i.ieOffsetY : 2 > Ct ? -i.ieOffsetX : -i.ieOffsetY, d[P] = (i[P] = h(n - E * (0 === Ct || 2 === Ct ? 1 : A))) + "px" } } }, Kt = K.set3DTransformRatio = K.setTransformRatio = function (t) { var e, n, r, a, u, l, h, f, p, d, m, v, g, y, b, x, w, T, S, M, P, E, A, C = this.data, L = this.t.style, R = C.rotation, O = C.rotationX, I = C.rotationY, D = C.scaleX, G = C.scaleY, B = C.scaleZ, k = C.x, N = C.y, H = C.z, F = C.svg, U = C.perspective, z = C.force3D, V = C.skewY, W = C.skewX; if (V && (W += V, R += V), !((1 !== t && 0 !== t || "auto" !== z || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && z || H || U || I || O || 1 !== B) || It && F || !Nt) R || W || F ? (E = W * j, A = 1e5, n = c(R *= j) * D, u = s(R) * D, r = s(R - E) * -G, l = c(R - E) * G, E && "simple" === C.skewType && (e = i(E - V * j), r *= e = o(1 + e * e), l *= e, V && (e = i(V * j), n *= e = o(1 + e * e), u *= e)), F && (k += C.xOrigin - (C.xOrigin * n + C.yOrigin * r) + C.xOffset, N += C.yOrigin - (C.xOrigin * u + C.yOrigin * l) + C.yOffset, It && (C.xPercent || C.yPercent) && (b = this.t.getBBox(), k += .01 * C.xPercent * b.width, N += .01 * C.yPercent * b.height), k < (b = 1e-6) && k > -b && (k = 0), N < b && N > -b && (N = 0)), S = (0 | n * A) / A + "," + (0 | u * A) / A + "," + (0 | r * A) / A + "," + (0 | l * A) / A + "," + k + "," + N + ")", F && It ? this.t.setAttribute("transform", "matrix(" + S) : L[Gt] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix(" : "matrix(") + S) : L[Gt] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix(" : "matrix(") + D + ",0,0," + G + "," + k + "," + N + ")"; else { if (_ && (D < (b = 1e-4) && D > -b && (D = B = 2e-5), G < b && G > -b && (G = B = 2e-5), U && !C.z && !C.rotationX && !C.rotationY && (U = 0)), R || W) x = n = c(R *= j), w = u = s(R), W && (x = c(R -= W * j), w = s(R), "simple" === C.skewType && (e = i((W - V) * j), x *= e = o(1 + e * e), w *= e, C.skewY && (e = i(V * j), n *= e = o(1 + e * e), u *= e))), r = -w, l = x; else { if (!(I || O || 1 !== B || U || F)) return void (L[Gt] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) translate3d(" : "translate3d(") + k + "px," + N + "px," + H + "px)" + (1 !== D || 1 !== G ? " scale(" + D + "," + G + ")" : "")); n = l = 1, r = u = 0 } d = 1, a = h = f = p = m = v = 0, g = U ? -1 / U : 0, y = C.zOrigin, b = 1e-6, M = ",", P = "0", (R = I * j) && (x = c(R), f = -(w = s(R)), m = g * -w, a = n * w, h = u * w, d = x, g *= x, n *= x, u *= x), (R = O * j) && (e = r * (x = c(R)) + a * (w = s(R)), T = l * x + h * w, p = d * w, v = g * w, a = r * -w + a * x, h = l * -w + h * x, d *= x, g *= x, r = e, l = T), 1 !== B && (a *= B, h *= B, d *= B, g *= B), 1 !== G && (r *= G, l *= G, p *= G, v *= G), 1 !== D && (n *= D, u *= D, f *= D, m *= D), (y || F) && (y && (k += a * -y, N += h * -y, H += d * -y + y), F && (k += C.xOrigin - (C.xOrigin * n + C.yOrigin * r) + C.xOffset, N += C.yOrigin - (C.xOrigin * u + C.yOrigin * l) + C.yOffset), k < b && k > -b && (k = P), N < b && N > -b && (N = P), H < b && H > -b && (H = 0)), S = C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix3d(" : "matrix3d(", S += (n < b && n > -b ? P : n) + M + (u < b && u > -b ? P : u) + M + (f < b && f > -b ? P : f), S += M + (m < b && m > -b ? P : m) + M + (r < b && r > -b ? P : r) + M + (l < b && l > -b ? P : l), O || I || 1 !== B ? (S += M + (p < b && p > -b ? P : p) + M + (v < b && v > -b ? P : v) + M + (a < b && a > -b ? P : a), S += M + (h < b && h > -b ? P : h) + M + (d < b && d > -b ? P : d) + M + (g < b && g > -b ? P : g) + M) : S += ",0,0,0,0,1,0,", S += k + M + N + M + H + M + (U ? 1 + -H / U : 1) + ")", L[Gt] = S } }; (v = Ht.prototype).x = v.y = v.z = v.skewX = v.skewY = v.rotation = v.rotationX = v.rotationY = v.zOrigin = v.xPercent = v.yPercent = v.xOffset = v.yOffset = 0, v.scaleX = v.scaleY = v.scaleZ = 1, Rt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", { parser: function (t, e, i, r, o, a, s) { if (r._lastParsedTransform === s) return o; r._lastParsedTransform = s; var u, l = s.scale && "function" == typeof s.scale ? s.scale : 0; "function" == typeof s[i] && (u = s[i], s[i] = e), l && (s.scale = l(S, t)); var h, f, d, m, v, g, y, b, _, x = t._gsTransform, w = t.style, M = Dt.length, P = s, E = {}, A = "transformOrigin", C = $t(t, n, !0, P.parseTransform), L = P.transform && ("function" == typeof P.transform ? P.transform(S, T) : P.transform); if (C.skewType = P.skewType || C.skewType || p.defaultSkewType, r._transform = C, L && "string" == typeof L && Gt) (f = $.style)[Gt] = L, f.display = "block", f.position = "absolute", -1 !== L.indexOf("%") && (f.width = at(t, "width"), f.height = at(t, "height")), q.body.appendChild($), h = $t($, null, !1), "simple" === C.skewType && (h.scaleY *= c(h.skewX * j)), C.svg && (g = C.xOrigin, y = C.yOrigin, h.x -= C.xOffset, h.y -= C.yOffset, (P.transformOrigin || P.svgOrigin) && (L = {}, Vt(t, dt(P.transformOrigin), L, P.svgOrigin, P.smoothOrigin, !0), g = L.xOrigin, y = L.yOrigin, h.x -= L.xOffset - C.xOffset, h.y -= L.yOffset - C.yOffset), (g || y) && (b = Yt($, !0), h.x -= g - (g * b[0] + y * b[2]), h.y -= y - (g * b[1] + y * b[3]))), q.body.removeChild($), h.perspective || (h.perspective = C.perspective), null != P.xPercent && (h.xPercent = vt(P.xPercent, C.xPercent)), null != P.yPercent && (h.yPercent = vt(P.yPercent, C.yPercent)); else if ("object" == typeof P) { if (h = { scaleX: vt(null == P.scaleX ? P.scale : P.scaleX, C.scaleX), scaleY: vt(null == P.scaleY ? P.scale : P.scaleY, C.scaleY), scaleZ: vt(P.scaleZ, C.scaleZ), x: vt(P.x, C.x), y: vt(P.y, C.y), z: vt(P.z, C.z), xPercent: vt(P.xPercent, C.xPercent), yPercent: vt(P.yPercent, C.yPercent), perspective: vt(P.transformPerspective, C.perspective) }, null != (v = P.directionalRotation)) if ("object" == typeof v) for (f in v) P[f] = v[f]; else P.rotation = v; "string" == typeof P.x && -1 !== P.x.indexOf("%") && (h.x = 0, h.xPercent = vt(P.x, C.xPercent)), "string" == typeof P.y && -1 !== P.y.indexOf("%") && (h.y = 0, h.yPercent = vt(P.y, C.yPercent)), h.rotation = gt("rotation" in P ? P.rotation : "shortRotation" in P ? P.shortRotation + "_short" : "rotationZ" in P ? P.rotationZ : C.rotation, C.rotation, "rotation", E), Nt && (h.rotationX = gt("rotationX" in P ? P.rotationX : "shortRotationX" in P ? P.shortRotationX + "_short" : C.rotationX || 0, C.rotationX, "rotationX", E), h.rotationY = gt("rotationY" in P ? P.rotationY : "shortRotationY" in P ? P.shortRotationY + "_short" : C.rotationY || 0, C.rotationY, "rotationY", E)), h.skewX = gt(P.skewX, C.skewX), h.skewY = gt(P.skewY, C.skewY) } for (Nt && null != P.force3D && (C.force3D = P.force3D, m = !0), (d = C.force3D || C.z || C.rotationX || C.rotationY || h.z || h.rotationX || h.rotationY || h.perspective) || null == P.scale || (h.scaleZ = 1); -1 < --M;)((L = h[_ = Dt[M]] - C[_]) > 1e-6 || L < -1e-6 || null != P[_] || null != W[_]) && (m = !0, o = new Pt(C, _, C[_], L, o), _ in E && (o.e = E[_]), o.xs0 = 0, o.plugin = a, r._overwriteProps.push(o.n)); return L = P.transformOrigin, C.svg && (L || P.svgOrigin) && (g = C.xOffset, y = C.yOffset, Vt(t, dt(L), h, P.svgOrigin, P.smoothOrigin), o = Et(C, "xOrigin", (x ? C : h).xOrigin, h.xOrigin, o, A), o = Et(C, "yOrigin", (x ? C : h).yOrigin, h.yOrigin, o, A), (g !== C.xOffset || y !== C.yOffset) && (o = Et(C, "xOffset", x ? g : C.xOffset, C.xOffset, o, A), o = Et(C, "yOffset", x ? y : C.yOffset, C.yOffset, o, A)), L = "0px 0px"), (L || Nt && d && C.zOrigin) && (Gt ? (m = !0, _ = kt, L = (L || at(t, _, n, !1, "50% 50%")) + "", (o = new Pt(w, _, 0, 0, o, -1, A)).b = w[_], o.plugin = a, Nt ? (f = C.zOrigin, L = L.split(" "), C.zOrigin = (2 < L.length && (0 === f || "0px" !== L[2]) ? parseFloat(L[2]) : f) || 0, o.xs0 = o.e = L[0] + " " + (L[1] || "50%") + " 0px", (o = new Pt(C, "zOrigin", 0, 0, o, -1, o.n)).b = f, o.xs0 = o.e = C.zOrigin) : o.xs0 = o.e = L) : dt(L + "", C)), m && (r._transformType = C.svg && It || !d && 3 !== this._transformType ? 2 : 3), u && (s[i] = u), l && (s.scale = l), o }, prefix: !0 }), Rt("boxShadow", { defaultValue: "0px 0px 0px 0px #999", prefix: !0, color: !0, multi: !0, keyword: "inset" }), Rt("borderRadius", { defaultValue: "0px", parser: function (t, i, r, o, a) { i = this.format(i); var s, c, u, l, h, f, p, d, m, v, g, y, b, _, x, w, T = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"], S = t.style; for (m = parseFloat(t.offsetWidth), v = parseFloat(t.offsetHeight), s = i.split(" "), c = 0; c < T.length; c++)this.p.indexOf("border") && (T[c] = rt(T[c])), -1 !== (h = l = at(t, T[c], n, !1, "0px")).indexOf(" ") && (h = (l = h.split(" "))[0], l = l[1]), f = u = s[c], p = parseFloat(h), y = h.substr((p + "").length), (b = "=" === f.charAt(1)) ? (d = parseInt(f.charAt(0) + "1", 10), f = f.substr(2), d *= parseFloat(f), g = f.substr((d + "").length - (0 > d ? 1 : 0)) || "") : (d = parseFloat(f), g = f.substr((d + "").length)), "" === g && (g = e[r] || y), g !== y && (_ = st(t, "borderLeft", p, y), x = st(t, "borderTop", p, y), "%" === g ? (h = _ / m * 100 + "%", l = x / v * 100 + "%") : "em" === g ? (h = _ / (w = st(t, "borderLeft", 1, "em")) + "em", l = x / w + "em") : (h = _ + "px", l = x + "px"), b && (f = parseFloat(h) + d + g, u = parseFloat(l) + d + g)), a = At(S, T[c], h + " " + l, f + " " + u, !1, "0px", a); return a }, prefix: !0, formatter: Tt("0px 0px 0px 0px", !1, !0) }), Rt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius", { defaultValue: "0px", parser: function (t, e, i, r, o) { return At(t.style, i, this.format(at(t, i, n, !1, "0px 0px")), this.format(e), !1, "0px", o) }, prefix: !0, formatter: Tt("0px 0px", !1, !0) }), Rt("backgroundPosition", { defaultValue: "0 0", parser: function (t, e, i, r, o, a) { var s, c, u, l, h, f, p = "background-position", d = n || ot(t, null), m = this.format((d ? w ? d.getPropertyValue(p + "-x") + " " + d.getPropertyValue(p + "-y") : d.getPropertyValue(p) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"), v = this.format(e); if (-1 !== m.indexOf("%") != (-1 !== v.indexOf("%")) && 2 > v.split(",").length && ((f = at(t, "backgroundImage").replace(B, "")) && "none" !== f)) { for (s = m.split(" "), c = v.split(" "), Z.setAttribute("src", f), u = 2; -1 < --u;)(l = -1 !== (m = s[u]).indexOf("%")) !== (-1 !== c[u].indexOf("%")) && (h = 0 === u ? t.offsetWidth - Z.width : t.offsetHeight - Z.height, s[u] = l ? parseFloat(m) / 100 * h + "px" : parseFloat(m) / h * 100 + "%"); m = s.join(" ") } return this.parseComplex(t.style, m, v, o, a) }, formatter: dt }), Rt("backgroundSize", { defaultValue: "0 0", formatter: function (t) { return "co" === (t += "").substr(0, 2) ? t : dt(-1 === t.indexOf(" ") ? t + " " + t : t) } }), Rt("perspective", { defaultValue: "0px", prefix: !0 }), Rt("perspectiveOrigin", { defaultValue: "50% 50%", prefix: !0 }), Rt("transformStyle", { prefix: !0 }), Rt("backfaceVisibility", { prefix: !0 }), Rt("userSelect", { prefix: !0 }), Rt("margin", { parser: St("marginTop,marginRight,marginBottom,marginLeft") }), Rt("padding", { parser: St("paddingTop,paddingRight,paddingBottom,paddingLeft") }), Rt("clip", { defaultValue: "rect(0px,0px,0px,0px)", parser: function (t, e, i, r, o, a) { var s, c, u; return 9 > w ? (c = t.currentStyle, u = 8 > w ? " " : ",", s = "rect(" + c.clipTop + u + c.clipRight + u + c.clipBottom + u + c.clipLeft + ")", e = this.format(e).split(",").join(u)) : (s = this.format(at(t, this.p, n, !1, this.dflt)), e = this.format(e)), this.parseComplex(t.style, s, e, o, a) } }), Rt("textShadow", { defaultValue: "0px 0px 0px #999", color: !0, multi: !0 }), Rt("autoRound,strictUnits", { parser: function (t, e, n, i, r) { return r } }), Rt("border", { defaultValue: "0px solid #000", parser: function (t, e, i, r, o, a) { var s = at(t, "borderTopWidth", n, !1, "0px"), c = this.format(e).split(" "), u = c[0].replace(C, ""); return "px" !== u && (s = parseFloat(s) / st(t, "borderTopWidth", 1, u) + u), this.parseComplex(t.style, this.format(s + " " + at(t, "borderTopStyle", n, !1, "solid") + " " + at(t, "borderTopColor", n, !1, "#000")), c.join(" "), o, a) }, color: !0, formatter: function (t) { var e = t.split(" "); return e[0] + " " + (e[1] || "solid") + " " + (t.match(wt) || ["#000"])[0] } }), Rt("borderWidth", { parser: St("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth") }), Rt("float,cssFloat,styleFloat", { parser: function (t, e, n, i, r) { var o = t.style, a = "cssFloat" in o ? "cssFloat" : "styleFloat"; return new Pt(o, a, 0, 0, r, -1, n, !1, 0, o[a], e) } }); var Jt = function (t) { var e, n = this.t, i = n.filter || at(this.data, "filter") || "", r = 0 | this.s + this.c * t; 100 == r && (-1 === i.indexOf("atrix(") && -1 === i.indexOf("radient(") && -1 === i.indexOf("oader(") ? (n.removeAttribute("filter"), e = !at(this.data, "filter")) : (n.filter = i.replace(O, ""), e = !0)), e || (this.xn1 && (n.filter = i = i || "alpha(opacity=" + r + ")"), -1 === i.indexOf("pacity") ? (0 != r || !this.xn1) && (n.filter = i + " alpha(opacity=" + r + ")") : n.filter = i.replace(L, "opacity=" + r)) }; Rt("opacity,alpha,autoAlpha", { defaultValue: "1", parser: function (t, e, i, r, o, a) { var s = parseFloat(at(t, "opacity", n, !1, "1")), c = t.style, u = "autoAlpha" === i; return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + s), u && 1 === s && "hidden" === at(t, "visibility", n) && 0 !== e && (s = 0), Q ? o = new Pt(c, "opacity", s, e - s, o) : ((o = new Pt(c, "opacity", 100 * s, 100 * (e - s), o)).xn1 = u ? 1 : 0, c.zoom = 1, o.type = 2, o.b = "alpha(opacity=" + o.s + ")", o.e = "alpha(opacity=" + (o.s + o.c) + ")", o.data = t, o.plugin = a, o.setRatio = Jt), u && ((o = new Pt(c, "visibility", 0, 0, o, -1, null, !1, 0, 0 === s ? "hidden" : "inherit", 0 === e ? "hidden" : "inherit")).xs0 = "inherit", r._overwriteProps.push(o.n), r._overwriteProps.push(i)), o } }); var Qt = function (t, e) { e && (t.removeProperty ? (("ms" === e.substr(0, 2) || "webkit" === e.substr(0, 6)) && (e = "-" + e), t.removeProperty(e.replace(D, "-$1").toLowerCase())) : t.removeAttribute(e)) }, te = function (t) { if (this.t._gsClassPT = this, 1 === t || 0 === t) { this.t.setAttribute("class", 0 === t ? this.b : this.e); for (var e = this.data, n = this.t.style; e;)e.v ? n[e.p] = e.v : Qt(n, e.p), e = e._next; 1 == t && this.t._gsClassPT === this && (this.t._gsClassPT = null) } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e) }; Rt("className", { parser: function (e, i, r, o, a, s, c) { var u, l, h, f, p, d = e.getAttribute("class") || "", m = e.style.cssText; if ((a = o._classNamePT = new Pt(e, r, 0, 0, a, 2)).setRatio = te, a.pr = -11, t = !0, a.b = d, l = ut(e, n), h = e._gsClassPT) { for (f = {}, p = h.data; p;)f[p.p] = 1, p = p._next; h.setRatio(1) } return e._gsClassPT = a, a.e = "=" === i.charAt(1) ? d.replace(new RegExp("(?:\\s|^)" + i.substr(2) + "(?![\\w-])"), "") + ("+" === i.charAt(0) ? " " + i.substr(2) : "") : i, e.setAttribute("class", a.e), u = lt(e, l, ut(e), c, f), e.setAttribute("class", d), a.data = u.firstMPT, e.style.cssText = m, a = a.xfirst = o.parse(e, u.difs, a, s) } }); var ee = function (t) { if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) { var e, n, i, r, o, a = this.t.style, s = m.transform.parse; if ("all" === this.e) a.cssText = "", r = !0; else for (i = (e = this.e.split(" ").join("").split(",")).length; -1 < --i;)n = e[i], m[n] && (m[n].parse === s ? r = !0 : n = "transformOrigin" === n ? kt : m[n].p), Qt(a, n); r && (Qt(a, Gt), (o = this.t._gsTransform) && (o.svg && (this.t.removeAttribute("data-svg-origin"), this.t.removeAttribute("transform")), delete this.t._gsTransform)) } }; for (Rt("clearProps", { parser: function (e, n, i, r, o) { return (o = new Pt(e, i, 0, 0, o, 2)).setRatio = ee, o.e = n, o.pr = -10, o.data = r._tween, t = !0, o } }), Ct = (v = ["bezier", "throwProps", "physicsProps", "physics2D"]).length; Ct--;)Ot(v[Ct]); (v = p.prototype)._firstPT = v._lastParsedTransform = v._transform = null, v._onInitTween = function (i, o, a, s) { if (!i.nodeType) return !1; this._target = T = i, this._tween = a, this._vars = o, S = s, g = o.autoRound, t = !1, e = o.suffixMap || p.suffixMap, n = ot(i, ""), r = this._overwriteProps; var c, u, l, h, f, d, v, _, w, M = i.style; if (y && "" === M.zIndex && (("auto" === (c = at(i, "zIndex", n)) || "" === c) && this._addLazySet(M, "zIndex", 0)), "string" == typeof o && (h = M.cssText, c = ut(i, n), M.cssText = h + ";" + o, c = lt(i, c, ut(i)).difs, !Q && R.test(o) && (c.opacity = parseFloat(RegExp.$1)), o = c, M.cssText = h), this._firstPT = u = o.className ? m.className.parse(i, o.className, "className", this, null, null, o) : this.parse(i, o, null), this._transformType) { for (w = 3 === this._transformType, Gt ? b && (y = !0, "" === M.zIndex && (("auto" === (v = at(i, "zIndex", n)) || "" === v) && this._addLazySet(M, "zIndex", 0)), x && this._addLazySet(M, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (w ? "visible" : "hidden"))) : M.zoom = 1, l = u; l && l._next;)l = l._next; _ = new Pt(i, "transform", 0, 0, null, 2), this._linkCSSP(_, null, l), _.setRatio = Gt ? Kt : Zt, _.data = this._transform || $t(i, n, !0), _.tween = a, _.pr = -1, r.pop() } if (t) { for (; u;) { for (d = u._next, l = h; l && l.pr > u.pr;)l = l._next; (u._prev = l ? l._prev : f) ? u._prev._next = u : h = u, (u._next = l) ? l._prev = u : f = u, u = d } this._firstPT = h } return !0 }, v.parse = function (t, i, r, o) { var a, s, c, u, l, h, f, p, d, v, y = t.style; for (a in i) { if ("function" == typeof (h = i[a]) && (h = h(S, T)), s = m[a]) r = s.parse(t, h, a, this, r, o, i); else { if ("--" === a.substr(0, 2)) { this._tween._propLookup[a] = this._addTween.call(this._tween, t.style, "setProperty", ot(t).getPropertyValue(a) + "", h + "", a, !1, a); continue } l = at(t, a, n) + "", d = "string" == typeof h, "color" === a || "fill" === a || "stroke" === a || -1 !== a.indexOf("Color") || d && I.test(h) ? (!d && (h = (3 < (h = _t(h)).length ? "rgba(" : "rgb(") + h.join(",") + ")"), r = At(y, a, l, h, !0, "transparent", r, 0, o)) : d && z.test(h) ? r = At(y, a, l, h, !0, null, r, 0, o) : (f = (c = parseFloat(l)) || 0 === c ? l.substr((c + "").length) : "", ("" === l || "auto" === l) && ("width" === a || "height" === a ? (c = pt(t, a, n), f = "px") : "left" === a || "top" === a ? (c = ct(t, a, n), f = "px") : (c = "opacity" === a ? 1 : 0, f = "")), (v = d && "=" === h.charAt(1)) ? (u = parseInt(h.charAt(0) + "1", 10), h = h.substr(2), u *= parseFloat(h), p = h.replace(C, "")) : (u = parseFloat(h), p = d ? h.replace(C, "") : ""), "" === p && (p = a in e ? e[a] : f), h = u || 0 === u ? (v ? u + c : u) + p : i[a], f !== p && ("" !== p || "lineHeight" == a) && (u || 0 === u) && c && (c = st(t, a, c, f), "%" === p ? (c /= st(t, a, 100, "%") / 100, !0 !== i.strictUnits && (l = c + "%")) : "em" === p || "rem" === p || "vw" === p || "vh" === p ? c /= st(t, a, 1, p) : "px" !== p && (u = st(t, a, u, p), p = "px"), v && (u || 0 === u) && (h = u + c + p)), v && (u += c), !c && 0 !== c || !u && 0 !== u ? void 0 !== y[a] && (h || "NaN" != h + "" && null != h) ? (r = new Pt(y, a, u || c || 0, 0, r, -1, a, !1, 0, l, h)).xs0 = "none" !== h || "display" !== a && -1 === a.indexOf("Style") ? h : l : et("invalid " + a + " tween value: " + i[a]) : (r = new Pt(y, a, c, u - c, r, 0, a, !1 !== g && ("px" === p || "zIndex" == a), 0, l, h)).xs0 = p) } o && r && !r.plugin && (r.plugin = o) } return r }, v.setRatio = function (t) { var e, n, i, r = this._firstPT; if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time) if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || -1e-6 === this._tween._rawPrevTime) for (; r;) { if (e = r.c * t + r.s, r.r ? e = r.r(e) : e < 1e-6 && e > -1e-6 && (e = 0), r.type) if (1 !== r.type) -1 === r.type ? r.t[r.p] = r.xs0 : r.setRatio && r.setRatio(t); else if (2 === (i = r.l)) r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2; else if (3 === i) r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3; else if (4 === i) r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4; else if (5 === i) r.t[r.p] = r.xs0 + e + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4 + r.xn4 + r.xs5; else { for (n = r.xs0 + e + r.xs1, i = 1; i < r.l; i++)n += r["xn" + i] + r["xs" + (i + 1)]; r.t[r.p] = n } else r.t[r.p] = e + r.xs0; r = r._next } else for (; r;)2 === r.type ? r.setRatio(t) : r.t[r.p] = r.b, r = r._next; else for (; r;) { if (2 === r.type) r.setRatio(t); else if (r.r && -1 !== r.type) if (e = r.r(r.s + r.c), r.type) { if (1 === r.type) { for (i = r.l, n = r.xs0 + e + r.xs1, i = 1; i < r.l; i++)n += r["xn" + i] + r["xs" + (i + 1)]; r.t[r.p] = n } } else r.t[r.p] = e + r.xs0; else r.t[r.p] = r.e; r = r._next } }, v._enableTransforms = function (t) { this._transform = this._transform || $t(this._target, n, !0), this._transformType = this._transform.svg && It || !t && 3 !== this._transformType ? 2 : 3 }; var ne = function () { this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0) }; v._addLazySet = function (t, e, n) { var i = this._firstPT = new Pt(t, e, 0, 0, this._firstPT, 2); i.e = n, i.setRatio = ne, i.data = this }, v._linkCSSP = function (t, e, n, i) { return t && (e && (e._prev = t), t._next && (t._next._prev = t._prev), t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next, i = !0), n ? n._next = t : !i && null === this._firstPT && (this._firstPT = t), t._next = e, t._prev = n), t }, v._mod = function (t) { for (var e = this._firstPT; e;)"function" == typeof t[e.p] && (e.r = t[e.p]), e = e._next }, v._kill = function (t) { var e, n, i, r = t; if (t.autoAlpha || t.alpha) { for (n in r = {}, t) r[n] = t[n]; r.opacity = 1, r.autoAlpha && (r.visibility = 1) } for (t.className && (e = this._classNamePT) && ((i = e.xfirst) && i._prev ? this._linkCSSP(i._prev, e._next, i._prev._prev) : i === this._firstPT && (this._firstPT = e._next), e._next && this._linkCSSP(e._next, e._next._next, i._prev), this._classNamePT = null), e = this._firstPT; e;)e.plugin && e.plugin !== n && e.plugin._kill && (e.plugin._kill(t), n = e.plugin), e = e._next; return f.j.prototype._kill.call(this, r) }; var ie = function (t, e, n) { var i, r, o, a; if (t.slice) for (r = t.length; -1 < --r;)ie(t[r], e, n); else for (r = (i = t.childNodes).length; -1 < --r;)a = (o = i[r]).type, o.style && (e.push(ut(o)), n && n.push(o)), (1 === a || 9 === a || 11 === a) && o.childNodes.length && ie(o, e, n) }; return p.cascadeTo = function (t, e, n) { var i, r, o, a, s = f.l.to(t, e, n), c = [s], u = [], l = [], h = [], p = f.l._internals.reservedProps; for (t = s._targets || s.target, ie(t, u, h), s.render(e, !0, !0), ie(t, l), s.render(0, !0, !0), s._enabled(!0), i = h.length; -1 < --i;)if ((r = lt(h[i], u[i], l[i])).firstMPT) { for (o in r = r.difs, n) p[o] && (r[o] = n[o]); for (o in a = {}, r) a[o] = u[i][o]; c.push(f.l.fromTo(h[i], e, a, r)) } return c }, f.j.activate([p]), p }, !0); const d = f.k.CSSPlugin, m = f.k._gsDefine.plugin({ propName: "attr", API: 2, version: "0.6.1", init: function (t, e, n, i) { var r, o; if ("function" != typeof t.setAttribute) return !1; for (r in e) "function" == typeof (o = e[r]) && (o = o(i, t)), this._addTween(t, "setAttribute", t.getAttribute(r) + "", o + "", r, !1, r), this._overwriteProps.push(r); return !0 } }), v = f.k._gsDefine.plugin({ propName: "roundProps", version: "1.7.0", priority: -1, API: 2, init: function (t, e, n) { return this._tween = n, !0 } }), g = function (t) { var e = 1 > t ? r(10, (t + "").length - 2) : 1; return function (n) { return (0 | h(n / t) * t * e) / e } }, y = function (t, e) { for (; t;)t.f || t.blob || (t.m = e || h), t = t._next }, b = v.prototype; b._onInitAllProps = function () { var t, e, n, i, r = this._tween, o = r.vars.roundProps, a = {}, s = r._propLookup.roundProps; if ("object" != typeof o || o.push) for ("string" == typeof o && (o = o.split(",")), n = o.length; -1 < --n;)a[o[n]] = h; else for (i in o) a[i] = g(o[i]); for (i in a) for (t = r._firstPT; t;)e = t._next, t.pg ? t.t._mod(a) : t.n === i && (2 === t.f && t.t ? y(t.t._firstPT, a[i]) : (this._add(t.t, i, t.s, t.c, a[i]), e && (e._prev = t._prev), t._prev ? t._prev._next = e : r._firstPT === t && (r._firstPT = e), t._next = t._prev = null, r._propLookup[i] = s)), t = e; return !1 }, b._add = function (t, e, n, i, r) { this._addTween(t, e, n, n + i, e, r || h), this._overwriteProps.push(e) }; const _ = f.k._gsDefine.plugin({ propName: "directionalRotation", version: "0.3.1", API: 2, init: function (t, e, n, i) { "object" != typeof e && (e = { rotation: e }), this.finals = {}; var r, o, s, c, u, l, h = !0 === e.useRadians ? 2 * a : 360; for (r in e) "useRadians" !== r && ("function" == typeof (c = e[r]) && (c = c(i, t)), o = (l = (c + "").split("_"))[0], s = parseFloat("function" == typeof t[r] ? t[r.indexOf("set") || "function" != typeof t["get" + r.substr(3)] ? r : "get" + r.substr(3)]() : t[r]), u = (c = this.finals[r] = "string" == typeof o && "=" === o.charAt(1) ? s + parseInt(o.charAt(0) + "1", 10) * +o.substr(2) : +o || 0) - s, l.length && (-1 !== (o = l.join("_")).indexOf("short") && ((u %= h) !== u % (h / 2) && (u = 0 > u ? u + h : u - h)), -1 !== o.indexOf("_cw") && 0 > u ? u = (u + 9999999999 * h) % h - (0 | u / h) * h : -1 !== o.indexOf("ccw") && 0 < u && (u = (u - 9999999999 * h) % h - (0 | u / h) * h)), (u > 1e-6 || u < -1e-6) && (this._addTween(t, r, s, s + u, r), this._overwriteProps.push(r))); return !0 }, set: function (t) { var e; if (1 !== t) this._super.setRatio.call(this, t); else for (e = this._firstPT; e;)e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p], e = e._next } }); _._autoCSS = !0, f.k._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function () { var t = function (t) { f.i.call(this, t), this._labels = {}, this.autoRemoveChildren = !0 === this.vars.autoRemoveChildren, this.smoothChildTiming = !0 === this.vars.smoothChildTiming, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate; var e, n, i = this.vars; for (n in i) e = i[n], o(e) && -1 !== e.join("").indexOf("{self}") && (i[n] = this._swapSelfInParams(e)); o(i.tweens) && this.add(i.tweens, 0, i.align, i.stagger) }, e = 1e-10, n = f.l._internals, i = t._internals = {}, r = n.isSelector, o = n.isArray, a = n.lazyTweens, s = n.lazyRender, c = f.k._gsDefine.globals, u = function (t) { var e, n = {}; for (e in t) n[e] = t[e]; return n }, l = function (t, e, n) { var i, r, o = t.cycle; for (i in o) r = o[i], t[i] = "function" == typeof r ? r(n, e[n]) : r[n % r.length]; delete t.cycle }, h = i.pauseCallback = function () { }, p = function (t) { var e, n = [], i = t.length; for (e = 0; e !== i; n.push(t[e++])); return n }, d = t.prototype = new f.i; return t.version = "2.0.1", d.constructor = t, d.kill()._gc = d._forcingPlayhead = d._hasPause = !1, d.to = function (t, e, n, i) { var r = n.repeat && c.TweenMax || f.l; return e ? this.add(new r(t, e, n), i) : this.set(t, n, i) }, d.from = function (t, e, n, i) { return this.add((n.repeat && c.TweenMax || f.l).from(t, e, n), i) }, d.fromTo = function (t, e, n, i, r) { var o = i.repeat && c.TweenMax || f.l; return e ? this.add(o.fromTo(t, e, n, i), r) : this.set(t, i, r) }, d.staggerTo = function (e, n, i, o, a, s, c, h) { var d, m, v = new t({ onComplete: s, onCompleteParams: c, callbackScope: h, smoothChildTiming: this.smoothChildTiming }), g = i.cycle; for ("string" == typeof e && (e = f.l.selector(e) || e), r(e = e || []) && (e = p(e)), 0 > (o = o || 0) && ((e = p(e)).reverse(), o *= -1), m = 0; m < e.length; m++)(d = u(i)).startAt && (d.startAt = u(d.startAt), d.startAt.cycle && l(d.startAt, e, m)), g && (l(d, e, m), null != d.duration && (n = d.duration, delete d.duration)), v.to(e[m], n, d, m * o); return this.add(v, a) }, d.staggerFrom = function (t, e, n, i, r, o, a, s) { return n.immediateRender = 0 != n.immediateRender, n.runBackwards = !0, this.staggerTo(t, e, n, i, r, o, a, s) }, d.staggerFromTo = function (t, e, n, i, r, o, a, s, c) { return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, this.staggerTo(t, e, i, r, o, a, s, c) }, d.call = function (t, e, n, i) { return this.add(f.l.delayedCall(0, t, e, n), i) }, d.set = function (t, e, n) { return n = this._parseTimeOrLabel(n, 0, !0), null == e.immediateRender && (e.immediateRender = n === this._time && !this._paused), this.add(new f.l(t, 0, e), n) }, t.exportRoot = function (e, n) { null == (e = e || {}).smoothChildTiming && (e.smoothChildTiming = !0); var i, r, o, a, s = new t(e), c = s._timeline; for (null == n && (n = !0), c._remove(s, !0), s._startTime = 0, s._rawPrevTime = s._time = s._totalTime = c._time, o = c._first; o;)a = o._next, n && o instanceof f.l && o.target === o.vars.onComplete || (0 > (r = o._startTime - o._delay) && (i = 1), s.add(o, r)), o = a; return c.add(s, 0), i && s.totalDuration(), s }, d.add = function (e, n, i, r) { var a, s, c, u, l, h; if ("number" != typeof n && (n = this._parseTimeOrLabel(n, 0, !0, e)), !(e instanceof f.a)) { if (e instanceof Array || e && e.push && o(e)) { for (i = i || "normal", r = r || 0, a = n, s = e.length, c = 0; c < s; c++)o(u = e[c]) && (u = new t({ tweens: u })), this.add(u, a), "string" != typeof u && "function" != typeof u && ("sequence" === i ? a = u._startTime + u.totalDuration() / u._timeScale : "start" === i && (u._startTime -= u.delay())), a += r; return this._uncache(!0) } if ("string" == typeof e) return this.addLabel(e, n); if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string."; e = f.l.delayedCall(0, e) } if (f.i.prototype.add.call(this, e, n), e._time && e.render((this.rawTime() - e._startTime) * e._timeScale, !1, !1), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration()) for (h = (l = this).rawTime() > e._startTime; l._timeline;)h && l._timeline.smoothChildTiming ? l.totalTime(l._totalTime, !0) : l._gc && l._enabled(!0, !1), l = l._timeline; return this }, d.remove = function (t) { if (t instanceof f.a) { this._remove(t, !1); var e = t._timeline = t.vars.useFrames ? f.a._rootFramesTimeline : f.a._rootTimeline; return t._startTime = (t._paused ? t._pauseTime : e._time) - (t._reversed ? t.totalDuration() - t._totalTime : t._totalTime) / t._timeScale, this } if (t instanceof Array || t && t.push && o(t)) { for (var n = t.length; -1 < --n;)this.remove(t[n]); return this } return "string" == typeof t ? this.removeLabel(t) : this.kill(null, t) }, d._remove = function (t, e) { return f.i.prototype._remove.call(this, t, e), this._last ? this._time > this.duration() && (this._time = this._duration, this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this }, d.append = function (t, e) { return this.add(t, this._parseTimeOrLabel(null, e, !0, t)) }, d.insert = d.insertMultiple = function (t, e, n, i) { return this.add(t, e || 0, n, i) }, d.appendMultiple = function (t, e, n, i) { return this.add(t, this._parseTimeOrLabel(null, e, !0, t), n, i) }, d.addLabel = function (t, e) { return this._labels[t] = this._parseTimeOrLabel(e), this }, d.addPause = function (t, e, n, i) { var r = f.l.delayedCall(0, h, n, i || this); return r.vars.onComplete = r.vars.onReverseComplete = e, r.data = "isPause", this._hasPause = !0, this.add(r, t) }, d.removeLabel = function (t) { return delete this._labels[t], this }, d.getLabelTime = function (t) { return null == this._labels[t] ? -1 : this._labels[t] }, d._parseTimeOrLabel = function (t, e, n, i) { var r, a; if (i instanceof f.a && i.timeline === this) this.remove(i); else if (i && (i instanceof Array || i.push && o(i))) for (a = i.length; -1 < --a;)i[a] instanceof f.a && i[a].timeline === this && this.remove(i[a]); if (r = "number" != typeof t || e ? 99999999999 < this.duration() ? this.recent().endTime(!1) : this._duration : 0, "string" == typeof e) return this._parseTimeOrLabel(e, n && "number" == typeof t && null == this._labels[e] ? t - r : 0, n); if (e = e || 0, "string" != typeof t || !isNaN(t) && null == this._labels[t]) null == t && (t = r); else { if (-1 === (a = t.indexOf("="))) return null == this._labels[t] ? n ? this._labels[t] = r + e : e : this._labels[t] + e; e = parseInt(t.charAt(a - 1) + "1", 10) * +t.substr(a + 1), t = 1 < a ? this._parseTimeOrLabel(t.substr(0, a - 1), 0, n) : r } return +t + e }, d.seek = function (t, e) { return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), !1 !== e) }, d.stop = function () { return this.paused(!0) }, d.gotoAndPlay = function (t, e) { return this.play(t, e) }, d.gotoAndStop = function (t, e) { return this.pause(t, e) }, d.render = function (t, n, i) { this._gc && this._enabled(!0, !1); var r, o, c, u, l, h, f, p = this._time, d = this._dirty ? this.totalDuration() : this._totalDuration, m = this._startTime, v = this._timeScale, g = this._paused; if (p !== this._time && (t += this._time - p), t >= d - 1e-7 && 0 <= t) this._totalTime = this._time = d, this._reversed || this._hasPausedChild() || (o = !0, u = "onComplete", l = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 >= t && -1e-7 <= t || 0 > this._rawPrevTime || this._rawPrevTime === e) && this._rawPrevTime !== t && this._first && (l = !0, this._rawPrevTime > e && (u = "onReverseComplete"))), this._rawPrevTime = this._duration || !n || t || this._rawPrevTime === t ? t : e, t = d + 1e-4; else if (1e-7 > t) if (this._totalTime = this._time = 0, (0 !== p || 0 === this._duration && this._rawPrevTime !== e && (0 < this._rawPrevTime || 0 > t && 0 <= this._rawPrevTime)) && (u = "onReverseComplete", o = this._reversed), 0 > t) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (l = o = !0, u = "onReverseComplete") : 0 <= this._rawPrevTime && this._first && (l = !0), this._rawPrevTime = t; else { if (this._rawPrevTime = this._duration || !n || t || this._rawPrevTime === t ? t : e, 0 === t && o) for (r = this._first; r && 0 === r._startTime;)r._duration || (o = !1), r = r._next; t = 0, this._initted || (l = !0) } else { if (this._hasPause && !this._forcingPlayhead && !n) { if (t >= p) for (r = this._first; r && r._startTime <= t && !h;)r._duration || "isPause" !== r.data || r.ratio || 0 === r._startTime && 0 === this._rawPrevTime || (h = r), r = r._next; else for (r = this._last; r && r._startTime >= t && !h;)!r._duration && "isPause" === r.data && 0 < r._rawPrevTime && (h = r), r = r._prev; h && (this._time = t = h._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay)) } this._totalTime = this._time = this._rawPrevTime = t } if (this._time !== p && this._first || i || l || h) { if (this._initted || (this._initted = !0), this._active || this._paused || this._time === p || !(0 < t) || (this._active = !0), 0 !== p || !this.vars.onStart || 0 === this._time && this._duration || n || this._callback("onStart"), (f = this._time) >= p) for (r = this._first; r && (c = r._next, f === this._time && (!this._paused || g));)(r._active || r._startTime <= f && !r._paused && !r._gc) && (h === r && this.pause(), r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, n, i) : r.render((t - r._startTime) * r._timeScale, n, i)), r = c; else for (r = this._last; r && (c = r._prev, f === this._time && (!this._paused || g));) { if (r._active || r._startTime <= p && !r._paused && !r._gc) { if (h === r) { for (h = r._prev; h && h.endTime() > this._time;)h.render(h._reversed ? h.totalDuration() - (t - h._startTime) * h._timeScale : (t - h._startTime) * h._timeScale, n, i), h = h._prev; h = null, this.pause() } r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, n, i) : r.render((t - r._startTime) * r._timeScale, n, i) } r = c } this._onUpdate && !n && (a.length && s(), this._callback("onUpdate")), u && !this._gc && (m === this._startTime || v !== this._timeScale) && (0 === this._time || d >= this.totalDuration()) && (o && (a.length && s(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !n && this.vars[u] && this._callback(u)) } }, d._hasPausedChild = function () { for (var e = this._first; e;) { if (e._paused || e instanceof t && e._hasPausedChild()) return !0; e = e._next } return !1 }, d.getChildren = function (t, e, n, i) { i = i || -9999999999; for (var r = [], o = this._first, a = 0; o;)o._startTime < i || (o instanceof f.l ? !1 !== e && (r[a++] = o) : (!1 !== n && (r[a++] = o), !1 !== t && (a = (r = r.concat(o.getChildren(!0, e, n))).length))), o = o._next; return r }, d.getTweensOf = function (t, e) { var n, i, r = this._gc, o = [], a = 0; for (r && this._enabled(!0, !0), i = (n = f.l.getTweensOf(t)).length; -1 < --i;)(n[i].timeline === this || e && this._contains(n[i])) && (o[a++] = n[i]); return r && this._enabled(!1, !0), o }, d.recent = function () { return this._recent }, d._contains = function (t) { for (var e = t.timeline; e;) { if (e === this) return !0; e = e.timeline } return !1 }, d.shiftChildren = function (t, e, n) { n = n || 0; for (var i, r = this._first, o = this._labels; r;)r._startTime >= n && (r._startTime += t), r = r._next; if (e) for (i in o) o[i] >= n && (o[i] += t); return this._uncache(!0) }, d._kill = function (t, e) { if (!t && !e) return this._enabled(!1, !1); for (var n = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), i = n.length, r = !1; -1 < --i;)n[i]._kill(t, e) && (r = !0); return r }, d.clear = function (t) { var e = this.getChildren(!1, !0, !0), n = e.length; for (this._time = this._totalTime = 0; -1 < --n;)e[n]._enabled(!1, !1); return !1 !== t && (this._labels = {}), this._uncache(!0) }, d.invalidate = function () { for (var t = this._first; t;)t.invalidate(), t = t._next; return f.a.prototype.invalidate.call(this) }, d._enabled = function (t, e) { if (t === this._gc) for (var n = this._first; n;)n._enabled(t, !0), n = n._next; return f.i.prototype._enabled.call(this, t, e) }, d.totalTime = function () { this._forcingPlayhead = !0; var t = f.a.prototype.totalTime.apply(this, arguments); return this._forcingPlayhead = !1, t }, d.duration = function (t) { return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t), this) : (this._dirty && this.totalDuration(), this._duration) }, d.totalDuration = function (t) { if (!arguments.length) { if (this._dirty) { for (var e, n, i = 0, r = this._last, o = 999999999999; r;)e = r._prev, r._dirty && r.totalDuration(), r._startTime > o && this._sortChildren && !r._paused && !this._calculatingDuration ? (this._calculatingDuration = 1, this.add(r, r._startTime - r._delay), this._calculatingDuration = 0) : o = r._startTime, 0 > r._startTime && !r._paused && (i -= r._startTime, this._timeline.smoothChildTiming && (this._startTime += r._startTime / this._timeScale, this._time -= r._startTime, this._totalTime -= r._startTime, this._rawPrevTime -= r._startTime), this.shiftChildren(-r._startTime, !1, -9999999999), o = 0), (n = r._startTime + r._totalDuration / r._timeScale) > i && (i = n), r = e; this._duration = this._totalDuration = i, this._dirty = !1 } return this._totalDuration } return t && this.totalDuration() ? this.timeScale(this._totalDuration / t) : this }, d.paused = function (t) { if (!t) for (var e = this._first, n = this._time; e;)e._startTime === n && "isPause" === e.data && (e._rawPrevTime = 0), e = e._next; return f.a.prototype.paused.apply(this, arguments) }, d.usesFrames = function () { for (var t = this._timeline; t._timeline;)t = t._timeline; return t === f.a._rootFramesTimeline }, d.rawTime = function (t) { return t && (this._paused || this._repeat && 0 < this.time() && 1 > this.totalProgress()) ? this._totalTime % (this._duration + this._repeatDelay) : this._paused ? this._totalTime : (this._timeline.rawTime(t) - this._startTime) * this._timeScale }, t }, !0); const x = f.k.TimelineLite; f.k._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function () { var t = function (t) { x.call(this, t), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = !0 === this.vars.yoyo, this._dirty = !0 }, e = 1e-10, n = f.l._internals, i = n.lazyTweens, r = n.lazyRender, o = f.k._gsDefine.globals, a = new f.b(null, null, 1, 0), s = t.prototype = new x; return s.constructor = t, s.kill()._gc = !1, t.version = "2.0.1", s.invalidate = function () { return this._yoyo = !0 === this.vars.yoyo, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), x.prototype.invalidate.call(this) }, s.addCallback = function (t, e, n, i) { return this.add(f.l.delayedCall(0, t, n, i), e) }, s.removeCallback = function (t, e) { if (t) if (null == e) this._kill(null, t); else for (var n = this.getTweensOf(t, !1), i = n.length, r = this._parseTimeOrLabel(e); -1 < --i;)n[i]._startTime === r && n[i]._enabled(!1, !1); return this }, s.removePause = function (t) { return this.removeCallback(x._internals.pauseCallback, t) }, s.tweenTo = function (t, e) { e = e || {}; var n, i, r, s = { ease: a, useFrames: this.usesFrames(), immediateRender: !1, lazy: !1 }, c = e.repeat && o.TweenMax || f.l; for (i in e) s[i] = e[i]; return s.time = this._parseTimeOrLabel(t), n = l(+s.time - this._time) / this._timeScale || .001, r = new c(this, n, s), s.onStart = function () { r.target.paused(!0), r.vars.time === r.target.time() || n !== r.duration() || r.isFromTo || r.duration(l(r.vars.time - r.target.time()) / r.target._timeScale).render(r.time(), !0, !0), e.onStart && e.onStart.apply(e.onStartScope || e.callbackScope || r, e.onStartParams || []) }, r }, s.tweenFromTo = function (t, e, n) { n = n || {}, t = this._parseTimeOrLabel(t), n.startAt = { onComplete: this.seek, onCompleteParams: [t], callbackScope: this }, n.immediateRender = !1 !== n.immediateRender; var i = this.tweenTo(e, n); return i.isFromTo = 1, i.duration(l(i.vars.time - t) / this._timeScale || .001) }, s.render = function (t, n, o) { this._gc && this._enabled(!0, !1); var a, s, c, u, l, h, f, p, d = this._time, m = this._dirty ? this.totalDuration() : this._totalDuration, v = this._duration, g = this._totalTime, y = this._startTime, b = this._timeScale, _ = this._rawPrevTime, x = this._paused, w = this._cycle; if (d !== this._time && (t += this._time - d), t >= m - 1e-7 && 0 <= t) this._locked || (this._totalTime = m, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (s = !0, u = "onComplete", l = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 >= t && -1e-7 <= t || 0 > _ || _ === e) && _ !== t && this._first && (l = !0, _ > e && (u = "onReverseComplete"))), this._rawPrevTime = this._duration || !n || t || this._rawPrevTime === t ? t : e, this._yoyo && 0 != (1 & this._cycle) ? this._time = t = 0 : (this._time = v, t = v + 1e-4); else if (1e-7 > t) if (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== d || 0 === v && _ !== e && (0 < _ || 0 > t && 0 <= _) && !this._locked) && (u = "onReverseComplete", s = this._reversed), 0 > t) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (l = s = !0, u = "onReverseComplete") : 0 <= _ && this._first && (l = !0), this._rawPrevTime = t; else { if (this._rawPrevTime = v || !n || t || this._rawPrevTime === t ? t : e, 0 === t && s) for (a = this._first; a && 0 === a._startTime;)a._duration || (s = !1), a = a._next; t = 0, this._initted || (l = !0) } else if (0 === v && 0 > _ && (l = !0), this._time = this._rawPrevTime = t, this._locked || (this._totalTime = t, 0 !== this._repeat && (h = v + this._repeatDelay, this._cycle = this._totalTime / h >> 0, 0 !== this._cycle && this._cycle === this._totalTime / h && g <= t && this._cycle--, this._time = this._totalTime - this._cycle * h, this._yoyo && 0 != (1 & this._cycle) && (this._time = v - this._time), this._time > v ? (this._time = v, t = v + 1e-4) : 0 > this._time ? this._time = t = 0 : t = this._time)), this._hasPause && !this._forcingPlayhead && !n) { if ((t = this._time) >= d || this._repeat && w !== this._cycle) for (a = this._first; a && a._startTime <= t && !f;)a._duration || "isPause" !== a.data || a.ratio || 0 === a._startTime && 0 === this._rawPrevTime || (f = a), a = a._next; else for (a = this._last; a && a._startTime >= t && !f;)!a._duration && "isPause" === a.data && 0 < a._rawPrevTime && (f = a), a = a._prev; f && f._startTime < v && (this._time = t = f._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay)) } if (this._cycle !== w && !this._locked) { var T = this._yoyo && 0 != (1 & w), S = T === (this._yoyo && 0 != (1 & this._cycle)), M = this._totalTime, P = this._cycle, E = this._rawPrevTime, A = this._time; if (this._totalTime = w * v, this._cycle < w ? T = !T : this._totalTime += v, this._time = d, this._rawPrevTime = 0 === v ? _ - 1e-4 : _, this._cycle = w, this._locked = !0, d = T ? 0 : v, this.render(d, n, 0 === v), n || this._gc || !this.vars.onRepeat || (this._cycle = P, this._locked = !1, this._callback("onRepeat")), d !== this._time) return; if (S && (this._cycle = w, this._locked = !0, d = T ? v + 1e-4 : -1e-4, this.render(d, !0, !1)), this._locked = !1, this._paused && !x) return; this._time = A, this._totalTime = M, this._cycle = P, this._rawPrevTime = E } if (this._time !== d && this._first || o || l || f) { if (this._initted || (this._initted = !0), this._active || this._paused || this._totalTime === g || !(0 < t) || (this._active = !0), 0 !== g || !this.vars.onStart || 0 === this._totalTime && this._totalDuration || n || this._callback("onStart"), (p = this._time) >= d) for (a = this._first; a && (c = a._next, p === this._time && (!this._paused || x));)(a._active || a._startTime <= this._time && !a._paused && !a._gc) && (f === a && this.pause(), a._reversed ? a.render((a._dirty ? a.totalDuration() : a._totalDuration) - (t - a._startTime) * a._timeScale, n, o) : a.render((t - a._startTime) * a._timeScale, n, o)), a = c; else for (a = this._last; a && (c = a._prev, p === this._time && (!this._paused || x));) { if (a._active || a._startTime <= d && !a._paused && !a._gc) { if (f === a) { for (f = a._prev; f && f.endTime() > this._time;)f.render(f._reversed ? f.totalDuration() - (t - f._startTime) * f._timeScale : (t - f._startTime) * f._timeScale, n, o), f = f._prev; f = null, this.pause() } a._reversed ? a.render((a._dirty ? a.totalDuration() : a._totalDuration) - (t - a._startTime) * a._timeScale, n, o) : a.render((t - a._startTime) * a._timeScale, n, o) } a = c } this._onUpdate && !n && (i.length && r(), this._callback("onUpdate")), u && !this._locked && !this._gc && (y === this._startTime || b !== this._timeScale) && (0 === this._time || m >= this.totalDuration()) && (s && (i.length && r(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !n && this.vars[u] && this._callback(u)) } else g !== this._totalTime && this._onUpdate && !n && this._callback("onUpdate") }, s.getActive = function (t, e, n) { null == t && (t = !0), null == e && (e = !0), null == n && (n = !1); var i, r, o = [], a = this.getChildren(t, e, n), s = 0, c = a.length; for (i = 0; i < c; i++)(r = a[i]).isActive() && (o[s++] = r); return o }, s.getLabelAfter = function (t) { t || 0 === t || (t = this._time); var e, n = this.getLabelsArray(), i = n.length; for (e = 0; e < i; e++)if (n[e].time > t) return n[e].name; return null }, s.getLabelBefore = function (t) { null == t && (t = this._time); for (var e = this.getLabelsArray(), n = e.length; -1 < --n;)if (e[n].time < t) return e[n].name; return null }, s.getLabelsArray = function () { var t, e = [], n = 0; for (t in this._labels) e[n++] = { time: this._labels[t], name: t }; return e.sort(function (t, e) { return t.time - e.time }), e }, s.invalidate = function () { return this._locked = !1, x.prototype.invalidate.call(this) }, s.progress = function (t, e) { return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() || 0 }, s.totalProgress = function (t, e) { return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() || 0 }, s.totalDuration = function (t) { return arguments.length ? -1 !== this._repeat && t ? this.timeScale(this.totalDuration() / t) : this : (this._dirty && (x.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration) }, s.time = function (t, e) { return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time }, s.repeat = function (t) { return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat }, s.repeatDelay = function (t) { return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay }, s.yoyo = function (t) { return arguments.length ? (this._yoyo = t, this) : this._yoyo }, s.currentLabel = function (t) { return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8) }, t }, !0); const w = f.k.TimelineMax; var T = [], S = [], M = [], P = {}, E = f.k._gsDefine.globals, A = function (t, e, n, i) { n === i && (n = i - (i - e) / 1e6), t === e && (e = t + (n - t) / 1e6), this.a = t, this.b = e, this.c = n, this.d = i, this.da = i - t, this.ca = n - t, this.ba = e - t }, C = function (t, e, n, i) { var r = { a: t }, o = {}, a = {}, s = { c: i }, c = (t + e) / 2, u = (e + n) / 2, l = (n + i) / 2, h = (c + u) / 2, f = (u + l) / 2, p = (f - h) / 8; return r.b = c + (t - c) / 4, o.b = h + p, r.c = o.a = (r.b + o.b) / 2, o.c = a.a = (h + f) / 2, a.b = f - p, s.b = l + (i - l) / 4, a.c = s.a = (a.b + s.b) / 2, [r, o, a, s] }, L = function (t, e, n, i, r) { var o, a, s, c, u, l, h, f, p, d, m, v, g, y = t.length - 1, b = 0, _ = t[0].a; for (o = 0; o < y; o++)a = (u = t[b]).a, s = u.d, c = t[b + 1].d, r ? (m = T[o], g = ((v = S[o]) + m) * e * .25 / (i ? .5 : M[o] || .5), f = s - ((l = s - (s - a) * (i ? .5 * e : 0 === m ? 0 : g / m)) + (((h = s + (c - s) * (i ? .5 * e : 0 === v ? 0 : g / v)) - l) * (3 * m / (m + v) + .5) / 4 || 0))) : f = s - ((l = s - (s - a) * e * .5) + (h = s + (c - s) * e * .5)) / 2, l += f, h += f, u.c = p = l, u.b = 0 === o ? _ = u.a + .6 * (u.c - u.a) : _, u.da = s - a, u.ca = p - a, u.ba = _ - a, n ? (d = C(a, _, p, s), t.splice(b, 1, d[0], d[1], d[2], d[3]), b += 4) : b++, _ = h; (u = t[b]).b = _, u.c = _ + .4 * (u.d - _), u.da = u.d - u.a, u.ca = u.c - u.a, u.ba = _ - u.a, n && (d = C(u.a, _, u.c, u.d), t.splice(b, 1, d[0], d[1], d[2], d[3])) }, R = function (t, e, n, i) { var r, o, a, s, c, u, l = []; if (i) for (o = (t = [i].concat(t)).length; -1 < --o;)"string" == typeof (u = t[o][e]) && "=" === u.charAt(1) && (t[o][e] = i[e] + +(u.charAt(0) + u.substr(2))); if (0 > (r = t.length - 2)) return l[0] = new A(t[0][e], 0, 0, t[0][e]), l; for (o = 0; o < r; o++)a = t[o][e], s = t[o + 1][e], l[o] = new A(a, 0, 0, s), n && (c = t[o + 2][e], T[o] = (T[o] || 0) + (s - a) * (s - a), S[o] = (S[o] || 0) + (c - s) * (c - s)); return l[o] = new A(t[o][e], 0, 0, t[o + 1][e]), l }, O = function (t, e, n, i, r, a) { var s, c, u, h, f, p, d, m, v = {}, g = [], y = a || t[0]; for (c in r = "string" == typeof r ? "," + r + "," : ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,", null == e && (e = 1), t[0]) g.push(c); if (1 < t.length) { for (m = t[t.length - 1], d = !0, s = g.length; -1 < --s;)if (c = g[s], .05 < l(y[c] - m[c])) { d = !1; break } d && (t = t.concat(), a && t.unshift(a), t.push(t[1]), a = t[t.length - 3]) } for (T.length = S.length = M.length = 0, s = g.length; -1 < --s;)c = g[s], P[c] = -1 !== r.indexOf("," + c + ","), v[c] = R(t, c, P[c], a); for (s = T.length; -1 < --s;)T[s] = o(T[s]), S[s] = o(S[s]); if (!i) { for (s = g.length; -1 < --s;)if (P[c]) for (p = (u = v[g[s]]).length - 1, h = 0; h < p; h++)f = u[h + 1].da / S[h] + u[h].da / T[h] || 0, M[h] = (M[h] || 0) + f * f; for (s = M.length; -1 < --s;)M[s] = o(M[s]) } for (s = g.length, h = n ? 4 : 1; -1 < --s;)u = v[c = g[s]], L(u, e, n, i, P[c]), d && (u.splice(0, h), u.splice(u.length - h, h)); return v }, I = function (t, e, n) { for (var i, r, o, a, s, c, u, l, h, f, p, d = t.length; -1 < --d;)for (o = (f = t[d]).a, a = f.d - o, s = f.c - o, c = f.b - o, i = r = 0, l = 1; l <= n; l++)i = r - (r = ((u = 1 / n * l) * u * a + 3 * (h = 1 - u) * (u * s + h * c)) * u), e[p = d * n + l - 1] = (e[p] || 0) + i * i }, D = function (t, e) { var n, i, r, a, s = [], c = [], u = 0, l = 0, h = (e = e >> 0 || 6) - 1, f = [], p = []; for (n in t) I(t[n], s, e); for (r = s.length, i = 0; i < r; i++)u += o(s[i]), p[a = i % e] = u, a === h && (l += u, f[a = i / e >> 0] = p, c[a] = l, u = 0, p = []); return { length: l, lengths: c, segments: f } }, G = f.k._gsDefine.plugin({ propName: "bezier", priority: -1, version: "1.3.8", API: 2, global: !0, init: function (t, e, n) { this._target = t, e instanceof Array && (e = { values: e }), this._func = {}, this._mod = {}, this._props = [], this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10); var i, r, o, a, s, c = e.values || [], u = {}, l = c[0], h = e.autoRotate || n.vars.orientToBezier; for (i in this._autoRotate = h ? h instanceof Array ? h : [["x", "y", "rotation", !0 === h ? 0 : +h || 0]] : null, l) this._props.push(i); for (o = this._props.length; -1 < --o;)i = this._props[o], this._overwriteProps.push(i), r = this._func[i] = "function" == typeof t[i], u[i] = r ? t[i.indexOf("set") || "function" != typeof t["get" + i.substr(3)] ? i : "get" + i.substr(3)]() : parseFloat(t[i]), s || u[i] === c[0][i] || (s = u); if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? O(c, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, s) : function (t, e, n) { var i, r, o, a, s, c, u, l, h, f, p, d = {}, m = "cubic" === (e = e || "soft") ? 3 : 2, v = "soft" === e, g = []; if (v && n && (t = [n].concat(t)), null == t || t.length < m + 1) throw "invalid Bezier data"; for (h in t[0]) g.push(h); for (c = g.length; -1 < --c;) { for (d[h = g[c]] = s = [], f = 0, l = t.length, u = 0; u < l; u++)i = null == n ? t[u][h] : "string" == typeof (p = t[u][h]) && "=" === p.charAt(1) ? n[h] + +(p.charAt(0) + p.substr(2)) : +p, v && 1 < u && u < l - 1 && (s[f++] = (i + s[f - 2]) / 2), s[f++] = i; for (l = f - m + 1, f = 0, u = 0; u < l; u += m)i = s[u], r = s[u + 1], o = s[u + 2], a = 2 == m ? 0 : s[u + 3], s[f++] = p = 3 == m ? new A(i, r, o, a) : new A(i, (2 * r + i) / 3, (2 * r + o) / 3, o); s.length = f } return d }(c, e.type, u), this._segCount = this._beziers[i].length, this._timeRes) { var f = D(this._beziers, this._timeRes); this._length = f.length, this._lengths = f.lengths, this._segments = f.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length } if (h = this._autoRotate) for (this._initialRotations = [], h[0] instanceof Array || (this._autoRotate = h = [h]), o = h.length; -1 < --o;) { for (a = 0; 3 > a; a++)i = h[o][a], this._func[i] = "function" == typeof t[i] && t[i.indexOf("set") || "function" != typeof t["get" + i.substr(3)] ? i : "get" + i.substr(3)]; i = h[o][2], this._initialRotations[o] = (this._func[i] ? this._func[i].call(this._target) : this._target[i]) || 0, this._overwriteProps.push(i) } return this._startRatio = n.vars.runBackwards ? 1 : 0, !0 }, set: function (t) { var e, n, i, r, o, s, c, l, h, f, p = this._segCount, d = this._func, m = this._target, v = t !== this._startRatio; if (this._timeRes) { if (h = this._lengths, f = this._curSeg, t *= this._length, i = this._li, t > this._l2 && i < p - 1) { for (l = p - 1; i < l && (this._l2 = h[++i]) <= t;); this._l1 = h[i - 1], this._li = i, this._curSeg = f = this._segments[i], this._s2 = f[this._s1 = this._si = 0] } else if (t < this._l1 && 0 < i) { for (; 0 < i && (this._l1 = h[--i]) >= t;); 0 === i && t < this._l1 ? this._l1 = 0 : i++, this._l2 = h[i], this._li = i, this._curSeg = f = this._segments[i], this._s1 = f[(this._si = f.length - 1) - 1] || 0, this._s2 = f[this._si] } if (e = i, t -= this._l1, i = this._si, t > this._s2 && i < f.length - 1) { for (l = f.length - 1; i < l && (this._s2 = f[++i]) <= t;); this._s1 = f[i - 1], this._si = i } else if (t < this._s1 && 0 < i) { for (; 0 < i && (this._s1 = f[--i]) >= t;); 0 === i && t < this._s1 ? this._s1 = 0 : i++, this._s2 = f[i], this._si = i } s = (i + (t - this._s1) / (this._s2 - this._s1)) * this._prec || 0 } else s = (t - (e = 0 > t ? 0 : 1 <= t ? p - 1 : p * t >> 0) * (1 / p)) * p; for (n = 1 - s, i = this._props.length; -1 < --i;)r = this._props[i], c = (s * s * (o = this._beziers[r][e]).da + 3 * n * (s * o.ca + n * o.ba)) * s + o.a, this._mod[r] && (c = this._mod[r](c, m)), d[r] ? m[r](c) : m[r] = c; if (this._autoRotate) { var g, y, b, _, x, w, T, S = this._autoRotate; for (i = S.length; -1 < --i;)r = S[i][2], w = S[i][3] || 0, T = !0 === S[i][4] ? 1 : 180 / a, o = this._beziers[S[i][0]], g = this._beziers[S[i][1]], o && g && (o = o[e], g = g[e], y = o.a + (o.b - o.a) * s, y += ((_ = o.b + (o.c - o.b) * s) - y) * s, _ += (o.c + (o.d - o.c) * s - _) * s, b = g.a + (g.b - g.a) * s, b += ((x = g.b + (g.c - g.b) * s) - b) * s, x += (g.c + (g.d - g.c) * s - x) * s, c = v ? u(x - b, _ - y) * T + w : this._initialRotations[i], this._mod[r] && (c = this._mod[r](c, m)), d[r] ? m[r](c) : m[r] = c) } } }), B = G.prototype; G.bezierThrough = O, G.cubicToQuadratic = C, G._autoCSS = !0, G.quadraticToCubic = function (t, e, n) { return new A(t, (2 * e + t) / 3, (2 * e + n) / 3, n) }, G._cssRegister = function () { var t = E.CSSPlugin; if (t) { var e = t._internals, n = e._parseToProxy, i = e._setPluginRatio, r = e.CSSPropTween; e._registerComplexSpecialProp("bezier", { parser: function (t, e, o, a, s, c) { e instanceof Array && (e = { values: e }), c = new G; var u, l, h, f = e.values, p = f.length - 1, d = [], m = {}; if (0 > p) return s; for (u = 0; u <= p; u++)h = n(t, f[u], a, s, c, p !== u), d[u] = h.end; for (l in e) m[l] = e[l]; return m.values = d, (s = new r(t, "bezier", 0, 0, h.pt, 2)).data = h, s.plugin = c, s.setRatio = i, 0 === m.autoRotate && (m.autoRotate = !0), m.autoRotate && !(m.autoRotate instanceof Array) && (u = !0 === m.autoRotate ? 0 : +m.autoRotate, m.autoRotate = null == h.end.left ? null != h.end.x && [["x", "y", "rotation", u, !1]] : [["left", "top", "rotation", u, !1]]), m.autoRotate && (!a._transform && a._enableTransforms(!1), h.autoRotate = a._target._gsTransform, h.proxy.rotation = h.autoRotate.rotation || 0, a._overwriteProps.push("rotation")), c._onInitTween(h.proxy, m, a._tween), s } }) } }, B._mod = function (t) { for (var e, n = this._overwriteProps, i = n.length; -1 < --i;)(e = t[n[i]]) && "function" == typeof e && (this._mod[n[i]] = e) }, B._kill = function (t) { var e, n, i = this._props; for (e in this._beziers) if (e in t) for (delete this._beziers[e], delete this._func[e], n = i.length; -1 < --n;)i[n] === e && i.splice(n, 1); if (i = this._autoRotate) for (n = i.length; -1 < --n;)t[i[n][2]] && i.splice(n, 1); return this._super._kill.call(this, t) }, f.k._gsDefine("easing.Back", ["easing.Ease"], function () { var t, e, n, i, u = f.k.GreenSockGlobals || f.k, l = u.com.greensock, h = 2 * a, p = a / 2, d = l._class, m = function (t, e) { var n = d("easing." + t, function () { }, !0), i = n.prototype = new f.b; return i.constructor = n, i.getRatio = e, n }, v = f.b.register || function () { }, g = function (t, e, n, i) { var r = d("easing." + t, { easeOut: new e, easeIn: new n, easeInOut: new i }, !0); return v(r, t), r }, y = function (t, e, n) { this.t = t, this.v = e, n && (this.next = n, n.prev = this, this.c = n.v - e, this.gap = n.t - t) }, b = function (t, e) { var n = d("easing." + t, function (t) { this._p1 = t || 0 === t ? t : 1.70158, this._p2 = 1.525 * this._p1 }, !0), i = n.prototype = new f.b; return i.constructor = n, i.getRatio = e, i.config = function (t) { return new n(t) }, n }, _ = g("Back", b("BackOut", function (t) { return --t * t * ((this._p1 + 1) * t + this._p1) + 1 }), b("BackIn", function (t) { return t * t * ((this._p1 + 1) * t - this._p1) }), b("BackInOut", function (t) { return 1 > (t *= 2) ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2) })), x = d("easing.SlowMo", function (t, e, n) { e = e || 0 === e ? e : .7, null == t ? t = .7 : 1 < t && (t = 1), this._p = 1 === t ? 0 : e, this._p1 = (1 - t) / 2, this._p2 = t, this._p3 = this._p1 + this._p2, this._calcEnd = !0 === n }, !0), w = x.prototype = new f.b; return w.constructor = x, w.getRatio = function (t) { var e = t + (.5 - t) * this._p; return t < this._p1 ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 === t ? 0 : 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e }, x.ease = new x(.7, .7), w.config = x.config = function (t, e, n) { return new x(t, e, n) }, (w = (t = d("easing.SteppedEase", function (t, e) { t = t || 1, this._p1 = 1 / t, this._p2 = t + (e ? 0 : 1), this._p3 = e ? 1 : 0 }, !0)).prototype = new f.b).constructor = t, w.getRatio = function (t) { return 0 > t ? t = 0 : 1 <= t && (t = .999999999), ((0 | this._p2 * t) + this._p3) * this._p1 }, w.config = t.config = function (e, n) { return new t(e, n) }, (w = (e = d("easing.ExpoScaleEase", function (t, e, n) { this._p1 = Math.log(e / t), this._p2 = e - t, this._p3 = t, this._ease = n }, !0)).prototype = new f.b).constructor = e, w.getRatio = function (t) { return this._ease && (t = this._ease.getRatio(t)), (this._p3 * Math.exp(this._p1 * t) - this._p3) / this._p2 }, w.config = e.config = function (t, n, i) { return new e(t, n, i) }, n = d("easing.RoughEase", function (t) { for (var e, n, i, r, o, a, s = (t = t || {}).taper || "none", c = [], u = 0, l = 0 | (t.points || 20), h = l, p = !1 !== t.randomize, d = !0 === t.clamp, m = t.template instanceof f.b ? t.template : null, v = "number" == typeof t.strength ? .4 * t.strength : .4; -1 < --h;)e = p ? Math.random() : 1 / l * h, n = m ? m.getRatio(e) : e, "none" === s ? i = v : "out" === s ? i = (r = 1 - e) * r * v : "in" === s ? i = e * e * v : .5 > e ? i = (r = 2 * e) * r * .5 * v : i = (r = 2 * (1 - e)) * r * .5 * v, p ? n += Math.random() * i - .5 * i : h % 2 ? n += .5 * i : n -= .5 * i, d && (1 < n ? n = 1 : 0 > n && (n = 0)), c[u++] = { x: e, y: n }; for (c.sort(function (t, e) { return t.x - e.x }), a = new y(1, 1, null), h = l; -1 < --h;)o = c[h], a = new y(o.x, o.y, a); this._prev = new y(0, 0, 0 === a.t ? a.next : a) }, !0), (w = n.prototype = new f.b).constructor = n, w.getRatio = function (t) { var e = this._prev; if (t > e.t) { for (; e.next && t >= e.t;)e = e.next; e = e.prev } else for (; e.prev && t <= e.t;)e = e.prev; return this._prev = e, e.v + (t - e.t) / e.gap * e.c }, w.config = function (t) { return new n(t) }, n.ease = new n, g("Bounce", m("BounceOut", function (t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }), m("BounceIn", function (t) { return (t = 1 - t) < 1 / 2.75 ? 1 - 7.5625 * t * t : t < 2 / 2.75 ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : t < 2.5 / 2.75 ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375) }), m("BounceInOut", function (t) { var e = .5 > t; return t = (t = e ? 1 - 2 * t : 2 * t - 1) < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375, e ? .5 * (1 - t) : .5 * t + .5 })), g("Circ", m("CircOut", function (t) { return o(1 - --t * t) }), m("CircIn", function (t) { return -(o(1 - t * t) - 1) }), m("CircInOut", function (t) { return 1 > (t *= 2) ? -.5 * (o(1 - t * t) - 1) : .5 * (o(1 - (t -= 2) * t) + 1) })), g("Elastic", (i = function (t, e, n) { var i = d("easing." + t, function (t, e) { this._p1 = 1 <= t ? t : 1, this._p2 = (e || n) / (1 > t ? t : 1), this._p3 = this._p2 / h * (Math.asin(1 / this._p1) || 0), this._p2 = h / this._p2 }, !0), r = i.prototype = new f.b; return r.constructor = i, r.getRatio = e, r.config = function (t, e) { return new i(t, e) }, i })("ElasticOut", function (t) { return this._p1 * r(2, -10 * t) * s((t - this._p3) * this._p2) + 1 }, .3), i("ElasticIn", function (t) { return -this._p1 * r(2, 10 * (t -= 1)) * s((t - this._p3) * this._p2) }, .3), i("ElasticInOut", function (t) { return 1 > (t *= 2) ? this._p1 * r(2, 10 * (t -= 1)) * s((t - this._p3) * this._p2) * -.5 : this._p1 * r(2, -10 * (t -= 1)) * s((t - this._p3) * this._p2) * .5 + 1 }, .45)), g("Expo", m("ExpoOut", function (t) { return 1 - r(2, -10 * t) }), m("ExpoIn", function (t) { return r(2, 10 * (t - 1)) - .001 }), m("ExpoInOut", function (t) { return 1 > (t *= 2) ? .5 * r(2, 10 * (t - 1)) : .5 * (2 - r(2, -10 * (t - 1))) })), g("Sine", m("SineOut", function (t) { return s(t * p) }), m("SineIn", function (t) { return 1 - c(t * p) }), m("SineInOut", function (t) { return -.5 * (c(a * t) - 1) })), d("easing.EaseLookup", { find: function (t) { return f.b.map[t] } }, !0), v(u.SlowMo, "SlowMo", "ease,"), v(n, "RoughEase", "ease,"), v(t, "SteppedEase", "ease,"), _ }, !0); const k = f.k.Back, N = f.k.Elastic, H = f.k.Bounce, F = f.k.RoughEase, U = f.k.SlowMo, z = f.k.SteppedEase, j = f.k.Circ, V = f.k.Expo, W = f.k.Sine, X = f.k.ExpoScaleEase; n.d(e, "TweenMax", function () { return q }), n.d(e, "default", function () { return q }), n.d(e, "TweenLite", function () { return f.l }), n.d(e, "TimelineLite", function () { return x }), n.d(e, "TimelineMax", function () { return w }), n.d(e, "CSSPlugin", function () { return d }), n.d(e, "AttrPlugin", function () { return m }), n.d(e, "BezierPlugin", function () { return G }), n.d(e, "DirectionalRotationPlugin", function () { return _ }), n.d(e, "RoundPropsPlugin", function () { return v }), n.d(e, "TweenPlugin", function () { return f.j }), n.d(e, "Ease", function () { return f.b }), n.d(e, "Power0", function () { return f.d }), n.d(e, "Power1", function () { return f.e }), n.d(e, "Power2", function () { return f.f }), n.d(e, "Power3", function () { return f.g }), n.d(e, "Power4", function () { return f.h }), n.d(e, "Linear", function () { return f.c }), n.d(e, "Back", function () { return k }), n.d(e, "Elastic", function () { return N }), n.d(e, "Bounce", function () { return H }), n.d(e, "RoughEase", function () { return F }), n.d(e, "SlowMo", function () { return U }), n.d(e, "SteppedEase", function () { return z }), n.d(e, "Circ", function () { return j }), n.d(e, "Expo", function () { return V }), n.d(e, "Sine", function () { return W }), n.d(e, "ExpoScaleEase", function () { return X }); const q = p; q._autoActivated = [x, w, d, m, G, v, _, k, N, H, F, U, z, j, V, W, X] }]);